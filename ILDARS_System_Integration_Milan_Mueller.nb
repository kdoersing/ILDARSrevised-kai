(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    860677,      19645]
NotebookOptionsPosition[    838396,      19296]
NotebookOutlinePosition[    838890,      19314]
CellTagsIndexPosition[    838847,      19311]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["\<\
Implementation, Integration and Evaluation of the ILDARS System (Indoor \
Localisation based on Directed and Reflected Signals)\
\>", "Title",
 CellChangeTimes->{
  3.863062435826535*^9},ExpressionUUID->"77987cb0-dba3-4ae3-8afa-\
0a035336c879"],

Cell["\<\
This notebook contains all simulated experiments created for the Bachelor\
\[CloseCurlyQuote]s Thesis \[OpenCurlyDoubleQuote]Implementation, Integration \
and Evaluation of the ILDARS System (Indoor Localisation based on Directed \
and Reflected Signals)\[CloseCurlyDoubleQuote] by Milan M\[UDoubleDot]ller.\
\[LineSeparator]\[LineSeparator]To run simulations, first evaluate the entire \
notebook.\
\>", "Text",
 CellChangeTimes->{{3.8630624417726192`*^9, 3.863062476694337*^9}, {
  3.8733492351710167`*^9, 
  3.873349256347245*^9}},ExpressionUUID->"16321ca0-d146-4955-9b37-\
7d6d7d8beaf4"],

Cell[CellGroupData[{

Cell["Test Rooms", "Section",
 CellChangeTimes->{{3.863062499826919*^9, 
  3.863062501466319*^9}},ExpressionUUID->"61ee57f8-0b68-4a7d-8095-\
890b097b0af0"],

Cell["\<\
In this Section, test rooms are imported that are then used in experiments. \
Test rooms are imported from the .obj format. In this context, a room defined \
as a collection of triangles.\
\>", "Text",
 CellChangeTimes->{{3.863062507382792*^9, 
  3.863062550109182*^9}},ExpressionUUID->"484287ab-7d7b-4d48-bf7d-\
716b2233bc77"],

Cell[BoxData[
 RowBox[{
  RowBox[{"GetTrianglesAndWallsFromOBJ", "[", "file_", "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"vertices", ",", "polygons", ",", "normals", ",", "walls"}], 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"vertices", "=", 
      RowBox[{"Import", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"NotebookDirectory", "[", "]"}], "<>", "file"}], ",", 
        "\"\<VertexData\>\""}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"polygons", "=", 
      RowBox[{"Import", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"NotebookDirectory", "[", "]"}], "<>", "file"}], ",", 
        "\"\<PolygonData\>\""}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"polygons", "=", 
      RowBox[{"Select", "[", 
       RowBox[{"polygons", ",", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", "#", "]"}], "==", "3"}], "&"}]}], "]"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"polygons", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"vertices", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"polygons", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
          RowBox[{"vertices", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"polygons", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}], "]"}], "]"}], ",", 
          RowBox[{"vertices", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"polygons", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "3", "]"}], "]"}], "]"}], "]"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", 
          RowBox[{"Length", "[", "polygons", "]"}]}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"normals", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"Normalize", "[", 
         RowBox[{"Cross", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"polygons", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}], "-", 
            RowBox[{
             RowBox[{"polygons", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], ",", 
           RowBox[{
            RowBox[{
             RowBox[{"polygons", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "3", "]"}], "]"}], "-", 
            RowBox[{
             RowBox[{"polygons", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}]}]}], "]"}], "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", 
          RowBox[{"Length", "[", "polygons", "]"}]}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "No", " ", "find", " ", "groups", " ", "of", " ", "polygons", " ", 
       "that", " ", "belong", " ", "to", " ", "the", " ", "same", " ", 
       "wall"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"walls", "=", 
      RowBox[{"DeleteDuplicates", "[", 
       RowBox[{"Table", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Select", "[", 
          RowBox[{
           RowBox[{"Range", "[", 
            RowBox[{"Length", "[", "normals", "]"}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"Abs", "[", 
               RowBox[{
                RowBox[{"normals", "[", 
                 RowBox[{"[", "#", "]"}], "]"}], ".", 
                RowBox[{"normals", "[", 
                 RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ">", 
              RowBox[{"Cos", "[", 
               RowBox[{"1", "Degree"}], "]"}]}], "\[And]", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Abs", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"Total", "[", 
                    RowBox[{"polygons", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], "]"}], "/", 
                   RowBox[{"Length", "[", 
                    RowBox[{"polygons", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], "]"}]}], ")"}], ".", 
                 RowBox[{"normals", "[", 
                  RowBox[{"[", "i", "]"}], "]"}]}], "-", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"Total", "[", 
                    RowBox[{"polygons", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], "]"}], "/", 
                   RowBox[{"Length", "[", 
                    RowBox[{"polygons", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], "]"}]}], ")"}], ".", 
                 RowBox[{"normals", "[", 
                  RowBox[{"[", "i", "]"}], "]"}]}]}], "]"}], "<", 
              RowBox[{"Sin", "[", 
               RowBox[{"1", " ", "Degree"}], "]"}]}]}], "&"}]}], 
          "\[IndentingNewLine]", "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"Length", "[", "normals", "]"}]}], "}"}]}], "]"}], "]"}]}],
      ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"polygons", ",", "walls", ",", 
       RowBox[{"DeleteDuplicates", "[", "normals", "]"}]}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{
  3.863062560380096*^9, {3.8658441697416897`*^9, 3.865844204985227*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"151023be-6c44-4828-9fce-5723848674c0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"import", " ", "test", " ", "rooms"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"cubeRoomData", "=", 
     RowBox[{
     "GetTrianglesAndWallsFromOBJ", "[", "\"\<testrooms/cube.obj\>\"", 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"cubeRoom", "=", 
     RowBox[{"cubeRoomData", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"cubeRoomData", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"1", ",", "1", ",", "1"}], "}"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"cubeRoomData", ",", "\"\<Cube\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"hdnRoomData", "=", 
     RowBox[{
     "GetTrianglesAndWallsFromOBJ", "[", 
      "\"\<testrooms/haus_des_nikolaus.obj\>\"", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"hdnRoom", "=", 
     RowBox[{"hdnRoomData", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"hdnRoomData", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"1", ",", "1", ",", "1"}], "}"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"hdnRoomData", ",", "\"\<Haus des Nikolaus\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"tvRoomData", "=", 
     RowBox[{
     "GetTrianglesAndWallsFromOBJ", "[", "\"\<testrooms/small_wall.obj\>\"", 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"tvRoom", "=", 
     RowBox[{"tvRoomData", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"tvRoomData", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"1", ",", "1", ",", "1"}], "}"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"tvRoomData", ",", "\"\<Television\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"complexRoomData", "=", 
     RowBox[{
     "GetTrianglesAndWallsFromOBJ", "[", 
      "\"\<testrooms/complex_house.obj\>\"", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"complexRoom", "=", 
     RowBox[{"complexRoomData", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"complexRoomData", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"1", ",", "1", ",", "0.5"}], "}"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"complexRoomData", ",", "\"\<Complex Room\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"bigCubeRoomData", "=", 
     RowBox[{
     "GetTrianglesAndWallsFromOBJ", "[", "\"\<testrooms/big_cube.obj\>\"", 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"bigCubeRoom", "=", 
     RowBox[{"bigCubeRoomData", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"bigCubeRoomData", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "10"}], ",", 
          RowBox[{"-", "10"}], ",", 
          RowBox[{"-", "10"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"10", ",", "10", ",", "10"}], "}"}]}], "}"}]}], "]"}], ";"}],
    "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"bigCubeRoomData", ",", "\"\<Big Cube\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"corridorRoomData", "=", 
     RowBox[{
     "GetTrianglesAndWallsFromOBJ", "[", "\"\<testrooms/corridor.obj\>\"", 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"corridorRoom", "=", 
     RowBox[{"corridorRoomData", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"corridorRoomData", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "5"}], ",", 
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"5", ",", "1", ",", "1"}], "}"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"corridorRoomData", ",", "\"\<Corridor\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"slopeRoomData", "=", 
     RowBox[{
     "GetTrianglesAndWallsFromOBJ", "[", "\"\<testrooms/slope.obj\>\"", 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"slopeRoom", "=", 
     RowBox[{"slopeRoomData", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"slopeRoomData", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}], ",", 
          RowBox[{"-", "1"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"1", ",", "1", ",", "1"}], "}"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"slopeRoomData", ",", "\"\<Slope\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"windowRoomData", "=", 
     RowBox[{
     "GetTrianglesAndWallsFromOBJ", "[", "\"\<testrooms/window.obj\>\"", 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"windowRoom", "=", 
     RowBox[{"windowRoomData", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"windowRoomData", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "2"}], ",", 
          RowBox[{"-", "0.7"}], ",", 
          RowBox[{"-", "0.7"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"2", ",", "0.7", ",", "0.7"}], "}"}]}], "}"}]}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AppendTo", "[", 
     RowBox[{"windowRoomData", ",", "\"\<Window\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"visualise", " ", "all", " ", "test", " ", "rooms"}], " ", "*)"}],
    "\[IndentingNewLine]", 
   RowBox[{"GraphicsRow", "[", 
    RowBox[{
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Graphics3D", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
          RowBox[{"Triangle", "/@", "cubeRoom"}]}], "}"}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Graphics3D", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
          RowBox[{"Triangle", "/@", "hdnRoom"}]}], "}"}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Graphics3D", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
          RowBox[{"Triangle", "/@", "tvRoom"}]}], "}"}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Graphics3D", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
          RowBox[{"Triangle", "/@", "complexRoom"}]}], "}"}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Graphics3D", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
          RowBox[{"Triangle", "/@", "bigCubeRoom"}]}], "}"}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Graphics3D", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
          RowBox[{"Triangle", "/@", "corridorRoom"}]}], "}"}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Graphics3D", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
          RowBox[{"Triangle", "/@", "windowRoom"}]}], "}"}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Graphics3D", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
          RowBox[{"Triangle", "/@", "slopeRoom"}]}], "}"}], "]"}]}], 
      "\[IndentingNewLine]", "}"}], ",", 
     RowBox[{"ImageSize", "\[Rule]", "Full"}]}], "]"}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQA2IQveOeJp/piTeObLYbdUD07/THBiB66alEExBtp5Yh
bwOkv69NVQfRfJP+WzWffePYsmGPPYgOVj7+/8DVN44fBWOYDwJpPktPDhDt
1WvEA6IrXwYLgOjYgBRhEO3wfZsSiG48m6IGopPkZ7qA6H22sR4guq4ppAFE
82qGTwPREnaSs0F0Lq/fZhB9LvDVARBt90vuIIieK5h4FESbLeo5BqKLmRqs
DwHpZ9E7wPSqG80RILrrR2MiiJ4Vp1QBoqft+QWmzyXOLT0MpN988S0H0fOu
Tp1+BEg/Dpo5A0RndfTyvQbSNV1l/CD67Jn2sInX3jj+uDgXTCv8Ohg3CUhL
RK+IB9E+2gqfpgDpBk5lMA0AVmfICQ==
  "],
 CellLabel->"In[2]:=",ExpressionUUID->"8acfde4e-5743-4c6a-82d1-5b483a0a5f24"],

Cell[BoxData[
 GraphicsBox[{{}, {InsetBox[
     Graphics3DBox[
      {Opacity[0.5], 
       TagBox[Polygon3DBox[{{1., -1., -1.}, {-1., -1., -1.}, {-1., 1., -1.}}],
        
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., -1.}, {-1., 1., -1.}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.9999989867210388, -1., 1.}, {1., 1., 1.}, {-1., 1., 
         1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.9999989867210388, -1., 1.}, {-1., 1., 
         1.}, {-1.0000009536743164`, -0.9999989867210388, 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., -1.}, {0.9999989867210388, -1., 
         1.}, {-1.0000009536743164`, -0.9999989867210388, 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{
         1., -1., -1.}, {-1.0000009536743164`, -0.9999989867210388, 
         1.}, {-1., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., -1.}, {-1.0000009536743164`, \
-0.9999989867210388, 1.}, {-1., 1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., -1.}, {-1., 1., 1.}, {-1., 1., -1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., -1.}, {-1., 1., 1.}, {1., 1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., -1.}, {1., 1., 1.}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.9999989867210388, -1., 1.}, {1., -1., -1.}, {1., 
         1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.9999989867210388, -1., 1.}, {1., 1., -1.}, {1., 1., 
         1.}}],
        "Triangle"]}], {195.26666666666665, -226.8}, 
     ImageScaled[{0.5, 0.5}], {360, 432},
     ContentSelectable->True], InsetBox[
     Graphics3DBox[
      {Opacity[0.5], 
       TagBox[Polygon3DBox[{{1., -1., -1.}, {-1., -1., -1.}, {-1., 1., -1.}}],
        
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., -1.}, {-1., 1., -1.}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., 0.}, {1., 0., 1.}, {-1., 
         9.999999974752427*^-7, 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., 0.}, {-1., 9.999999974752427*^-7, 
         1.}, {-1., -1., 0.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., 0.}, {-1., 9.999999974752427*^-7, 1.}, {1., 
         0., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., 0.}, {1., 0., 1.}, {1., 1., 0.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., 0.}, {1., -1., -1.}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., 0.}, {1., 1., -1.}, {1., 1., 0.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., -1.}, {1., -1., 0.}, {-1., -1., 0.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., -1.}, {-1., -1., 0.}, {-1., -1., -1.}}],
        
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., -1.}, {-1., -1., 0.}, {-1., 1., 0.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., -1.}, {-1., 1., 0.}, {-1., 1., -1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., -1.}, {-1., 1., 0.}, {1., 1., 0.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., -1.}, {1., 1., 0.}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., 0.}, {-1., 9.999999974752427*^-7, 1.}, {-1., 
         1., 0.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., 0., 1.}, {1., -1., 0.}, {1., 1., 0.}}],
        "Triangle"]}], {585.8, -226.8}, ImageScaled[{0.5, 0.5}], {360, 432},
     ContentSelectable->True], InsetBox[
     Graphics3DBox[
      {Opacity[0.5], 
       TagBox[Polygon3DBox[{{1., -1., -1.}, {-1., -1., -1.}, {-1., 1., -1.}}],
        
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., -1.}, {-1., 1., -1.}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.9999989867210388, -1., 1.}, {1., 1., 1.}, {-1., 1., 
         1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.9999989867210388, -1., 1.}, {-1., 1., 
         1.}, {-1.0000009536743164`, -0.9999989867210388, 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., -1.}, {0.9999989867210388, -1., 
         1.}, {-1.0000009536743164`, -0.9999989867210388, 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{
         1., -1., -1.}, {-1.0000009536743164`, -0.9999989867210388, 
         1.}, {-1., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., -1.}, {-1.0000009536743164`, \
-0.9999989867210388, 1.}, {-1., 1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., -1.}, {-1., 1., 1.}, {-1., 1., -1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., -1.}, {-1., 1., 1.}, {1., 1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., -1.}, {1., 1., 1.}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.9999989867210388, -1., 1.}, {1., -1., -1.}, {1., 
         1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.9999989867210388, -1., 1.}, {1., 1., -1.}, {1., 1., 
         1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.35355401039123535`, -0.7778170108795166, \
-0.30000001192092896`}, {-0.35355401039123535`, -0.7778170108795166, 
         0.30000001192092896`}, {-0.7778180241584778, -0.35355299711227417`, 
         0.30000001192092896`}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.35355401039123535`, -0.7778170108795166, \
-0.30000001192092896`}, {-0.7778180241584778, -0.35355299711227417`, 
         0.30000001192092896`}, {-0.7778180241584778, -0.35355299711227417`, \
-0.30000001192092896`}}],
        "Triangle"]}], {976.3333333333333, -226.8}, ImageScaled[{0.5, 0.5}], {360, 432},
     
     ContentSelectable->True], InsetBox[
     Graphics3DBox[
      {Opacity[0.5], 
       TagBox[
        Polygon3DBox[{{-0.5, -0.5, 1.}, {-0.5, -0.5, -1.}, {-0.5, -1., -1.}}],
        
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.5, -0.5, 1.}, {-0.5, -1., -1.}, {-0.5, -1., 0.5}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., 1., 0.5}, {-1., 1., 0.5}, {1., -0.5, 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., 0.5}, {-0.5, -0.5, 1.}, {1., -0.5, 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., 0.5}, {-1., -0.4999989867210388, 
         1.}, {-0.5, -0.5, 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -0.5, 1.}, {-0.5, -0.5, 1.}, {-0.5, -1., 0.5}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -0.5, 1.}, {-0.5, -1., 0.5}, {1., -1., 0.5}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -0.5, 1.}, {1., -1., 0.5}, {1., -0.5, 0.5}}],
        
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., 0.5}, {-1., 1., -1.}, {-1., -0.5, -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., 
         0.5}, {-1., -0.5, -1.}, {-1., -0.4999989867210388, 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -0.4999989867210388, 
         1.}, {-1., -0.5, -1.}, {-0.5, -0.5, -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -0.4999989867210388, 
         1.}, {-0.5, -0.5, -1.}, {-0.5, -0.5, 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., 1., -1.}, {1., -1., -1.}, {-1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., -1.}, {-0.5, -0.5, -1.}, {-1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., -1.}, {-0.5, -1., -1.}, {-0.5, -0.5, -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.5, -0.5, -1.}, {-1., -0.5, -1.}, {-1., 1., -1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-0.5, -1., -1.}, {1., -1., -1.}, {1., -1., 0.5}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.5, -1., -1.}, {1., -1., 0.5}, {-0.5, -1., 0.5}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -0.5, 1.}, {1., -0.5, 0.5}, {1., 1., 0.5}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.6000000238418579, 0.30000001192092896`, 
         0.30000001192092896`}, {0.6000000238418579, -0.30000001192092896`, 
         0.30000001192092896`}, {
         0.6000000238418579, -0.30000001192092896`, -0.30000001192092896`}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.6000000238418579, 0.30000001192092896`, 
         0.30000001192092896`}, {
         0.6000000238418579, -0.30000001192092896`, -0.30000001192092896`}, {
         0.6000000238418579, 0.30000001192092896`, -0.30000001192092896`}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., 0.5}, {1., -1., -1.}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., 0.5}, {1., 1., -1.}, {1., 1., 0.5}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., 1., -1.}, {-1., 1., -1.}, {-1., 1., 0.5}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., 1., -1.}, {-1., 1., 0.5}, {1., 1., 0.5}}],
        "Triangle"]}], {1366.8666666666666, -226.8}, 
     ImageScaled[{0.5, 0.5}], {360, 432},
     ContentSelectable->True], InsetBox[
     Graphics3DBox[
      {Opacity[0.5], 
       TagBox[
        Polygon3DBox[{{
         10.000001907348633`, -10.000000953674316`, -10.}, \
{-9.999998092651367, -10.000000953674316`, -10.}, {-9.999998092651367, 
         9.999999046325684, -10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{
         10.000001907348633`, -10.000000953674316`, -10.}, \
{-9.999998092651367, 9.999999046325684, -10.}, {10.000001907348633`, 
         9.999999046325684, -10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{9.999992370605469, -10.000000953674316`, 10.}, {
         10.000001907348633`, 9.999999046325684, 10.}, {-9.999998092651367, 
         9.999999046325684, 10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{9.999992370605469, -10.000000953674316`, 
         10.}, {-9.999998092651367, 9.999999046325684, 
         10.}, {-10.000007629394531`, -9.999991416931152, 10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{10.000001907348633`, -10.000000953674316`, -10.}, {
         9.999992370605469, -10.000000953674316`, 10.}, {-10.000007629394531`,
          -9.999991416931152, 10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{
         10.000001907348633`, -10.000000953674316`, -10.}, \
{-10.000007629394531`, -9.999991416931152, 
         10.}, {-9.999998092651367, -10.000000953674316`, -10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-9.999998092651367, -10.000000953674316`, -10.}, \
{-10.000007629394531`, -9.999991416931152, 10.}, {-9.999998092651367, 
         9.999999046325684, 10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-9.999998092651367, -10.000000953674316`, -10.}, \
{-9.999998092651367, 9.999999046325684, 10.}, {-9.999998092651367, 
         9.999999046325684, -10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-9.999998092651367, 
         9.999999046325684, -10.}, {-9.999998092651367, 9.999999046325684, 
         10.}, {10.000001907348633`, 9.999999046325684, 10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-9.999998092651367, 9.999999046325684, -10.}, {
         10.000001907348633`, 9.999999046325684, 10.}, {10.000001907348633`, 
         9.999999046325684, -10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{9.999992370605469, -10.000000953674316`, 10.}, {
         10.000001907348633`, -10.000000953674316`, -10.}, {
         10.000001907348633`, 9.999999046325684, -10.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{9.999992370605469, -10.000000953674316`, 10.}, {
         10.000001907348633`, 9.999999046325684, -10.}, {10.000001907348633`, 
         9.999999046325684, 10.}}],
        "Triangle"]}], {1757.3999999999999, -226.8}, 
     ImageScaled[{0.5, 0.5}], {360, 432},
     ContentSelectable->True], InsetBox[
     Graphics3DBox[
      {Opacity[0.5], 
       TagBox[Polygon3DBox[{{-5., 1., -1.}, {-5., -1., -1.}, {-5., -1., 1.}}],
        
        "Triangle"], 
       TagBox[Polygon3DBox[{{-5., 1., -1.}, {-5., -1., 1.}, {-5., 1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{5., 0.9999989867210388, -1.}, {5., 1., 1.}, {5., -1., 
         1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{5., 0.9999989867210388, -1.}, {5., -1., 1.}, {
         5., -1.0000009536743164`, -0.9999989867210388}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-5., 1., -1.}, {5., 0.9999989867210388, -1.}, {
         5., -1.0000009536743164`, -0.9999989867210388}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-5., 1., -1.}, {
         5., -1.0000009536743164`, -0.9999989867210388}, {-5., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-5., -1., -1.}, {
         5., -1.0000009536743164`, -0.9999989867210388}, {5., -1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-5., -1., -1.}, {5., -1., 1.}, {-5., -1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-5., -1., 1.}, {5., -1., 1.}, {5., 1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-5., -1., 1.}, {5., 1., 1.}, {-5., 1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{5., 0.9999989867210388, -1.}, {-5., 1., -1.}, {-5., 1.,
          1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{5., 0.9999989867210388, -1.}, {-5., 1., 1.}, {5., 1., 
         1.}}],
        "Triangle"]}], {2147.933333333333, -226.8}, ImageScaled[{0.5, 0.5}], {360, 432},
     
     ContentSelectable->True], InsetBox[
     Graphics3DBox[
      {Opacity[0.5], 
       TagBox[
        Polygon3DBox[{{-1., 1., -1.}, {-1., 0.699999988079071, 
         0.699999988079071}, {-1., 1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., -1.}, {-1., 
         0.699999988079071, -0.699999988079071}, {-1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{
         0.3499999940395355, -1., -0.3499999940395355}, {-0.3499999940395355, \
-1.5, -0.3499999940395355}, {-0.3499999940395355, -1., -0.3499999940395355}}],
        
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{
         0.3499999940395355, -1.5, -0.3499999940395355}, \
{-0.3499999940395355, -1.5, 
         0.3499999940395355}, {-0.3499999940395355, -1.5, \
-0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 0.699999988079071, -0.699999988079071}, {
         2., -0.699999988079071, -0.699999988079071}, {
         1., -0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., -1.}, {-0.3499999940395355, -1., 
         0.3499999940395355}, {-1., -1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., 1.}, {
         0.3499999940395355, -1., -0.3499999940395355}, {1., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{
         1., -1., -1.}, {-0.3499999940395355, -1., -0.3499999940395355}, \
{-1., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, -1., 0.3499999940395355}, {
         0.3499999940395355, -1.5, 0.3499999940395355}, {
         0.3499999940395355, -1., 0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., 1.}, {0.3499999940395355, -1., 
         0.3499999940395355}, {1., -1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, -1., -0.3499999940395355}, \
{-0.3499999940395355, -1.5, 0.3499999940395355}, {-0.3499999940395355, -1., 
         0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.3499999940395355, -1., 0.3499999940395355}, {
         0.3499999940395355, -1.5, -0.3499999940395355}, {
         0.3499999940395355, -1., -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., 
         1.}, {-1., -0.699999988079071, -0.699999988079071}, {-1., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., 1.}, {-1., -0.699999988079071, 
         0.699999988079071}, {-1., -1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 0.699999988079071, 
         0.699999988079071}, {-2., -0.699999988079071, 
         0.699999988079071}, {-1., -0.699999988079071, 0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 0.699999988079071, -0.699999988079071}, {-2., 
         0.699999988079071, 0.699999988079071}, {-1., 0.699999988079071, 
         0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -0.699999988079071, -0.699999988079071}, {-2., 
         0.699999988079071, -0.699999988079071}, {-1., 
         0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -0.699999988079071, 
         0.699999988079071}, {-2., -0.699999988079071, -0.699999988079071}, \
{-1., -0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-2., -0.699999988079071, -0.699999988079071}, {-2., 
         0.699999988079071, 0.699999988079071}, {-2., 
         0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{2., 0.699999988079071, -0.699999988079071}, {
         2., -0.699999988079071, 0.699999988079071}, {
         2., -0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., -1.}, {1., -0.699999988079071, 
         0.699999988079071}, {1., -1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., 1.}, {1., 
         0.699999988079071, -0.699999988079071}, {1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., -1.}, {
         1., -0.699999988079071, -0.699999988079071}, {1., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -0.699999988079071, 0.699999988079071}, {2., 
         0.699999988079071, 0.699999988079071}, {1., 0.699999988079071, 
         0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., 1.}, {1., 0.699999988079071, 
         0.699999988079071}, {1., 1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -0.699999988079071, 0.699999988079071}, {
         2., -0.699999988079071, -0.699999988079071}, {2., -0.699999988079071,
          0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 0.699999988079071, 0.699999988079071}, {2., 
         0.699999988079071, -0.699999988079071}, {1., 
         0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, 1., -0.3499999940395355}, {
         0.3499999940395355, 1.5, -0.3499999940395355}, {0.3499999940395355, 
         1., -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, 1.5, -0.3499999940395355}, {
         0.3499999940395355, 1.5, 0.3499999940395355}, {0.3499999940395355, 
         1.5, -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., -1.}, {0.3499999940395355, 1., 
         0.3499999940395355}, {1., 1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., 1.}, {-0.3499999940395355, 
         1., -0.3499999940395355}, {-1., 1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., -1.}, {-0.3499999940395355, 
         1., -0.3499999940395355}, {0.3499999940395355, 
         1., -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.3499999940395355, 1., 
         0.3499999940395355}, {-0.3499999940395355, 1.5, 
         0.3499999940395355}, {-0.3499999940395355, 1., 0.3499999940395355}}],
        
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., 1.}, {-0.3499999940395355, 1., 
         0.3499999940395355}, {-1., 1., 1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.3499999940395355, 1., -0.3499999940395355}, {
         0.3499999940395355, 1.5, 0.3499999940395355}, {0.3499999940395355, 
         1., 0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, 1., 
         0.3499999940395355}, {-0.3499999940395355, 
         1.5, -0.3499999940395355}, {-0.3499999940395355, 
         1., -0.3499999940395355}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., 1.}, {-1., 1., 1.}, {-1., -1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., -1.}, {1., 1., -1.}, {1., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., -1.}, {-1., 
         0.699999988079071, -0.699999988079071}, {-1., 0.699999988079071, 
         0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., -1.}, {-1., -0.699999988079071, \
-0.699999988079071}, {-1., 0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.3499999940395355, -1., -0.3499999940395355}, {
         0.3499999940395355, -1.5, -0.3499999940395355}, \
{-0.3499999940395355, -1.5, -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.3499999940395355, -1.5, -0.3499999940395355}, {
         0.3499999940395355, -1.5, 
         0.3499999940395355}, {-0.3499999940395355, -1.5, 
         0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 0.699999988079071, -0.699999988079071}, {2., 
         0.699999988079071, -0.699999988079071}, {
         2., -0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., -1.}, {-0.3499999940395355, -1., \
-0.3499999940395355}, {-0.3499999940395355, -1., 0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., 1.}, {0.3499999940395355, -1., 
         0.3499999940395355}, {0.3499999940395355, -1., -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., -1.}, {
         0.3499999940395355, -1., -0.3499999940395355}, {-0.3499999940395355, \
-1., -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, -1., 
         0.3499999940395355}, {-0.3499999940395355, -1.5, 
         0.3499999940395355}, {0.3499999940395355, -1.5, 0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., 1.}, {-0.3499999940395355, -1., 
         0.3499999940395355}, {0.3499999940395355, -1., 0.3499999940395355}}],
        
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, -1., -0.3499999940395355}, \
{-0.3499999940395355, -1.5, -0.3499999940395355}, {-0.3499999940395355, -1.5, 
         0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.3499999940395355, -1., 0.3499999940395355}, {
         0.3499999940395355, -1.5, 0.3499999940395355}, {
         0.3499999940395355, -1.5, -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., 1.}, {-1., -0.699999988079071, 
         0.699999988079071}, {-1., -0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., 1.}, {-1., 0.699999988079071, 
         0.699999988079071}, {-1., -0.699999988079071, 0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 0.699999988079071, 0.699999988079071}, {-2., 
         0.699999988079071, 0.699999988079071}, {-2., -0.699999988079071, 
         0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 0.699999988079071, -0.699999988079071}, {-2., 
         0.699999988079071, -0.699999988079071}, {-2., 0.699999988079071, 
         0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -0.699999988079071, -0.699999988079071}, {-2., \
-0.699999988079071, -0.699999988079071}, {-2., 
         0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -0.699999988079071, 
         0.699999988079071}, {-2., -0.699999988079071, 
         0.699999988079071}, {-2., -0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-2., -0.699999988079071, -0.699999988079071}, {-2., \
-0.699999988079071, 0.699999988079071}, {-2., 0.699999988079071, 
         0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{2., 0.699999988079071, -0.699999988079071}, {2., 
         0.699999988079071, 0.699999988079071}, {2., -0.699999988079071, 
         0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., -1.}, {
         1., -0.699999988079071, -0.699999988079071}, {1., -0.699999988079071,
          0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., 1.}, {1., 0.699999988079071, 
         0.699999988079071}, {1., 0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., -1.}, {1., 
         0.699999988079071, -0.699999988079071}, {
         1., -0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -0.699999988079071, 0.699999988079071}, {
         2., -0.699999988079071, 0.699999988079071}, {2., 0.699999988079071, 
         0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -1., 1.}, {1., -0.699999988079071, 
         0.699999988079071}, {1., 0.699999988079071, 0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., -0.699999988079071, 0.699999988079071}, {
         1., -0.699999988079071, -0.699999988079071}, {
         2., -0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 0.699999988079071, 0.699999988079071}, {2., 
         0.699999988079071, 0.699999988079071}, {2., 
         0.699999988079071, -0.699999988079071}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, 
         1., -0.3499999940395355}, {-0.3499999940395355, 
         1.5, -0.3499999940395355}, {0.3499999940395355, 
         1.5, -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, 
         1.5, -0.3499999940395355}, {-0.3499999940395355, 1.5, 
         0.3499999940395355}, {0.3499999940395355, 1.5, 0.3499999940395355}}],
        
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., -1.}, {0.3499999940395355, 
         1., -0.3499999940395355}, {0.3499999940395355, 1., 
         0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., 1.}, {-0.3499999940395355, 1., 
         0.3499999940395355}, {-0.3499999940395355, 1., -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., -1.}, {-1., 1., -1.}, {-0.3499999940395355, 
         1., -0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.3499999940395355, 1., 0.3499999940395355}, {
         0.3499999940395355, 1.5, 0.3499999940395355}, {-0.3499999940395355, 
         1.5, 0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 1., 1.}, {0.3499999940395355, 1., 
         0.3499999940395355}, {-0.3499999940395355, 1., 0.3499999940395355}}],
        
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{0.3499999940395355, 1., -0.3499999940395355}, {
         0.3499999940395355, 1.5, -0.3499999940395355}, {0.3499999940395355, 
         1.5, 0.3499999940395355}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-0.3499999940395355, 1., 
         0.3499999940395355}, {-0.3499999940395355, 1.5, 
         0.3499999940395355}, {-0.3499999940395355, 
         1.5, -0.3499999940395355}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{1., -1., 1.}, {1., 1., 1.}, {-1., 1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., -1.}, {-1., 1., -1.}, {1., 1., -1.}}],
        "Triangle"]}], {2538.4666666666662, -226.8}, 
     ImageScaled[{0.5, 0.5}], {360, 432},
     ContentSelectable->True], InsetBox[
     Graphics3DBox[
      {Opacity[0.5], 
       TagBox[Polygon3DBox[{{-1., 1., -1.}, {-1., -1., -1.}, {-1., -1., 4.}}],
        
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., 1., -1.}, {-1., -1., 4.}, {-1., 1., 4.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 0.9999989867210388, -1.}, {1., 1., 1.}, {1., -1., 
         1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 0.9999989867210388, -1.}, {1., -1., 1.}, {
         1., -1.0000009536743164`, -0.9999989867210388}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., -1.}, {1., 0.9999989867210388, -1.}, {
         1., -1.0000009536743164`, -0.9999989867210388}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., 1., -1.}, {
         1., -1.0000009536743164`, -0.9999989867210388}, {-1., -1., -1.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{-1., -1., -1.}, {
         1., -1.0000009536743164`, -0.9999989867210388}, {1., -1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., -1.}, {1., -1., 1.}, {-1., -1., 4.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., 4.}, {1., -1., 1.}, {1., 1., 1.}}],
        "Triangle"], 
       TagBox[Polygon3DBox[{{-1., -1., 4.}, {1., 1., 1.}, {-1., 1., 4.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 0.9999989867210388, -1.}, {-1., 1., -1.}, {-1., 1.,
          4.}}],
        "Triangle"], 
       TagBox[
        Polygon3DBox[{{1., 0.9999989867210388, -1.}, {-1., 1., 4.}, {1., 1., 
         1.}}],
        "Triangle"]}], {2863., -226.8}, ImageScaled[{0.5, 0.5}], {228, 432},
     ContentSelectable->True]}, {}},
  ImageSize->Full,
  PlotRange->{{0, 2992.2666666666664`}, {-453.6, 0}},
  PlotRangePadding->{6, 5}]], "Output",
 CellChangeTimes->{
  3.870169917008988*^9, 3.870170044699009*^9, 3.8701713869698677`*^9, {
   3.8701723519011993`*^9, 3.8701723577184362`*^9}, 3.87024720718183*^9, 
   3.87025113285565*^9, 3.870268831391102*^9, 3.870276969833774*^9, 
   3.8702792553948317`*^9, 3.870279337857189*^9, 3.870280894411138*^9, 
   3.870324515692624*^9, 3.870327326040139*^9, 3.870327560096373*^9, 
   3.870328437817873*^9, 3.8703285432190247`*^9, 3.870328588937606*^9, 
   3.870328669847164*^9, 3.8703289153811398`*^9, 3.870329060026552*^9, 
   3.870329353231332*^9, 3.870333429164528*^9, 3.870335790631029*^9, 
   3.8703360138627157`*^9, 3.8703362115894527`*^9, 3.87033754130087*^9, 
   3.870343835420226*^9, 3.8704303773905773`*^9, 3.870435671181322*^9, 
   3.87044081928054*^9, 3.870442194692233*^9, 3.870442930495236*^9, 
   3.8704448489091177`*^9, 3.8704460989757223`*^9, {3.870446144474792*^9, 
   3.870446173951116*^9}, 3.870446902285706*^9, 3.870588600127811*^9, 
   3.870589130954595*^9, 3.870589577447359*^9, 3.870590746887838*^9, 
   3.870590927758314*^9, 3.8705917053298388`*^9, 3.870592681913384*^9, 
   3.8705931229842167`*^9, 3.870593790443123*^9, {3.870599058406446*^9, 
   3.870599062579707*^9}, {3.870623123798315*^9, 3.87062315291945*^9}, 
   3.870623466697422*^9, 3.8706647703786*^9, 3.870674055180785*^9, 
   3.8710428388006573`*^9, 3.8710446351260767`*^9, 3.871119301922216*^9, 
   3.8711252324133463`*^9, 3.871148501071683*^9, 3.871181879918426*^9, 
   3.87118472305828*^9, 3.871185320683631*^9, 3.871185420228949*^9, 
   3.871359166672858*^9, {3.871359430744523*^9, 3.87135945802874*^9}, 
   3.8713598813057613`*^9, 3.871359913053833*^9, 3.8713742614254827`*^9, 
   3.871374514504524*^9, 3.871376001861108*^9, 3.871376110111753*^9, 
   3.871376441899588*^9, 3.873349278794415*^9, 3.873349779197315*^9, 
   3.873351651619327*^9, 3.873352084552802*^9},
 CellLabel->"Out[34]=",ExpressionUUID->"56308759-fc58-4e67-93d7-6f05078348f5"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Simulation of Sound Signals and Error", "Section",
 CellChangeTimes->{{3.8630629587512217`*^9, 
  3.863062981352867*^9}},ExpressionUUID->"a4101e6c-4945-4256-927d-\
4d41e1db6f16"],

Cell["\<\
In this section, the sound signals and their reflection are computed. Error \
can be simulated optionally. The simulation is based on the first ILDARS \
Prototype, created by Prof. Christian Schindelhauer. The directional von \
Mises error and distance error was implemented by Tobias Grugel.\
\>", "Text",
 CellChangeTimes->{{3.863062986039805*^9, 3.863062988643607*^9}, {
  3.8630630469991083`*^9, 3.8630631502167177`*^9}, {3.8630650707282333`*^9, 
  3.8630650718259583`*^9}},ExpressionUUID->"08c9be05-dfb0-4ceb-a6c5-\
14ad81565164"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "Main", " ", "function", " ", "for", " ", "creating", " ", "an", " ", 
    RowBox[{"experiment", ".", " ", "Error"}], " ", "can", " ", "optionally", 
    " ", "be", " ", "specified", " ", 
    RowBox[{"(", 
     RowBox[{"leave", " ", "default", " ", "for", " ", "no", " ", "error"}], 
     ")"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"SimulateExperiment", "[", 
    RowBox[{"room_", ",", "receiverPosition_", ",", "senderPositions_", ",", 
     RowBox[{"vanMisesConcentration_", ":", "0"}], ",", 
     RowBox[{"deltaError_", ":", "0"}], ",", 
     RowBox[{"directSignalDiscardFactor_", ":", "0"}], ",", 
     RowBox[{"reflectionDiscardFactor_", ":", "0"}], ",", 
     RowBox[{"wallErrorFactor_", ":", "0"}]}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"measurements", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"reflectionPoints", "=", 
        RowBox[{"{", "}"}]}]}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Do", "[", 
       RowBox[{"(*", " ", 
        RowBox[{"for", " ", "each", " ", "sender"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"directSignalDirection", ",", 
            RowBox[{"reflectedSignalDirections", "=", 
             RowBox[{"{", "}"}]}]}], "}"}], ",", "\[IndentingNewLine]", 
          RowBox[{"(*", " ", 
           RowBox[{
           "check", " ", "if", " ", "a", " ", "wall", " ", "is", " ", 
            "obstructing", " ", "the", " ", "sender", " ", "from", " ", "the",
             " ", "receiver"}], " ", "*)"}], "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"MemberQ", "[", 
              RowBox[{
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"DoesLineTriangleIntersect", "[", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{"receiverPosition", ",", "senderPosition"}], 
                    "}"}], ",", "wall"}], "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"wall", ",", "room"}], "}"}]}], "]"}], ",", 
               "True"}], "]"}]}], ",", "\[IndentingNewLine]", 
            RowBox[{"(*", " ", 
             RowBox[{
              RowBox[{
              "compute", " ", "direction", " ", "of", " ", "direct", " ", 
               RowBox[{"signal", ".", " ", "We"}], " ", "apply", " ", "error",
                " ", "now"}], ",", " ", 
              RowBox[{
              "becuase", " ", "there", " ", "are", " ", "duplicates", " ", 
               "in", " ", "the", " ", "measurements", " ", "list"}]}], "*)"}],
             "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"directSignalDirection", "=", 
              RowBox[{"Normalize", "[", 
               RowBox[{"senderPosition", "-", "receiverPosition"}], "]"}]}], 
             ";", "\[IndentingNewLine]", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"vanMisesConcentration", ">", "0"}], ",", 
               RowBox[{"directSignalDirection", "=", 
                RowBox[{"SimulateDirectionalErrorForSingleVector", "[", 
                 RowBox[{
                 "directSignalDirection", ",", "vanMisesConcentration"}], 
                 "]"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
             RowBox[{"Do", "[", 
              RowBox[{"(*", " ", 
               RowBox[{"for", " ", "each", " ", "wall"}], " ", "*)"}], 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"Block", "[", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{"mirrorPoint", ",", "reflectionPoint", ",", 
                   RowBox[{"dropReflection", "=", "False"}]}], "}"}], ",", 
                 "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"mirrorPoint", "=", 
                   RowBox[{"ComputeMirrorPoint", "[", 
                    RowBox[{"wall", ",", "senderPosition"}], "]"}]}], ";", 
                  "\[IndentingNewLine]", 
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"mirrorPoint", "!=", 
                    RowBox[{"{", "}"}]}], "\[And]", 
                    RowBox[{"DoesLineTriangleIntersect", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"receiverPosition", ",", "mirrorPoint"}], "}"}], 
                    ",", "wall"}], "]"}]}], ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"reflectionPoint", "=", 
                    RowBox[{"LineTriangleIntersection", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"receiverPosition", ",", "mirrorPoint"}], "}"}], 
                    ",", "wall"}], "]"}]}], ";", "\[IndentingNewLine]", 
                    RowBox[{"Do", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"DoesLineTriangleIntersect", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"reflectionPoint", ",", "receiverPosition"}], 
                    "}"}], ",", "otherWall"}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"dropReflection", "=", "True"}], ";"}]}], 
                    "\[IndentingNewLine]", 
                    RowBox[{"(*", 
                    RowBox[{
                    RowBox[{
                    "Print", "[", 
                    "\"\<Removing Relfection because a wall is in the \
way:\>\"", "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"CellPrint", "[", 
                    RowBox[{"Graphics3D", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"Opacity", "[", "0.1", "]"}], ",", 
                    RowBox[{"Triangle", "/@", "room"}]}], "}"}], ",", 
                    RowBox[{"Triangle", "[", "otherWall", "]"}], ",", 
                    RowBox[{"Arrow", "[", 
                    RowBox[{"{", 
                    RowBox[{"receiverPosition", ",", "reflectionPoint"}], 
                    "}"}], "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"Red", ",", 
                    RowBox[{"Point", "[", "reflectionPoint", "]"}]}], "}"}]}],
                     "}"}], "]"}], "]"}]}], "*)"}], "\[IndentingNewLine]", 
                    "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"DoesLineTriangleIntersect", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"reflectionPoint", ",", "senderPosition"}], "}"}],
                     ",", "otherWall"}], "]"}], ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"dropReflection", "=", "True"}], ";"}]}], 
                    "\[IndentingNewLine]", 
                    RowBox[{"(*", 
                    RowBox[{
                    RowBox[{
                    "Print", "[", 
                    "\"\<Removing Relfection because a wall is in the \
way:\>\"", "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"CellPrint", "[", 
                    RowBox[{"Graphics3D", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"Opacity", "[", "0.1", "]"}], ",", 
                    RowBox[{"Triangle", "/@", "room"}]}], "}"}], ",", 
                    RowBox[{"Triangle", "[", "otherWall", "]"}], ",", 
                    RowBox[{"Arrow", "[", 
                    RowBox[{"{", 
                    RowBox[{"senderPosition", ",", "reflectionPoint"}], "}"}],
                     "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"Red", ",", 
                    RowBox[{"Point", "[", "reflectionPoint", "]"}]}], "}"}]}],
                     "}"}], "]"}], "]"}]}], "*)"}], "\[IndentingNewLine]", 
                    "]"}]}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{"otherWall", ",", 
                    RowBox[{"DeleteCases", "[", 
                    RowBox[{"room", ",", "wall"}], "]"}]}], "}"}]}], "]"}], 
                    ";", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"!", "dropReflection"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"AppendTo", "[", 
                    RowBox[{"measurements", ",", 
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    "directSignalDirection", ",", "\[IndentingNewLine]", 
                    RowBox[{"Normalize", "[", 
                    RowBox[{"mirrorPoint", "-", "receiverPosition"}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"EuclideanDistance", "[", 
                    RowBox[{"senderPosition", ",", "reflectionPoint"}], "]"}],
                     "+", 
                    RowBox[{"EuclideanDistance", "[", 
                    RowBox[{"reflectionPoint", ",", "receiverPosition"}], 
                    "]"}], "-", 
                    RowBox[{"EuclideanDistance", "[", 
                    RowBox[{"senderPosition", ",", "receiverPosition"}], 
                    "]"}]}], ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Flatten", "[", 
                    RowBox[{"Position", "[", 
                    RowBox[{"room", ",", "wall"}], "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    "\[IndentingNewLine]", "senderPosition"}], 
                    "\[IndentingNewLine]", "}"}]}], "]"}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{"AppendTo", "[", 
                    RowBox[{"reflectionPoints", ",", 
                    RowBox[{"{", 
                    RowBox[{"senderPosition", ",", "reflectionPoint"}], 
                    "}"}]}], "]"}]}]}], "]"}]}]}], "\[IndentingNewLine]", 
                   "]"}]}]}], "\[IndentingNewLine]", "]"}], 
               "\[IndentingNewLine]", ",", 
               RowBox[{"{", 
                RowBox[{"wall", ",", "room"}], "}"}]}], "]"}]}]}], 
           "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}], 
        "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"senderPosition", ",", "senderPositions"}], "}"}]}], "]"}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"(*", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"CellPrint", "[", 
         RowBox[{"Graphics3D", "[", 
          RowBox[{
           RowBox[{"{", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{
               RowBox[{"Opacity", "[", "0.2", "]"}], ",", 
               RowBox[{"Triangle", "/@", "room"}]}], "}"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{"Red", ",", 
               RowBox[{"Point", "[", "receiverPosition", "]"}]}], "}"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{"Blue", ",", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"Point", "[", "sender", "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"sender", ",", "senderPositions"}], "}"}]}], 
                "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{"Orange", ",", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"Arrow", "[", 
                  RowBox[{"{", 
                   RowBox[{"receiverPosition", ",", 
                    RowBox[{"receiverPosition", "+", 
                    RowBox[{"measurement", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"measurement", ",", "measurements"}], "}"}]}], 
                "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{"Cyan", ",", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"Arrow", "[", 
                  RowBox[{"{", 
                   RowBox[{"receiverPosition", ",", 
                    RowBox[{"receiverPosition", "+", 
                    RowBox[{"measurement", "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"measurement", ",", "measurements"}], "}"}]}], 
                "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
             RowBox[{"(*", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"Orange", ",", 
                 RowBox[{"Table", "[", 
                  RowBox[{
                   RowBox[{"Point", "[", "mirrorPoint", "]"}], ",", 
                   RowBox[{"{", 
                    RowBox[{"mirrorPoint", ",", "mirrorPoints"}], "}"}]}], 
                  "]"}]}], "}"}], ","}], "*)"}], "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{"Cyan", ",", 
               RowBox[{"Thickness", "[", "Small", "]"}], ",", 
               RowBox[{"Arrowheads", "[", "Small", "]"}], ",", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"Arrow", "[", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"reflectionPoint", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    RowBox[{"reflectionPoint", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", "receiverPosition"}],
                    "}"}], "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"reflectionPoint", ",", "reflectionPoints"}], 
                  "}"}]}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], 
           ",", 
           RowBox[{"Axes", "->", "True"}]}], "]"}], "]"}], ";"}], 
       "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"DeleteDuplicates", "[", "measurements", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Simulate", " ", "Error"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"vanMisesConcentration", ">", "0"}], ",", 
        RowBox[{"measurements", "=", 
         RowBox[{"SimulateDirectionalError", "[", 
          RowBox[{"measurements", ",", "vanMisesConcentration"}], "]"}]}]}], 
       "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"deltaError", ">", "0"}], ",", 
        RowBox[{"measurements", "=", 
         RowBox[{"SimulateDeltaError", "[", 
          RowBox[{"measurements", ",", "deltaError"}], "]"}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"directSignalDiscardFactor", ">", "0"}], ",", 
        RowBox[{"measurements", "=", 
         RowBox[{"SimulateDropDirectSignals", "[", 
          RowBox[{"measurements", ",", "directSignalDiscardFactor"}], 
          "]"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"reflectionDiscardFactor", ">", "0"}], ",", 
        RowBox[{"measurements", "=", 
         RowBox[{"SimulateDropReflectedSignals", "[", 
          RowBox[{"measurements", ",", "reflectionDiscardFactor"}], "]"}]}]}],
        "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"wallErrorFactor", ">", "0"}], ",", 
        RowBox[{"measurements", "=", 
         RowBox[{"SimulateWallError", "[", 
          RowBox[{"measurements", ",", "wallErrorFactor"}], "]"}]}]}], "]"}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"RandomSample", "[", "measurements", "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.863063182056466*^9, 3.863063210317531*^9}, {
   3.8630633355114307`*^9, 3.8630633487848463`*^9}, {3.863063388940411*^9, 
   3.863063557450536*^9}, {3.863063600110465*^9, 3.863063652942474*^9}, {
   3.863063746483859*^9, 3.863063907990418*^9}, {3.863063946842402*^9, 
   3.863064041165703*^9}, {3.863064084971444*^9, 3.8630641075312843`*^9}, {
   3.8630641689834423`*^9, 3.863064215595209*^9}, {3.8630642518077602`*^9, 
   3.8630644160759697`*^9}, {3.863064472171493*^9, 3.863064478180299*^9}, {
   3.8630648924176702`*^9, 3.8630649324573803`*^9}, {3.863065215623908*^9, 
   3.86306522022324*^9}, {3.863066713220649*^9, 3.863066734250908*^9}, {
   3.863066874541029*^9, 3.863066932950056*^9}, {3.863067043348034*^9, 
   3.863067056853006*^9}, {3.863067107926499*^9, 3.863067196184883*^9}, {
   3.863067254356926*^9, 3.863067280298126*^9}, {3.863067315009667*^9, 
   3.8630674907006063`*^9}, {3.8630703188141747`*^9, 
   3.8630703424959373`*^9}, {3.863070504207605*^9, 3.863070542507721*^9}, {
   3.863070598770653*^9, 3.8630707358205214`*^9}, {3.863070790030816*^9, 
   3.8630708455695047`*^9}, {3.863070877993452*^9, 3.863070895337099*^9}, {
   3.8630709393087587`*^9, 3.86307097328209*^9}, 3.863071013019485*^9, {
   3.863071065221698*^9, 3.863071142260995*^9}, {3.8630712006827927`*^9, 
   3.863071207972971*^9}, {3.863071381915848*^9, 3.863071422354817*^9}, {
   3.863071522812826*^9, 3.8630716286183777`*^9}, {3.863071660554055*^9, 
   3.8630717051544847`*^9}, {3.8630717527756987`*^9, 3.863071789774748*^9}, {
   3.863075751740683*^9, 3.8630757819745398`*^9}, {3.863075840602751*^9, 
   3.86307602244176*^9}, {3.863076113550891*^9, 3.863076225434993*^9}, {
   3.8630762566525927`*^9, 3.863076862162644*^9}, {3.8630768955328703`*^9, 
   3.863077086274476*^9}, {3.8630771900313387`*^9, 3.8630771911630173`*^9}, {
   3.863077286238496*^9, 3.86307728709439*^9}, {3.863077332514773*^9, 
   3.86307749373024*^9}, {3.8630775309687843`*^9, 3.8630775455298843`*^9}, {
   3.863077604556176*^9, 3.863077719309847*^9}, {3.86307796508603*^9, 
   3.863078046529338*^9}, {3.863078251407914*^9, 3.86307826081818*^9}, {
   3.863078295463255*^9, 3.863078324181303*^9}, {3.8630784888695*^9, 
   3.863078494396304*^9}, {3.86307854651683*^9, 3.863078562903322*^9}, {
   3.863078664267846*^9, 3.86307867177061*^9}, {3.863078731700696*^9, 
   3.863078755015542*^9}, {3.863078790333858*^9, 3.8630788999841967`*^9}, {
   3.8630789895126133`*^9, 3.8630790017325993`*^9}, {3.863079035639032*^9, 
   3.863079154825102*^9}, {3.863079269103428*^9, 3.8630792736628036`*^9}, {
   3.863079304356883*^9, 3.863079323088017*^9}, {3.863079362045492*^9, 
   3.8630795464848843`*^9}, {3.863079680259029*^9, 3.86307970251405*^9}, {
   3.863079751986162*^9, 3.863079820850267*^9}, {3.863079896415279*^9, 
   3.8630799496535807`*^9}, {3.863080042007*^9, 3.863080054394968*^9}, {
   3.8630802445850782`*^9, 3.863080247040382*^9}, {3.86308030279202*^9, 
   3.863080319499731*^9}, {3.863080543692906*^9, 3.8630805639898653`*^9}, {
   3.8630806522462378`*^9, 3.863080680902595*^9}, {3.86308074373888*^9, 
   3.863080790317836*^9}, {3.863080825693734*^9, 3.863080830894199*^9}, {
   3.8630808684316273`*^9, 3.863080903516753*^9}, {3.8630809996154327`*^9, 
   3.863081090533874*^9}, {3.8630811351482553`*^9, 3.8630811959330997`*^9}, {
   3.863081330854889*^9, 3.863081332898562*^9}, {3.8630813659575663`*^9, 
   3.863081366039124*^9}, {3.863081396711483*^9, 3.86308144204331*^9}, {
   3.863081499193972*^9, 3.863081523388937*^9}, {3.8630815814841146`*^9, 
   3.863081599121756*^9}, {3.8630816475995007`*^9, 3.8630817764578114`*^9}, {
   3.863082250552363*^9, 3.863082326980304*^9}, {3.863083200979842*^9, 
   3.863083225453121*^9}, 3.8630832941194477`*^9, {3.8630833755518513`*^9, 
   3.863083375909553*^9}, {3.86308455523418*^9, 3.863084634584684*^9}, {
   3.863084682676374*^9, 3.863084685964563*^9}, {3.863085135062195*^9, 
   3.863085189944043*^9}, {3.863085221143776*^9, 3.863085221349306*^9}, {
   3.8630853457905817`*^9, 3.863085346950598*^9}, {3.86308683215053*^9, 
   3.8630868339337397`*^9}, {3.863086883174899*^9, 3.86308689528448*^9}, {
   3.864285052833387*^9, 3.8642850533096733`*^9}, {3.864285132336269*^9, 
   3.864285141016911*^9}, {3.864285177099483*^9, 3.864285195089108*^9}, {
   3.864291888772403*^9, 3.864291908129138*^9}, {3.8642925611632338`*^9, 
   3.864292599100244*^9}, {3.8642926837508287`*^9, 3.864292685539075*^9}, {
   3.864292806036908*^9, 3.86429280814025*^9}, {3.865133485010825*^9, 
   3.865133491868599*^9}, {3.865310259025406*^9, 3.865310299483562*^9}, {
   3.8653103841848173`*^9, 3.8653104224692907`*^9}, {3.865843584664152*^9, 
   3.865843590743931*^9}, {3.871119269575878*^9, 3.871119273341095*^9}, {
   3.871119645242916*^9, 3.871119649019122*^9}, {3.871119697205055*^9, 
   3.871119698951109*^9}},
 CellLabel->"In[35]:=",ExpressionUUID->"e0214293-3fd0-4970-a36d-ba82429f4c81"],

Cell[CellGroupData[{

Cell["Helper Functions", "Subsection",
 CellChangeTimes->{{3.86306367527582*^9, 
  3.8630636775737247`*^9}},ExpressionUUID->"3634a2d3-f767-484f-8c96-\
989694a2c361"],

Cell[CellGroupData[{

Cell["Line of Sight", "Subsubsection",
 CellChangeTimes->{{3.863066554397181*^9, 
  3.8630665694011*^9}},ExpressionUUID->"cf5404d8-efb2-4ce3-b4d0-286b813db69e"],

Cell["\<\
These functions were taken from Prof. Christian Schindelhauer\
\[CloseCurlyQuote]s Notebook for the first ILDARS prototype.\
\>", "Text",
 CellChangeTimes->{{3.8630665734440403`*^9, 3.863066603283695*^9}, {
  3.863067633370329*^9, 
  3.863067641523449*^9}},ExpressionUUID->"58be7c9e-57f8-4641-ba63-\
1a44284ee9d1"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"LineTriangleIntersectionParameters", "[", 
    RowBox[{"li_", ",", "tr_"}], "]"}], ":=", " ", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"px", "=", "  ", 
        RowBox[{
         RowBox[{"tr", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"py", " ", "=", " ", 
        RowBox[{
         RowBox[{"tr", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"pz", " ", "=", " ", 
        RowBox[{
         RowBox[{"tr", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "3", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"v1x", "=", " ", 
        RowBox[{
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}], "-", 
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}]}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"v1y", " ", "=", " ", 
        RowBox[{
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}], "-", 
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"v1z", " ", "=", " ", 
        RowBox[{
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "3", "]"}], "]"}], "-", 
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "3", "]"}], "]"}]}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"v2x", " ", "=", "  ", 
        RowBox[{
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}], "-", 
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}]}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"v2y", " ", "=", "  ", 
        RowBox[{
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}], "-", 
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"v2z", " ", "=", "  ", 
        RowBox[{
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "[", 
          RowBox[{"[", "3", "]"}], "]"}], "-", 
         RowBox[{
          RowBox[{"tr", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "3", "]"}], "]"}]}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"sx", " ", "=", " ", 
        RowBox[{
         RowBox[{"li", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"sy", " ", "=", " ", 
        RowBox[{
         RowBox[{"li", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"sz", " ", "=", " ", 
        RowBox[{
         RowBox[{"li", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "3", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"dx", " ", "=", " ", 
        RowBox[{
         RowBox[{"li", "[", 
          RowBox[{"[", "2", "]"}], "]"}], "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"dy", " ", "=", " ", 
        RowBox[{
         RowBox[{"li", "[", 
          RowBox[{"[", "2", "]"}], "]"}], "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"dz", " ", "=", " ", 
        RowBox[{
         RowBox[{"li", "[", 
          RowBox[{"[", "2", "]"}], "]"}], "[", 
         RowBox[{"[", "3", "]"}], "]"}]}], ",", " ", "det", ",", "i", ",", 
       "j", ",", "k"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"det", " ", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"-", "dz"}], " ", "v1y", " ", "v2x"}], "+", 
        RowBox[{"sz", " ", "v1y", " ", "v2x"}], "+", 
        RowBox[{"dy", " ", "v1z", " ", "v2x"}], "-", 
        RowBox[{"sy", " ", "v1z", " ", "v2x"}], "+", 
        RowBox[{"dz", " ", "v1x", " ", "v2y"}], "-", 
        RowBox[{"sz", " ", "v1x", " ", "v2y"}], "-", 
        RowBox[{"dx", " ", "v1z", " ", "v2y"}], "+", 
        RowBox[{"sx", " ", "v1z", " ", "v2y"}], "-", 
        RowBox[{"dy", " ", "v1x", " ", "v2z"}], "+", 
        RowBox[{"sy", " ", "v1x", " ", "v2z"}], "+", 
        RowBox[{"dx", " ", "v1y", " ", "v2z"}], "-", 
        RowBox[{"sx", " ", "v1y", " ", "v2z"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"det", " ", "\[Equal]", " ", "0"}], ",", " ", 
        RowBox[{"{", 
         RowBox[{"Infinity", ",", "Infinity", ",", "Infinity"}], "}"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"i", "=", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"dy", " ", "pz", " ", "v2x"}], "-", 
             RowBox[{"pz", " ", "sy", " ", "v2x"}], "-", 
             RowBox[{"dy", " ", "sz", " ", "v2x"}], "+", 
             RowBox[{"py", " ", "sz", " ", "v2x"}], "-", 
             RowBox[{"dx", " ", "pz", " ", "v2y"}], "+", 
             RowBox[{"pz", " ", "sx", " ", "v2y"}], "+", 
             RowBox[{"dx", " ", "sz", " ", "v2y"}], "-", 
             RowBox[{"px", " ", "sz", " ", "v2y"}], "+", 
             RowBox[{"dz", " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{
                 RowBox[{"-", "py"}], " ", "v2x"}], "+", 
                RowBox[{"sy", " ", "v2x"}], "+", 
                RowBox[{"px", " ", "v2y"}], "-", 
                RowBox[{"sx", " ", "v2y"}]}], ")"}]}], "+", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"dx", " ", "py"}], "-", 
                RowBox[{"py", " ", "sx"}], "+", 
                RowBox[{"dy", " ", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"-", "px"}], "+", "sx"}], ")"}]}], "-", 
                RowBox[{"dx", " ", "sy"}], "+", 
                RowBox[{"px", " ", "sy"}]}], ")"}], " ", "v2z"}]}], ")"}], 
           "/", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"dz", " ", "v1y", " ", "v2x"}], "-", 
             RowBox[{"sz", " ", "v1y", " ", "v2x"}], "-", 
             RowBox[{"dy", " ", "v1z", " ", "v2x"}], "+", 
             RowBox[{"sy", " ", "v1z", " ", "v2x"}], "-", 
             RowBox[{"dz", " ", "v1x", " ", "v2y"}], "+", 
             RowBox[{"sz", " ", "v1x", " ", "v2y"}], "+", 
             RowBox[{"dx", " ", "v1z", " ", "v2y"}], "-", 
             RowBox[{"sx", " ", "v1z", " ", "v2y"}], "+", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"dy", " ", "v1x"}], "-", 
                RowBox[{"sy", " ", "v1x"}], "+", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"-", "dx"}], "+", "sx"}], ")"}], " ", "v1y"}]}], 
               ")"}], " ", "v2z"}]}], ")"}]}]}], ";", 
         RowBox[{"j", "=", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"-", "dy"}], " ", "pz", " ", "v1x"}], "+", 
             RowBox[{"pz", " ", "sy", " ", "v1x"}], "+", 
             RowBox[{"dy", " ", "sz", " ", "v1x"}], "-", 
             RowBox[{"py", " ", "sz", " ", "v1x"}], "+", 
             RowBox[{"dx", " ", "pz", " ", "v1y"}], "-", 
             RowBox[{"pz", " ", "sx", " ", "v1y"}], "-", 
             RowBox[{"dx", " ", "sz", " ", "v1y"}], "+", 
             RowBox[{"px", " ", "sz", " ", "v1y"}], "+", 
             RowBox[{"dz", " ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"py", " ", "v1x"}], "-", 
                RowBox[{"sy", " ", "v1x"}], "-", 
                RowBox[{"px", " ", "v1y"}], "+", 
                RowBox[{"sx", " ", "v1y"}]}], ")"}]}], "+", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{
                 RowBox[{"-", "dx"}], " ", "py"}], "+", 
                RowBox[{"dy", " ", 
                 RowBox[{"(", 
                  RowBox[{"px", "-", "sx"}], ")"}]}], "+", 
                RowBox[{"py", " ", "sx"}], "+", 
                RowBox[{"dx", " ", "sy"}], "-", 
                RowBox[{"px", " ", "sy"}]}], ")"}], " ", "v1z"}]}], ")"}], 
           "/", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"dz", " ", "v1y", " ", "v2x"}], "-", 
             RowBox[{"sz", " ", "v1y", " ", "v2x"}], "-", 
             RowBox[{"dy", " ", "v1z", " ", "v2x"}], "+", 
             RowBox[{"sy", " ", "v1z", " ", "v2x"}], "-", 
             RowBox[{"dz", " ", "v1x", " ", "v2y"}], "+", 
             RowBox[{"sz", " ", "v1x", " ", "v2y"}], "+", 
             RowBox[{"dx", " ", "v1z", " ", "v2y"}], "-", 
             RowBox[{"sx", " ", "v1z", " ", "v2y"}], "+", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"dy", " ", "v1x"}], "-", 
                RowBox[{"sy", " ", "v1x"}], "+", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"-", "dx"}], "+", "sx"}], ")"}], " ", "v1y"}]}], 
               ")"}], " ", "v2z"}]}], ")"}]}]}], ";", 
         RowBox[{"k", "=", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"dz", " ", "v1y", " ", "v2x"}], "-", 
             RowBox[{"pz", " ", "v1y", " ", "v2x"}], "-", 
             RowBox[{"dy", " ", "v1z", " ", "v2x"}], "+", 
             RowBox[{"py", " ", "v1z", " ", "v2x"}], "-", 
             RowBox[{"dz", " ", "v1x", " ", "v2y"}], "+", 
             RowBox[{"pz", " ", "v1x", " ", "v2y"}], "+", 
             RowBox[{"dx", " ", "v1z", " ", "v2y"}], "-", 
             RowBox[{"px", " ", "v1z", " ", "v2y"}], "+", 
             RowBox[{"dy", " ", "v1x", " ", "v2z"}], "-", 
             RowBox[{"py", " ", "v1x", " ", "v2z"}], "-", 
             RowBox[{"dx", " ", "v1y", " ", "v2z"}], "+", 
             RowBox[{"px", " ", "v1y", " ", "v2z"}]}], ")"}], "/", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"dz", " ", "v1y", " ", "v2x"}], "-", 
             RowBox[{"sz", " ", "v1y", " ", "v2x"}], "-", 
             RowBox[{"dy", " ", "v1z", " ", "v2x"}], "+", 
             RowBox[{"sy", " ", "v1z", " ", "v2x"}], "-", 
             RowBox[{"dz", " ", "v1x", " ", "v2y"}], "+", 
             RowBox[{"sz", " ", "v1x", " ", "v2y"}], "+", 
             RowBox[{"dx", " ", "v1z", " ", "v2y"}], "-", 
             RowBox[{"sx", " ", "v1z", " ", "v2y"}], "+", 
             RowBox[{"dy", " ", "v1x", " ", "v2z"}], "-", 
             RowBox[{"sy", " ", "v1x", " ", "v2z"}], "-", 
             RowBox[{"dx", " ", "v1y", " ", "v2z"}], "+", 
             RowBox[{"sx", " ", "v1y", " ", "v2z"}]}], ")"}]}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"i", ",", "j", ",", "k"}], "}"}]}]}], "]"}]}]}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.86306661647994*^9, 3.863066622493642*^9}},
 CellLabel->"In[36]:=",ExpressionUUID->"0c012b14-f5de-43de-a743-90892264ca4f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"DoesLineTriangleIntersect", "[", 
   RowBox[{"li_", ",", "tr_"}], "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"params", "=", 
       RowBox[{"LineTriangleIntersectionParameters", "[", 
        RowBox[{"li", ",", "tr"}], "]"}]}], ",", "i", ",", "j", ",", "k"}], 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"i", "=", 
      RowBox[{"params", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"j", "=", 
      RowBox[{"params", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"k", "=", 
      RowBox[{"params", "[", 
       RowBox[{"[", "3", "]"}], "]"}]}], ";", " ", "\[IndentingNewLine]", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"i", "\[GreaterEqual]", " ", "0"}], ")"}], "&&", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"i", "+", "j"}], "\[LessEqual]", " ", "1"}], ")"}], "&&", " ", 
      RowBox[{"(", 
       RowBox[{"j", "\[GreaterEqual]", " ", "0"}], ")"}], "&&", " ", 
      RowBox[{"(", 
       RowBox[{"k", "\[GreaterEqual]", " ", "0"}], ")"}], "&&", 
      RowBox[{"(", 
       RowBox[{"k", "\[LessEqual]", " ", "1"}], ")"}]}]}]}], "]"}]}]], "Input",\

 CellChangeTimes->{{3.86306661647994*^9, 3.863066626488214*^9}, {
  3.8630702164023848`*^9, 3.863070234141308*^9}, {3.863076102782857*^9, 
  3.863076107430682*^9}},
 CellLabel->"In[37]:=",ExpressionUUID->"b2f64a3d-cf43-4cf4-8fa7-daf39b88bec8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"LineTriangleIntersection", "[", 
   RowBox[{"li_", ",", "tr_"}], "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"params", "=", 
       RowBox[{"LineTriangleIntersectionParameters", "[", 
        RowBox[{"li", ",", "tr"}], "]"}]}], ",", "k", ",", "sx", ",", "sy", 
      ",", "sz", ",", "dx", ",", "dy", ",", "dz", ",", "s", ",", "d"}], "}"}],
     ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"k", "=", 
      RowBox[{"params", "[", 
       RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"s", "=", " ", 
      RowBox[{"li", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"d", " ", "=", " ", 
      RowBox[{"li", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", " ", "[", 
      RowBox[{
       RowBox[{"DoesLineTriangleIntersect", "[", 
        RowBox[{"li", ",", "tr"}], "]"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"k", " ", "s"}], " ", "+", " ", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1", "-", "k"}], ")"}], " ", "d"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"Infinity", ",", "Infinity", ",", "Infinity"}], "}"}]}], 
      "]"}]}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.86306661647994*^9, 3.863066626488214*^9}, {
  3.8630702164023848`*^9, 3.863070234141308*^9}, {3.863076102782857*^9, 
  3.863076107430682*^9}},
 CellLabel->"In[38]:=",ExpressionUUID->"1798934a-2fd1-4d61-9e1a-0936695af2fe"]
}, Closed]],

Cell[CellGroupData[{

Cell["Simulation of Reflected Signals", "Subsubsection",
 CellChangeTimes->{{3.8630645527754393`*^9, 
  3.863064580296919*^9}},ExpressionUUID->"b3aaedfd-57c6-4e56-8c90-\
32387ff22474"],

Cell["\<\
This function is based on Prof. Christian Schindelhauer\[CloseCurlyQuote]s \
implementation of the ILDARS prototype.\
\>", "Text",
 CellChangeTimes->{{3.863069320677636*^9, 3.8630693647463207`*^9}, {
  3.863070020258607*^9, 
  3.863070025066963*^9}},ExpressionUUID->"2e940e07-b5f7-46fc-8e5d-\
faf38e99d86b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"mirror", " ", "a", " ", "point", " ", "on", " ", "a", " ", 
     RowBox[{"triangle", ".", " ", "If"}], " ", "no", " ", "mirror", " ", 
     "point", " ", "exists"}], ",", " ", 
    RowBox[{
     RowBox[{"{", "}"}], " ", "is", " ", 
     RowBox[{"returned", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"ComputeMirrorPoint", "[", 
     RowBox[{"triangle_", ",", "point_"}], "]"}], ":=", "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"triangleNormal", ",", "pointNormal", ",", "mirrorPoint"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
       "mirror", " ", "point", " ", "on", " ", "the", " ", "infinite", " ", 
        "plane", " ", "parallel", " ", "to", " ", "triangle"}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"triangleNormal", "=", 
        RowBox[{"Normalize", "[", 
         RowBox[{"Cross", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"triangle", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "-", 
            RowBox[{"triangle", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], ",", 
           RowBox[{
            RowBox[{"triangle", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "-", 
            RowBox[{"triangle", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}]}], "]"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"mirrorPoint", "=", 
        RowBox[{"point", "+", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"triangle", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "-", "point"}], ")"}], ".", 
             "triangleNormal"}], ")"}], "*", "triangleNormal", "*", "2"}], 
          ")"}]}]}], ";", "\[IndentingNewLine]", "mirrorPoint"}]}], 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"CellPrint", "[", 
        RowBox[{"Graphics3D", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Triangle", "[", "triangle", "]"}], ",", 
           RowBox[{"Point", "[", "point", "]"}], ",", 
           RowBox[{"Arrow", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"triangle", "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{
               RowBox[{"triangle", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "+", "triangleNormal"}]}], 
             "}"}], "]"}], ",", 
           RowBox[{"Arrow", "[", 
            RowBox[{"{", 
             RowBox[{"point", ",", "mirrorPoint"}], "}"}], "]"}]}], "}"}], 
         "]"}], "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"Print", "[", 
        RowBox[{"DoesLineTriangleIntersect", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"point", ",", "mirrorPoint"}], "}"}], ",", "triangle"}], 
         "]"}], "]"}], ";"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"(*", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"!", 
          RowBox[{"DoesLineTriangleIntersect", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"point", ",", "mirrorPoint"}], "}"}], ",", "triangle"}], 
           "]"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"CellPrint", "[", 
           RowBox[{"Graphics3D", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Triangle", "[", "triangle", "]"}], ",", 
              RowBox[{"Point", "[", "point", "]"}], ",", 
              RowBox[{"Arrow", "[", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"triangle", "[", 
                  RowBox[{"[", "1", "]"}], "]"}], ",", 
                 RowBox[{
                  RowBox[{"triangle", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "+", "triangleNormal"}]}], 
                "}"}], "]"}], ",", 
              RowBox[{"Arrow", "[", 
               RowBox[{"{", 
                RowBox[{"point", ",", "mirrorPoint"}], "}"}], "]"}]}], "}"}], 
            "]"}], "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}], 
      "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"DoesLineTriangleIntersect", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"point", ",", "mirrorPoint"}], "}"}], ",", "triangle"}], 
         "]"}], ",", "mirrorPoint", ",", 
        RowBox[{"{", "}"}]}], "]"}], "*)"}], "\[IndentingNewLine]", "]"}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"ComputeMirrorPoint", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "2", ",", "0"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"2", ",", "0", ",", 
         RowBox[{"-", "1"}]}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"1", ",", "1", ",", "0.5"}], "}"}]}], "]"}]}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQBWIQXXG/wNfsxBvHZ9+Mg0C02ZzP+SB6xYdjZWD60LIG
EM1iqdkMojeccO4D0THbr20G0VcWfNsDok/9WrAPRB9z7DwKFrepOAailzlx
XwTRYom7r4DoAmMRfwsgfe+sYACIPjr3bjiIXuXBGAOie0r2poHoeDWnehDN
obK3BUQvsudpA9Fsi5S6QPSewwU9IPoBk+oksHzvzGUg+vWcbxtAdJdXzTYQ
zRU74wiIthGVOg6iJUu6r4FoOzbeGyA6wsr6EYj+xWAPpqOYSrwtQfK2T/1A
9Nz+zQdtgfSadK6jIHqbh88pEF1tMB1MK13YwmAHpBV6JzOCaAAcxbAs
  "],
 CellLabel->"In[39]:=",ExpressionUUID->"e81b78f0-dd7f-47a3-84b1-7e05137ceb9f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0.20000000000000007`", ",", "1.`", ",", 
   RowBox[{"-", "1.0999999999999999`"}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.865310219535755*^9, 3.8653114849647818`*^9, 3.8656572090896387`*^9, 
   3.865666705992529*^9, 3.865835925251465*^9, 3.86584755001613*^9, 
   3.865851579144309*^9, 3.865851806751061*^9, 3.865920374936949*^9, 
   3.866094396578072*^9, 3.8665340608148117`*^9, 3.86668949069812*^9, 
   3.866690973079357*^9, 3.8666913476422253`*^9, 3.8666914627077217`*^9, 
   3.866694996830117*^9, 3.866695084242001*^9, 3.8675650285218554`*^9, 
   3.867565581133348*^9, 3.867565763438539*^9, 3.8677319279173203`*^9, 
   3.867752295008296*^9, 3.867753704688176*^9, 3.86775559051052*^9, 
   3.8677571407907343`*^9, 3.867757424835732*^9, 3.8677577158890553`*^9, 
   3.868852798738236*^9, 3.868880272947349*^9, 3.8689302772360363`*^9, 
   3.8689429546980143`*^9, 3.868956637554316*^9, 3.870069767965744*^9, 
   3.8701684693659563`*^9, 3.870247207325783*^9, 3.8702688316111298`*^9, 
   3.870276969870202*^9, 3.870279255438081*^9, 3.870279337949382*^9, 
   3.870280894496336*^9, 3.870324515776932*^9, 3.870327326187965*^9, 
   3.870327560132485*^9, 3.870328437855245*^9, 3.8703285432524757`*^9, 
   3.870328588972555*^9, 3.8703286698830757`*^9, 3.870328915419703*^9, 
   3.87032906007283*^9, 3.870329353266573*^9, 3.870333429199749*^9, 
   3.8703357906743402`*^9, 3.870336013956061*^9, 3.8703362116287813`*^9, 
   3.870337541392364*^9, 3.870343835585854*^9, 3.870430377450583*^9, 
   3.870435671231114*^9, 3.870440819347815*^9, 3.870442194773654*^9, 
   3.870442930536858*^9, 3.870444849066752*^9, 3.8704460990078087`*^9, {
   3.8704461445080547`*^9, 3.870446173986515*^9}, 3.87044690231999*^9, 
   3.870588600226337*^9, 3.870589131000457*^9, 3.870589577501514*^9, 
   3.870590747018209*^9, 3.870590927796393*^9, 3.87059170541673*^9, 
   3.87059268199655*^9, 3.870593123048441*^9, {3.870623123974419*^9, 
   3.870623152956698*^9}, 3.870623466804603*^9, 3.870664770506221*^9, 
   3.8706740552690163`*^9, 3.871042838884779*^9, 3.871044635167343*^9, 
   3.871119301991293*^9, 3.8711252325002832`*^9, 3.8711485011578207`*^9, 
   3.8711818800264263`*^9, 3.871184723155875*^9, 3.87118532078444*^9, 
   3.871185420261409*^9, 3.871359166758781*^9, {3.871359430776126*^9, 
   3.871359458062131*^9}, 3.871359881337291*^9, 3.871359913089576*^9, 
   3.871374261508524*^9, 3.871374514592126*^9, 3.8713760019910803`*^9, 
   3.87137611229792*^9, 3.871376441987351*^9, 3.873349278923943*^9, 
   3.8733497792822857`*^9, 3.8733516517180557`*^9, 3.873352084626829*^9},
 CellLabel->"Out[40]=",ExpressionUUID->"46064e7b-a26d-4fcb-985d-da689f7f2c33"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Error Simulation", "Subsubsection",
 CellChangeTimes->{{3.8630821489834547`*^9, 
  3.863082151451144*^9}},ExpressionUUID->"b7376488-cc8d-4df2-8630-\
f5bec8ce274b"],

Cell["\<\
Implementation for directional error was taken from Tobias Grugel\
\>", "Text",
 CellChangeTimes->{{3.863082495647251*^9, 
  3.863082570272378*^9}},ExpressionUUID->"d8e02f6e-e9d1-4a53-ad26-\
91f16e9568bd"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"RandomOrthogonalVector", "[", 
    RowBox[{"vector_", ",", "angle_"}], "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"normalizedvector", "=", " ", 
        RowBox[{"vector", "/", 
         RowBox[{"Norm", "[", "vector", "]"}]}]}], ",", " ", 
       "rearrangedvector", " ", ",", " ", "tangent", ",", " ", "bitangent", 
       ",", " ", "randomvector"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"rearrangedvector", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"-", "1"}], "*", 
          RowBox[{"normalizedvector", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}], ",", " ", 
         RowBox[{"normalizedvector", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"normalizedvector", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"tangent", " ", "=", " ", 
       RowBox[{"Cross", "[", 
        RowBox[{"normalizedvector", ",", "rearrangedvector"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"bitangent", "=", 
       RowBox[{"Cross", "[", 
        RowBox[{"normalizedvector", ",", "tangent"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"randomvector", " ", "=", " ", 
       RowBox[{
        RowBox[{"tangent", "*", 
         RowBox[{"Sin", "[", "angle", "]"}]}], "+", 
        RowBox[{"bitangent", "*", 
         RowBox[{"Cos", "[", "angle", "]"}]}]}]}], ";", "\[IndentingNewLine]",
       "randomvector"}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"VonMisesAngleMeasurement", "[", 
   RowBox[{"M_", ",", "concentration_"}], "]"}], ":=", "\[IndentingNewLine]", 
  
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"phi", " ", "=", " ", 
       RowBox[{"RandomReal", "[", 
        RowBox[{"VonMisesDistribution", "[", 
         RowBox[{"0", ",", "concentration"}], "]"}], "]"}]}], ",", 
      "randomvector", ",", " ", "angle"}], "}"}], ",", "\[IndentingNewLine]", 
    
    RowBox[{
     RowBox[{"angle", " ", "=", " ", 
      RowBox[{"RandomReal", "[", 
       RowBox[{"VonMisesDistribution", "[", 
        RowBox[{"0", ",", "concentration"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"randomvector", " ", "=", " ", 
      RowBox[{"RandomOrthogonalVector", "[", 
       RowBox[{"M", ",", "angle"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"RotationMatrix", "[", 
       RowBox[{"phi", ",", " ", "randomvector"}], "]"}], ".", "M"}]}]}], 
   "]"}]}]}], "Input",
 CellChangeTimes->{{3.863082470456098*^9, 3.863082489997923*^9}, {
  3.8630826049494963`*^9, 3.8630826052328587`*^9}, {3.863083169463677*^9, 
  3.863083170666006*^9}},
 CellLabel->"In[41]:=",ExpressionUUID->"a108e13f-ff7d-4c51-b3b9-ea7c42b6d6ba"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SimulateDirectionalErrorForSingleVector", "[", 
   RowBox[{"vector_", ",", "concentration_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"VonMisesAngleMeasurement", "[", 
   RowBox[{"vector", ",", "concentration"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.863082163388913*^9, 3.86308221201503*^9}, {
  3.863082401499803*^9, 3.863082435702011*^9}, {3.863082590699354*^9, 
  3.863082634244519*^9}, {3.863082686999898*^9, 3.863082695141403*^9}, {
  3.864294284143176*^9, 3.864294288034728*^9}, {3.86429433733521*^9, 
  3.8642943443004436`*^9}, {3.865310321857409*^9, 3.865310377293975*^9}},
 CellLabel->"In[43]:=",ExpressionUUID->"a96b01e6-488e-4a3a-9340-55aa77a3ae33"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SimulateDirectionalError", "[", 
   RowBox[{"measurements_", ",", "contentration_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Table", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"measurement", "[", 
       RowBox[{"[", "1", "]"}], "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"VonMisesAngleMeasurement", "[", 
       RowBox[{
        RowBox[{"measurement", "[", 
         RowBox[{"[", "2", "]"}], "]"}], ",", "contentration"}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "3", "]"}], "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "4", "]"}], "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "5", "]"}], "]"}]}], "}"}], "\[IndentingNewLine]", ",", 
    RowBox[{"{", 
     RowBox[{"measurement", ",", "measurements"}], "}"}]}], "]"}]}]], "Input",\

 CellChangeTimes->{{3.863082163388913*^9, 3.86308221201503*^9}, {
  3.863082401499803*^9, 3.863082435702011*^9}, {3.863082590699354*^9, 
  3.863082634244519*^9}, {3.863082686999898*^9, 3.863082695141403*^9}, {
  3.864294284143176*^9, 3.864294288034728*^9}, {3.86429433733521*^9, 
  3.8642943443004436`*^9}, {3.865310321857409*^9, 3.865310377293975*^9}, {
  3.8658527457106133`*^9, 3.8658527496068077`*^9}},
 CellLabel->"In[44]:=",ExpressionUUID->"49e57d83-81fb-4f8c-97a7-ac57253e4df3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SimulateDeltaError", "[", 
   RowBox[{"measurements_", ",", "deltaError_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Table", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"measurement", "[", 
       RowBox[{"[", "1", "]"}], "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "2", "]"}], "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"Abs", "[", 
       RowBox[{
        RowBox[{"measurement", "[", 
         RowBox[{"[", "3", "]"}], "]"}], "+", 
        RowBox[{"RandomReal", "[", 
         RowBox[{"NormalDistribution", "[", 
          RowBox[{"0", ",", "deltaError"}], "]"}], "]"}]}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "4", "]"}], "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "5", "]"}], "]"}]}], "}"}], "\[IndentingNewLine]", ",", 
    RowBox[{"{", 
     RowBox[{"measurement", ",", "measurements"}], "}"}]}], "]"}]}]], "Input",\

 CellChangeTimes->{{3.863082163388913*^9, 3.863082214385984*^9}, 
   3.863082439131393*^9, {3.863082639421835*^9, 3.863082676627021*^9}, {
   3.863082707955833*^9, 3.863082720276306*^9}, {3.86429429805809*^9, 
   3.8642943140632067`*^9}, {3.865852752213604*^9, 3.865852758375486*^9}},
 CellLabel->"In[45]:=",ExpressionUUID->"5750a3a1-e6ee-4a31-aeea-24b21fba4f15"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SimulateDropDirectSignals", "[", 
   RowBox[{"measurements_", ",", "directSignalDiscardFactor_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "directSignalsToRemove", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"directSignalsToRemove", "=", 
      RowBox[{"RandomSample", "[", 
       RowBox[{"DeleteDuplicates", "[", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"measurement", "[", 
           RowBox[{"[", "1", "]"}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"measurement", ",", "measurements"}], "}"}]}], "]"}], 
        "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"directSignalsToRemove", "=", 
      RowBox[{"Take", "[", 
       RowBox[{"directSignalsToRemove", ",", 
        RowBox[{"Round", "[", 
         RowBox[{
          RowBox[{"Length", "[", "directSignalsToRemove", "]"}], "*", 
          "directSignalDiscardFactor"}], "]"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Select", "[", 
      RowBox[{"measurements", ",", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"MemberQ", "[", 
          RowBox[{"directSignalsToRemove", ",", 
           RowBox[{"#", "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], "]"}]}], "&"}]}], "]"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.863082163388913*^9, 3.8630822166940193`*^9}, 
   3.86308244025133*^9, {3.8630828008036203`*^9, 3.863083019854476*^9}, {
   3.863083055310063*^9, 3.863083143665921*^9}, {3.8630832426213827`*^9, 
   3.863083272907278*^9}, {3.863083305568129*^9, 3.8630833129653263`*^9}, {
   3.863083426499786*^9, 3.86308342830411*^9}},
 CellLabel->"In[46]:=",ExpressionUUID->"bbfff6f4-a5df-4186-bc4a-3cf1a2ed673e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SimulateDropReflectedSignals", "[", 
   RowBox[{"measurements_", ",", "reflectionDiscardFactor_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Take", "[", 
   RowBox[{
    RowBox[{"RandomSample", "[", "measurements", "]"}], ",", 
    RowBox[{"Round", "[", 
     RowBox[{
      RowBox[{"Length", "[", "measurements", "]"}], "*", 
      "reflectionDiscardFactor"}], "]"}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.863082163388913*^9, 3.863082218725894*^9}, 
   3.86308244152864*^9, {3.863083446146001*^9, 3.863083467481784*^9}, {
   3.863083498774905*^9, 3.86308351954711*^9}},
 CellLabel->"In[47]:=",ExpressionUUID->"d22736bc-52d9-4081-9f14-486652882ad3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SimulateWallError", "[", 
   RowBox[{"measurements_", ",", "wallErrorFactor_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"directSignals", "=", 
       RowBox[{"DeleteDuplicates", "[", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"measurement", "[", 
           RowBox[{"[", "1", "]"}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"measurement", ",", "measurements"}], "}"}]}], "]"}], 
        "]"}]}], ",", 
      RowBox[{"newMeasurements", "=", 
       RowBox[{"RandomSample", "[", "measurements", "]"}]}]}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"directSignalAlternatives", "=", 
           RowBox[{"Select", "[", 
            RowBox[{"directSignals", ",", 
             RowBox[{
              RowBox[{"#", "!=", 
               RowBox[{
                RowBox[{"newMeasurements", "[", 
                 RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}]}], "&"}]}], "]"}]}], "}"}], 
         ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"newMeasurements", "[", 
           RowBox[{"[", "measurementIndex", "]"}], "]"}], "=", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"RandomChoice", "[", "directSignalAlternatives", "]"}], 
            ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"newMeasurements", "[", 
              RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}], ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"newMeasurements", "[", 
              RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
             RowBox[{"[", "3", "]"}], "]"}], ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"newMeasurements", "[", 
              RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
             RowBox[{"[", "4", "]"}], "]"}], ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"newMeasurements", "[", 
              RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
             RowBox[{"[", "5", "]"}], "]"}]}], "}"}]}]}], 
        "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"measurementIndex", ",", "1", ",", 
         RowBox[{"Round", "[", 
          RowBox[{
           RowBox[{"Length", "[", "measurements", "]"}], "*", 
           "wallErrorFactor"}], "]"}]}], "}"}]}], "]"}], ";", 
     "\[IndentingNewLine]", "newMeasurements"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.863082163388913*^9, 3.863082218725894*^9}, 
   3.8630824426075974`*^9, {3.863084097042214*^9, 3.863084226736421*^9}, {
   3.863084346803871*^9, 3.863084544326741*^9}, 3.863084728254744*^9, {
   3.86308503274676*^9, 3.8630850691015987`*^9}, {3.8630852391920347`*^9, 
   3.863085259747797*^9}, {3.863085293733306*^9, 3.863085308794938*^9}, {
   3.863085426305352*^9, 3.863085426643887*^9}, {3.863086590352045*^9, 
   3.863086592601297*^9}, {3.863086631902047*^9, 3.863086735180664*^9}, {
   3.8630867752291307`*^9, 3.8630867885058327`*^9}, {3.8642943672986298`*^9, 
   3.8642943773241796`*^9}, {3.865852772418277*^9, 3.86585278053467*^9}, 
   3.87008299651392*^9},
 CellLabel->"In[48]:=",ExpressionUUID->"3c34bb3d-6980-4b3e-ad1a-5d3ab7a32f6a"]
}, Closed]]
}, Closed]],

Cell["Examples and Visualisation of Error", "Subsection",
 CellChangeTimes->{{3.863063685551692*^9, 
  3.863063698174666*^9}},ExpressionUUID->"1f9c334f-8181-4fff-89ec-\
cfe5f65bda84"]
}, Closed]],

Cell[CellGroupData[{

Cell["Reflection Clustering", "Section",
 CellChangeTimes->{{3.864283094077132*^9, 
  3.864283100424013*^9}},ExpressionUUID->"b21f521b-aab4-459e-8d15-\
0aef219bf751"],

Cell["\<\
In this Section, we will use the previously simulated direct and reflected \
sound signals and group the reflections by the walls they were reflected \
from. There are four different methods we use: The Gnomonic Projection, \
Spectral Clustering, Community Detection and Unit Sphere Inversion.\
\>", "Text",
 CellChangeTimes->{{3.864283108574731*^9, 3.86428320569843*^9}, {
   3.864283254635087*^9, 3.864283289939384*^9}, 
   3.864283598910136*^9},ExpressionUUID->"a19e8778-6836-4af5-b20c-\
28f4570b64b0"],

Cell[CellGroupData[{

Cell["Unit Sphere Inversion", "Subsection",
 CellChangeTimes->{{3.864283304235578*^9, 
  3.86428330739391*^9}},ExpressionUUID->"920ea727-b59e-475a-a32a-\
2c782b7a3203"],

Cell["\<\
Unit Sphere Inversions are used as implemented by Milan M\[UDoubleDot]ller in \
the respective Bachelor\[CloseCurlyQuote]s Project. The Algorithm used here \
is \[OpenCurlyDoubleQuote]Lines into Bins\[CloseCurlyDoubleQuote] which had \
better accuracy and performance than the other Unit Sphere Inversion based \
algorithms.\
\>", "Text",
 CellChangeTimes->{{3.8642833140338783`*^9, 3.8642833785681133`*^9}, {
  3.8642835766502657`*^9, 
  3.864283587728079*^9}},ExpressionUUID->"f53982f7-6ba7-4cfc-9433-\
d95d1eb25993"],

Cell[CellGroupData[{

Cell["Helper Functions", "Subsubsection",
 CellChangeTimes->{{3.864283396020813*^9, 
  3.864283398590774*^9}},ExpressionUUID->"d3552dfb-16f8-4641-ab87-\
c605b76c41d0"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"InvertVector3D", "[", 
    RowBox[{"x_", ",", " ", "y_", ",", " ", "z_"}], "]"}], " ", ":=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"x", " ", "/", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"x", "^", "2"}], "+", 
        RowBox[{"y", "^", "2"}], "+", 
        RowBox[{"z", "^", "2"}]}], ")"}]}], ",", " ", 
     RowBox[{"y", " ", "/", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"x", "^", "2"}], " ", "+", " ", 
        RowBox[{"y", "^", "2"}], " ", "+", " ", 
        RowBox[{"z", "^", "2"}]}], ")"}]}], ",", " ", 
     RowBox[{"z", " ", "/", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"x", "^", "2"}], " ", "+", " ", 
        RowBox[{"y", "^", "2"}], " ", "+", " ", 
        RowBox[{"z", "^", "2"}]}], ")"}]}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
  3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
  3.864283743300733*^9}, {3.864283830970675*^9, 3.864283837424225*^9}, {
  3.8642843051874847`*^9, 3.864284357432743*^9}},
 CellLabel->"In[49]:=",ExpressionUUID->"fd727249-1f9d-4d70-b7a4-4be6e76e64ae"],

Cell[BoxData[
 RowBox[{
  RowBox[{"InvertCircle3D", "[", 
   RowBox[{"center_", ",", " ", "radius_", ",", " ", "normal_"}], "]"}], " ", 
  ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"mirrorPoint", ",", "linePosition", ",", "lineDirection"}], 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{"circle", " ", "goes", " ", "through", " ", "origin"}], ",", 
      " ", 
      RowBox[{"so", " ", "it", " ", 
       RowBox[{"get", "'"}], "s", " ", "mapped", " ", "to", " ", "a", " ", 
       "line"}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"mirrorPoint", " ", "=", " ", 
      RowBox[{"center", " ", "*", " ", "2"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"linePosition", " ", "=", " ", 
      RowBox[{"InvertVector3D", "[", 
       RowBox[{
        RowBox[{"mirrorPoint", "[", 
         RowBox[{"[", "1", "]"}], "]"}], ",", 
        RowBox[{"mirrorPoint", "[", 
         RowBox[{"[", "2", "]"}], "]"}], ",", 
        RowBox[{"mirrorPoint", "[", 
         RowBox[{"[", "3", "]"}], "]"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"lineDirection", " ", "=", " ", 
      RowBox[{"Normalize", "[", 
       RowBox[{"Cross", "[", 
        RowBox[{"linePosition", ",", "normal"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"linePosition", ",", "lineDirection"}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
  3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
  3.864283743300733*^9}, {3.864283830970675*^9, 3.864283837424225*^9}, {
  3.8642843051874847`*^9, 3.8642843608010883`*^9}},
 CellLabel->"In[50]:=",ExpressionUUID->"cd9917bb-5130-4508-929c-24bf5271fac1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"InvertSegments", "[", "segments_", "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"segmentInversions", ",", "inversion", ",", "i"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"segmentInversions", " ", "=", " ", 
      RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"For", " ", "[", 
      RowBox[{
       RowBox[{"i", "=", "1"}], ",", 
       RowBox[{"i", "<=", 
        RowBox[{"Length", "[", "segments", "]"}]}], ",", 
       RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"inversion", " ", "=", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"InvertVector3D", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"segments", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"segments", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"segments", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "3", "]"}], "]"}]}], "]"}], ",", 
           RowBox[{"InvertVector3D", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"segments", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"segments", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"segments", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], "[", 
              RowBox[{"[", "3", "]"}], "]"}]}], "]"}]}], "}"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"AppendTo", "[", 
         RowBox[{"segmentInversions", ",", "inversion"}], "]"}]}]}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     "segmentInversions"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
  3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
  3.864283743300733*^9}, {3.864283830970675*^9, 3.864283837424225*^9}, {
  3.8642843051874847`*^9, 3.864284371267983*^9}},
 CellLabel->"In[51]:=",ExpressionUUID->"2fc71f70-2c86-47ed-b60b-0529ccbe67bf"],

Cell[BoxData[
 RowBox[{
  RowBox[{"InvertCircles", "[", 
   RowBox[{"circles_", ",", 
    RowBox[{"offset_", ":", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0"}], "}"}]}]}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "circleInversions", ",", "inversion", ",", "inversionLine", ",", "i"}], 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"circleInversions", " ", "=", " ", 
      RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"For", "[", 
      RowBox[{
       RowBox[{"i", "=", "1"}], ",", 
       RowBox[{"i", "<=", 
        RowBox[{"Length", "[", "circles", "]"}]}], ",", 
       RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"inversion", " ", "=", " ", 
         RowBox[{"InvertCircle3D", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"circles", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", 
           RowBox[{
            RowBox[{"circles", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "2", "]"}], "]"}], ",", 
           RowBox[{
            RowBox[{"circles", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "3", "]"}], "]"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"inversionLine", " ", "=", " ", 
         RowBox[{"InfiniteLine", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"inversion", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "+", "offset"}], ",", 
           RowBox[{"inversion", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"AppendTo", "[", 
         RowBox[{"circleInversions", ",", "inversionLine"}], "]"}]}]}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     "circleInversions"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
  3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
  3.864283743300733*^9}, {3.864283830970675*^9, 3.864283837424225*^9}, {
  3.8642843051874847`*^9, 3.8642843223924007`*^9}, {3.864284376831148*^9, 
  3.8642844140435953`*^9}},
 CellLabel->"In[52]:=",ExpressionUUID->"06854cd9-53f1-4be1-8f6f-284656659165"],

Cell[BoxData[
 RowBox[{
  RowBox[{"CircleFromMeasurement", "[", "measurement_", "]"}], " ", ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "v", ",", "w", ",", "delta", ",", "center", ",", "radius", ",", 
      "normal"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"v", " ", "=", " ", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"w", " ", "=", " ", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"delta", " ", "=", " ", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"center", " ", "=", " ", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"delta", "/", "2"}], ")"}], 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"w", "-", "v"}], ")"}], "/", 
        RowBox[{
         RowBox[{"Norm", "[", 
          RowBox[{"w", "-", "v"}], "]"}], "^", "2"}]}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"radius", " ", "=", " ", 
      RowBox[{"Norm", "[", "center", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"normal", " ", "=", " ", 
      RowBox[{"Normalize", "[", 
       RowBox[{"Cross", "[", 
        RowBox[{"v", ",", "w"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"center", ",", " ", "radius", ",", " ", "normal"}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
   3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
   3.864283743300733*^9}, {3.864283830970675*^9, 3.864283837424225*^9}, {
   3.8642843051874847`*^9, 3.8642843223924007`*^9}, {3.864284376831148*^9, 
   3.8642844225248747`*^9}, {3.864284453046195*^9, 3.8642844998477583`*^9}, {
   3.864284912207149*^9, 3.8642849564188223`*^9}, 3.8642850951634283`*^9},
 CellLabel->"In[53]:=",ExpressionUUID->"bc35c6f2-b5cb-4389-91f8-9199b21db25a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SegmentFromMeasurement", "[", "measurement_", "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "Segments", ",", " ", "v", ",", " ", "w", ",", " ", "delta", ",", " ", 
      "p1", ",", " ", "p2"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Segments", " ", "=", " ", 
      RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"v", " ", "=", " ", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"w", " ", "=", " ", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"delta", " ", "=", " ", 
      RowBox[{"measurement", "[", 
       RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"p1", " ", "=", " ", 
      RowBox[{"delta", " ", "*", " ", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"w", "-", "v"}], ")"}], "/", 
        RowBox[{
         RowBox[{"Norm", "[", 
          RowBox[{"w", "-", "v"}], "]"}], "^", "2"}]}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"p2", " ", "=", " ", 
      RowBox[{
       RowBox[{"delta", "/", "2"}], "*", "w"}]}], ";", "\[IndentingNewLine]", 
     
     RowBox[{"{", 
      RowBox[{"p1", ",", "p2"}], "}"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
   3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
   3.864283743300733*^9}, {3.864283830970675*^9, 3.864283837424225*^9}, {
   3.8642843051874847`*^9, 3.8642843223924007`*^9}, {3.864284376831148*^9, 
   3.8642844225248747`*^9}, {3.864284453046195*^9, 3.8642844998477583`*^9}, {
   3.864284912207149*^9, 3.8642849564188223`*^9}, 3.864285096784939*^9},
 CellLabel->"In[54]:=",ExpressionUUID->"05dd38f1-13a4-41ab-9864-ff5b30c06c03"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"algorithm", " ", "taken", " ", "from", " ", 
     RowBox[{"https", ":"}]}], "//", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"stackoverflow", ".", "com"}], "/", "questions"}], "/", 
       "27733634"}], "/", "closest"}], "-", "point", "-", "on", "-", "a", "-",
      "3", "-", "dimensional", "-", "line", "-", "to", "-", "another", "-", 
     "point"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"GetClosestPointOnLineToGivenPoint", "[", 
    RowBox[{"line_", ",", "point_"}], "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"lineNormal", ",", "v"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"lineNormal", "=", 
       RowBox[{"Normalize", "[", 
        RowBox[{
         RowBox[{"line", "[", 
          RowBox[{"[", "2", "]"}], "]"}], "-", 
         RowBox[{"line", "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"v", "=", 
       RowBox[{"point", "-", 
        RowBox[{"line", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"lineNormal", ".", "v"}], ")"}], "*", "lineNormal"}], "+", 
       RowBox[{"line", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}]}]}], "\[IndentingNewLine]", 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
  3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
  3.864283743300733*^9}, {3.864283830970675*^9, 3.864283837424225*^9}, {
  3.8642843051874847`*^9, 3.864284309635911*^9}},
 CellLabel->"In[55]:=",ExpressionUUID->"c4c7dac9-34ab-4edd-b050-f7796739a4b2"],

Cell[BoxData[
 RowBox[{
  RowBox[{"IsPointOnFiniteLine", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"p1_", ",", "p2_"}], "}"}], ",", "p3_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "minX", ",", "maxX", ",", "minY", ",", "maxY", ",", "minZ", ",", 
      "maxZ"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"minX", ",", "maxX"}], "}"}], "=", 
      RowBox[{"Sort", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"p1", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"p2", "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], "}"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"minY", ",", "maxY"}], "}"}], "=", 
      RowBox[{"Sort", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"p1", "[", 
          RowBox[{"[", "2", "]"}], "]"}], ",", 
         RowBox[{"p2", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"minZ", ",", "maxZ"}], "}"}], "=", 
      RowBox[{"Sort", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"p1", "[", 
          RowBox[{"[", "3", "]"}], "]"}], ",", 
         RowBox[{"p2", "[", 
          RowBox[{"[", "3", "]"}], "]"}]}], "}"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"CollinearPoints", "[", 
         RowBox[{"{", 
          RowBox[{"p1", ",", "p2", ",", "p3"}], "}"}], "]"}]}], ",", "False", 
       ",", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"minX", "<=", 
           RowBox[{"p3", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "<=", "maxX"}], "&&", 
          RowBox[{"minY", "<=", 
           RowBox[{"p3", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "<=", "maxY"}], "&&", 
          RowBox[{"minZ", "<=", 
           RowBox[{"p3", "[", 
            RowBox[{"[", "3", "]"}], "]"}], "<=", "maxZ"}]}], ",", "True", 
         ",", "False"}], "]"}]}], "\[IndentingNewLine]", "]"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
  3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
  3.864283743300733*^9}, {3.864283830970675*^9, 3.864283837424225*^9}},
 CellLabel->"In[56]:=",ExpressionUUID->"78fe13a6-9315-4f53-aeef-17866c8890d4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "Compute", " ", "closest", " ", "point", " ", "between", " ", "an", " ", 
     "arbitrary", " ", "number", " ", "of", " ", 
     RowBox[{"lines", ".", " ", "Lines"}], " ", "are", " ", "to", " ", "be", 
     " ", "defined", " ", "by", " ", "a", " ", "point", " ", "pX", " ", "on", 
     " ", "the", " ", "line"}], ",", " ", 
    RowBox[{
    "and", " ", "a", " ", "direction", " ", "cosine", " ", "uX", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
       "can", " ", "just", " ", "be", " ", "a", " ", "vector", " ", "in", " ",
         "the", " ", "direction", " ", "of", " ", "the", " ", "line"}], ")"}],
       ".", " ", "Example"}], " ", 
     RowBox[{"input", ":", " ", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"1", ",", "2", ",", "3"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"4", ",", "5", ",", "6"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "1", ",", "0"}], "}"}]}], "}"}]}], "}"}]}]}]}], 
   " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"ComputeClosestPoint", "[", "points_", "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "m", ",", "G", ",", "d", ",", "i", ",", "j", ",", "U", ",", "S", ",", 
       "V", ",", "r", ",", "Ucomp", ",", "Scomp", ",", "Vcomp", ",", 
       "solution", ",", "closestPointsOnLines"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"m", "=", 
       RowBox[{"Length", "[", "points", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"G", "=", 
       RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"d", "=", 
       RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Fill", " ", "in", " ", "G", " ", "and", " ", "v"}], " ", 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", "1"}], ",", 
        RowBox[{"i", "<=", "m"}], ",", 
        RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"j", "=", "1"}], ",", 
          RowBox[{"j", "<=", "3"}], ",", 
          RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Block", "[", 
           RowBox[{
            RowBox[{"{", "row", "}"}], ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"row", "=", 
              RowBox[{"Table", "[", 
               RowBox[{"0", ",", 
                RowBox[{"3", "+", "m"}]}], "]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"row", "[", 
               RowBox[{"[", "j", "]"}], "]"}], "=", "1"}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"row", "[", 
               RowBox[{"[", 
                RowBox[{"i", "+", "3"}], "]"}], "]"}], "=", 
              RowBox[{"-", 
               RowBox[{
                RowBox[{
                 RowBox[{"points", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "2", "]"}], "]"}], "[", 
                RowBox[{"[", "j", "]"}], "]"}]}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"AppendTo", "[", 
              RowBox[{"G", ",", "row"}], "]"}], ";", "\[IndentingNewLine]", 
             RowBox[{"AppendTo", "[", 
              RowBox[{"d", ",", 
               RowBox[{
                RowBox[{
                 RowBox[{"points", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "[", 
                RowBox[{"[", "j", "]"}], "]"}]}], "]"}], ";"}]}], 
           "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Det", "[", 
          RowBox[{
           RowBox[{"Transpose", "[", "G", "]"}], ".", "G"}], "]"}], "!=", 
         "0"}], ",", "\[IndentingNewLine]", 
        RowBox[{"(*", " ", 
         RowBox[{"Solve", " ", "using", " ", "least", " ", "squares"}], " ", 
         "*)"}], "\[IndentingNewLine]", 
        RowBox[{"solution", "=", 
         RowBox[{
          RowBox[{"Inverse", "[", 
           RowBox[{
            RowBox[{"Transpose", "[", "G", "]"}], ".", "G"}], "]"}], ".", 
          RowBox[{"Transpose", "[", "G", "]"}], ".", "d"}]}], 
        "\[IndentingNewLine]", ",", " ", 
        RowBox[{"(*", " ", 
         RowBox[{"ELSE", ",", " ", 
          RowBox[{"solve", " ", "using", " ", "SVD"}]}], " ", "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Print", "[", "\"\<Solving for G with SVD\>\"", "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"r", "=", 
          RowBox[{"MatrixRank", "[", "G", "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"U", ",", "S", ",", "V"}], "}"}], "=", 
          RowBox[{"SingularValueDecomposition", "[", "G", "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Simplify", " ", "into", " ", "compact", " ", "form"}], " ",
           "*)"}], "\[IndentingNewLine]", 
         RowBox[{"Ucomp", "=", 
          RowBox[{"U", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"1", ";;", 
              RowBox[{"Length", "[", "U", "]"}]}], ",", 
             RowBox[{"1", ";;", "r"}]}], "]"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"Scomp", "=", 
          RowBox[{"S", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"1", ";;", "r"}], ",", 
             RowBox[{"1", ";;", "r"}]}], "]"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"Vcomp", "=", 
          RowBox[{"V", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"1", ";;", 
              RowBox[{"Length", "[", "V", "]"}]}], ",", 
             RowBox[{"1", ";;", "r"}]}], "]"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"solution", "=", 
          RowBox[{"Vcomp", ".", 
           RowBox[{"Inverse", "[", "Scomp", "]"}], ".", 
           RowBox[{"Transpose", "[", "Ucomp", "]"}], ".", "d"}]}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"closestPointsOnLines", "=", 
       RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", "1"}], ",", 
        RowBox[{"i", "<=", "m"}], ",", 
        RowBox[{"i", "++"}], ",", 
        RowBox[{"AppendTo", "[", 
         RowBox[{"closestPointsOnLines", ",", 
          RowBox[{
           RowBox[{
            RowBox[{"points", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], "+", 
           RowBox[{
            RowBox[{"solution", "[", 
             RowBox[{"[", 
              RowBox[{"3", "+", "i"}], "]"}], "]"}], "*", 
            RowBox[{
             RowBox[{"points", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}]}]}], "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"solution", "[", 
         RowBox[{"[", 
          RowBox[{"1", ";;", "3"}], "]"}], "]"}], ",", 
        "closestPointsOnLines"}], "}"}]}]}], "\[IndentingNewLine]", 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
  3.8642836665521383`*^9, 3.864283672802731*^9}, {3.8642837375814333`*^9, 
  3.864283743300733*^9}},
 CellLabel->"In[57]:=",ExpressionUUID->"1a02a61b-134d-469c-ae2f-92e69e0ede38"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeDistanceToBin", "[", 
   RowBox[{"line_", ",", "bin_", ",", "lines_", ",", "lineSegments_"}], "]"}],
   ":=", "\[IndentingNewLine]", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Length", "[", 
      RowBox[{"bin", "[", 
       RowBox[{"[", "1", "]"}], "]"}], "]"}], "==", "1"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Compute", " ", "closest", " ", "point", " ", "between", " ", "two", " ",
       "lines", " ", "using", " ", "infinite", " ", "Lines"}], " ", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "closestPointLine", ",", "closestPointBinLine", ",", "distanceOrder"}],
        "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"closestPointLine", ",", "closestPointBinLine"}], "}"}], "=", 
        RowBox[{
         RowBox[{"ComputeClosestPoint", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"lines", "[", 
             RowBox[{"[", "line", "]"}], "]"}], ",", 
            RowBox[{"lines", "[", 
             RowBox[{"[", 
              RowBox[{
               RowBox[{"bin", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], "}"}], "]"}], 
         "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"distanceOrder", "=", "0"}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
         RowBox[{"Move", " ", "closest", " ", "points"}], ",", " ", 
         RowBox[{
         "if", " ", "they", " ", "are", " ", "not", " ", "on", " ", "the", 
          " ", "finite", " ", "line", " ", "segment"}]}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"!", 
          RowBox[{"IsPointOnFiniteLine", "[", 
           RowBox[{
            RowBox[{"lineSegments", "[", 
             RowBox[{"[", "line", "]"}], "]"}], ",", "closestPointLine"}], 
           "]"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{"(*", 
          RowBox[{
           RowBox[{"distanceOrder", "=", "1"}], ";"}], "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"EuclideanDistance", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}], ",", "closestPointLine"}], 
              "]"}], "<", 
             RowBox[{"EuclideanDistance", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}], ",", "closestPointLine"}], 
              "]"}]}], ",", "\[IndentingNewLine]", 
            RowBox[{"closestPointLine", "=", 
             RowBox[{
              RowBox[{"lineSegments", "[", 
               RowBox[{"[", "line", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
            RowBox[{"closestPointLine", "=", 
             RowBox[{
              RowBox[{"lineSegments", "[", 
               RowBox[{"[", "line", "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
           "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"closestPointBinLine", "=", 
           RowBox[{"GetClosestPointOnLineToGivenPoint", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", 
                  RowBox[{
                   RowBox[{"bin", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}], ",", 
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", 
                  RowBox[{
                   RowBox[{"bin", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], "}"}], ",", 
             "closestPointLine"}], "]"}]}], ";"}]}], "\[IndentingNewLine]", 
        "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"!", 
          RowBox[{"IsPointOnFiniteLine", "[", 
           RowBox[{
            RowBox[{"lineSegments", "[", 
             RowBox[{"[", 
              RowBox[{
               RowBox[{"bin", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
            "closestPointBinLine"}], "]"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{"(*", 
          RowBox[{
           RowBox[{"distanceOrder", "=", "1"}], ";"}], "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"EuclideanDistance", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", 
                  RowBox[{
                   RowBox[{"bin", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}], ",", "closestPointBinLine"}], 
              "]"}], "<", 
             RowBox[{"EuclideanDistance", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", 
                  RowBox[{
                   RowBox[{"bin", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}], ",", "closestPointBinLine"}], 
              "]"}]}], ",", "\[IndentingNewLine]", 
            RowBox[{"closestPointBinLine", "=", 
             RowBox[{
              RowBox[{"lineSegments", "[", 
               RowBox[{"[", 
                RowBox[{
                 RowBox[{"bin", "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
            RowBox[{"closestPointBinLine", "=", 
             RowBox[{
              RowBox[{"lineSegments", "[", 
               RowBox[{"[", 
                RowBox[{
                 RowBox[{"bin", "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
           "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"closestPointLine", "=", 
           RowBox[{"GetClosestPointOnLineToGivenPoint", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}], ",", 
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], "}"}], ",", 
             "closestPointBinLine"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"IsPointOnFiniteLine", "[", 
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", "line", "]"}], "]"}], ",", "closestPointLine"}], 
              "]"}]}], ",", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"lineSegments", "[", 
                   RowBox[{"[", "line", "]"}], "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}], ",", "closestPointLine"}], 
                "]"}], "<", 
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"lineSegments", "[", 
                   RowBox[{"[", "line", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], ",", "closestPointLine"}], 
                "]"}]}], ",", "\[IndentingNewLine]", 
              RowBox[{"closestPointLine", "=", 
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
              
              RowBox[{"closestPointLine", "=", 
               RowBox[{
                RowBox[{"lineSegments", "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
             "]"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"EuclideanDistance", "[", 
          RowBox[{"closestPointBinLine", ",", "closestPointLine"}], "]"}], 
         ",", "distanceOrder", ",", 
         RowBox[{"{", 
          RowBox[{"closestPointLine", ",", "closestPointBinLine"}], "}"}]}], 
        "}"}]}]}], "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Compute", " ", "distance", " ", "to", " ", "a", " ", "bin", " ", "with",
       " ", "more", " ", "than", " ", "two", " ", "samples"}], " ", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", "closestPointOnLineToBin", "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"closestPointOnLineToBin", "=", 
        RowBox[{"GetClosestPointOnLineToGivenPoint", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{
             RowBox[{"lineSegments", "[", 
              RowBox[{"[", "line", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"lineSegments", "[", 
              RowBox[{"[", "line", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "}"}], ",", 
          RowBox[{"bin", "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"!", 
          RowBox[{"IsPointOnFiniteLine", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "}"}], ",", 
            "closestPointOnLineToBin"}], "]"}]}], ",", "\[IndentingNewLine]", 
         
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"EuclideanDistance", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              "closestPointOnLineToBin"}], "]"}], "<", 
            RowBox[{"EuclideanDistance", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], ",", 
              "closestPointOnLineToBin"}], "]"}]}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"lineSegments", "[", 
                  RowBox[{"[", "line", "]"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", 
                RowBox[{"bin", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "/", 
              RowBox[{"Norm", "[", 
               RowBox[{"bin", "[", 
                RowBox[{"[", "2", "]"}], "]"}], "]"}]}], ",", "1"}], "}"}], 
           ",", "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"lineSegments", "[", 
                  RowBox[{"[", "line", "]"}], "]"}], "[", 
                 RowBox[{"[", "2", "]"}], "]"}], ",", 
                RowBox[{"bin", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "/", 
              RowBox[{"Norm", "[", 
               RowBox[{"bin", "[", 
                RowBox[{"[", "2", "]"}], "]"}], "]"}]}], ",", "1"}], "}"}]}], 
          "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"EuclideanDistance", "[", 
             RowBox[{"closestPointOnLineToBin", ",", 
              RowBox[{"bin", "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "/", 
            RowBox[{"Norm", "[", 
             RowBox[{"bin", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "]"}]}], ",", "1"}], "}"}]}], 
        "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.864283512173007*^9, 3.864283535814217*^9}, {
  3.8642836665521383`*^9, 3.864283672802731*^9}},
 CellLabel->"In[58]:=",ExpressionUUID->"3df32ecc-e80f-4201-9205-216d2744e17a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"AddLineToBin", "[", 
   RowBox[{"line_", ",", "bin_", ",", "lines_", ",", "lineSegments_"}], "]"}],
   ":=", "\[IndentingNewLine]", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Length", "[", 
      RowBox[{"bin", "[", 
       RowBox[{"[", "1", "]"}], "]"}], "]"}], "==", "1"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "center", ",", "closestPointLine", ",", "closestPointBinLine"}], "}"}],
       ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"center", ",", 
          RowBox[{"{", 
           RowBox[{"closestPointLine", ",", "closestPointBinLine"}], "}"}]}], 
         "}"}], "=", 
        RowBox[{"ComputeClosestPoint", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"lines", "[", 
            RowBox[{"[", "line", "]"}], "]"}], ",", 
           RowBox[{"lines", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"bin", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], "}"}], "]"}]}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"IsPointOnFiniteLine", "[", 
           RowBox[{
            RowBox[{"lineSegments", "[", 
             RowBox[{"[", "line", "]"}], "]"}], ",", "closestPointLine"}], 
           "]"}], "&&", "\[IndentingNewLine]", 
          RowBox[{"IsPointOnFiniteLine", "[", 
           RowBox[{
            RowBox[{"lineSegments", "[", 
             RowBox[{"[", 
              RowBox[{
               RowBox[{"bin", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
            "closestPointBinLine"}], "]"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"bin", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", "line"}], "}"}], ",", 
           "center"}], "}"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"bin", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", "line"}], "}"}], ",", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "+", 
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], "+", 
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", 
                 RowBox[{
                  RowBox[{"bin", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "+", 
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", 
                 RowBox[{
                  RowBox[{"bin", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], ")"}], "/", "4"}]}], "}"}]}],
         " ", 
        RowBox[{"(*", " ", 
         RowBox[{"possible", " ", "better", " ", "heuristic", " ", "exists"}],
          " ", "*)"}], "\[IndentingNewLine]", "]"}]}]}], 
     "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"closestPointOnLineToBin", ",", "binWeight"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"closestPointOnLineToBin", "=", 
        RowBox[{"GetClosestPointOnLineToGivenPoint", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{
             RowBox[{"lineSegments", "[", 
              RowBox[{"[", "line", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"lineSegments", "[", 
              RowBox[{"[", "line", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "}"}], ",", 
          RowBox[{"bin", "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"binWeight", "=", 
        RowBox[{
         RowBox[{"Length", "[", 
          RowBox[{"bin", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "]"}], "/", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"Length", "[", 
            RowBox[{"bin", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], "+", "1"}], ")"}]}]}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{"TODO", ":", " ", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"IsPointOnFiniteLine", "[", 
              RowBox[{
               RowBox[{"lineSegments", "[", 
                RowBox[{"[", "line", "]"}], "]"}], ",", 
               "closestPointOnLineToBin"}], "]"}]}], ","}], "]"}]}], ";"}], 
        "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Append", "[", 
          RowBox[{
           RowBox[{"bin", "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "line"}], "]"}], ",", 
         RowBox[{"closestPointOnLineToBin", "+", 
          RowBox[{"binWeight", "*", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"bin", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "-", 
             "closestPointOnLineToBin"}], ")"}]}]}]}], "}"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",\

 CellChangeTimes->{{3.864283512173007*^9, 3.864283525419113*^9}},
 CellLabel->"In[59]:=",ExpressionUUID->"83d84be8-1049-4554-82b7-ef58b937fce5"]
}, Closed]],

Cell[CellGroupData[{

Cell["Algorithm", "Subsubsection",
 CellChangeTimes->{{3.864283460964128*^9, 
  3.8642834622486563`*^9}},ExpressionUUID->"7a2d62bc-f203-46dc-aee3-\
936e55a7f6ff"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Original", " ", "algorithm"}], ",", " ", 
    RowBox[{"uses", " ", "an", " ", "absolute", " ", "threshold", " ", 
     RowBox[{"(", "binKeepThreshold", ")"}], " ", "to", " ", "specify", " ", 
     "to", " ", "minimum", " ", "size", " ", "fo", " ", "bins", " ", "to", 
     " ", "keep"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"FindWallsBins", "[", 
    RowBox[{
    "lines_", ",", "lineSegments_", ",", "absoluteThreshold_", ",", 
     "relativeThreshold_", ",", 
     RowBox[{"binKeepThreshold_", ":", "3"}]}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"bins", ",", "localLines"}], "}"}], ",", "\[IndentingNewLine]", 
     
     RowBox[{"(*", " ", 
      RowBox[{"Put", " ", "line", " ", "into", " ", 
       RowBox[{"bins", ".", " ", "A"}], " ", "bin", " ", "has", " ", "the", 
       " ", "Form", " ", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"l_", "1"}], ",", "...", ",", "l_n"}], "}"}], ",", "p"}], 
        "}"}], " ", "where", " ", "l_i", " ", "are", " ", "the", " ", "lines",
        " ", "in", " ", "the", " ", "bin", " ", "and", " ", "p", " ", "is", 
       " ", "the", " ", "center", " ", "point", " ", "between", " ", "the", 
       " ", 
       RowBox[{"lines", "."}]}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"localLines", "=", 
       RowBox[{"RandomSample", "[", 
        RowBox[{"Range", "[", 
         RowBox[{"Length", "[", "lines", "]"}], "]"}], "]"}]}], ";", " ", 
      RowBox[{"(*", " ", 
       RowBox[{"Shuffle", " ", "lines"}], " ", "*)"}], "\[IndentingNewLine]", 
      
      RowBox[{"(*", " ", 
       RowBox[{
       "Put", " ", "first", " ", "line", " ", "in", " ", "first", " ", 
        "bin"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"bins", "=", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"localLines", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "}"}], ",", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"lineSegments", "[", 
               RowBox[{"[", 
                RowBox[{"localLines", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], "+", 
             RowBox[{
              RowBox[{"lineSegments", "[", 
               RowBox[{"[", 
                RowBox[{"localLines", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], ")"}], "/", "2"}]}], "}"}], 
        "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Do", "[", " ", 
       RowBox[{"(*", " ", 
        RowBox[{"for", " ", "each", " ", "line"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"Block", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
            "distances", ",", "firstDegreeDistances", ",", 
             "secondDegreeDistances", ",", "minDist"}], "}"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"(*", " ", 
            RowBox[{
            "compute", " ", "distance", " ", "to", " ", "all", " ", "bins"}], 
            " ", "*)"}], "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"distances", "=", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"i", ",", 
                 RowBox[{"ComputeDistanceToBin", "[", 
                  RowBox[{
                   RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], ",", 
                   RowBox[{"bins", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], ",", "lines", ",", 
                   "lineSegments"}], "]"}]}], "}"}], ",", 
               RowBox[{"{", 
                RowBox[{"i", ",", 
                 RowBox[{"Length", "[", "bins", "]"}]}], "}"}]}], "]"}]}], 
            ";", "\[IndentingNewLine]", 
            RowBox[{"distances", "=", 
             RowBox[{"SortBy", "[", 
              RowBox[{"distances", ",", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "2", "]"}], "]"}], "&"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "&"}]}], "}"}]}], "]"}]}], 
            ";", "\[IndentingNewLine]", 
            RowBox[{"(*", " ", 
             RowBox[{
              RowBox[{"New", " ", "First"}], ",", " ", 
              RowBox[{"second", " ", "degree", " ", "distancing"}]}], " ", 
             "*)"}], "\[IndentingNewLine]", 
            RowBox[{"firstDegreeDistances", "=", 
             RowBox[{"Select", "[", 
              RowBox[{"distances", ",", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "2", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "==", "0"}], "&"}]}], 
              "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"secondDegreeDistances", "=", 
             RowBox[{"Select", "[", 
              RowBox[{"distances", ",", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "2", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "==", "1"}], "&"}]}], 
              "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"Length", "[", "firstDegreeDistances", "]"}], ">", 
                "0"}], "\[And]", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"firstDegreeDistances", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "<=", 
                "absoluteThreshold"}]}], ",", 
              RowBox[{"bins", "=", 
               RowBox[{"Join", "[", 
                RowBox[{
                 RowBox[{"bins", "[", 
                  RowBox[{"[", 
                   RowBox[{"1", ";;", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"firstDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "-", "1"}]}], "]"}], 
                  "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"AddLineToBin", "[", 
                   RowBox[{
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], ",", 
                    RowBox[{"bins", "[", 
                    RowBox[{"[", 
                    RowBox[{
                    RowBox[{"firstDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
                    "lines", ",", "lineSegments"}], "]"}], "}"}], ",", 
                 RowBox[{"bins", "[", 
                  RowBox[{"[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"firstDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "+", "1"}], ";;", 
                    RowBox[{"Length", "[", "bins", "]"}]}], "]"}], "]"}]}], 
                "]"}]}], ",", "\[IndentingNewLine]", 
              RowBox[{"(*", " ", 
               RowBox[{"Else", ",", " ", 
                RowBox[{
                "if", " ", "no", " ", "first", " ", "degree", " ", "bin", " ",
                  "to", " ", "add", " ", 
                 RowBox[{"to", ":"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
              
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"Length", "[", "secondDegreeDistances", "]"}], ">", 
                  "0"}], "\[And]", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{"secondDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "<=", 
                  "relativeThreshold"}]}], ",", "\[IndentingNewLine]", 
                RowBox[{"(*", " ", 
                 RowBox[{"add", " ", "line", " ", "to", " ", "bin"}], " ", 
                 "*)"}], "\[IndentingNewLine]", 
                RowBox[{"bins", "=", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{"bins", "[", 
                    RowBox[{"[", 
                    RowBox[{"1", ";;", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"secondDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "-", "1"}]}], "]"}], 
                    "]"}], ",", 
                   RowBox[{"{", 
                    RowBox[{"AddLineToBin", "[", 
                    RowBox[{
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], ",", 
                    RowBox[{"bins", "[", 
                    RowBox[{"[", 
                    RowBox[{
                    RowBox[{"secondDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
                    "lines", ",", "lineSegments"}], "]"}], "}"}], ",", 
                   RowBox[{"bins", "[", 
                    RowBox[{"[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"secondDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "+", "1"}], ";;", 
                    RowBox[{"Length", "[", "bins", "]"}]}], "]"}], "]"}]}], 
                  "]"}]}], ",", "\[IndentingNewLine]", 
                RowBox[{"AppendTo", "[", 
                 RowBox[{"bins", ",", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], "}"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"lineSegments", "[", 
                    RowBox[{"[", 
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "+", 
                    RowBox[{
                    RowBox[{"lineSegments", "[", 
                    RowBox[{"[", 
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], ")"}], "/", "2"}]}], 
                   "}"}]}], "]"}]}], "\[IndentingNewLine]", "]"}]}], 
             "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "]"}], 
         ";"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"line", ",", "2", ",", 
          RowBox[{"Length", "[", "localLines", "]"}]}], "}"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Select", "[", 
       RowBox[{
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"Sort", "[", 
           RowBox[{
            RowBox[{"bins", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", 
            RowBox[{"Length", "[", "bins", "]"}]}], "}"}]}], "]"}], ",", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", "#", "]"}], ">=", "binKeepThreshold"}], 
         "&"}]}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864283473298786*^9, 3.8642834847355347`*^9}, {
  3.864283875471974*^9, 3.864283875737265*^9}, {3.86756507081562*^9, 
  3.867565127724155*^9}},
 CellLabel->"In[60]:=",ExpressionUUID->"097f0561-71ed-4d2a-8171-f3e59f629e58"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Alternative", " ", "algorithm"}], ",", " ", 
    RowBox[{
    "removes", " ", "bins", " ", "that", " ", "contain", " ", "less", " ", 
     "than", " ", "50", "%", " ", "of", " ", "the", " ", "median", " ", "bin",
      " ", "size"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"FindWallsBinsImproved", "[", 
    RowBox[{
    "lines_", ",", "lineSegments_", ",", "absoluteThreshold_", ",", 
     "relativeThreshold_"}], "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "bins", ",", "localLines", ",", "medianBinSize", ",", 
       "binKeepThreshold"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"Put", " ", "line", " ", "into", " ", 
       RowBox[{"bins", ".", " ", "A"}], " ", "bin", " ", "has", " ", "the", 
       " ", "Form", " ", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"l_", "1"}], ",", "...", ",", "l_n"}], "}"}], ",", "p"}], 
        "}"}], " ", "where", " ", "l_i", " ", "are", " ", "the", " ", "lines",
        " ", "in", " ", "the", " ", "bin", " ", "and", " ", "p", " ", "is", 
       " ", "the", " ", "center", " ", "point", " ", "between", " ", "the", 
       " ", 
       RowBox[{"lines", "."}]}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"localLines", "=", 
       RowBox[{"RandomSample", "[", 
        RowBox[{"Range", "[", 
         RowBox[{"Length", "[", "lines", "]"}], "]"}], "]"}]}], ";", " ", 
      RowBox[{"(*", " ", 
       RowBox[{"Shuffle", " ", "lines"}], " ", "*)"}], "\[IndentingNewLine]", 
      
      RowBox[{"(*", " ", 
       RowBox[{
       "Put", " ", "first", " ", "line", " ", "in", " ", "first", " ", 
        "bin"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"bins", "=", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"localLines", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "}"}], ",", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"lineSegments", "[", 
               RowBox[{"[", 
                RowBox[{"localLines", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], "+", 
             RowBox[{
              RowBox[{"lineSegments", "[", 
               RowBox[{"[", 
                RowBox[{"localLines", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], ")"}], "/", "2"}]}], "}"}], 
        "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Do", "[", " ", 
       RowBox[{"(*", " ", 
        RowBox[{"for", " ", "each", " ", "line"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"Block", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
            "distances", ",", "firstDegreeDistances", ",", 
             "secondDegreeDistances", ",", "minDist"}], "}"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"(*", " ", 
            RowBox[{
            "compute", " ", "distance", " ", "to", " ", "all", " ", "bins"}], 
            " ", "*)"}], "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"distances", "=", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"i", ",", 
                 RowBox[{"ComputeDistanceToBin", "[", 
                  RowBox[{
                   RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], ",", 
                   RowBox[{"bins", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], ",", "lines", ",", 
                   "lineSegments"}], "]"}]}], "}"}], ",", 
               RowBox[{"{", 
                RowBox[{"i", ",", 
                 RowBox[{"Length", "[", "bins", "]"}]}], "}"}]}], "]"}]}], 
            ";", "\[IndentingNewLine]", 
            RowBox[{"distances", "=", 
             RowBox[{"SortBy", "[", 
              RowBox[{"distances", ",", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "2", "]"}], "]"}], "&"}], ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "&"}]}], "}"}]}], "]"}]}], 
            ";", "\[IndentingNewLine]", 
            RowBox[{"(*", " ", 
             RowBox[{
              RowBox[{"New", " ", "First"}], ",", " ", 
              RowBox[{"second", " ", "degree", " ", "distancing"}]}], " ", 
             "*)"}], "\[IndentingNewLine]", 
            RowBox[{"firstDegreeDistances", "=", 
             RowBox[{"Select", "[", 
              RowBox[{"distances", ",", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "2", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "==", "0"}], "&"}]}], 
              "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"secondDegreeDistances", "=", 
             RowBox[{"Select", "[", 
              RowBox[{"distances", ",", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "2", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "==", "1"}], "&"}]}], 
              "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"Length", "[", "firstDegreeDistances", "]"}], ">", 
                "0"}], "\[And]", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"firstDegreeDistances", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "<=", 
                "absoluteThreshold"}]}], ",", 
              RowBox[{"bins", "=", 
               RowBox[{"Join", "[", 
                RowBox[{
                 RowBox[{"bins", "[", 
                  RowBox[{"[", 
                   RowBox[{"1", ";;", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"firstDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "-", "1"}]}], "]"}], 
                  "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"AddLineToBin", "[", 
                   RowBox[{
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], ",", 
                    RowBox[{"bins", "[", 
                    RowBox[{"[", 
                    RowBox[{
                    RowBox[{"firstDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
                    "lines", ",", "lineSegments"}], "]"}], "}"}], ",", 
                 RowBox[{"bins", "[", 
                  RowBox[{"[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"firstDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "+", "1"}], ";;", 
                    RowBox[{"Length", "[", "bins", "]"}]}], "]"}], "]"}]}], 
                "]"}]}], ",", "\[IndentingNewLine]", 
              RowBox[{"(*", " ", 
               RowBox[{"Else", ",", " ", 
                RowBox[{
                "if", " ", "no", " ", "first", " ", "degree", " ", "bin", " ",
                  "to", " ", "add", " ", 
                 RowBox[{"to", ":"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
              
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"Length", "[", "secondDegreeDistances", "]"}], ">", 
                  "0"}], "\[And]", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{"secondDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "<=", 
                  "relativeThreshold"}]}], ",", "\[IndentingNewLine]", 
                RowBox[{"(*", " ", 
                 RowBox[{"add", " ", "line", " ", "to", " ", "bin"}], " ", 
                 "*)"}], "\[IndentingNewLine]", 
                RowBox[{"bins", "=", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{"bins", "[", 
                    RowBox[{"[", 
                    RowBox[{"1", ";;", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"secondDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "-", "1"}]}], "]"}], 
                    "]"}], ",", 
                   RowBox[{"{", 
                    RowBox[{"AddLineToBin", "[", 
                    RowBox[{
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], ",", 
                    RowBox[{"bins", "[", 
                    RowBox[{"[", 
                    RowBox[{
                    RowBox[{"secondDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
                    "lines", ",", "lineSegments"}], "]"}], "}"}], ",", 
                   RowBox[{"bins", "[", 
                    RowBox[{"[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"secondDegreeDistances", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "+", "1"}], ";;", 
                    RowBox[{"Length", "[", "bins", "]"}]}], "]"}], "]"}]}], 
                  "]"}]}], ",", "\[IndentingNewLine]", 
                RowBox[{"AppendTo", "[", 
                 RowBox[{"bins", ",", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], "}"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"lineSegments", "[", 
                    RowBox[{"[", 
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "+", 
                    RowBox[{
                    RowBox[{"lineSegments", "[", 
                    RowBox[{"[", 
                    RowBox[{"localLines", "[", 
                    RowBox[{"[", "line", "]"}], "]"}], "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], ")"}], "/", "2"}]}], 
                   "}"}]}], "]"}]}], "\[IndentingNewLine]", "]"}]}], 
             "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "]"}], 
         ";"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"line", ",", "2", ",", 
          RowBox[{"Length", "[", "localLines", "]"}]}], "}"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"binKeepThreshold", "=", 
       RowBox[{"Max", "[", 
        RowBox[{
         RowBox[{
          FractionBox["1", "2"], 
          RowBox[{"Max", "[", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"Length", "[", 
              RowBox[{"bin", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
             RowBox[{"{", 
              RowBox[{"bin", ",", "bins"}], "}"}]}], "]"}], "]"}]}], ",", 
         "2"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Select", "[", 
       RowBox[{
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"Sort", "[", 
           RowBox[{
            RowBox[{"bins", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", 
            RowBox[{"Length", "[", "bins", "]"}]}], "}"}]}], "]"}], ",", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", "#", "]"}], ">=", "binKeepThreshold"}], 
         "&"}]}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864283473298786*^9, 3.8642834847355347`*^9}, {
   3.864283875471974*^9, 3.864283875737265*^9}, {3.86756507081562*^9, 
   3.867565328013413*^9}, {3.86756588647156*^9, 3.867565912339368*^9}, {
   3.8675660297261267`*^9, 3.867566038389659*^9}, {3.867566071944676*^9, 
   3.8675660722090178`*^9}, 3.8675666133088417`*^9, {3.870598867456196*^9, 
   3.870598873214085*^9}},
 CellLabel->"In[61]:=",ExpressionUUID->"ca9ed0e1-59a7-4cf0-90d6-ebb8e74c67ef"]
}, Closed]],

Cell[CellGroupData[{

Cell["Wrapper Function", "Subsubsection",
 CellChangeTimes->{{3.864283947725184*^9, 
  3.8642839499640837`*^9}},ExpressionUUID->"aeb4eb87-9133-4019-8c60-\
5f945678eb80"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Using", " ", "original", " ", "implementation"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"GroupWallsUnitSphereInversion", "[", 
    RowBox[{"measurements_", ",", 
     RowBox[{"binKeepThreshold_", ":", "3"}]}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "lines", ",", "lineSegments", ",", "lineToLineThreshold", ",", 
       "lineToBinThreshold"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"lineToLineThreshold", "=", "0.3"}], ";", "\[IndentingNewLine]", 
      RowBox[{"lineToBinThreshold", "=", "0.65"}], ";", "\[IndentingNewLine]", 
      RowBox[{"lines", "=", 
       RowBox[{"InvertCircles", "[", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"CircleFromMeasurement", "[", "measurement", "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"measurement", ",", "measurements"}], "}"}]}], "]"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"lineSegments", "=", 
       RowBox[{"InvertSegments", "[", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"SegmentFromMeasurement", "[", "measurement", "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"measurement", ",", "measurements"}], "}"}]}], "]"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"FindWallsBins", "[", 
       RowBox[{
       "lines", ",", "lineSegments", ",", "lineToLineThreshold", ",", 
        "lineToBinThreshold", ",", "binKeepThreshold"}], "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864283989708889*^9, 3.864284123643713*^9}, {
   3.864284195752522*^9, 3.864284205071479*^9}, {3.864284254484063*^9, 
   3.864284264341466*^9}, {3.864285007862905*^9, 3.864285081351964*^9}, {
   3.864285111862918*^9, 3.86428511703127*^9}, {3.8642852040261374`*^9, 
   3.864285300881432*^9}, {3.864285340236412*^9, 3.864285379513533*^9}, 
   3.864286046650269*^9, {3.8642924167543497`*^9, 3.864292421534689*^9}, {
   3.8643730991510468`*^9, 3.8643730992928247`*^9}, {3.864880360301943*^9, 
   3.8648803667874517`*^9}, {3.864891082991703*^9, 3.8648910981271353`*^9}, {
   3.867565390415584*^9, 3.867565404929006*^9}},
 CellLabel->"In[62]:=",ExpressionUUID->"597088d7-16d1-4afb-ae05-e30bb4ab4127"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Using", " ", "Improved", " ", "Implementation"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
   "GroupWallsUnitSphereInversionImproved", "[", "measurements_", "]"}], ":=",
    "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "lines", ",", "lineSegments", ",", "lineToLineThreshold", ",", 
       "lineToBinThreshold"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"lineToLineThreshold", "=", "0.3"}], ";", "\[IndentingNewLine]", 
      RowBox[{"lineToBinThreshold", "=", "0.65"}], ";", "\[IndentingNewLine]", 
      RowBox[{"lines", "=", 
       RowBox[{"InvertCircles", "[", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"CircleFromMeasurement", "[", "measurement", "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"measurement", ",", "measurements"}], "}"}]}], "]"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"lineSegments", "=", 
       RowBox[{"InvertSegments", "[", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"SegmentFromMeasurement", "[", "measurement", "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"measurement", ",", "measurements"}], "}"}]}], "]"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"FindWallsBinsImproved", "[", 
       RowBox[{
       "lines", ",", "lineSegments", ",", "lineToLineThreshold", ",", 
        "lineToBinThreshold"}], "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864283989708889*^9, 3.864284123643713*^9}, {
   3.864284195752522*^9, 3.864284205071479*^9}, {3.864284254484063*^9, 
   3.864284264341466*^9}, {3.864285007862905*^9, 3.864285081351964*^9}, {
   3.864285111862918*^9, 3.86428511703127*^9}, {3.8642852040261374`*^9, 
   3.864285300881432*^9}, {3.864285340236412*^9, 3.864285379513533*^9}, 
   3.864286046650269*^9, {3.8642924167543497`*^9, 3.864292421534689*^9}, {
   3.8643730991510468`*^9, 3.8643730992928247`*^9}, {3.864880360301943*^9, 
   3.8648803667874517`*^9}, {3.864891082991703*^9, 3.8648910981271353`*^9}, {
   3.867565390415584*^9, 3.867565393759852*^9}, {3.867565435788752*^9, 
   3.867565456170834*^9}},
 CellLabel->"In[63]:=",ExpressionUUID->"5ea04c7d-2af2-4b7f-8a37-fa42aa35a19c"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Gnomonic Projection", "Subsection",
 CellChangeTimes->{{3.86437315426348*^9, 
  3.8643731599093246`*^9}},ExpressionUUID->"2acfb757-aa40-437a-a3f4-\
384c2b3f9b99"],

Cell["\<\
The implementation for the Gnomonic Projection is taken from Rico Gie\[SZ]ler\
\[CloseCurlyQuote]s Bachelor\[CloseCurlyQuote]s Project and adjusted only \
slightly to be compatible with the given input and output format.\
\>", "Text",
 CellChangeTimes->{{3.864373165022746*^9, 3.864373223387393*^9}, {
  3.864625161099065*^9, 3.8646251618704023`*^9}, {3.864625270361801*^9, 
  3.864625270927898*^9}},ExpressionUUID->"db1241d8-caa4-4c4b-a0f5-\
8747f05bd8e1"],

Cell[CellGroupData[{

Cell["Helper Functions", "Subsubsection",
 CellChangeTimes->{{3.864625263364821*^9, 
  3.864625266088664*^9}},ExpressionUUID->"a65fcd03-e6e6-4b9b-b85d-\
9f90af00f53b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Gets", " ", "the", " ", "centerpoint", " ", "of", " ", "an", " ", "arc", 
    " ", "with", " ", "center", " ", "at", " ", 
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{"points", " ", "-", " ", 
    RowBox[{
    "start", " ", "and", " ", "endpoint", " ", "of", " ", "the", " ", 
     "arc"}]}], "\[IndentingNewLine]", "*)"}], "\n", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"Findcenterpoint", "[", "points_", "]"}], " ", ":=", "\n", "  ", 
     
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"ang", ",", " ", "co", ",", " ", "centerpoint"}], "}"}], ",", 
       "\n", "   ", 
       RowBox[{
        RowBox[{"ang", " ", "=", " ", 
         RowBox[{"VectorAngle", "[", 
          RowBox[{
           RowBox[{"points", "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
           RowBox[{"points", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", "\n", "   ", 
        RowBox[{"co", " ", "=", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"ang", "/", "2"}], "]"}]}], ";", "\n", "   ", 
        RowBox[{"centerpoint", " ", "=", " ", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"0", ",", " ", "0", ",", " ", "0"}], "}"}], " ", "+", " ", 
          
          RowBox[{
           RowBox[{"1", "/", "co"}], " ", 
           RowBox[{"Normalize", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"points", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], " ", "+", " ", 
                RowBox[{"points", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}], ")"}], "/", "2"}], " ", 
             "-", " ", 
             RowBox[{"{", 
              RowBox[{"0", ",", " ", "0", ",", " ", "0"}], "}"}]}], 
            "]"}]}]}]}], ";", "\n", "   ", 
        RowBox[{"{", 
         RowBox[{"centerpoint", ",", " ", "co"}], "}"}]}]}], "\n", "   ", 
      "]"}]}], ";"}], "\n", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "calculate", " ", "Latitude", " ", "and", " ", "longitude", " ", "of", 
     " ", "a", " ", "point", " ", "in", " ", "cartesian", " ", 
     "coordinates"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\t", 
    RowBox[{
     RowBox[{"point", " ", "-", " ", 
      RowBox[{"point", " ", "in", " ", "cartesian", " ", "coordinates"}]}], 
     ";"}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"CalculateLatLong", "[", "point_", "]"}], " ", ":=", "\n", "  ", 
     
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", "\n", "    ", 
        RowBox[{"radius", ",", "\n", "    ", 
         RowBox[{"x", " ", "=", " ", 
          RowBox[{"point", "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
         RowBox[{"y", " ", "=", " ", 
          RowBox[{"point", "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], ",", " ", 
         RowBox[{"z", " ", "=", " ", 
          RowBox[{"point", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}], ",", "\n", "    ", "latitude", 
         ",", "\n", "    ", "longitude"}], "}"}], ",", "\[IndentingNewLine]", 
       
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"x", "==", "0"}], ",", 
          RowBox[{"x", " ", "=", " ", "0.0"}]}], "]"}], ";", "\n", "   ", 
        RowBox[{"radius", " ", "=", " ", 
         RowBox[{"Sqrt", "[", 
          RowBox[{
           RowBox[{"x", "^", "2"}], " ", "+", " ", 
           RowBox[{"y", "^", "2"}], " ", "+", " ", 
           RowBox[{"z", "^", "2"}]}], "]"}]}], ";", "\n", "   ", 
        RowBox[{"latitude", " ", "=", " ", 
         RowBox[{"ArcSin", "[", 
          RowBox[{"z", "/", "radius"}], "]"}]}], ";", "\n", "   ", 
        RowBox[{"longitude", " ", "=", " ", 
         RowBox[{"ArcTan", "[", 
          RowBox[{"x", ",", " ", "y"}], "]"}]}], ";", "\n", "   ", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"N", "[", 
           RowBox[{
            RowBox[{"latitude", "/", "Pi"}], "*", "180"}], "]"}], ",", " ", 
          RowBox[{"N", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"(", "longitude", ")"}], "/", "Pi"}], "*", "180"}], 
           "]"}], ",", " ", 
          RowBox[{"N", "[", "radius", "]"}]}], "}"}]}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\n", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{
     "Calculate", " ", "cartesian", " ", "coordinated", " ", "of", " ", "a", 
      " ", "point", " ", "given", " ", "with", " ", "langitude"}], ",", " ", 
     RowBox[{"longitude", " ", "and", " ", "randius"}]}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\t", 
    RowBox[{
     RowBox[{"point", " ", "-", " ", 
      RowBox[{"point", " ", "in", " ", "geographic", " ", "coordinates"}]}], 
     ";"}], "\[IndentingNewLine]", "*)"}], "\n", 
   RowBox[{
    RowBox[{"CartesianCoordinates", "[", "point_", "]"}], " ", ":=", "\n", 
    " ", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"latitude", " ", "=", " ", 
         RowBox[{"point", "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], ",", "\n", "   ", 
        RowBox[{"longitude", " ", "=", " ", 
         RowBox[{"point", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], ",", "\n", "   ", 
        RowBox[{"radius", " ", "=", " ", 
         RowBox[{"point", "[", 
          RowBox[{"[", "3", "]"}], "]"}]}]}], "}"}], ",", "\n", "  ", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"N", "[", 
         RowBox[{"radius", "*", 
          RowBox[{"Cos", "[", 
           RowBox[{"latitude", " ", "Degree"}], "]"}], "*", 
          RowBox[{"Cos", "[", 
           RowBox[{"longitude", " ", "Degree"}], "]"}]}], "]"}], ",", " ", 
        RowBox[{"N", "[", 
         RowBox[{"radius", "*", 
          RowBox[{"Cos", "[", 
           RowBox[{"latitude", " ", "Degree"}], "]"}], "*", 
          RowBox[{"Sin", "[", 
           RowBox[{"longitude", " ", "Degree"}], "]"}]}], "]"}], ",", " ", 
        RowBox[{"N", "[", 
         RowBox[{"radius", "*", 
          RowBox[{"Sin", "[", 
           RowBox[{"latitude", " ", "Degree"}], "]"}]}], "]"}]}], "}"}]}], 
     "]"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Get", " ", "the", " ", "Cos", 
     RowBox[{"(", "c", ")"}], " ", "value", " ", "of", " ", "a", " ", "point",
      " ", "given", " ", "the", " ", "projection", " ", "center"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\t", 
    RowBox[{
     RowBox[{"point", " ", "-", " ", 
      RowBox[{
      "point", " ", "for", " ", "which", " ", "we", " ", "search", " ", "cos", 
       RowBox[{"(", "c", ")"}], " ", "in", " ", "geographical", " ", 
       "coordinates"}]}], ";", "\[IndentingNewLine]", "\t", 
     RowBox[{"mappingpoint", " ", "-", " ", 
      RowBox[{
      "the", " ", "center", " ", "point", " ", "of", " ", "the", " ", 
       "projection", " ", "plane", " ", "in", " ", "geographical", " ", 
       "coordinates"}]}]}], "\[IndentingNewLine]", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetCosC", "[", 
     RowBox[{"point_", ",", "mappingpoint_"}], "]"}], ":=", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"Sin", "[", 
       RowBox[{
        RowBox[{"mappingpoint", "[", 
         RowBox[{"[", "1", "]"}], "]"}], " ", "Degree"}], "]"}], 
      RowBox[{"Sin", "[", 
       RowBox[{
        RowBox[{"point", "[", 
         RowBox[{"[", "1", "]"}], "]"}], " ", "Degree"}], "]"}]}], "+", 
     RowBox[{
      RowBox[{"Cos", "[", 
       RowBox[{
        RowBox[{"mappingpoint", "[", 
         RowBox[{"[", "1", "]"}], "]"}], " ", "Degree"}], "]"}], 
      RowBox[{"Cos", "[", 
       RowBox[{
        RowBox[{"point", "[", 
         RowBox[{"[", "1", "]"}], "]"}], " ", "Degree"}], "]"}], 
      RowBox[{"Cos", "[", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"point", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "-", 
          RowBox[{"mappingpoint", "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], ")"}], " ", "Degree"}], 
       "]"}]}]}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"Mapping2D", "[", 
      RowBox[{"v_", "?", "VectorQ"}], "]"}], " ", ":=", "\[IndentingNewLine]", 
     RowBox[{"Block", " ", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"euc", " ", "=", " ", 
         RowBox[{"Sqrt", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"v", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "^", "2"}], "+", 
           RowBox[{
            RowBox[{"v", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "^", "2"}]}], "]"}]}], "}"}], 
       ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"v", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "/", "euc"}], ",", " ", 
         RowBox[{
          RowBox[{"v", "[", 
           RowBox[{"[", "2", "]"}], "]"}], " ", "/", " ", "euc"}]}], "}"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"Mapping3D", "[", 
      RowBox[{"v_", "?", "VectorQ"}], "]"}], " ", ":=", " ", 
     "\[IndentingNewLine]", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"euc", " ", "=", " ", 
         RowBox[{"Sqrt", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"v", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "^", "2"}], "+", 
           RowBox[{
            RowBox[{"v", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "^", "2"}], "+", 
           RowBox[{
            RowBox[{"v", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "^", "2"}]}], "]"}]}], "}"}], 
       ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"v", "[", 
           RowBox[{"[", "1", "]"}], "]"}], " ", "/", " ", "euc"}], ",", " ", 
         RowBox[{
          RowBox[{"v", "[", 
           RowBox[{"[", "2", "]"}], "]"}], " ", "/", " ", "euc"}], ",", " ", 
         RowBox[{
          RowBox[{"v", "[", 
           RowBox[{"[", "3", "]"}], "]"}], " ", "/", " ", "euc"}]}], "}"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"Returns", " ", 
      RowBox[{"delta", "/", "2"}], " ", "*", " ", "w"}], ",", " ", 
     RowBox[{"delta", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"w", " ", "-", " ", "v"}], ")"}], "/", 
        RowBox[{
         RowBox[{"EuclideanDistance", "[", 
          RowBox[{"w", ",", " ", "v"}], "]"}], "^", "2"}]}], ")"}], " ", 
      "mapped", " ", "to", " ", "the", " ", "unit", " ", "circle"}]}], "*)"}],
    "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"Mapping", "[", 
      RowBox[{
       RowBox[{"v_", "?", "VectorQ"}], ",", " ", 
       RowBox[{"w_", "?", "VectorQ"}], ",", " ", "delta_"}], "]"}], " ", ":=",
      " ", "\n", "  ", 
     RowBox[{"Block", "[", "\n", "   ", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"points", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{
             RowBox[{"delta", "/", "2"}], " ", "*", " ", "w"}], ",", " ", 
            RowBox[{"delta", " ", 
             RowBox[{"(", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{"w", " ", "-", " ", "v"}], ")"}], "/", 
               RowBox[{
                RowBox[{"EuclideanDistance", "[", 
                 RowBox[{"w", ",", " ", "v"}], "]"}], "^", "2"}]}], ")"}]}]}],
            "}"}]}], ",", "\n", "    ", 
         RowBox[{"dimension", " ", "=", 
          RowBox[{"Length", "[", "w", "]"}]}], " ", ",", "\n", "    ", 
         "output"}], "}"}], ",", "\n", "   ", 
       RowBox[{
        RowBox[{"If", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"dimension", " ", "==", " ", "2"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"output", " ", "=", " ", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"Mapping2D", "[", 
              RowBox[{"points", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", " ", 
             RowBox[{"Mapping2D", "[", 
              RowBox[{"points", "[", 
               RowBox[{"[", "2", "]"}], "]"}], "]"}]}], "}"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"output", " ", "=", " ", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"Mapping3D", "[", 
              RowBox[{"points", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", " ", 
             RowBox[{"Mapping3D", "[", 
              RowBox[{"points", "[", 
               RowBox[{"[", "2", "]"}], "]"}], "]"}]}], "}"}]}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "output"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"MapToUnitCircleWithWall", "[", "L_", "]"}], ":=", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{
        RowBox[{"With", " ", "list", " ", "of", " ", 
         RowBox[{"{", 
          RowBox[{"v", ",", "w", ",", " ", "delta", ",", " ", "wall"}], "}"}],
          " ", 
         RowBox[{"(", 
          RowBox[{"output", " ", "from", " ", 
           RowBox[{"AddRoomExperiment", "[", "...", "]"}]}], ")"}], 
         "\[IndentingNewLine]", "gets", " ", "the", " ", "start"}], "-", " ", 
        
        RowBox[{
        "and", " ", "endpoint", " ", "of", " ", "the", " ", "arcs", " ", 
         "for", " ", "given", " ", "v"}]}], ",", "w", ",", "delta", ",", 
       RowBox[{
       "sender", "\[IndentingNewLine]", "combination", " ", "and", " ", 
        "maps", " ", "them", " ", "to", " ", "the", " ", "unit", " ", 
        "circle"}]}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"localL", " ", "=", " ", 
          RowBox[{"{", "}"}]}], ",", "i"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"i", " ", "<=", " ", 
           RowBox[{"Length", "[", "L", "]"}]}], ",", " ", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{"localL", ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Mapping", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"L", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
                RowBox[{
                 RowBox[{"L", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "2", "]"}], "]"}], ",", " ", 
                RowBox[{
                 RowBox[{"L", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "3", "]"}], "]"}]}], "]"}], ",", 
              RowBox[{
               RowBox[{"L", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "4", "]"}], "]"}]}], "}"}]}], "]"}]}], "]"}], ";",
         "\[IndentingNewLine]", "localL"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Get", " ", "the", " ", "starting", " ", "point", " ", "and", " ", "the", 
     " ", "dircetion", " ", "of", " ", "the", " ", "vector", " ", "between", 
     " ", "the", " ", "two", " ", "given"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\t", 
    RowBox[{
     RowBox[{"points", " ", "-", " ", 
      RowBox[{"two", " ", "points"}]}], ";"}], "\[IndentingNewLine]", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetVector", "[", "points_", "]"}], ":=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"points", "[", 
       RowBox[{"[", "1", "]"}], "]"}], ",", 
      RowBox[{
       RowBox[{"points", "[", 
        RowBox[{"[", "2", "]"}], "]"}], "-", 
       RowBox[{"points", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}]}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Get", " ", "vectors", " ", "for", " ", "a", " ", "set", " ", "of", " ", 
     "lines"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\t", 
    RowBox[{
     RowBox[{"lines", " ", "-", " ", 
      RowBox[{"set", " ", "of", " ", "lines"}]}], ";"}], 
    "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"GetVectors", "[", "lines_", "]"}], ":=", "\[IndentingNewLine]", 
     
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"vectors", "=", 
          RowBox[{"{", "}"}]}], ",", "i"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"i", " ", "=", " ", "1"}], " ", ",", " ", 
          RowBox[{"i", "<=", 
           RowBox[{"Length", "[", "lines", "]"}]}], ",", " ", 
          RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"AppendTo", "[", 
            RowBox[{"vectors", ",", " ", 
             RowBox[{"GetVector", "[", 
              RowBox[{"lines", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "]"}]}], "]"}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "vectors"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "Compute", " ", "closest", " ", "point", " ", "between", " ", "an", " ", 
     "arbitrary", " ", "number", " ", "of", " ", 
     RowBox[{"lines", "."}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\t", 
    RowBox[{
     RowBox[{"points", " ", "-", " ", 
      RowBox[{
      "set", " ", "of", " ", "lines", " ", "consiting", " ", "of", " ", "a", 
       " ", "point", " ", "on", " ", "the", " ", "line", " ", "and", " ", "a",
        " ", "direction"}]}], ";"}], "\[IndentingNewLine]", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ComputeClosestPoint2D", "[", "points_", "]"}], ":=", 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "m", ",", "n", ",", "G", ",", "d", ",", "i", ",", "j", ",", "U", ",", 
        "S", ",", "V", ",", "r", ",", "Ucomp", ",", "Scomp", ",", "Vcomp", 
        ",", "solution", ",", "closestPointsOnLines", ",", " ", 
        "stepmatrix"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"m", "=", 
        RowBox[{"Length", "[", "points", "]"}]}], ";", "\[IndentingNewLine]", 
       
       RowBox[{"n", " ", "=", " ", 
        RowBox[{"Length", "[", 
         RowBox[{
          RowBox[{"points", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"G", "=", 
        RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"d", "=", 
        RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"Fill", " ", "in", " ", "G", " ", "and", " ", "v"}], " ", 
        "*)"}], "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", "=", "1"}], ",", 
         RowBox[{"i", "<=", "m"}], ",", 
         RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"j", "=", "1"}], ",", 
           RowBox[{"j", "<=", "n"}], ",", 
           RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{"Block", "[", 
            RowBox[{
             RowBox[{"{", "row", "}"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"row", "=", 
               RowBox[{"Table", "[", 
                RowBox[{"0", ",", 
                 RowBox[{"n", "+", "m"}]}], "]"}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"row", "[", 
                RowBox[{"[", "j", "]"}], "]"}], "=", "1"}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"row", "[", 
                RowBox[{"[", 
                 RowBox[{"i", "+", "n"}], "]"}], "]"}], "=", 
               RowBox[{"-", 
                RowBox[{
                 RowBox[{
                  RowBox[{"points", "[", 
                   RowBox[{"[", "i", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "[", 
                 RowBox[{"[", "j", "]"}], "]"}]}]}], ";", " ", 
              "\[IndentingNewLine]", 
              RowBox[{"AppendTo", "[", 
               RowBox[{"G", ",", "row"}], "]"}], ";", "\[IndentingNewLine]", 
              RowBox[{"AppendTo", "[", 
               RowBox[{"d", ",", 
                RowBox[{
                 RowBox[{
                  RowBox[{"points", "[", 
                   RowBox[{"[", "i", "]"}], "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "[", 
                 RowBox[{"[", "j", "]"}], "]"}]}], "]"}], ";"}]}], 
            "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Det", "[", 
           RowBox[{
            RowBox[{"Transpose", "[", "G", "]"}], ".", "G"}], "]"}], "!=", 
          "0"}], ",", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Solve", " ", "using", " ", "least", " ", "squares"}], " ", 
          "*)"}], "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"stepmatrix", "=", 
           RowBox[{
            RowBox[{"Transpose", "[", "G", "]"}], ".", "G"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"stepmatrix", "=", " ", 
           RowBox[{"Rationalize", "[", 
            RowBox[{"stepmatrix", ",", 
             RowBox[{"10", "^", 
              RowBox[{"-", "8"}]}]}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"solution", "=", 
           RowBox[{
            RowBox[{"Inverse", "[", "stepmatrix", "]"}], ".", 
            RowBox[{"Transpose", "[", "G", "]"}], ".", "d"}]}]}], 
         "\[IndentingNewLine]", ",", " ", 
         RowBox[{"(*", " ", 
          RowBox[{"ELSE", ",", " ", 
           RowBox[{"solve", " ", "using", " ", "SVD"}]}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"r", "=", 
           RowBox[{"MatrixRank", "[", "G", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"U", ",", "S", ",", "V"}], "}"}], "=", 
           RowBox[{"SingularValueDecomposition", "[", "G", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", " ", 
           RowBox[{"Simplify", " ", "into", " ", "compact", " ", "form"}], 
           " ", "*)"}], "\[IndentingNewLine]", 
          RowBox[{"Ucomp", "=", 
           RowBox[{"U", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"1", ";;", 
               RowBox[{"Length", "[", "U", "]"}]}], ",", 
              RowBox[{"1", ";;", "r"}]}], "]"}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"Scomp", "=", 
           RowBox[{"S", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"1", ";;", "r"}], ",", 
              RowBox[{"1", ";;", "r"}]}], "]"}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"Vcomp", "=", 
           RowBox[{"V", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"1", ";;", 
               RowBox[{"Length", "[", "V", "]"}]}], ",", 
              RowBox[{"1", ";;", "r"}]}], "]"}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"solution", "=", 
           RowBox[{"Vcomp", ".", 
            RowBox[{"Inverse", "[", "Scomp", "]"}], ".", 
            RowBox[{"Transpose", "[", "Ucomp", "]"}], ".", "d"}]}], ";"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"closestPointsOnLines", "=", 
        RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", "=", "1"}], ",", 
         RowBox[{"i", "<=", "m"}], ",", 
         RowBox[{"i", "++"}], ",", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"closestPointsOnLines", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"points", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "+", 
            RowBox[{
             RowBox[{"solution", "[", 
              RowBox[{"[", 
               RowBox[{"n", "+", "i"}], "]"}], "]"}], "*", 
             RowBox[{
              RowBox[{"points", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}]}]}], "]"}]}], "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"solution", "[", 
          RowBox[{"[", 
           RowBox[{"1", ";;", "n"}], "]"}], "]"}], ",", 
         "closestPointsOnLines"}], "}"}]}]}], "\[IndentingNewLine]", "]"}]}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{
  3.8646253716521883`*^9, {3.8646254896584787`*^9, 3.8646254900783787`*^9}, {
   3.864625744193562*^9, 3.864625751646658*^9}, {3.864625791497428*^9, 
   3.864625794357088*^9}, {3.86462583083329*^9, 3.864625861208981*^9}, {
   3.864626330059211*^9, 3.864626333856081*^9}, {3.867753434325942*^9, 
   3.867753437032078*^9}, {3.867753593532217*^9, 3.867753603089663*^9}, {
   3.8677570896088963`*^9, 3.8677570975657587`*^9}},
 CellLabel->"In[64]:=",ExpressionUUID->"38620eff-cd11-4ca3-b261-47afdb9ccb3e"]
}, Closed]],

Cell[CellGroupData[{

Cell["Compute Gnomonic Projection", "Subsubsection",
 CellChangeTimes->{{3.864625186113894*^9, 
  3.864625192873859*^9}},ExpressionUUID->"7dc28108-3754-40c0-8a6c-\
17f8b35a2313"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Project", " ", "a", " ", "point", " ", "to", " ", "the", " ", "plane", 
    " ", "using", " ", "the", " ", "gnomonic", " ", "projection"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{
    RowBox[{"point", " ", "-", " ", 
     RowBox[{
     "point", " ", "which", " ", "should", " ", "be", " ", "mapped"}]}], ";", 
    "\[IndentingNewLine]", "\t", 
    RowBox[{"mappingpoint", " ", "-", " ", 
     RowBox[{
     "center", " ", "point", " ", "of", " ", "the", " ", "projection", " ", 
      "plane"}]}]}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"GnomonicProjectionPerHemisphere", "[", 
     RowBox[{"point_", ",", "mappingpoint_"}], "]"}], ":=", 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"latmpoint", "=", " ", 
         RowBox[{
          RowBox[{"CalculateLatLong", "[", "mappingpoint", "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"longmpoint", "=", 
         RowBox[{
          RowBox[{"CalculateLatLong", "[", "mappingpoint", "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"radius", "=", 
         RowBox[{
          RowBox[{"CalculateLatLong", "[", "mappingpoint", "]"}], "[", 
          RowBox[{"[", "3", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"latpoint", "=", " ", 
         RowBox[{
          RowBox[{"CalculateLatLong", "[", "point", "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"longpoint", "=", 
         RowBox[{
          RowBox[{"CalculateLatLong", "[", "point", "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", "x", 
        ",", "y", ",", "cosC"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"cosC", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"Sin", "[", 
           RowBox[{"latmpoint", " ", "Degree"}], "]"}], 
          RowBox[{"Sin", "[", 
           RowBox[{"latpoint", " ", "Degree"}], "]"}]}], "+", 
         RowBox[{
          RowBox[{"Cos", "[", 
           RowBox[{"latmpoint", " ", "Degree"}], "]"}], 
          RowBox[{"Cos", "[", 
           RowBox[{"latpoint", " ", "Degree"}], "]"}], 
          RowBox[{"Cos", "[", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"longpoint", "-", "longmpoint"}], ")"}], " ", "Degree"}],
            "]"}]}]}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"x", " ", "=", " ", 
        RowBox[{"radius", "*", 
         RowBox[{"1", "/", "cosC"}], "*", 
         RowBox[{"Cos", "[", 
          RowBox[{"latpoint", " ", "Degree"}], "]"}], "*", 
         RowBox[{"Sin", "[", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"longpoint", "-", "longmpoint"}], ")"}], " ", "Degree"}], 
          "]"}]}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"y", "=", 
        RowBox[{"radius", "*", 
         RowBox[{"1", "/", "cosC"}], "*", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"Cos", "[", 
             RowBox[{"latmpoint", " ", "Degree"}], "]"}], "*", 
            RowBox[{"Sin", "[", 
             RowBox[{"latpoint", " ", "Degree"}], "]"}]}], "-", 
           RowBox[{
            RowBox[{"Sin", "[", 
             RowBox[{"latmpoint", " ", "Degree"}], "]"}], "*", 
            RowBox[{"Cos", "[", 
             RowBox[{"latpoint", " ", "Degree"}], "]"}], "*", 
            RowBox[{"Cos", "[", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"longpoint", "-", "longmpoint"}], ")"}], " ", 
              "Degree"}], "]"}]}]}], ")"}]}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"x", ",", "y"}], "}"}]}]}], "]"}]}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Get", " ", "12", " ", "points", " ", "on", " ", "the", " ", "uni", " ", 
     "sphere", " ", "with", " ", "each", " ", "having", " ", "the", " ", 
     "same", " ", "distance", " ", "to", " ", "their", " ", "neighbors"}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Get12Hemispheres", "[", "]"}], ":=", "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "vec", ",", "vec2", ",", "vec3", ",", "vec4", ",", "vec5", ",", "vec6",
         ",", "x"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"x", "=", 
        RowBox[{"RandomReal", "[", "Pi", "]"}]}], ";", "\[IndentingNewLine]", 
       
       RowBox[{"vec", "=", " ", 
        RowBox[{"Normalize", "[", 
         RowBox[{"{", 
          RowBox[{"1", ",", "0", ",", "0"}], "}"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec2", " ", "=", " ", 
        RowBox[{"Normalize", "[", 
         RowBox[{"{", 
          RowBox[{"0", ",", "1", ",", "0"}], "}"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec3", " ", "=", " ", 
        RowBox[{"Normalize", "[", 
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "1"}], "}"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec4", "=", 
        RowBox[{"Normalize", "[", 
         RowBox[{"{", 
          RowBox[{"1", ",", "1", ",", "1"}], "}"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec5", "=", 
        RowBox[{"Normalize", "[", 
         RowBox[{"{", 
          RowBox[{"1", ",", "1", ",", 
           RowBox[{"-", "1"}]}], "}"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"vec6", "=", 
        RowBox[{"Normalize", "[", 
         RowBox[{"{", 
          RowBox[{"1", ",", 
           RowBox[{"-", "1"}], ",", 
           RowBox[{"-", "1"}]}], "}"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"vec", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "-", 
           RowBox[{
            RowBox[{"vec", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"vec", "[", 
             RowBox[{"[", "1", "]"}], "]"}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec", "[", 
             RowBox[{"[", "2", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec2", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec2", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "-", 
           RowBox[{
            RowBox[{"vec2", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"vec2", "[", 
             RowBox[{"[", "1", "]"}], "]"}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec2", "[", 
             RowBox[{"[", "2", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec2", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec3", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec3", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "-", 
           RowBox[{
            RowBox[{"vec3", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"vec3", "[", 
             RowBox[{"[", "1", "]"}], "]"}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec3", "[", 
             RowBox[{"[", "2", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec3", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec4", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec4", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "-", 
           RowBox[{
            RowBox[{"vec4", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"vec4", "[", 
             RowBox[{"[", "1", "]"}], "]"}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec4", "[", 
             RowBox[{"[", "2", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec4", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec5", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec5", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "-", 
           RowBox[{
            RowBox[{"vec5", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"vec5", "[", 
             RowBox[{"[", "1", "]"}], "]"}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec5", "[", 
             RowBox[{"[", "2", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec5", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec6", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec6", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "-", 
           RowBox[{
            RowBox[{"vec6", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"vec6", "[", 
             RowBox[{"[", "1", "]"}], "]"}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec6", "[", 
             RowBox[{"[", "2", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec6", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"x", " ", "=", " ", 
        RowBox[{"RandomReal", "[", "Pi", "]"}]}], ";", "\[IndentingNewLine]", 
       
       RowBox[{"vec", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec", "[", 
           RowBox[{"[", "2", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"-", 
             RowBox[{"vec", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec", "[", 
             RowBox[{"[", "3", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec2", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec2", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec2", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec2", "[", 
           RowBox[{"[", "2", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"-", 
             RowBox[{"vec2", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec2", "[", 
             RowBox[{"[", "3", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec3", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec3", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec3", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec3", "[", 
           RowBox[{"[", "2", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"-", 
             RowBox[{"vec3", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec3", "[", 
             RowBox[{"[", "3", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec4", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec4", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec4", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec4", "[", 
           RowBox[{"[", "2", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"-", 
             RowBox[{"vec4", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec4", "[", 
             RowBox[{"[", "3", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec5", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec5", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec5", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec5", "[", 
           RowBox[{"[", "2", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"-", 
             RowBox[{"vec5", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec5", "[", 
             RowBox[{"[", "3", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"vec6", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"vec6", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "*", 
            RowBox[{"Cos", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec6", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "*", 
            RowBox[{"Sin", "[", "x", "]"}]}]}], ",", 
          RowBox[{"vec6", "[", 
           RowBox[{"[", "2", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{
            RowBox[{"-", 
             RowBox[{"vec6", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], 
            RowBox[{"Sin", "[", "x", "]"}]}], "+", 
           RowBox[{
            RowBox[{"vec6", "[", 
             RowBox[{"[", "3", "]"}], "]"}], 
            RowBox[{"Cos", "[", "x", "]"}]}]}]}], "}"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"vec", ",", 
         RowBox[{"-", "vec"}], ",", " ", "vec2", ",", 
         RowBox[{"-", "vec2"}], ",", "vec3", ",", 
         RowBox[{"-", "vec3"}], ",", "vec4", ",", 
         RowBox[{"-", "vec4"}], ",", "vec5", ",", 
         RowBox[{"-", "vec5"}], ",", "vec6", ",", 
         RowBox[{"-", "vec6"}]}], "}"}]}]}], "\[IndentingNewLine]", "]"}]}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{
     "Get", " ", "the", " ", "part", " ", "of", " ", "the", " ", "arc", " ", 
      "which", " ", "is", " ", "on", " ", "the", " ", "plane", " ", "for", 
      " ", "a", " ", "given", " ", "projection", " ", "center"}], ",", " ", 
     RowBox[{
     "and", " ", "give", " ", "the", " ", "wall", " ", "which", " ", 
      "created", " ", "the", " ", "measurement"}]}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\t", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"start", ",", " ", "end"}], "}"}], " ", "-", " ", 
      RowBox[{
      "start", " ", "and", "  ", "endpoint", " ", "of", " ", "an", " ", "arc",
        " ", "in", " ", "cartesian", " ", "coordinates"}]}], ";", 
     "\[IndentingNewLine]", "\t", 
     RowBox[{"mappingpoint", " ", "-", " ", 
      RowBox[{
      "center", " ", "point", " ", "of", " ", "the", " ", "projection", " ", 
       "plane", " ", "in", " ", "cartesian", " ", "coordinates"}]}]}], 
    "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"FindArcOnHemisphere", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"start_", ",", "end_"}], "}"}], ",", "mappingpoint_", ",", 
       "morehemispheres_"}], "]"}], ":=", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "Get", " ", "start", " ", "and", " ", "endpoint", " ", "in", " ", 
       "cartesian", " ", "of", " ", "an", " ", "arc", " ", "and", " ", 
       "return", " ", "the", " ", "edge", " ", "points", " ", "on", " ", 
       "the", " ", "arc", " ", "which", " ", "are", " ", "mapped", " ", "on", 
       " ", "this", " ", "hemisphere"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"startLatLong", "=", " ", 
          RowBox[{"CalculateLatLong", "[", "start", "]"}]}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"centerpoint", "=", 
          RowBox[{"Normalize", "[", 
           RowBox[{
            RowBox[{"Findcenterpoint", "[", 
             RowBox[{"{", 
              RowBox[{"start", ",", "end"}], "}"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ",", 
         "\[IndentingNewLine]", "centerLatLong", ",", "\[IndentingNewLine]", 
         RowBox[{"endLatLong", "=", " ", 
          RowBox[{"CalculateLatLong", "[", "end", "]"}]}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"mappingLatLong", " ", "=", " ", 
          RowBox[{"CalculateLatLong", "[", "mappingpoint", "]"}]}], ",", 
         "\[IndentingNewLine]", "startCosC", ",", " ", "endCosC", ",", 
         "centerCosC", ",", "\[IndentingNewLine]", 
         RowBox[{"output", "=", 
          RowBox[{"{", 
           RowBox[{"start", ",", " ", "end"}], "}"}]}], ",", 
         "\[IndentingNewLine]", "cosCThreshold"}], "\[IndentingNewLine]", 
        "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"cosCThreshold", "=", "0.577"}], ";", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{"cos", " ", "C"}], " ", "=", " ", 
          RowBox[{
          "0.577", " ", "equals", " ", "a", " ", "degree", " ", "of", " ", 
           "approximatly", " ", "54.74", "\[Degree]"}]}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{"for", " ", "12", " ", "hemispheres", " ", "cosc"}], "=", 
          RowBox[{"0.7944", " ", "equals", " ", "37.4", "\[Degree]"}]}], 
         "*)"}], "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{"morehemispheres", ",", 
          RowBox[{"cosCThreshold", "=", "0.7944"}]}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"centerLatLong", "=", 
         RowBox[{"CalculateLatLong", "[", "centerpoint", "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"startCosC", " ", "=", " ", 
         RowBox[{"GetCosC", "[", 
          RowBox[{"startLatLong", ",", "mappingLatLong"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"endCosC", "=", 
         RowBox[{"GetCosC", "[", 
          RowBox[{"endLatLong", ",", "mappingLatLong"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"centerCosC", "=", 
         RowBox[{"GetCosC", "[", 
          RowBox[{"centerLatLong", ",", " ", "mappingLatLong"}], "]"}]}], ";",
         "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"startCosC", "<=", "cosCThreshold"}], " ", "&&", " ", 
           RowBox[{"endCosC", "<=", "cosCThreshold"}], "&&", 
           RowBox[{"centerCosC", "<=", "cosCThreshold"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{
           "arc", " ", "does", " ", "not", " ", "appear", " ", "on", " ", 
            "hemisphere"}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{"output", " ", "=", " ", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"False", ",", "False"}], "}"}], ",", 
             RowBox[{"{", 
              RowBox[{"False", ",", "False"}], "}"}]}], "}"}]}]}], "]"}], ";",
         "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"startCosC", ">", "cosCThreshold"}], "&&", 
           RowBox[{"endCosC", ">", "cosCThreshold"}], "&&", 
           RowBox[{"centerCosC", ">", "cosCThreshold"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{"Full", " ", "arc", " ", "on", " ", "hemisphere"}], "*)"}],
           "\[IndentingNewLine]", " ", 
          RowBox[{
           RowBox[{"output", "=", " ", 
            RowBox[{"{", 
             RowBox[{"start", ",", " ", "end"}], "}"}]}], ";"}]}], 
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"startCosC", ">", "cosCThreshold"}], "&&", 
           RowBox[{"endCosC", "<=", "cosCThreshold"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{
           "start", " ", "on", " ", "hemisphere", " ", "end", " ", "not"}], 
           "*)"}], "\[IndentingNewLine]", 
          RowBox[{"output", "=", 
           RowBox[{"{", 
            RowBox[{"start", ",", 
             RowBox[{"FindPointOnArcOnHemisphere", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"start", ",", "end"}], "}"}], ",", " ", 
               "mappingpoint", ",", "morehemispheres", ",", "100"}], "]"}]}], 
            "}"}]}]}], "\[IndentingNewLine]", "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"startCosC", "<=", "cosCThreshold"}], "&&", 
           RowBox[{"endCosC", ">", "cosCThreshold"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{
           "end", " ", "on", " ", "hemisphere", " ", "star", " ", "not"}], 
           "*)"}], "\[IndentingNewLine]", 
          RowBox[{"output", "=", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"FindPointOnArcOnHemisphere", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"end", ",", "start"}], "}"}], ",", " ", 
               "mappingpoint", ",", "morehemispheres", ",", "100"}], "]"}], 
             ",", "end"}], "}"}]}]}], "\[IndentingNewLine]", "]"}], ";", 
        "\[IndentingNewLine]", "output"}]}], "\[IndentingNewLine]", "]"}]}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Find", " ", "the", " ", "point", " ", "between", " ", "two", " ", 
     "points", " ", "which", " ", "is", " ", "on", " ", "the", " ", "plane", 
     " ", 
     RowBox[{"(", 
      RowBox[{
      "Close", " ", "to", " ", "the", " ", "CosC", " ", "Threshhold"}], ")"}],
      " ", "and", " ", "give", " ", "the", " ", "wall", " ", "which", " ", 
     "created", " ", "each", " ", "measurement"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "\t", 
    RowBox[{
     RowBox[{"points", " ", "-", " ", 
      RowBox[{"points", " ", "on", " ", "the", " ", "arc", " ", 
       RowBox[{"points", "[", 
        RowBox[{"[", "1", "]"}], "]"}], " ", "is", " ", "on", " ", "the", " ",
        "plane", " ", 
       RowBox[{"points", "[", 
        RowBox[{"[", "2", "]"}], "]"}], " ", "is", " ", "not", " ", "on", " ",
        "the", " ", "plane"}]}], ";", "\[IndentingNewLine]", "\t", 
     RowBox[{"mappingpoint", " ", "-", " ", 
      RowBox[{
      "center", " ", "point", " ", "of", " ", "the", " ", "projection", " ", 
       "plane"}]}], " ", ";", "\[IndentingNewLine]", "\t", 
     RowBox[{"morehemispheres", " ", "-", " ", 
      RowBox[{
       RowBox[{"(", "Bool", ")"}], " ", "True", " ", "when", " ", "using", 
       " ", "12", " ", "planes", " ", "False", " ", "when", " ", "using", " ",
        "6", " ", "planes"}]}]}], "\[IndentingNewLine]", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"FindPointOnArcOnHemisphere", "[", 
     RowBox[{"points_", ",", "mappingpoint_", ",", "morehemispheres_", ",", 
      RowBox[{"iterations_", ":", "100"}]}], "]"}], ":=", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{
      "Given", " ", "Two", " ", "points", " ", "in", " ", "cartesian", " ", 
       "cordinates", " ", "find", " ", "the", " ", "point", " ", "on", " ", 
       "the", " ", "arc", " ", "between", " ", "these", " ", "points", " ", 
       "which", " ", "is", " ", "pretty", " ", "close", " ", "to", " ", 
       "CosC"}], "=", 
      RowBox[{
      "0", "\[IndentingNewLine]", "The", " ", "First", " ", "element", " ", 
       "in", " ", "points", " ", "is", " ", "on", " ", "the", " ", 
       "hemisphere", " ", "while", " ", "the", " ", "second", " ", "element", 
       " ", "in", " ", "points", " ", "is", " ", "not", " ", "on", " ", "the",
        " ", "sphere"}]}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"angle", "=", 
         RowBox[{"VectorAngle", "[", 
          RowBox[{
           RowBox[{"points", "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", 
           RowBox[{"points", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ",", " ", "cosC", " ", 
        ",", " ", "newcenterpoint", ",", " ", "centerpointLatLong", ",", " ", 
        
        RowBox[{"mappingpointLatLong", "=", 
         RowBox[{"CalculateLatLong", "[", "mappingpoint", "]"}]}], ",", " ", 
        RowBox[{"startEnd", "=", "points"}], ",", " ", "output", ",", 
        "cosCThreshold", ",", "i"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", "=", "1"}], ",", " ", 
         RowBox[{"i", "<=", " ", "iterations"}], ",", " ", 
         RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"newcenterpoint", "=", " ", 
           RowBox[{"N", "[", 
            RowBox[{
             RowBox[{"Findcenterpoint", "[", "startEnd", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"newcenterpoint", "=", 
           RowBox[{"Normalize", "[", "newcenterpoint", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"centerpointLatLong", "=", 
           RowBox[{"CalculateLatLong", "[", "newcenterpoint", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"cosC", "=", 
           RowBox[{"GetCosC", "[", 
            RowBox[{"centerpointLatLong", ",", " ", "mappingpointLatLong"}], 
            "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"cosCThreshold", "=", "0.64"}], ";", "\[IndentingNewLine]", 
          
          RowBox[{"(*", 
           RowBox[{"for", " ", "12", " ", "hemispheres"}], "*)"}], 
          "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{"morehemispheres", ",", 
            RowBox[{"cosCThreshold", "=", "0.89"}]}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"cosC", ">", "cosCThreshold"}], ",", 
            RowBox[{"startEnd", "=", 
             RowBox[{"{", 
              RowBox[{"newcenterpoint", ",", 
               RowBox[{"startEnd", "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ",", 
            RowBox[{"startEnd", "=", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"startEnd", "[", 
                RowBox[{"[", "1", "]"}], "]"}], ",", "newcenterpoint"}], " ", 
              "}"}]}]}], "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"startEnd", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
     "]"}]}]}]}]], "Input",
 CellChangeTimes->{
  3.864625244560019*^9, {3.864625390761615*^9, 3.864625447299304*^9}, {
   3.864625502303053*^9, 3.864625502463628*^9}, {3.864625537127925*^9, 
   3.8646255638220882`*^9}, {3.864625603004136*^9, 3.864625644369578*^9}, {
   3.864625910519168*^9, 3.8646259117915497`*^9}, {3.86462595540215*^9, 
   3.864626041167178*^9}, {3.864626073205195*^9, 3.864626112707806*^9}},
 CellLabel->"In[75]:=",ExpressionUUID->"f4dd29f8-4fc6-466a-8be5-46e980d56572"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Project", " ", "a", " ", "point", " ", "to", " ", "the", " ", "plane", 
    " ", "using", " ", "the", " ", "gnomonic", " ", "projection", " ", "and", 
    " ", "give", " ", "the", " ", "wall", " ", "which", " ", "created", " ", 
    "each", " ", 
    RowBox[{"measurement", "."}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "Function", " ", "slightly", " ", "modified", " ", "to", " ", "be", " ", 
    "compatible", " ", "with", " ", "the", " ", "input", " ", "format", " ", 
    RowBox[{"(", 
     RowBox[{"i", ".", "e", ".", " ", "measurements"}], ")"}], " ", "used", 
    " ", "in", " ", "this", " ", "notebook"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{"morehemispheres", " ", "-", " ", 
    RowBox[{
     RowBox[{"(", "Bool", ")"}], " ", "Use", " ", "12", " ", 
     RowBox[{"(", "true", ")"}], " ", "planes", " ", "or", " ", "6", " ", 
     "planes", " ", 
     RowBox[{"(", "false", ")"}]}]}], "\[IndentingNewLine]", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"GnomonicProjection", "[", 
      RowBox[{"measurements_", ",", " ", "morehemispheres_"}], "]"}], ":=", 
     "\[IndentingNewLine]", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"arcs", ",", " ", 
         RowBox[{"arclists", "=", 
          RowBox[{"{", "}"}]}], ",", 
         RowBox[{"arcidlists", "=", 
          RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{"x", "=", 
          RowBox[{"RandomReal", "[", "]"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{"y", "=", 
          RowBox[{"RandomReal", "[", "]"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{"z", " ", "=", " ", 
          RowBox[{"RandomReal", "[", "]"}]}], ",", "\[IndentingNewLine]", 
         "vec", " ", ",", "\[IndentingNewLine]", "vec2", ",", 
         "\[IndentingNewLine]", "vec3", " ", ",", "\[IndentingNewLine]", 
         "mappingpoints", ",", "\[IndentingNewLine]", "arc", ",", 
         "\[IndentingNewLine]", "directionsDeltaList", ",", 
         "\[IndentingNewLine]", "safe", ",", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"make", " ", "iteratos", " ", "local", " ", "variables"}], 
          " ", "*)"}], "\[IndentingNewLine]", "i", ",", "j", ",", "k"}], 
        "}"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"vec", "=", " ", 
         RowBox[{"Normalize", "[", 
          RowBox[{"{", 
           RowBox[{"x", ",", "y", ",", "z"}], "}"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"vec2", " ", "=", " ", 
         RowBox[{"Normalize", "[", 
          RowBox[{"Cross", "[", 
           RowBox[{"vec", ",", 
            RowBox[{"{", 
             RowBox[{"y", ",", "x", ",", "z"}], "}"}]}], "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"vec3", " ", "=", " ", 
         RowBox[{"Normalize", "[", 
          RowBox[{"Cross", "[", 
           RowBox[{"vec", ",", "vec2"}], "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"mappingpoints", "=", 
         RowBox[{"{", 
          RowBox[{"vec", ",", 
           RowBox[{"-", "vec"}], ",", "vec2", ",", 
           RowBox[{"-", "vec2"}], ",", "vec3", ",", 
           RowBox[{"-", "vec3"}]}], "}"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{"morehemispheres", ",", 
          RowBox[{"mappingpoints", "=", 
           RowBox[{"Get12Hemispheres", "[", "]"}]}]}], "]"}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"arcs", " ", "=", " ", 
         RowBox[{"MapToUnitCircleWithWall", "[", "measurements", "]"}]}], ";",
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"k", "=", " ", "1"}], ",", " ", 
          RowBox[{"k", "<=", " ", 
           RowBox[{"Length", "[", "mappingpoints", "]"}]}], ",", " ", 
          RowBox[{"k", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"AppendTo", "[", 
            RowBox[{"arclists", ",", 
             RowBox[{"{", "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"AppendTo", "[", 
            RowBox[{"arcidlists", ",", 
             RowBox[{"{", "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"For", "[", 
            RowBox[{
             RowBox[{"j", "=", "1"}], ",", " ", 
             RowBox[{"j", " ", "<=", " ", 
              RowBox[{"Length", "[", "arcs", "]"}]}], ",", 
             RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"arc", " ", "=", " ", 
               RowBox[{"FindArcOnHemisphere", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"arcs", "[", 
                   RowBox[{"[", "j", "]"}], "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
                 RowBox[{"mappingpoints", "[", 
                  RowBox[{"[", "k", "]"}], "]"}], ",", "morehemispheres"}], 
                "]"}]}], ";", "\[IndentingNewLine]", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{"arc", " ", "!=", " ", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{"False", ",", "False"}], "}"}], ",", 
                   RowBox[{"{", 
                    RowBox[{"False", ",", "False"}], "}"}]}], "}"}]}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{"arc", "=", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"GnomonicProjectionPerHemisphere", "[", 
                    RowBox[{
                    RowBox[{"arc", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
                    RowBox[{"mappingpoints", "[", 
                    RowBox[{"[", "k", "]"}], "]"}]}], "]"}], ",", 
                    RowBox[{"GnomonicProjectionPerHemisphere", "[", 
                    RowBox[{
                    RowBox[{"arc", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", " ", 
                    RowBox[{"mappingpoints", "[", 
                    RowBox[{"[", "k", "]"}], "]"}]}], "]"}]}], "}"}]}], ";", 
                 "\[IndentingNewLine]", 
                 RowBox[{"AppendTo", "[", 
                  RowBox[{
                   RowBox[{"arclists", "[", 
                    RowBox[{"[", "k", "]"}], "]"}], ",", "arc"}], "]"}], ";", 
                 "\[IndentingNewLine]", 
                 RowBox[{"AppendTo", "[", 
                  RowBox[{
                   RowBox[{"arcidlists", "[", 
                    RowBox[{"[", "k", "]"}], "]"}], ",", "j"}], "]"}], 
                 ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
         "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
         "arclists", ",", "mappingpoints", ",", "arcidlists", ",", "arcs"}], 
         "}"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{
  3.864625244560019*^9, {3.864625390761615*^9, 3.864625447299304*^9}, {
   3.864625502303053*^9, 3.864625502463628*^9}, {3.864625537127925*^9, 
   3.8646255638220882`*^9}, {3.864625603004136*^9, 3.864625644369578*^9}, {
   3.864625910519168*^9, 3.8646259117915497`*^9}, {3.86462595540215*^9, 
   3.864626041167178*^9}, {3.864626073205195*^9, 3.864626127654209*^9}, {
   3.864626180330723*^9, 3.864626302497308*^9}, {3.8646263730647993`*^9, 
   3.864626386253138*^9}, {3.864626663420289*^9, 3.864626670460937*^9}, {
   3.8646267350435343`*^9, 3.864626818855452*^9}, {3.864627158850464*^9, 
   3.864627176262165*^9}, {3.864628055217745*^9, 3.864628056526518*^9}},
 CellLabel->"In[79]:=",ExpressionUUID->"79c8a9db-a6d6-4365-b633-96924684715c"]
}, Closed]],

Cell[CellGroupData[{

Cell["Helper functions for Intersections", "Subsubsection",
 CellChangeTimes->{{3.864627534467527*^9, 
  3.8646275526068077`*^9}},ExpressionUUID->"24d58b74-4ee6-4744-9d80-\
deca436b9475"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Do", " ", "two", " ", "given", " ", "lines", " ", "intersect"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{
    RowBox[{"segment1", " ", "-", " ", 
     RowBox[{
     "line", " ", "given", " ", "with", " ", "starting", " ", "and", " ", 
      "end", " ", "point"}]}], ";", "\[IndentingNewLine]", "\t", 
    RowBox[{"segment2", " ", "-", " ", 
     RowBox[{
     "line", " ", "given", " ", "with", " ", "starting", " ", "and", " ", 
      "end", " ", "point"}]}], ";"}], "\[IndentingNewLine]", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"DoIntersect", "[", 
    RowBox[{"segment1_", ",", " ", "segment2_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"p1", " ", "=", " ", 
        RowBox[{"segment1", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
       RowBox[{"q1", " ", "=", " ", 
        RowBox[{"segment1", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ",", " ", 
       RowBox[{"p2", " ", "=", " ", 
        RowBox[{"segment2", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
       RowBox[{"q2", " ", "=", " ", 
        RowBox[{"segment2", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", "o1", 
       ",", "o2", ",", "o3", ",", "o4", ",", " ", 
       RowBox[{"return", "=", "False"}]}], "}"}], ",", "\[IndentingNewLine]", 
     
     RowBox[{
      RowBox[{"o1", " ", "=", " ", 
       RowBox[{"Orientation", "[", 
        RowBox[{"p1", ",", "q1", ",", "p2"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"o2", "=", " ", 
       RowBox[{"Orientation", "[", 
        RowBox[{"p1", ",", "q1", ",", "q2"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"o3", " ", "=", " ", 
       RowBox[{"Orientation", "[", 
        RowBox[{"p2", ",", "q2", ",", "p1"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"o4", " ", "=", " ", 
       RowBox[{"Orientation", "[", 
        RowBox[{"p2", ",", "q2", ",", "q1"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"o1", "!=", "o2"}], " ", "&&", " ", 
         RowBox[{"o3", "!=", "o4"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"return", " ", "=", " ", "True"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"o1", "==", "0"}], " ", "&&", 
         RowBox[{"OnSegment", "[", 
          RowBox[{"p1", ",", "p2", ",", "q1"}], "]"}]}], ",", 
        RowBox[{"return", " ", "=", " ", "True"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"o2", "==", "0"}], " ", "&&", 
         RowBox[{"OnSegment", "[", 
          RowBox[{"p1", ",", "q2", ",", "q1"}], "]"}]}], ",", 
        RowBox[{"return", " ", "=", " ", "True"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"o3", "==", "0"}], " ", "&&", 
         RowBox[{"OnSegment", "[", 
          RowBox[{"p2", ",", "p1", ",", "q2"}], "]"}]}], ",", 
        RowBox[{"return", " ", "=", " ", "True"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"o4", "==", "0"}], " ", "&&", 
         RowBox[{"OnSegment", "[", 
          RowBox[{"p2", ",", "q1", ",", "q2"}], "]"}]}], ",", 
        RowBox[{"return", " ", "=", " ", "True"}]}], "]"}], ";", 
      "\[IndentingNewLine]", "return"}]}], "\[IndentingNewLine]", 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864627556603798*^9, 3.8646275804352303`*^9}},
 CellLabel->"In[80]:=",ExpressionUUID->"6655a247-13ed-4401-9d00-9001f4997e8d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Given", " ", "three", " ", "collinear", " ", "points", " ", "p1"}], ",", 
    "p2", ",", 
    RowBox[{
    "p3", " ", "check", " ", "if", "\n", "point", " ", "p2", " ", "lies", " ",
      "on", " ", "line", " ", 
     RowBox[{"segment", "'"}], 
     RowBox[{"p1p3", "'"}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", " ", 
   RowBox[{"p1", ",", "p2", ",", 
    RowBox[{
     RowBox[{"p3", " ", "-", " ", 
      RowBox[{"collinear", " ", "points"}]}], ";"}]}], "\[IndentingNewLine]", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"OnSegment", "[", 
    RowBox[{"p1_", ",", " ", "p2_", ",", " ", "p3_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "output", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"p2", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "<=", " ", 
          RowBox[{"Max", "[", 
           RowBox[{
            RowBox[{"p1", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
            RowBox[{"p3", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], "]"}]}], " ", "&&", " ", 
         RowBox[{
          RowBox[{"p2", "[", 
           RowBox[{"[", "1", "]"}], "]"}], ">=", 
          RowBox[{"Min", "[", 
           RowBox[{
            RowBox[{"p1", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
            RowBox[{"p3", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], "]"}]}], "&&", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"p2", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "<=", 
          RowBox[{"Max", "[", 
           RowBox[{
            RowBox[{"p1", "[", 
             RowBox[{"[", "2", "]"}], "]"}], ",", 
            RowBox[{"p3", "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], "&&", " ", 
         RowBox[{
          RowBox[{"p2", "[", 
           RowBox[{"[", "2", "]"}], "]"}], ">=", " ", 
          RowBox[{"Min", "[", 
           RowBox[{
            RowBox[{"p1", "[", 
             RowBox[{"[", "2", "]"}], "]"}], ",", " ", 
            RowBox[{"p3", "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"output", " ", "=", " ", "True"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"output", "=", "False"}], ";"}]}], "\[IndentingNewLine]", 
       "]"}], ";", "\[IndentingNewLine]", "output"}]}], "\[IndentingNewLine]",
     "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864627556603798*^9, 3.864627578708156*^9}},
 CellLabel->"In[81]:=",ExpressionUUID->"736f7be4-0756-4c22-84b8-0ab0607d9b82"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{
     "Find", " ", "the", " ", "orientation", " ", "of", " ", "ordered", " ", 
      "triplet", " ", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"p1", ",", "p2", ",", "p3"}], ")"}], ".", 
       "\[IndentingNewLine]", "Returns"}]}], ";", "\[IndentingNewLine]", "\t", 
     RowBox[{
      RowBox[{"0", "--"}], ">", "p1"}]}], ",", 
    RowBox[{
     RowBox[{"p2", " ", "and", " ", "p3", " ", "are", " ", "collinear"}], ";",
      "\[IndentingNewLine]", "\t", 
     RowBox[{
      RowBox[{"1", "--"}], ">", "Clockwise"}], ";", "\[IndentingNewLine]", 
     "\t", 
     RowBox[{
      RowBox[{"2", "--"}], ">", "Counterclockwise"}]}]}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{"p1", ",", "p2", ",", 
    RowBox[{"p3", " ", "-", " ", "points"}]}], "\[IndentingNewLine]", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Orientation", "[", 
    RowBox[{"p1_", ",", " ", "p2_", ",", "p3_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"return", ",", " ", "value"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"value", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"p2", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "-", 
           RowBox[{"p1", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], ")"}], "*", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"p3", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "-", 
           RowBox[{"p2", "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], ")"}]}], "-", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"p2", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "-", 
           RowBox[{"p1", "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], ")"}], "*", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"p3", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "-", 
           RowBox[{"p2", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], ")"}]}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"value", " ", "==", "0"}], ",", "\[IndentingNewLine]", 
        RowBox[{"return", " ", "=", " ", "0"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"value", ">", "0"}], ",", "\[IndentingNewLine]", 
           RowBox[{"return", " ", "=", "1"}], ",", "\[IndentingNewLine]", 
           RowBox[{"return", " ", "=", "2"}]}], "\[IndentingNewLine]", "]"}], 
         ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "return"}]}], "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864627556603798*^9, 3.864627574598961*^9}, {
  3.8713765100813*^9, 3.871376541942881*^9}},
 CellLabel->"In[82]:=",ExpressionUUID->"d39e2219-e012-4e02-b9f2-29ce070815d8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"CleanGroups", "[", "groups_", "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"newGroups", "=", 
       RowBox[{"{", "}"}]}], ",", 
      RowBox[{"mergedGroupIndices", "=", 
       RowBox[{"{", "}"}]}]}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"doesIntersectFlag", "=", "False"}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"MemberQ", "[", 
             RowBox[{"mergedGroupIndices", ",", "outerGroupIndex"}], "]"}], 
            ",", 
            RowBox[{"doesIntersectFlag", "=", "True"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"Do", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Block", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"intersection", "=", "Intersection"}], "}"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"Length", "[", "intersection", "]"}], ">", "0"}], 
                  ",", "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"doesIntersectFlag", "=", "True"}], ";", 
                   "\[IndentingNewLine]", 
                   RowBox[{"AppendTo", "[", 
                    RowBox[{"mergedGroupIndices", ",", "innerGroupIndex"}], 
                    "]"}], ";", "\[IndentingNewLine]", 
                   RowBox[{"AppendTo", "[", 
                    RowBox[{"newGroups", ",", "intersection"}], "]"}]}]}], 
                 "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}],
               "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"innerGroupIndex", ",", 
                RowBox[{"outerGroupIndex", "+", "1"}], ",", 
                RowBox[{"Length", "[", "groups", "]"}]}], "}"}]}], "]"}]}], 
           "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", "doesIntersectFlag"}], ",", 
            RowBox[{"AppendTo", "[", 
             RowBox[{"newGroups", ",", 
              RowBox[{"groups", "[", 
               RowBox[{"[", "outerGroupIndex", "]"}], "]"}]}], "]"}]}], 
           "]"}]}]}], "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", 
       ",", 
       RowBox[{"{", 
        RowBox[{"outerGroupIndex", ",", 
         RowBox[{"Length", "[", "groups", "]"}]}], "}"}]}], "]"}], ";", 
     "\[IndentingNewLine]", "newGroups"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.864627556603798*^9, 3.864627574598961*^9}, {
  3.8713765100813*^9, 3.871376541942881*^9}, {3.871376715398931*^9, 
  3.871376783566752*^9}, {3.8713768159823933`*^9, 3.871376981401956*^9}, {
  3.87137701691402*^9, 3.871377050773834*^9}, {3.8713770859416733`*^9, 
  3.8713771732203693`*^9}},
 CellLabel->"In[83]:=",ExpressionUUID->"6beefaa4-a967-4c97-bcb6-75c9fc792a7e"]
}, Closed]],

Cell[CellGroupData[{

Cell["Compute Walls from Gnomonic Projection (Basic Intersections)", \
"Subsubsection",
 CellChangeTimes->{{3.864627272669058*^9, 3.864627279857603*^9}, {
  3.864627472019299*^9, 
  3.864627478478615*^9}},ExpressionUUID->"fa0ba89c-7919-4292-88c1-\
ee23858798ba"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Find", " ", "Groups", " ", "of", " ", "intersecting", " ", "lines"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{
    RowBox[{"lines", "-", " ", 
     RowBox[{"the", " ", "lines", " ", "on", " ", "a", " ", "plane"}]}], ";", 
    "\[IndentingNewLine]", "\t", 
    RowBox[{"lineids", " ", "-", " ", 
     RowBox[{
     "the", " ", "line", " ", "ids", " ", "for", " ", "the", " ", "lines", 
      " ", "on", " ", "the", " ", "plane"}]}], ";"}], "\[IndentingNewLine]", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"FindGroups", "[", 
    RowBox[{"lines_", ",", " ", "lineids_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"closestPoint", ",", " ", 
       RowBox[{"pairs", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"idpairs", "=", 
        RowBox[{"{", "}"}]}], ",", " ", 
       RowBox[{"groups", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"idgroups", "=", 
        RowBox[{"{", "}"}]}], ",", " ", 
       RowBox[{"walls", "=", 
        RowBox[{"{", "}"}]}], ",", " ", "list", ",", "pointonline", ",", " ", 
       "newvec", ",", "line1", ",", "line2", ",", "t", ",", "r"}], "}"}], ",",
      "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"line1", " ", "=", " ", "1"}], ",", " ", 
        RowBox[{"line1", "<=", " ", 
         RowBox[{"Length", "[", "lines", "]"}]}], ",", " ", 
        RowBox[{"line1", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"line2", " ", "=", " ", 
            RowBox[{"line1", "+", "1"}]}], ",", " ", 
           RowBox[{"line2", " ", "<=", " ", 
            RowBox[{"Length", "[", "lines", "]"}]}], ",", " ", 
           RowBox[{"line2", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"DoIntersect", "[", 
               RowBox[{
                RowBox[{"lines", "[", 
                 RowBox[{"[", "line1", "]"}], "]"}], ",", 
                RowBox[{"lines", "[", 
                 RowBox[{"[", "line2", "]"}], "]"}]}], "]"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"AppendTo", "[", 
                RowBox[{"pairs", ",", 
                 RowBox[{"UndirectedEdge", "[", 
                  RowBox[{"line1", ",", " ", "line2"}], "]"}]}], "]"}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"AppendTo", "[", 
                RowBox[{"idpairs", ",", 
                 RowBox[{"UndirectedEdge", "[", 
                  RowBox[{
                   RowBox[{"lineids", "[", 
                    RowBox[{"[", "line1", "]"}], "]"}], ",", 
                   RowBox[{"lineids", "[", 
                    RowBox[{"[", "line2", "]"}], "]"}]}], "]"}]}], "]"}], 
               ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", "]"}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"groups", "=", 
       RowBox[{"ConnectedComponents", "[", 
        RowBox[{"Graph", "[", "pairs", "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"idgroups", " ", "=", " ", 
       RowBox[{"ConnectedComponents", "[", 
        RowBox[{"Graph", "[", "idpairs", "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"For", " ", "[", 
       RowBox[{
        RowBox[{"t", "=", "1"}], ",", " ", 
        RowBox[{"t", "<=", " ", 
         RowBox[{"Length", "[", "groups", "]"}]}], ",", " ", 
        RowBox[{"t", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"list", "=", 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"r", "=", "1"}], ",", 
           RowBox[{"r", "<=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{"groups", "[", 
              RowBox[{"[", "t", "]"}], "]"}], "]"}]}], ",", 
           RowBox[{"r", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"AppendTo", "[", 
             RowBox[{"list", ",", 
              RowBox[{"lines", "[", 
               RowBox[{"[", 
                RowBox[{
                 RowBox[{"groups", "[", 
                  RowBox[{"[", "t", "]"}], "]"}], "[", 
                 RowBox[{"[", "r", "]"}], "]"}], "]"}], "]"}]}], "]"}], 
            ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "[", "list", "]"}], "!=", "0"}], ",", 
           RowBox[{"AppendTo", "[", 
            RowBox[{"walls", ",", "list"}], "]"}]}], "]"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"walls", ",", " ", "idgroups"}], "}"}]}]}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864627329213355*^9, 3.864627400642972*^9}, {
  3.864627465522389*^9, 3.864627509985578*^9}, {3.864627591842477*^9, 
  3.8646275954718437`*^9}, {3.864627637256817*^9, 3.864627641222322*^9}},
 CellLabel->"In[84]:=",ExpressionUUID->"495dea95-5f4d-497e-babb-59be0de9058b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Group", " ", "lines", " ", "by", " ", "finding", " ", "groups", " ", 
     "of", " ", "lines", " ", "which", " ", "intersect"}], ";", " ", 
    RowBox[{"drop", " ", "small", " ", "groups"}], ";", " ", 
    RowBox[{
    "give", " ", "wall", " ", "which", " ", "created", " ", "each", " ", 
     "measurement"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{"gnomonicresults", " ", "-", " ", 
    RowBox[{"returns", " ", "of", " ", "GnomonicProjectionWithWalls"}]}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"BasicIntersections", "[", "gnomonicresults_", "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"lines", ",", "mappingpoints", ",", "lineids", ",", " ", 
       RowBox[{"walls", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"wallsid", "=", 
        RowBox[{"{", "}"}]}], ",", "arcs", ",", "j", ",", "result", ",", 
       "length", ",", "found", ",", "map", ",", "wall", ",", "avglength"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"lines", "=", 
       RowBox[{"gnomonicresults", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"mappingpoints", " ", "=", " ", 
       RowBox[{"gnomonicresults", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"lineids", "=", 
       RowBox[{"gnomonicresults", "[", 
        RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"arcs", " ", "=", " ", 
       RowBox[{"gnomonicresults", "[", 
        RowBox[{"[", "4", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "find", " ", "the", " ", "groups", " ", "by", " ", "intersection"}], 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"For", " ", "[", 
       RowBox[{
        RowBox[{"j", "=", "1"}], ",", " ", 
        RowBox[{"j", "<=", " ", 
         RowBox[{"Length", "[", "lines", "]"}]}], ",", 
        RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"result", "=", " ", 
          RowBox[{"FindGroups", "[", 
           RowBox[{
            RowBox[{"lines", "[", 
             RowBox[{"[", "j", "]"}], "]"}], ",", " ", 
            RowBox[{"lineids", "[", 
             RowBox[{"[", "j", "]"}], "]"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"walls", ",", 
           RowBox[{"result", "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"wallsid", ",", " ", 
           RowBox[{"result", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "]"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"length", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
      RowBox[{"found", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"Get", " ", "AVG", " ", "wall", " ", "size"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"map", "=", "1"}], ",", " ", 
        RowBox[{"map", " ", "<=", " ", 
         RowBox[{"Length", "[", "wallsid", "]"}]}], ",", " ", 
        RowBox[{"map", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"wall", " ", "=", " ", "1"}], ",", " ", 
           RowBox[{"wall", " ", "<=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{"wallsid", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "]"}]}], ",", " ", 
           RowBox[{"wall", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"length", " ", "+=", " ", 
             RowBox[{"Length", "[", 
              RowBox[{
               RowBox[{"wallsid", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "wall", "]"}], "]"}], "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"found", " ", "++"}], ";"}]}], "\[IndentingNewLine]", 
          "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"avglength", "  ", "=", " ", 
       RowBox[{"length", "/", "found"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"Drop", " ", "small", " ", "walls"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"map", "=", "1"}], ",", " ", 
        RowBox[{"map", " ", "<=", " ", 
         RowBox[{"Length", "[", "wallsid", "]"}]}], ",", " ", 
        RowBox[{"map", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"length", " ", "=", " ", 
          RowBox[{"Length", "[", 
           RowBox[{"wallsid", "[", 
            RowBox[{"[", "map", "]"}], "]"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"wall", " ", "=", " ", "1"}], ",", " ", 
           RowBox[{"wall", " ", "<=", " ", "length"}], ",", " ", 
           RowBox[{"wall", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"avglength", "*", "0.75"}], " ", ">=", " ", 
               RowBox[{"Length", "[", 
                RowBox[{
                 RowBox[{"wallsid", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "wall", "]"}], "]"}], "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"wallsid", "[", 
                 RowBox[{"[", "map", "]"}], "]"}], "=", 
                RowBox[{"Drop", "[", 
                 RowBox[{
                  RowBox[{"wallsid", "[", 
                   RowBox[{"[", "map", "]"}], "]"}], ",", 
                  RowBox[{"{", "wall", "}"}]}], "]"}]}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"wall", " ", "--"}], ";", "\[IndentingNewLine]", 
               RowBox[{"length", "--"}], ";"}]}], "\[IndentingNewLine]", 
             "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"wallsid", "=", 
       RowBox[{"Flatten", "[", 
        RowBox[{
         RowBox[{"Select", "[", 
          RowBox[{"wallsid", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "[", "#", "]"}], ">", "0"}], "&"}]}], "]"}], 
         ",", "1"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"wallsid", "=", 
       RowBox[{"CleanGroups", "[", "wallsid", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"wallsid", ",", "arcs"}], "}"}]}]}], "\[IndentingNewLine]", 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.864627329213355*^9, 3.864627400642972*^9}, {
  3.864627465522389*^9, 3.864627509985578*^9}, {3.864627591842477*^9, 
  3.8646275954718437`*^9}, {3.864627695903318*^9, 3.8646277035608788`*^9}, {
  3.864628076599915*^9, 3.8646280807407837`*^9}, {3.86462813803294*^9, 
  3.8646281438433*^9}, {3.864629124365026*^9, 3.8646291389975157`*^9}, {
  3.864629179488678*^9, 3.864629209645564*^9}, {3.864629245516347*^9, 
  3.8646293058642397`*^9}, {3.8646293448648987`*^9, 3.864629348784485*^9}, {
  3.864728308892165*^9, 3.8647283139279957`*^9}, {3.8688586269673777`*^9, 
  3.868858645719627*^9}, {3.8713765528479013`*^9, 3.871376592735732*^9}, {
  3.871377276170548*^9, 3.871377276287918*^9}, {3.871377353468543*^9, 
  3.871377353632668*^9}, {3.871377626765999*^9, 3.871377628737527*^9}},
 CellLabel->"In[85]:=",ExpressionUUID->"fde23aeb-e747-464c-8528-7c81bbfe03a8"]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Compute Walls from Gnomonic Projection (Improved Intersections)\
\>", "Subsubsection",
 CellChangeTimes->{{3.864630454161525*^9, 
  3.864630468802638*^9}},ExpressionUUID->"ca3efa55-0640-46a5-8dc1-\
d46212062ba8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Find", " ", "the", " ", "Connected", " ", "Components", " ", "but", " ", 
     "remove", " ", "all", " ", "bridges"}], ",", " ", 
    RowBox[{"cut", " ", "vertives"}], ",", " ", 
    RowBox[{
    "and", " ", "nodes", " ", "which", " ", "are", " ", "only", " ", 
     "connected", " ", "with", " ", "one", " ", "other", " ", "node"}]}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{
    RowBox[{"groups", " ", "-", " ", 
     RowBox[{
     "all", " ", "found", " ", "connected", " ", "components", " ", "without",
       " ", "removing", " ", "cut", " ", "vertices"}]}], ",", " ", 
    RowBox[{
     RowBox[{
     "brideges", " ", "and", " ", "1", " ", "connected", " ", "node"}], ";", 
     "\[IndentingNewLine]", "\t", 
     RowBox[{"graph", " ", "-", " ", 
      RowBox[{
      "the", " ", "graph", " ", "for", " ", "which", " ", "connected", " ", 
       "components", " ", "should", " ", "be", " ", "found"}]}]}]}], " ", 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"ConnectedComponentsImproved", "[", 
    RowBox[{"groups_", ",", " ", "graph_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"appearances", " ", "=", " ", "0"}], ",", " ", 
       RowBox[{"usedgraph", " ", "=", " ", "graph"}], ",", " ", 
       RowBox[{"allgroups", " ", "=", " ", "groups"}], ",", " ", 
       "dropedGraph", ",", " ", "dropedGroups", ",", " ", "sortedGroup", ",", 
       " ", "numGroups", ",", "edge", ",", "group", ",", "length", ",", 
       "weakconnected", ",", "el1"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "delete", " ", "edges", " ", "if", " ", "two", " ", "lines", " ", "of", 
       " ", "different", " ", "groups", " ", "intersect"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"edge", "=", "1"}], " ", ",", " ", 
        RowBox[{"edge", "<=", " ", 
         RowBox[{"Length", "[", 
          RowBox[{"EdgeList", "[", "usedgraph", "]"}], "]"}]}], ",", 
        RowBox[{"edge", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"dropedGraph", " ", "=", " ", 
          RowBox[{"EdgeDelete", "[", 
           RowBox[{"usedgraph", ",", " ", 
            RowBox[{
             RowBox[{"EdgeList", "[", "usedgraph", "]"}], "[", 
             RowBox[{"[", "edge", "]"}], "]"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"dropedGroups", " ", "=", " ", 
          RowBox[{"ConnectedComponents", "[", "dropedGraph", "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "[", "dropedGroups", "]"}], " ", ">", 
            RowBox[{"Length", "[", "allgroups", "]"}]}], ",", 
           "\[IndentingNewLine]", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"usedgraph", " ", "=", " ", "dropedGraph"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"allgroups", " ", "=", " ", "dropedGroups"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"edge", " ", "-=", "1"}]}]}], "\[IndentingNewLine]", 
          "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "Delete", " ", "Line", " ", "if", " ", "deleting", " ", "produces", 
        " ", "new", " ", "groups"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"group", " ", "=", " ", "1"}], ",", " ", 
        RowBox[{"group", " ", "<=", " ", 
         RowBox[{"Length", "[", "allgroups", "]"}]}], ",", 
        RowBox[{"group", "++"}], ",", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"sortedGroup", "=", 
          RowBox[{"SortBy", "[", 
           RowBox[{
            RowBox[{"allgroups", "[", 
             RowBox[{"[", "group", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"EdgeCount", "[", 
              RowBox[{"usedgraph", ",", 
               RowBox[{"#", "\[UndirectedEdge]", "_"}]}], "]"}], " ", "&"}]}],
            "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"length", " ", "=", " ", 
          RowBox[{"Length", "[", "sortedGroup", "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"weakconnected", "=", "1"}], ",", " ", 
           RowBox[{"weakconnected", "<=", "length"}], ",", " ", 
           RowBox[{"weakconnected", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"dropedGraph", " ", "=", " ", 
             RowBox[{"VertexDelete", "[", 
              RowBox[{"usedgraph", ",", " ", 
               RowBox[{"sortedGroup", "[", 
                RowBox[{"[", "weakconnected", "]"}], "]"}]}], "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"dropedGroups", " ", "=", " ", 
             RowBox[{"ConnectedComponents", "[", "dropedGraph", "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"Length", "[", "dropedGroups", "]"}], " ", ">", 
               RowBox[{"Length", "[", "allgroups", "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"usedgraph", " ", "=", " ", "dropedGraph"}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"allgroups", " ", "=", " ", "dropedGroups"}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"sortedGroup", "=", 
                RowBox[{"SortBy", "[", 
                 RowBox[{
                  RowBox[{"allgroups", "[", 
                   RowBox[{"[", "group", "]"}], "]"}], ",", 
                  RowBox[{
                   RowBox[{"EdgeCount", "[", 
                    RowBox[{"usedgraph", ",", 
                    RowBox[{"#", "\[UndirectedEdge]", "_"}]}], "]"}], " ", 
                   "&"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
               RowBox[{"length", " ", "=", " ", 
                RowBox[{"Length", "[", "sortedGroup", "]"}]}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"weakconnected", " ", "=", " ", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
          "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "If", " ", "a", " ", "Line", " ", "in", " ", "a", " ", "group", " ", 
        "is", " ", "only", " ", "connected", " ", "with", " ", "1", " ", 
        "other", " ", "line", " ", "in", " ", "the", " ", "group", " ", "we", 
        " ", "drop", " ", "this", " ", "line", " ", "from", " ", "the", " ", 
        "group"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"group", " ", "=", " ", "1"}], ",", " ", 
        RowBox[{"group", " ", "<=", " ", 
         RowBox[{"Length", "[", "allgroups", "]"}]}], ",", 
        RowBox[{"group", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"el1", "=", "1"}], ",", " ", 
           RowBox[{"el1", "<=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{"allgroups", "[", 
              RowBox[{"[", "group", "]"}], "]"}], "]"}]}], ",", " ", 
           RowBox[{"el1", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"EdgeCount", "[", 
                RowBox[{"usedgraph", ",", " ", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"allgroups", "[", 
                    RowBox[{"[", "group", "]"}], "]"}], "[", 
                   RowBox[{"[", "el1", "]"}], "]"}], "\[UndirectedEdge]", 
                  "_"}]}], "]"}], "<=", "1"}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"allgroups", "[", 
                 RowBox[{"[", "group", "]"}], "]"}], "=", 
                RowBox[{"Drop", "[", 
                 RowBox[{
                  RowBox[{"allgroups", "[", 
                   RowBox[{"[", "group", "]"}], "]"}], ",", 
                  RowBox[{"{", "el1", "}"}]}], "]"}]}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"el1", "=", "1"}], ";"}]}], "\[IndentingNewLine]", 
             "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "[", 
             RowBox[{"allgroups", "[", 
              RowBox[{"[", "group", "]"}], "]"}], "]"}], "<=", "1"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"allgroups", "=", 
             RowBox[{"Drop", "[", 
              RowBox[{"allgroups", ",", 
               RowBox[{"{", "group", "}"}]}], "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"group", "-=", "1"}], ";"}]}], "\[IndentingNewLine]", 
          "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", "allgroups"}]}], "\[IndentingNewLine]", 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.86463049278158*^9, 3.864630620068049*^9}, {
  3.8646306600994453`*^9, 3.8646307176629057`*^9}},
 CellLabel->"In[86]:=",ExpressionUUID->"868fff9d-fdbc-4c96-84d7-b20441e46829"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Find", " ", "Groups", " ", "of", " ", "intersecting", " ", "lines", " ", 
    "while", " ", "using", " ", "ConnectedComponentsImproved"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{
    RowBox[{"lines", "-", " ", 
     RowBox[{"the", " ", "lines", " ", "on", " ", "a", " ", "plane"}]}], ";", 
    "\[IndentingNewLine]", "\t", 
    RowBox[{"lineids", " ", "-", " ", 
     RowBox[{
     "the", " ", "line", " ", "ids", " ", "for", " ", "the", " ", "lines", 
      " ", "on", " ", "the", " ", "plane"}]}], ";"}], "\[IndentingNewLine]", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"FindGroupsImproved", "[", 
    RowBox[{"lines_", ",", " ", "lineids_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"closestPoint", ",", " ", 
       RowBox[{"pairs", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"idpairs", "=", 
        RowBox[{"{", "}"}]}], ",", " ", 
       RowBox[{"groups", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"idgroups", "=", 
        RowBox[{"{", "}"}]}], ",", " ", 
       RowBox[{"walls", "=", 
        RowBox[{"{", "}"}]}], ",", " ", "list", ",", "pointonline", ",", " ", 
       "newvec", ",", "line1", ",", "line2", ",", "t", ",", "r"}], "}"}], ",",
      "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"line1", " ", "=", " ", "1"}], ",", " ", 
        RowBox[{"line1", "<=", " ", 
         RowBox[{"Length", "[", "lines", "]"}]}], ",", " ", 
        RowBox[{"line1", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"line2", " ", "=", " ", 
            RowBox[{"line1", "+", "1"}]}], ",", " ", 
           RowBox[{"line2", " ", "<=", " ", 
            RowBox[{"Length", "[", "lines", "]"}]}], ",", " ", 
           RowBox[{"line2", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"DoIntersect", "[", 
               RowBox[{
                RowBox[{"lines", "[", 
                 RowBox[{"[", "line1", "]"}], "]"}], ",", 
                RowBox[{"lines", "[", 
                 RowBox[{"[", "line2", "]"}], "]"}]}], "]"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"AppendTo", "[", 
                RowBox[{"pairs", ",", 
                 RowBox[{"UndirectedEdge", "[", 
                  RowBox[{"line1", ",", " ", "line2"}], "]"}]}], "]"}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"AppendTo", "[", 
                RowBox[{"idpairs", ",", 
                 RowBox[{"UndirectedEdge", "[", 
                  RowBox[{
                   RowBox[{"lineids", "[", 
                    RowBox[{"[", "line1", "]"}], "]"}], ",", 
                   RowBox[{"lineids", "[", 
                    RowBox[{"[", "line2", "]"}], "]"}]}], "]"}]}], "]"}], 
               ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", "]"}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"groups", "=", 
       RowBox[{"ConnectedComponents", "[", 
        RowBox[{"Graph", "[", "pairs", "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"idgroups", " ", "=", " ", 
       RowBox[{"ConnectedComponents", "[", 
        RowBox[{"Graph", "[", "idpairs", "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"groups", " ", "=", " ", 
       RowBox[{"ConnectedComponentsImproved", "[", 
        RowBox[{"groups", ",", 
         RowBox[{"Graph", "[", "pairs", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"idgroups", " ", "=", " ", 
       RowBox[{"ConnectedComponentsImproved", "[", 
        RowBox[{"idgroups", ",", 
         RowBox[{"Graph", "[", "idpairs", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"For", " ", "[", 
       RowBox[{
        RowBox[{"t", "=", "1"}], ",", " ", 
        RowBox[{"t", "<=", " ", 
         RowBox[{"Length", "[", "groups", "]"}]}], ",", " ", 
        RowBox[{"t", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"list", "=", 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"r", "=", "1"}], ",", 
           RowBox[{"r", "<=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{"groups", "[", 
              RowBox[{"[", "t", "]"}], "]"}], "]"}]}], ",", 
           RowBox[{"r", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"AppendTo", "[", 
             RowBox[{"list", ",", 
              RowBox[{"lines", "[", 
               RowBox[{"[", 
                RowBox[{
                 RowBox[{"groups", "[", 
                  RowBox[{"[", "t", "]"}], "]"}], "[", 
                 RowBox[{"[", "r", "]"}], "]"}], "]"}], "]"}]}], "]"}], 
            ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "[", "list", "]"}], "!=", "0"}], ",", 
           RowBox[{"AppendTo", "[", 
            RowBox[{"walls", ",", "list"}], "]"}]}], "]"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"walls", ",", " ", "idgroups"}], "}"}]}]}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.86463049278158*^9, 3.864630620068049*^9}, {
  3.8646306600994453`*^9, 3.864630698895383*^9}},
 CellLabel->"In[87]:=",ExpressionUUID->"81069dfc-58ff-4221-9367-7408c6ec6e6c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ImprovedIntersections", "[", "gnomonicresults_", "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "lines", ",", " ", "mappingpoints", ",", " ", "lineids", ",", " ", 
      "arcs", ",", " ", 
      RowBox[{"walls", "=", 
       RowBox[{"{", "}"}]}], ",", 
      RowBox[{"wallsid", "=", 
       RowBox[{"{", "}"}]}], ",", "j", ",", "result", ",", "map", ",", "wall",
       ",", "length", ",", "found", ",", "avglength"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"lines", "=", 
      RowBox[{"gnomonicresults", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"mappingpoints", " ", "=", " ", 
      RowBox[{"gnomonicresults", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"lineids", "=", 
      RowBox[{"gnomonicresults", "[", 
       RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"arcs", " ", "=", " ", 
      RowBox[{"gnomonicresults", "[", 
       RowBox[{"[", "4", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"Added", " ", "by", " ", "Milan", " ", 
       RowBox[{"M\[UDoubleDot]ller", ":", " ", 
        RowBox[{
        "need", " ", "to", " ", "initialize", " ", "local", " ", "variables", 
         " ", "that", " ", "were", " ", "local", " ", "before"}]}]}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"length", "=", "0"}], ";", 
     RowBox[{"found", "=", "0"}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"For", " ", "[", 
      RowBox[{
       RowBox[{"j", "=", "1"}], ",", " ", 
       RowBox[{"j", "<=", " ", 
        RowBox[{"Length", "[", "lines", "]"}]}], ",", 
       RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"result", " ", "=", " ", 
         RowBox[{"FindGroupsImproved", "[", 
          RowBox[{
           RowBox[{"lines", "[", 
            RowBox[{"[", "j", "]"}], "]"}], ",", 
           RowBox[{"lineids", "[", 
            RowBox[{"[", "j", "]"}], "]"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"AppendTo", "[", 
         RowBox[{"walls", ",", 
          RowBox[{"result", "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"AppendTo", "[", 
         RowBox[{"wallsid", ",", 
          RowBox[{"result", "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], "]"}], ";"}]}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"For", "[", 
      RowBox[{
       RowBox[{"map", "=", "1"}], ",", " ", 
       RowBox[{"map", " ", "<=", " ", 
        RowBox[{"Length", "[", "wallsid", "]"}]}], ",", " ", 
       RowBox[{"map", "++"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"wall", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"wall", " ", "<=", " ", 
           RowBox[{"Length", "[", 
            RowBox[{"wallsid", "[", 
             RowBox[{"[", "map", "]"}], "]"}], "]"}]}], ",", " ", 
          RowBox[{"wall", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"length", " ", "+=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{
              RowBox[{"wallsid", "[", 
               RowBox[{"[", "map", "]"}], "]"}], "[", 
              RowBox[{"[", "wall", "]"}], "]"}], "]"}]}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"found", " ", "++"}], ";"}]}], "\[IndentingNewLine]", 
         "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"avglength", "  ", "=", " ", 
      RowBox[{"length", "/", "found"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Drop", " ", "too", " ", "small", " ", "walls"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"For", "[", 
      RowBox[{
       RowBox[{"map", "=", "1"}], ",", " ", 
       RowBox[{"map", " ", "<=", " ", 
        RowBox[{"Length", "[", "wallsid", "]"}]}], ",", " ", 
       RowBox[{"map", "++"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"length", " ", "=", " ", 
         RowBox[{"Length", "[", 
          RowBox[{"wallsid", "[", 
           RowBox[{"[", "map", "]"}], "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"wall", " ", "=", " ", "1"}], ",", " ", 
          RowBox[{"wall", " ", "<=", " ", "length"}], ",", " ", 
          RowBox[{"wall", "++"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"avglength", "*", "0.75"}], " ", ">=", " ", 
              RowBox[{"Length", "[", 
               RowBox[{
                RowBox[{"wallsid", "[", 
                 RowBox[{"[", "map", "]"}], "]"}], "[", 
                RowBox[{"[", "wall", "]"}], "]"}], "]"}]}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{
               RowBox[{"wallsid", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "=", 
               RowBox[{"Drop", "[", 
                RowBox[{
                 RowBox[{"wallsid", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], ",", 
                 RowBox[{"{", "wall", "}"}]}], "]"}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"wall", " ", "--"}], ";", "\[IndentingNewLine]", 
              RowBox[{"length", "--"}], ";"}]}], "\[IndentingNewLine]", "]"}],
            ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Cleaning", " ", "up", " ", "implemented", " ", "by", " ", "Milan", " ",
        "M\[UDoubleDot]ller"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"wallsid", "=", 
      RowBox[{"Flatten", "[", 
       RowBox[{
        RowBox[{"Select", "[", 
         RowBox[{"wallsid", ",", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "[", "#", "]"}], ">", "0"}], "&"}]}], "]"}], 
        ",", "1"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"wallsid", "=", 
      RowBox[{"CleanGroups", "[", "wallsid", "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Original", " ", "cleaning", " ", "up", " ", "as", " ", "implemented", 
       " ", "by", " ", "Rico", " ", "Gie\[SZ]ler", " ", "from", " ", "here"}],
       " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "find", " ", "only", " ", "the", " ", "intersecting", " ", "part", " ", 
       "of", " ", "the", " ", "groups"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"(*", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"wallsid", "=", 
        RowBox[{"CleanGroups", "[", "wallsid", "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"length", "=", 
        RowBox[{"Length", "[", "wallsid", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"wall", "=", "1"}], ",", " ", 
         RowBox[{"wall", "<=", "length"}], ",", " ", 
         RowBox[{"wall", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "[", 
              RowBox[{"wallsid", "[", 
               RowBox[{"[", "wall", "]"}], "]"}], "]"}], "<=", "2"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"wallsid", "=", 
              RowBox[{"Drop", "[", 
               RowBox[{"wallsid", ",", 
                RowBox[{"{", "wall", "}"}]}], "]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"length", "--"}], ";", "\[IndentingNewLine]", 
             RowBox[{"wall", "--"}], ";"}]}], "\[IndentingNewLine]", "]"}], 
          ";"}]}], "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]",
       "*)"}], "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"wallsid", ",", "arcs"}], "}"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.86463049278158*^9, 3.864630620068049*^9}, {
   3.8646306600994453`*^9, 3.8646306643621883`*^9}, {3.864630731729251*^9, 
   3.864630733899312*^9}, {3.864630855866012*^9, 3.8646308575583687`*^9}, 
   3.864630934806828*^9, {3.864728249960746*^9, 3.864728299055449*^9}, {
   3.8713766326579123`*^9, 3.871376635426915*^9}, {3.871377284797368*^9, 
   3.8713772849088373`*^9}, {3.871377359607543*^9, 3.871377359743082*^9}},
 CellLabel->"In[88]:=",ExpressionUUID->"0bd7ba41-6659-4388-8aea-a529267746d5"]
}, Closed]],

Cell[CellGroupData[{

Cell["Compute Walls from Gnomonic Projection (Random Points)", "Subsubsection",
 CellChangeTimes->{{3.8677525104500237`*^9, 3.86775252150769*^9}, 
   3.867752646116536*^9},ExpressionUUID->"02d9bef3-ac5d-4291-a73d-\
853d50bf6d81"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Implemented", " ", "by", " ", "Rico", " ", "Gie\[SZ]ler"}], ",", 
    " ", 
    RowBox[{
    "some", " ", "variables", " ", "made", " ", "local", " ", "by", " ", 
     "Milan", " ", "M\[UDoubleDot]ller"}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Get", " ", "10", " ", "random", " ", "points", " ", "within", " ", "an", 
     " ", "area"}], ";", " ", 
    RowBox[{
    "get", " ", "plane", " ", "with", " ", "most", " ", "close", " ", 
     "linecenters"}], ";", " ", 
    RowBox[{
    "calculate", " ", "closest", " ", "point", " ", "of", " ", "the", " ", 
     "close", " ", "lines"}], ";", " ", 
    RowBox[{
    "all", " ", "lines", " ", "which", " ", "are", " ", "close", " ", "to", 
     " ", "this", " ", "close", " ", "point", " ", "are", " ", "a", " ", 
     "group"}], ";", " ", 
    RowBox[{
    "give", " ", "wall", " ", "which", " ", "created", " ", "each", " ", 
     "measurement"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{"gnomonicresults", " ", "-", " ", 
    RowBox[{"returns", " ", "of", " ", "GnomonicProjectionWithWalls"}]}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"RandomPoints", "[", "gnomincresults_", "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "lines", ",", "mappingpoints", ",", "directionsDeltaList", ",", 
       "lineids", ",", " ", "arcs", ",", 
       RowBox[{"linesvectors", "=", 
        RowBox[{"{", "}"}]}], ",", " ", 
       RowBox[{"closestPoints", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"distances", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"numclose", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"numcloseposition", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"avgdistances", "=", 
        RowBox[{"{", "}"}]}], ",", "addedlines", ",", "cutedlines", ",", " ", 
       
       RowBox[{"addedlines1", "=", 
        RowBox[{"{", "}"}]}], ",", " ", 
       RowBox[{"cutedlines1", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"wallsid", "=", 
        RowBox[{"{", "}"}]}], ",", "p1", ",", "p2", ",", "p3", ",", "p4", ",",
        "p5", ",", "p6", ",", "p7", ",", "p8", ",", "p9", ",", "p10", ",", 
       "i", ",", "j", ",", "listpoints", ",", "map", ",", "line", ",", 
       "linecenter", ",", "factor", ",", "x", ",", "point", ",", "hemisphere",
        ",", "avgdistance", ",", "closestPoint1"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"lines", "=", 
       RowBox[{"gnomincresults", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"mappingpoints", " ", "=", " ", 
       RowBox[{"gnomincresults", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"lineids", "=", 
       RowBox[{"gnomincresults", "[", 
        RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"arcs", " ", "=", " ", 
       RowBox[{"gnomincresults", "[", 
        RowBox[{"[", "4", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"j", "=", "1"}], ",", " ", 
        RowBox[{"j", "<=", " ", 
         RowBox[{"Length", "[", "lines", "]"}]}], ",", " ", 
        RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"AppendTo", "[", 
          RowBox[{"linesvectors", ",", 
           RowBox[{"GetVectors", "[", 
            RowBox[{"lines", "[", 
             RowBox[{"[", "j", "]"}], "]"}], "]"}]}], "]"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"Get", " ", "six", " ", "random", " ", "points"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "[", "mappingpoints", "]"}], "==", "6"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"p1", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{"0", ",", "1.5"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{"0", ",", "1.5"}], "}"}], "]"}]}], "}"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"p2", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{"0", ",", "1.5"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "0"}], "}"}], "]"}]}], "}"}]}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"p3", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "0"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{"0", ",", "1.5"}], "}"}], "]"}]}], "}"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"p4", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "0"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "0"}], "}"}], "]"}]}], "}"}]}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"p5", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p6", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p7", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p8", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p9", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p10", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "1.5"}], ",", "1.5"}], "}"}], "]"}]}], "}"}]}]}], 
        "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"p1", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{"0", ",", "0.3"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{"0", ",", "0.3"}], "}"}], "]"}]}], "}"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"p2", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{"0", ",", "0.3"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0"}], "}"}], "]"}]}], "}"}]}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"p3", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{"0", ",", "0.3"}], "}"}], "]"}]}], "}"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"p4", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0"}], "}"}], "]"}]}], "}"}]}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"p5", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p6", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p7", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p8", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p9", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}]}], "}"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"p10", " ", "=", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}], ",", " ", 
            RowBox[{"RandomReal", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"-", "0.3"}], ",", "0.3"}], "}"}], "]"}]}], "}"}]}], 
         ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"listpoints", "=", " ", 
       RowBox[{"{", 
        RowBox[{
        "p1", ",", "p2", ",", "p3", ",", "p4", ",", "p5", ",", "p6", ",", 
         "p7", ",", "p8", ",", "p9", ",", "p10"}], "}"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "Check", " ", "in", " ", "all", " ", "hemisphere", " ", "how", " ", 
        "many", " ", "Line", " ", "centers", " ", "are", " ", "close", " ", 
        "to", " ", "the", " ", "random", " ", "points"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"map", "=", "1"}], ",", " ", 
        RowBox[{"map", " ", "<=", " ", 
         RowBox[{"Length", "[", "linesvectors", "]"}]}], ",", " ", 
        RowBox[{"map", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"avgdistances", "=", 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"numclose", ",", 
           RowBox[{"{", 
            RowBox[{
            "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0", 
             ",", "0", ",", "0", ",", "0"}], "}"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"distances", ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}]}], "}"}]}], "]"}], ";", "\[IndentingNewLine]",
          "\[IndentingNewLine]", 
         RowBox[{"(*", 
          RowBox[{
          "Get", " ", "all", " ", "the", " ", "distances", " ", "to", " ", 
           "the", " ", "random", " ", "points"}], "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"line", "=", "1"}], ",", " ", 
           RowBox[{"line", "<=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{"linesvectors", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "]"}]}], ",", " ", 
           RowBox[{"line", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"linecenter", " ", "=", " ", 
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"linesvectors", "[", 
                 RowBox[{"[", "map", "]"}], "]"}], "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "+", 
              RowBox[{"0.5", "*", 
               RowBox[{
                RowBox[{
                 RowBox[{"linesvectors", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}]}]}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p1"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p2"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "3", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p3"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "4", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p4"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "5", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p5"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "6", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p6"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "7", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p7"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "8", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p8"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "9", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p9"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"distances", "[", 
                RowBox[{"[", "map", "]"}], "]"}], "[", 
               RowBox[{"[", "10", "]"}], "]"}], ",", " ", 
              RowBox[{"EuclideanDistance", "[", 
               RowBox[{"linecenter", ",", " ", "p10"}], "]"}]}], "]"}], 
            ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"(*", 
          RowBox[{
          "get", " ", "the", " ", "average", " ", "distance", " ", "to", " ", 
           "all", " ", "the", " ", "points"}], "*)"}], "\[IndentingNewLine]", 
         
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "3", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "4", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "5", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "6", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "7", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "8", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "9", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"avgdistances", ",", 
           RowBox[{"Mean", "[", 
            RowBox[{
             RowBox[{"distances", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "10", "]"}], "]"}], "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"(*", 
          RowBox[{"count", " ", "the", " ", "close", " ", "linecenters"}], 
          "*)"}], "\[IndentingNewLine]", 
         RowBox[{"factor", " ", "=", "0.25"}], ";", "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"line", "=", "1"}], ",", " ", 
           RowBox[{"line", "<=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{"linesvectors", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "]"}]}], ",", " ", 
           RowBox[{"line", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"linecenter", " ", "=", " ", 
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"linesvectors", "[", 
                 RowBox[{"[", "map", "]"}], "]"}], "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "+", 
              RowBox[{"0.5", "*", 
               RowBox[{
                RowBox[{
                 RowBox[{"linesvectors", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}]}]}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p1"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p2"}], "]"}], "<=", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "2", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p3"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "3", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "3", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p4"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "4", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "4", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p5"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "5", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p6"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "6", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "6", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p7"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "7", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "7", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p8"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "8", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "8", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p9"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "9", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "9", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "p10"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", 
                RowBox[{"avgdistances", "[", 
                 RowBox[{"[", "10", "]"}], "]"}]}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], "[", 
                 RowBox[{"[", "10", "]"}], "]"}], "+=", "1"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
          "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"numcloseposition", ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"Max", "[", 
              RowBox[{"numclose", "[", 
               RowBox[{"[", "map", "]"}], "]"}], "]"}], ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Position", "[", 
                RowBox[{
                 RowBox[{"numclose", "[", 
                  RowBox[{"[", "map", "]"}], "]"}], ",", 
                 RowBox[{"Max", "[", 
                  RowBox[{"numclose", "[", 
                   RowBox[{"[", "map", "]"}], "]"}], "]"}]}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", 
             RowBox[{"avgdistances", "[", 
              RowBox[{"[", 
               RowBox[{
                RowBox[{
                 RowBox[{"Position", "[", 
                  RowBox[{
                   RowBox[{"numclose", "[", 
                    RowBox[{"[", "map", "]"}], "]"}], ",", 
                   RowBox[{"Max", "[", 
                    RowBox[{"numclose", "[", 
                    RowBox[{"[", "map", "]"}], "]"}], "]"}]}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], "}"}]}], 
          "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "find", " ", "the", " ", "hemisphere", " ", "with", " ", "most", " ", 
        "hits"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"x", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
      RowBox[{"point", "=", "0"}], ";", "\[IndentingNewLine]", 
      RowBox[{"hemisphere", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"map", "=", "1"}], ",", " ", 
        RowBox[{"map", "<=", " ", 
         RowBox[{"Length", "[", "numcloseposition", "]"}]}], ",", " ", 
        RowBox[{"map", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"numcloseposition", "[", 
             RowBox[{"[", "map", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ">", "x"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"x", "=", " ", 
            RowBox[{
             RowBox[{"numcloseposition", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"For", "[", 
            RowBox[{
             RowBox[{"i", "=", "1"}], ",", " ", 
             RowBox[{"i", "<=", " ", "10"}], ",", 
             RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"numcloseposition", "[", 
                   RowBox[{"[", "map", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "==", "i"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"point", "=", 
                 RowBox[{"listpoints", "[", 
                  RowBox[{"[", "i", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
               "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"hemisphere", " ", "=", " ", "map"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"avgdistance", " ", "=", " ", 
            RowBox[{
             RowBox[{"numcloseposition", "[", 
              RowBox[{"[", "map", "]"}], "]"}], "[", 
             RowBox[{"[", "3", "]"}], "]"}]}], ";"}]}], "\[IndentingNewLine]",
          "]"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"get", " ", "all", " ", "the", " ", "closest", " ", "line"}], 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"addedlines", "=", 
       RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"cutedlines", "=", 
       RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"line", "=", "1"}], ",", " ", 
        RowBox[{"line", "<=", " ", 
         RowBox[{"Length", "[", 
          RowBox[{"linesvectors", "[", 
           RowBox[{"[", "hemisphere", "]"}], "]"}], "]"}]}], ",", " ", 
        RowBox[{"line", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"linecenter", " ", "=", " ", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"linesvectors", "[", 
              RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
             RowBox[{"[", "line", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], "+", 
           RowBox[{"0.5", "*", 
            RowBox[{
             RowBox[{
              RowBox[{"linesvectors", "[", 
               RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
              RowBox[{"[", "line", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}]}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"EuclideanDistance", "[", 
             RowBox[{"linecenter", ",", " ", "point"}], "]"}], "<=", " ", 
            RowBox[{"factor", "*", " ", "avgdistance"}]}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"AppendTo", "[", 
            RowBox[{"addedlines1", ",", " ", 
             RowBox[{
              RowBox[{"linesvectors", "[", 
               RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
              RowBox[{"[", "line", "]"}], "]"}]}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"AppendTo", "[", 
             RowBox[{"cutedlines1", ",", 
              RowBox[{
               RowBox[{"linesvectors", "[", 
                RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
               RowBox[{"[", "line", "]"}], "]"}]}], "]"}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", "]"}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "compute", " ", "closest", " ", "Point", " ", "of", " ", "these", " ", 
        "lines"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "[", "addedlines1", "]"}], ">", "1"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"closestPoint1", "=", " ", 
         RowBox[{
          RowBox[{"ComputeClosestPoint2D", "[", "addedlines1", "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"closestPoint1", "=", 
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"closestPoint1", "!=", 
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "0", ",", "0"}], "}"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"avgdistance", "=", "0"}], ";", "\[IndentingNewLine]", 
         RowBox[{"(*", 
          RowBox[{
          "get", " ", "closest", " ", "lines", " ", "to", " ", "point"}], 
          "*)"}], "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"line", "=", "1"}], ",", " ", 
           RowBox[{"line", "<=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{"linesvectors", "[", 
              RowBox[{"[", "hemisphere", "]"}], "]"}], "]"}]}], ",", " ", 
           RowBox[{"line", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"linecenter", " ", "=", " ", 
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"linesvectors", "[", 
                 RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "+", 
              RowBox[{"0.5", "*", 
               RowBox[{
                RowBox[{
                 RowBox[{"linesvectors", "[", 
                  RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}]}]}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"avgdistance", "+=", " ", 
             RowBox[{"EuclideanDistance", "[", 
              RowBox[{"linecenter", ",", " ", "closestPoint1"}], "]"}]}]}]}], 
          "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"avgdistance", "=", " ", 
          RowBox[{"avgdistance", "/", 
           RowBox[{"Length", "[", 
            RowBox[{"linesvectors", "[", 
             RowBox[{"[", "hemisphere", "]"}], "]"}], "]"}]}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"addedlines", " ", "=", 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"cutedlines", "=", 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"line", "=", "1"}], ",", " ", 
           RowBox[{"line", "<=", " ", 
            RowBox[{"Length", "[", 
             RowBox[{"linesvectors", "[", 
              RowBox[{"[", "hemisphere", "]"}], "]"}], "]"}]}], ",", " ", 
           RowBox[{"line", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"linecenter", " ", "=", " ", 
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"linesvectors", "[", 
                 RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
                RowBox[{"[", "line", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], "+", 
              RowBox[{"0.5", "*", 
               RowBox[{
                RowBox[{
                 RowBox[{"linesvectors", "[", 
                  RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
                 RowBox[{"[", "line", "]"}], "]"}], "[", 
                RowBox[{"[", "2", "]"}], "]"}]}]}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"If", "[", " ", 
             RowBox[{
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"linecenter", ",", " ", "point"}], "]"}], "<=", " ", 
               RowBox[{"factor", "*", " ", "1.1", "*", " ", "avgdistance"}]}],
               ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"AppendTo", "[", 
                RowBox[{"addedlines", ",", " ", 
                 RowBox[{
                  RowBox[{"lines", "[", 
                   RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
                  RowBox[{"[", "line", "]"}], "]"}]}], "]"}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"AppendTo", "[", 
                RowBox[{"wallsid", ",", 
                 RowBox[{
                  RowBox[{"lineids", "[", 
                   RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
                  RowBox[{"[", "line", "]"}], "]"}]}], "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"AppendTo", "[", 
                RowBox[{"cutedlines", ",", 
                 RowBox[{
                  RowBox[{"lines", "[", 
                   RowBox[{"[", "hemisphere", "]"}], "]"}], "[", 
                  RowBox[{"[", "line", "]"}], "]"}]}], "]"}], ";"}]}], 
             "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
          "]"}]}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "[", "wallsid", "]"}], "<=", "1"}], ",", 
        RowBox[{"wallsid", "=", 
         RowBox[{"{", "}"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", "wallsid", "}"}], ",", " ", "arcs"}], "}"}]}]}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.8515741899860992`*^9, 3.8515742220541844`*^9}, {
   3.851574283420085*^9, 3.851574292703169*^9}, {3.851574327826003*^9, 
   3.85157461632797*^9}, {3.851574668395795*^9, 3.8515748320041704`*^9}, {
   3.8515749052260933`*^9, 3.8515753081630335`*^9}, {3.8515753426088667`*^9, 
   3.851575399361556*^9}, {3.8515754524206133`*^9, 3.8515755764257174`*^9}, {
   3.8515814044319897`*^9, 3.851581416623904*^9}, {3.851581462126853*^9, 
   3.851581483631647*^9}, {3.85158152325671*^9, 3.8515815598115873`*^9}, {
   3.8515815940119095`*^9, 3.8515816169316254`*^9}, {3.851581660791999*^9, 
   3.85158175198674*^9}, {3.851581786721753*^9, 3.851581978241541*^9}, {
   3.851582023716444*^9, 3.8515821737655725`*^9}, {3.8515822418468323`*^9, 
   3.8515822880269375`*^9}, {3.8515823276277637`*^9, 
   3.8515823630448055`*^9}, {3.8515824026614723`*^9, 
   3.8515824031430645`*^9}, {3.8515824631191835`*^9, 3.851582515491778*^9}, {
   3.8515825869469414`*^9, 3.851582755232771*^9}, {3.8515827955714083`*^9, 
   3.8515831142816057`*^9}, {3.85158315776153*^9, 3.8515831683313665`*^9}, {
   3.851583233731773*^9, 3.8515832373466115`*^9}, {3.8515832686417413`*^9, 
   3.8515833361284614`*^9}, {3.8515833711983767`*^9, 3.851583561498562*^9}, {
   3.85158359510867*^9, 3.851583595388375*^9}, {3.851583646073555*^9, 
   3.851583724943231*^9}, {3.8515837647886024`*^9, 3.851583797578318*^9}, {
   3.8515838654581785`*^9, 3.8515838655782332`*^9}, {3.851583896803543*^9, 
   3.851583896958522*^9}, 3.8515839359630327`*^9, {3.8515840570698214`*^9, 
   3.8515840649080935`*^9}, {3.85158411019357*^9, 3.851584135008496*^9}, {
   3.8515842087242155`*^9, 3.8515842869382963`*^9}, {3.8515843185893135`*^9, 
   3.851584331375373*^9}, {3.851584378833067*^9, 3.8515844253482776`*^9}, {
   3.851584481080324*^9, 3.851584485808509*^9}, {3.8515845246983976`*^9, 
   3.8515845409983683`*^9}, {3.8515846150480976`*^9, 
   3.8515846730682974`*^9}, {3.851584777677518*^9, 3.8515848005181437`*^9}, {
   3.851584904063244*^9, 3.8515849076781836`*^9}, {3.851584975428256*^9, 
   3.851584982923355*^9}, 3.851585050258237*^9, {3.8515850807884674`*^9, 
   3.8515850847633114`*^9}, {3.8515852257956753`*^9, 3.851585379715638*^9}, {
   3.8515854173204*^9, 3.851585419678336*^9}, {3.8515854809883347`*^9, 
   3.8515854811282945`*^9}, 3.8515862284245214`*^9, {3.8515863150738797`*^9, 
   3.8515863153356953`*^9}, {3.8516708487567797`*^9, 3.851670927897105*^9}, {
   3.8516709579362783`*^9, 3.8516711275641136`*^9}, {3.851671187677514*^9, 
   3.851671201441085*^9}, {3.851671232138343*^9, 3.8516712582986383`*^9}, {
   3.851671290726207*^9, 3.851671397222302*^9}, {3.851671499160427*^9, 
   3.8516715312589784`*^9}, 3.851671880590928*^9, {3.8534855319805765`*^9, 
   3.853485532125334*^9}, {3.8534857452206907`*^9, 3.8534857912407703`*^9}, {
   3.857729163572766*^9, 3.857729308351678*^9}, 3.8577295796559963`*^9, {
   3.867752715224948*^9, 3.8677527702702513`*^9}, {3.867752833690505*^9, 
   3.867752862767066*^9}, {3.8677529333366756`*^9, 3.8677532063252287`*^9}, {
   3.867753277559557*^9, 3.867753399012411*^9}, 3.867753491130384*^9, {
   3.8677535257158403`*^9, 3.867753536782566*^9}, {3.867755474785693*^9, 
   3.8677554761055737`*^9}, {3.8677557092570667`*^9, 3.867755711431974*^9}, {
   3.8677557786008463`*^9, 3.8677557942362347`*^9}, {3.867755863676671*^9, 
   3.867755876752632*^9}, {3.867756021439007*^9, 3.867756057584374*^9}, {
   3.867756222183934*^9, 3.867756222401725*^9}, {3.867756532143547*^9, 
   3.867756545042706*^9}, {3.867756656585486*^9, 3.8677566568225813`*^9}, {
   3.867756735856654*^9, 3.867756793933463*^9}, {3.8677568505935907`*^9, 
   3.867756855436335*^9}, {3.867756979774125*^9, 3.867756991301148*^9}, {
   3.867757125847674*^9, 3.867757126428351*^9}, {3.8677572170414753`*^9, 
   3.867757218958686*^9}, 3.867757292086274*^9},
 CellLabel->"In[89]:=",ExpressionUUID->"01f4fe38-540f-4985-a65a-9d33d0401deb"]
}, Closed]],

Cell[CellGroupData[{

Cell["Compute Walls from Gnomonic Projection (Random Points often)", \
"Subsubsection",
 CellChangeTimes->{{3.867753451250723*^9, 
  3.867753461386094*^9}},ExpressionUUID->"24865ba7-ba9d-4b04-94a1-\
db310fd971ff"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Implemented", " ", "by", " ", "Rico", " ", "Gie\[SZ]ler"}], ",", 
    " ", 
    RowBox[{
    "some", " ", "variables", " ", "made", " ", "local", " ", "by", " ", 
     "Milan", " ", "M\[UDoubleDot]ller"}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Run", " ", "Random", " ", "Points", " ", "multiple", " ", "times"}], ";",
     " ", 
    RowBox[{
    "after", " ", "each", " ", "run", " ", "delete", " ", "all", " ", "the", 
     " ", "found", " ", "lines", " ", "from", " ", "all", " ", "planes"}], 
    ";", " ", 
    RowBox[{
    "give", " ", "for", " ", "each", " ", "measurement", " ", "the", " ", 
     "wall", " ", "which", " ", "created", " ", "the", " ", "measurement"}]}],
    "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", "\t", 
   RowBox[{"gnomonicresults", " ", "-", " ", 
    RowBox[{"returns", " ", "of", " ", "GnomonicProjectionWithWalls"}]}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"RandomPointsOften", "[", "gnomonicresults_", "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"usedgnomonicresults", " ", "=", " ", "gnomonicresults"}], ",",
        " ", 
       RowBox[{"wallsid", "=", 
        RowBox[{"{", "}"}]}], ",", " ", "arcs", ",", "arclists", ",", 
       "mappingpoints", ",", "arcidlists", ",", "mean", ",", 
       RowBox[{"counter", "=", "0"}], ",", "res", ",", "mapp", ",", "leng", 
       ",", "w"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"arclists", "=", 
       RowBox[{"gnomonicresults", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"mappingpoints", "=", 
       RowBox[{"gnomonicresults", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"arcidlists", "=", 
       RowBox[{"gnomonicresults", "[", 
        RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"arcs", "=", 
       RowBox[{"gnomonicresults", "[", 
        RowBox[{"[", "4", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"mean", "=", 
       RowBox[{"Mean", "[", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"Length", "[", 
           RowBox[{"arcidlists", "[", 
            RowBox[{"[", "m", "]"}], "]"}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"m", ",", 
            RowBox[{"Length", "[", "arcidlists", "]"}]}], "}"}]}], "]"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"While", "[", 
       RowBox[{"True", ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"res", " ", "=", " ", 
          RowBox[{"RandomPoints", "[", "usedgnomonicresults", "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "[", 
             RowBox[{
              RowBox[{"res", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], "]"}], "!=", "0"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"counter", " ", "=", "0"}], ";", "\[IndentingNewLine]", 
            RowBox[{"AppendTo", "[", 
             RowBox[{"wallsid", ",", 
              RowBox[{
               RowBox[{"res", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"For", "[", 
             RowBox[{
              RowBox[{"mapp", "=", "1"}], ",", " ", 
              RowBox[{"mapp", "<=", 
               RowBox[{"Length", "[", "mappingpoints", "]"}]}], ",", 
              RowBox[{"mapp", "++"}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"leng", " ", "=", " ", 
                RowBox[{"Length", "[", 
                 RowBox[{"arcidlists", "[", 
                  RowBox[{"[", "mapp", "]"}], "]"}], "]"}]}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"For", "[", 
                RowBox[{
                 RowBox[{"w", "=", "1"}], ",", 
                 RowBox[{"w", "<=", 
                  RowBox[{"Length", "[", 
                   RowBox[{"arcidlists", "[", 
                    RowBox[{"[", "mapp", "]"}], "]"}], "]"}]}], ",", 
                 RowBox[{"w", "++"}], ",", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"res", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    RowBox[{
                    RowBox[{"arcidlists", "[", 
                    RowBox[{"[", "mapp", "]"}], "]"}], "[", 
                    RowBox[{"[", "w", "]"}], "]"}]}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"arcidlists", "[", 
                    RowBox[{"[", "mapp", "]"}], "]"}], "=", 
                    RowBox[{"Drop", "[", 
                    RowBox[{
                    RowBox[{"arcidlists", "[", 
                    RowBox[{"[", "mapp", "]"}], "]"}], ",", 
                    RowBox[{"{", "w", "}"}]}], "]"}]}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"arclists", "[", 
                    RowBox[{"[", "mapp", "]"}], "]"}], "=", 
                    RowBox[{"Drop", "[", 
                    RowBox[{
                    RowBox[{"arclists", "[", 
                    RowBox[{"[", "mapp", "]"}], "]"}], ",", 
                    RowBox[{"{", "w", "}"}]}], "]"}]}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{"w", "--"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"leng", " ", "=", " ", 
                    RowBox[{"Length", "[", 
                    RowBox[{"arcidlists", "[", 
                    RowBox[{"[", "mapp", "]"}], "]"}], "]"}]}], ";"}]}], 
                   "\[IndentingNewLine]", "]"}], ";"}]}], 
                "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
             "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{"(*", 
             RowBox[{
              RowBox[{"usedgnomonicresults", "=", 
               RowBox[{"{", 
                RowBox[{
                "arclists", ",", "mappingpoints", ",", "arcidlists", ",", 
                 "arcs"}], "}"}]}], ";"}], "*)"}], "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"Mean", "[", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Length", "[", 
                   RowBox[{"arcidlists", "[", 
                    RowBox[{"[", "m", "]"}], "]"}], "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"m", ",", 
                    RowBox[{"Length", "[", "arcidlists", "]"}]}], "}"}]}], 
                 "]"}], "]"}], "<=", 
               RowBox[{"0.9", "*", "mean"}]}], ",", "\[IndentingNewLine]", 
              RowBox[{"(*", 
               RowBox[{
                RowBox[{"Print", "[", 
                 RowBox[{"\"\<Break\>\"", ",", " ", 
                  RowBox[{"Length", "[", "wallsid", "]"}]}], "]"}], ";"}], 
               "*)"}], "\[IndentingNewLine]", " ", 
              RowBox[{"Break", "[", "]"}]}], "]"}]}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"counter", "++"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"counter", ">=", "3"}], ",", " ", "\[IndentingNewLine]", 
              RowBox[{"(*", 
               RowBox[{
                RowBox[{"Print", "[", 
                 RowBox[{"\"\<notfound\>\"", ",", " ", 
                  RowBox[{"Length", "[", "wallsid", "]"}]}], "]"}], ";"}], 
               "*)"}], "\[IndentingNewLine]", 
              RowBox[{"Break", "[", "]"}]}], "]"}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", "]"}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"wallsid", ",", " ", "arcs"}], "}"}]}]}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.8535564424845552`*^9, 3.8535565501218667`*^9}, {
   3.853556625538414*^9, 3.853556645481661*^9}, {3.853556741890326*^9, 
   3.8535568160405045`*^9}, {3.853557155768811*^9, 3.8535572992495594`*^9}, {
   3.853557344834019*^9, 3.8535576364617834`*^9}, {3.853557706420983*^9, 
   3.853557798218229*^9}, {3.8535578443453374`*^9, 3.8535578780751963`*^9}, 
   3.853558178261213*^9, {3.85355843146497*^9, 3.853558465339393*^9}, {
   3.85355852802957*^9, 3.8535585439850717`*^9}, {3.853558607748246*^9, 
   3.8535586230453463`*^9}, {3.85355866274759*^9, 3.8535587126732035`*^9}, {
   3.8535590626601963`*^9, 3.853559366970728*^9}, {3.8535593996950617`*^9, 
   3.8535595752730474`*^9}, {3.8535596130711565`*^9, 3.853559613167536*^9}, 
   3.853560146539571*^9, {3.853560199490184*^9, 3.8535601995470734`*^9}, {
   3.8535602296818347`*^9, 3.8535602387416153`*^9}, 3.853560274462452*^9, {
   3.8535603201782174`*^9, 3.8535603290977154`*^9}, {3.8535610550136166`*^9, 
   3.8535610709297624`*^9}, {3.853561335882197*^9, 3.853561336753209*^9}, {
   3.8535618792024765`*^9, 3.853561881136408*^9}, {3.8535619611789308`*^9, 
   3.853561961296733*^9}, {3.85467705459756*^9, 3.854677058918027*^9}, {
   3.8546770922862034`*^9, 3.8546771123356295`*^9}, 3.8546771977293353`*^9, 
   3.8546783456120806`*^9, {3.8546784571430206`*^9, 3.8546784660986605`*^9}, {
   3.854683495073616*^9, 3.8546835051882467`*^9}, {3.8577830283592377`*^9, 
   3.8577830799394093`*^9}, 3.8577835918322244`*^9, 3.86775348605796*^9, {
   3.867753549503289*^9, 3.867753559655897*^9}, {3.867756066134424*^9, 
   3.867756098477055*^9}, 3.867757334693555*^9},
 CellLabel->"In[90]:=",ExpressionUUID->"3f3000cb-0e9f-4ce5-9d83-3307057fb4ed"]
}, Closed]],

Cell[CellGroupData[{

Cell["Wrapper Function", "Subsubsection",
 CellChangeTimes->{{3.864627203005045*^9, 
  3.864627206516131*^9}},ExpressionUUID->"4497b242-b69f-43d5-af31-\
9c73b1ffb79f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"GroupWallsGnomonicProjection", "[", 
    RowBox[{"measurements_", ",", "algorithm_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"gnomonicProjection", ",", 
       RowBox[{"solution", "=", 
        RowBox[{"{", "}"}]}]}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"gnomonicProjection", "=", 
       RowBox[{"GnomonicProjection", "[", 
        RowBox[{"measurements", ",", "True"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Switch", "[", 
       RowBox[{
       "algorithm", ",", "\[IndentingNewLine]", "\"\<Basic Intersections\>\"",
         ",", 
        RowBox[{"solution", "=", 
         RowBox[{"BasicIntersections", "[", "gnomonicProjection", "]"}]}], 
        ",", "\[IndentingNewLine]", "\"\<Improved Intersections\>\"", ",", 
        RowBox[{"solution", "=", 
         RowBox[{"ImprovedIntersections", "[", "gnomonicProjection", "]"}]}], 
        ",", "\[IndentingNewLine]", "\"\<Random Points\>\"", ",", 
        RowBox[{"solution", "=", 
         RowBox[{"RandomPoints", "[", "gnomonicProjection", "]"}]}], ",", 
        "\[IndentingNewLine]", "\"\<Random Points Often\>\"", ",", 
        RowBox[{"solution", "=", 
         RowBox[{"RandomPointsOften", "[", "gnomonicProjection", "]"}]}], ",",
         "\[IndentingNewLine]", "_", ",", 
        RowBox[{
        "Throw", "[", 
         "\"\<Please specitfy an algorithm to work with gnomonic projection\>\
\"", "]"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"solution", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"Test", " ", "Wrapper", " ", "Function"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "measurements", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"measurements", "=", 
       RowBox[{"SimulateExperiment", "[", "\[IndentingNewLine]", 
        RowBox[{"cubeRoom", ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"RandomReal", "[", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"-", "1"}], ",", "1"}], "}"}], "]"}], ",", 
             RowBox[{"RandomReal", "[", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"-", "1"}], ",", "1"}], "}"}], "]"}], ",", 
             RowBox[{"RandomReal", "[", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"-", "1"}], ",", "1"}], "}"}], "]"}]}], "}"}], ",", 
           "10"}], "]"}], ",", "\[IndentingNewLine]", "0", ",", 
         "\[IndentingNewLine]", "0", ",", "\[IndentingNewLine]", "0", ",", 
         "\[IndentingNewLine]", "0", ",", "\[IndentingNewLine]", "0"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Print", "[", 
       RowBox[{"GroupWallsGnomonicProjection", "[", "measurements", "]"}], 
       "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", 
   "*)"}]}]}], "Input",
 CellChangeTimes->{{3.864627214896163*^9, 3.864627255737165*^9}, {
   3.864627673897599*^9, 3.864627848581362*^9}, {3.8646279485557337`*^9, 
   3.864627949617486*^9}, 3.864628096700253*^9, {3.864629360980797*^9, 
   3.864629372382791*^9}, {3.864629422964027*^9, 3.864629449011313*^9}, {
   3.864630166298664*^9, 3.864630278832238*^9}, {3.8646307464058332`*^9, 
   3.8646307512341127`*^9}, {3.8677536236507063`*^9, 3.867753641781106*^9}, {
   3.867755577380505*^9, 3.867755581308703*^9}, {3.867755660672793*^9, 
   3.867755661326199*^9}, 3.867755720900029*^9, {3.8677561210007133`*^9, 
   3.867756127636092*^9}, {3.867757209778068*^9, 3.867757210351747*^9}, 
   3.8677574626484547`*^9},
 CellLabel->"In[91]:=",ExpressionUUID->"809c9573-c650-43d0-8d48-3fb13e416632"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Graph Clustering", "Subsection",
 CellChangeTimes->{{3.868851849767354*^9, 
  3.868851852452136*^9}},ExpressionUUID->"aea5362d-9582-447f-ab85-\
fc40190ff198"],

Cell["\<\
This Section contains an implementation of the graph clustering approaches, \
analyzed and originally implemented by Matthias Scherer using python. 
All code is original code by Mathias Scherer. Adjustments are marked using \
comments.\
\>", "Text",
 CellChangeTimes->{{3.868851861724763*^9, 3.868851970208303*^9}, 
   3.8702690182405567`*^9, {3.87026908565853*^9, 
   3.87026912401201*^9}},ExpressionUUID->"a5f51396-af59-4209-959d-\
200d56096d3b"],

Cell[CellGroupData[{

Cell["Threshold Graph", "Subsubsection",
 CellChangeTimes->{{3.868851983923211*^9, 
  3.8688519875326443`*^9}},ExpressionUUID->"1594ec5a-2239-449e-8521-\
8f8352f44016"],

Cell["\<\
These functions for creating the threshold graph are taken from Mathias \
Scherer\[CloseCurlyQuote]s Notebook \[OpenCurlyDoubleQuote]CreatingRooms and \
Soundlists.nb\[CloseCurlyDoubleQuote]\
\>", "Text",
 CellChangeTimes->{{3.868851995702441*^9, 3.8688520347325287`*^9}, {
  3.868852105364205*^9, 3.868852135684827*^9}, {3.868852665894266*^9, 
  3.868852668148093*^9}, {3.868854754168956*^9, 
  3.868854812890658*^9}},ExpressionUUID->"a9936167-b40d-4c71-bb0f-\
87f3c7fd1257"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"GraphExperiment", "[", 
    RowBox[{"experiment_", ",", "epsilon_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"Nodes", ",", "Edges", ",", "i", ",", "j", ",", " ", "Mat"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Nodes", "=", "experiment"}], ";", "\[IndentingNewLine]", 
      RowBox[{"Mat", " ", "=", " ", 
       RowBox[{"IdentityMatrix", "[", 
        RowBox[{"Length", "[", "Nodes", "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Edges", "=", 
       RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", "1"}], ",", 
        RowBox[{"i", "\[LessEqual]", 
         RowBox[{"Length", "[", "Nodes", "]"}]}], ",", 
        RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"j", "=", "i"}], " ", ",", 
           RowBox[{"j", "\[LessEqual]", 
            RowBox[{"Length", "[", "Nodes", "]"}]}], ",", 
           RowBox[{"j", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{"(*", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"CompareTwoEventsInExperiment", "[", 
                RowBox[{"i", ",", "j", ",", "experiment"}], "]"}], "<", 
               "epsilon"}], ",", 
              RowBox[{"AppendTo", "[", 
               RowBox[{"Edges", ",", 
                RowBox[{"i", "\[UndirectedEdge]", "j"}]}], "]"}]}], "]"}], 
            "*)"}], "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"CompareTwoEventsInExperiment", "[", 
                RowBox[{"i", ",", "j", ",", "experiment"}], "]"}], "<", 
               "epsilon"}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"Mat", "[", 
                 RowBox[{"[", 
                  RowBox[{"i", ",", "j"}], "]"}], "]"}], " ", "=", " ", "1"}],
                ";", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"Mat", "[", 
                 RowBox[{"[", 
                  RowBox[{"j", ",", "i"}], "]"}], "]"}], " ", "=", " ", 
                "1"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
            "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"i", "\[Equal]", "j"}], ",", " ", 
              RowBox[{
               RowBox[{"Mat", "[", 
                RowBox[{"[", 
                 RowBox[{"i", ",", "j"}], "]"}], "]"}], " ", "=", " ", 
               "0"}]}], "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}],
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"Graph", "[", "Edges", "]"}], "*)"}], "\[IndentingNewLine]", 
      "Mat"}]}], "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"CompareTwoEventsInExperiment", "[", 
    RowBox[{"i_", ",", "j_", ",", "experiment_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"i", "\[Equal]", "j"}], ",", "0", ",", "\[IndentingNewLine]", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"e1", " ", "=", " ", 
          RowBox[{"experiment", "[", 
           RowBox[{"[", "i", "]"}], "]"}]}], ",", 
         RowBox[{"e2", " ", "=", " ", 
          RowBox[{"experiment", "[", 
           RowBox[{"[", "j", "]"}], "]"}]}]}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"CompareTwoEvents", "[", 
        RowBox[{"e1", ",", "e2"}], "]"}]}], "]"}]}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"CompareTwoEvents", "[", 
    RowBox[{"e1_", ",", "e2_"}], "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"u", ",", "\[IndentingNewLine]", 
       RowBox[{"v1", "=", 
        RowBox[{"e1", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"w1", "=", 
        RowBox[{"e1", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"\[CapitalDelta]1", "=", 
        RowBox[{"e1", "[", 
         RowBox[{"[", "3", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"v2", "=", 
        RowBox[{"e2", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"w2", "=", 
        RowBox[{"e2", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"\[CapitalDelta]2", "=", 
        RowBox[{"e2", "[", 
         RowBox[{"[", "3", "]"}], "]"}]}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"e1", "\[Equal]", "e2"}], ",", "0", ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"u", "=", 
         RowBox[{"NormalVectorFromTwoMeasurements", "[", 
          RowBox[{"v1", ",", "w1", ",", "v2", ",", "w2"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"Norm", "[", 
         RowBox[{
          RowBox[{"AdjustWallVectorLengthFromMeasurementsAndDirection", "[", 
           RowBox[{"u", ",", "v1", ",", "w1", ",", "\[CapitalDelta]1"}], 
           "]"}], "-", "\[IndentingNewLine]", 
          RowBox[{"AdjustWallVectorLengthFromMeasurementsAndDirection", "[", 
           RowBox[{"u", ",", "v2", ",", "w2", ",", "\[CapitalDelta]2"}], 
           "]"}]}], "]"}]}]}], "]"}]}], "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"NormalVectorFromTwoMeasurements", "[", 
    RowBox[{"v1_", ",", "w1_", ",", "v2_", ",", "w2_"}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"value", " ", "=", " ", 
       RowBox[{"Cross", "[", 
        RowBox[{
         RowBox[{"Cross", "[", 
          RowBox[{"v1", ",", "w1"}], "]"}], ",", 
         RowBox[{"Cross", "[", 
          RowBox[{"v2", ",", "w2"}], "]"}]}], "]"}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{
       "I", " ", "Had", " ", "to", " ", "Add", " ", "this", " ", "If"}], ",", 
       " ", 
       RowBox[{"otherwise", " ", "nummerical", " ", "Error"}]}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"If", " ", "[", " ", 
       RowBox[{
        RowBox[{"value", " ", "\[Equal]", " ", 
         RowBox[{"{", 
          RowBox[{"0.`", ",", "0.`", ",", "0.`"}], "}"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"value", " ", "=", " ", "1"}]}], " ", "\[IndentingNewLine]", 
       "]"}], ";", "\[IndentingNewLine]", "value"}]}], "\[IndentingNewLine]", 
    "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AdjustWallVectorLengthFromMeasurementsAndDirection", "[", 
    RowBox[{"u_", ",", "v_", ",", "w_", ",", "\[CapitalDelta]_"}], "]"}], ":=",
    "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"p", "=", 
        RowBox[{"DistanceToSenderGivenNormalVector1", "[", 
         RowBox[{"u", ",", "v", ",", "w", ",", "\[CapitalDelta]"}], "]"}]}], 
       ",", "r", ",", "s"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{
       "We", " ", "have", " ", "to", " ", "take", " ", "type", " ", "1"}], 
       ",", " ", 
       RowBox[{
       "since", " ", "we", " ", "do", " ", "not", " ", "know", " ", "the", 
        " ", "distance"}]}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"r", "=", 
       RowBox[{"p", " ", "v"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"s", "=", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"p", "+", "\[CapitalDelta]"}], ")"}], "w"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         FractionBox[
          RowBox[{"r", "+", "s"}], "2"], ".", "u"}], ")"}], 
       FractionBox["u", 
        SuperscriptBox[
         RowBox[{"Norm", "[", "u", "]"}], "2"]]}]}]}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"DistanceToSenderGivenNormalVector1", "[", 
   RowBox[{"u_", ",", "v_", ",", "w_", ",", "\[CapitalDelta]_"}], "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "u", " ", "may", " ", "not", " ", "have", " ", "the", " ", "correct", " ",
      "wall", " ", "distance"}], ",", " ", 
    RowBox[{"just", " ", "the", " ", "direction"}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"b", "=", 
      RowBox[{"Cross", "[", 
       RowBox[{
        RowBox[{"Cross", "[", 
         RowBox[{"u", ",", "v"}], "]"}], ",", "u"}], "]"}]}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"w", "-", "v"}], ")"}], ".", "b"}], "\[Equal]", "0"}], ",", 
      "0", ",", "\[IndentingNewLine]", 
      FractionBox[
       RowBox[{"\[CapitalDelta]", " ", 
        RowBox[{"w", ".", "b"}]}], 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"v", "-", "w"}], ")"}], ".", "b"}]]}], "]"}]}], 
   "]"}]}]}], "Input",
 CellChangeTimes->{{3.868852053850478*^9, 3.86885207915536*^9}, {
   3.868852699032611*^9, 3.868852784327291*^9}, {3.868852979640511*^9, 
   3.868852991942223*^9}, {3.8688530369909163`*^9, 3.868853354780849*^9}, {
   3.868853405548074*^9, 3.868853739494152*^9}, {3.868853843194436*^9, 
   3.868853843775169*^9}, {3.868853891834663*^9, 3.868853954236608*^9}, {
   3.868854006935874*^9, 3.8688541131963577`*^9}, {3.868854156407668*^9, 
   3.868854202977268*^9}, {3.868854248515442*^9, 3.868854373435951*^9}, {
   3.868854471883527*^9, 3.868854499957692*^9}, {3.868854536546238*^9, 
   3.8688545676574087`*^9}, {3.8688546577877893`*^9, 3.868854673301887*^9}, {
   3.8688547038823547`*^9, 3.8688547153816357`*^9}, {3.868855835508623*^9, 
   3.868855838396278*^9}, 3.8702689665148478`*^9, {3.870270266286355*^9, 
   3.870270299582861*^9}},
 CellLabel->"In[92]:=",ExpressionUUID->"4d7e3004-d40d-4828-8eb2-219e034fbf16"]
}, Closed]],

Cell[CellGroupData[{

Cell["Python Backend", "Subsubsection",
 CellChangeTimes->{{3.8702692549111834`*^9, 
  3.8702692638920307`*^9}},ExpressionUUID->"f7fa0e63-2b83-47f8-a945-\
95ec7e810152"],

Cell["\<\
Mathias Scherer implemented his Clustering solution using python, this \
section passes the experiment data to a python backend that uses the original \
implementation to compute reflection clusters.\
\>", "Text",
 CellChangeTimes->{{3.8702692716338797`*^9, 
  3.870269321964264*^9}},ExpressionUUID->"116ba058-d3d4-46d2-a51b-\
913278d320e3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeCommunityDetectionResultFromPythonBackend", "[", 
   RowBox[{"graphMatrix_", ",", "algorithm_", ",", "outlier_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"pythonSession", ",", "\[IndentingNewLine]", 
      RowBox[{"path", "=", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], "<>", 
        "\"\<community-detection-python-backend\>\""}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"script", "=", "\"\</community_detection_backend.py\>\""}], ",",
       "\[IndentingNewLine]", "externalResult"}], "\[IndentingNewLine]", 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"pythonSession", "=", 
      RowBox[{"StartExternalSession", "[", "\"\<Python\>\"", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ExternalEvaluate", "[", 
      RowBox[{"pythonSession", ",", 
       RowBox[{"File", "[", 
        RowBox[{"path", "<>", "script"}], "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"externalResult", "=", 
      RowBox[{"ExternalEvaluate", "[", "\[IndentingNewLine]", 
       RowBox[{"pythonSession", ",", "\[IndentingNewLine]", 
        RowBox[{"<|", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"\"\<Command\>\"", "->", "\"\<compute_solution\>\""}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<Arguments\>\"", "->", 
           RowBox[{"{", 
            RowBox[{"graphMatrix", ",", "algorithm", ",", "outlier"}], 
            "}"}]}]}], "\[IndentingNewLine]", "|>"}]}], "\[IndentingNewLine]",
        "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"Clear", "[", "pythonSession", "]"}], ";"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"DeleteObject", "[", "pythonSession", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Filter", " ", "out", " ", "clusters", " ", "with", " ", "just", " ", 
       "one", " ", "reflection"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"externalResult", "=", 
      RowBox[{"Select", "[", 
       RowBox[{"externalResult", ",", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", "#", "]"}], ">", "1"}], "&"}]}], "]"}]}], 
     ";", "\[IndentingNewLine]", "externalResult"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJwdxVkogwEAB/AdEkK28oIxi5QHklLL+TnmYUJSY+XIMuUcqdXSzBmZIX3J
keVFXkRo05orNWF7kG3NXFEKLWnmyvn9v4dfv9i6trJ6FoPBiKHgVEKz6HN4
iDhR8w4uFVVbsPXBeYr1yy0f2F/69Ym9C/u/+HjcQX9nTGa/UncGTdCnvVhD
MRHZwcVyMp6Hl8z9qTiqypaB7zcYWbgx76oYmwpHyvCqPbMVB0dnqvHlumQA
F83k6jCfGT6JmYPkNHbe5s9j0fY5/ZZBsILT7YGbWDgSQL5Ra+TcKdzIKZjF
YyFXc/iCWWLCc493e9hLKk7wUOURvUZb68aELucC/0p6b7Cr/Ig+abz5B5fL
/P+w+8wofaeu4B3SP7+Pij6obVILvVgcxQpzeghWkJ6N1xJ3a3DNt5e+W9mk
wNddEe041yA5wMoklw1/+rhCDrXaY87Gu34qt/3cQ6gsTzdYkdIT46AWDMv4
uEHbGY+17L4E/A+ifSvQ
  "],
 CellLabel->"In[98]:=",ExpressionUUID->"1089f4d4-faf1-4036-bd59-8bef979e7652"]
}, Closed]],

Cell[CellGroupData[{

Cell["Main Function", "Subsubsection",
 CellChangeTimes->{{3.870269172915328*^9, 
  3.8702691805970783`*^9}},ExpressionUUID->"82c456ec-b264-4b05-ae78-\
69bdf9c72b77"],

Cell["\<\
Mathias Scherer exported graphs generated from experiment data to csv. The \
following function implicitly generates the required data and then passes it \
to the python script created in the previous section.\
\>", "Text",
 CellChangeTimes->{{3.870269187778034*^9, 
  3.8702692324735737`*^9}},ExpressionUUID->"188e565f-26f9-449d-b50a-\
a715ae095656"],

Cell[BoxData[
 RowBox[{
  RowBox[{"GroupWallsCommunityDetection", "[", "measurements_", "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"graphExperiment", ",", 
      RowBox[{"\[Epsilon]", "=", "0.1"}], ",", 
      RowBox[{"algorithm", "=", "\"\<Leiden\>\""}], ",", 
      RowBox[{"outlier", "=", "\"\<None\>\""}], ",", "result"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"graphExperiment", "=", 
      RowBox[{"GraphExperiment", "[", 
       RowBox[{"measurements", ",", "\[Epsilon]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"result", "=", 
      RowBox[{"ComputeCommunityDetectionResultFromPythonBackend", "[", 
       RowBox[{"graphExperiment", ",", "algorithm", ",", "outlier"}], "]"}]}],
      ";", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Need", " ", "to", " ", "shift", " ", "the", " ", "indices", " ", "by", 
       " ", "one", " ", "due", " ", "to", " ", "python", " ", "starting", " ",
        "at", " ", "0", " ", "when", " ", "counting", " ", "stuff"}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"reflectionIndex", "+", "1"}], ",", 
         RowBox[{"{", 
          RowBox[{"reflectionIndex", ",", "group"}], "}"}]}], "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"group", ",", "result"}], "}"}]}], "]"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.870269362576066*^9, 3.870269503277967*^9}, {
   3.870269699646532*^9, 3.870269713198995*^9}, {3.870269925582183*^9, 
   3.8702699774405003`*^9}, {3.870270125150803*^9, 3.870270144344109*^9}, 
   3.8702702599343433`*^9, {3.870270990043974*^9, 3.8702710079803953`*^9}, 
   3.8702719457947598`*^9, {3.870273510994154*^9, 3.8702735261407022`*^9}, {
   3.870273560662364*^9, 3.870273565682025*^9}, {3.870275585265621*^9, 
   3.870275590556006*^9}, {3.870278322890847*^9, 3.870278399543212*^9}, {
   3.8702784859523363`*^9, 3.870278522093657*^9}, {3.870278880195386*^9, 
   3.870278895108391*^9}, {3.8702791888170233`*^9, 3.8702791891243877`*^9}, {
   3.8703285026441193`*^9, 3.8703285326932163`*^9}, {3.8703286297178802`*^9, 
   3.870328662279561*^9}, {3.8703288958631144`*^9, 3.8703289053438797`*^9}, {
   3.870329450354889*^9, 3.870329463480855*^9}},
 CellLabel->"In[99]:=",ExpressionUUID->"63893a80-2ec3-4df0-be6a-41f7894cb2e8"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Evaluate Reflection Clustering", "Subsection",
 CellChangeTimes->{{3.864285424667363*^9, 
  3.864285433736414*^9}},ExpressionUUID->"05a56a2e-7e71-471a-b205-\
5318fbf9a04b"],

Cell["\<\
In this subsection, we provide a single function to compute reflection groups \
for provided measurements and choice of algorithm. We then compare the \
available methods using a precision recall measurement.\
\>", "Text",
 CellChangeTimes->{{3.8642854471830597`*^9, 
  3.8642855447807903`*^9}},ExpressionUUID->"d51a5108-a859-49bb-847d-\
e3738b4eb7c5"],

Cell[CellGroupData[{

Cell["Reflection Clustering Main Function", "Subsubsection",
 CellChangeTimes->{{3.864285555901485*^9, 
  3.864285561150621*^9}},ExpressionUUID->"e4f9d5cb-3480-48d9-b213-\
9f93499d223b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"GroupMeasurements", "[", 
   RowBox[{"measurements_", ",", "algorithm_", ",", 
    RowBox[{"linesIntoBinsBinKeepThreshold_", ":", "3"}]}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Switch", "[", 
     RowBox[{
     "algorithm", ",", "\[IndentingNewLine]", "\"\<Inversion, Original\>\"", 
      ",", 
      RowBox[{"GroupWallsUnitSphereInversion", "[", 
       RowBox[{"measurements", ",", "linesIntoBinsBinKeepThreshold"}], "]"}], 
      ",", "\[IndentingNewLine]", "\"\<Inversion, Improved\>\"", ",", 
      RowBox[{
      "GroupWallsUnitSphereInversionImproved", "[", "measurements", "]"}], 
      ",", "\[IndentingNewLine]", "\"\<Gnomonic, Basic Intersections\>\"", 
      ",", 
      RowBox[{"GroupWallsGnomonicProjection", "[", 
       RowBox[{"measurements", ",", "\"\<Basic Intersections\>\""}], "]"}], 
      ",", "\[IndentingNewLine]", "\"\<Gnomonic, Improved Intersections\>\"", 
      ",", 
      RowBox[{"GroupWallsGnomonicProjection", "[", 
       RowBox[{"measurements", ",", "\"\<Improved Intersections\>\""}], "]"}],
       ",", "\[IndentingNewLine]", "\"\<Gnomonic, Random Points\>\"", ",", 
      RowBox[{"GroupWallsGnomonicProjection", "[", 
       RowBox[{"measurements", ",", "\"\<Random Points\>\""}], "]"}], ",", 
      "\[IndentingNewLine]", "\"\<Gnomonic, Random Points Often\>\"", ",", 
      RowBox[{"GroupWallsGnomonicProjection", "[", 
       RowBox[{"measurements", ",", "\"\<Random Points Often\>\""}], "]"}], 
      ",", "\[IndentingNewLine]", "\"\<Community Detection\>\"", ",", 
      RowBox[{"GroupWallsCommunityDetection", "[", "measurements", "]"}], ",",
       "\[IndentingNewLine]", "_", ",", 
      RowBox[{
      "Throw", "[", 
       "\"\<Please specify the algorithm to use. Possible Algorithms: \
'Inversion', 'Projection', 'Community Detection', 'Spectral Clustering'.\>\"",
        "]"}]}], "]"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.864285571078685*^9, 3.864285589815639*^9}, {
   3.864285647746045*^9, 3.864285841297257*^9}, {3.864292179127894*^9, 
   3.8642922015965652`*^9}, 3.8642929864128313`*^9, {3.8646294909036627`*^9, 
   3.8646295008488407`*^9}, {3.864629978297686*^9, 3.8646300122239437`*^9}, {
   3.864891108354816*^9, 3.8648911277483587`*^9}, {3.867565348385538*^9, 
   3.867565372890045*^9}, {3.867565463562046*^9, 3.867565466971858*^9}, {
   3.867753737359068*^9, 3.867753753918838*^9}, {3.8702787731261*^9, 
   3.87027878628972*^9}},
 CellLabel->
  "In[100]:=",ExpressionUUID->"89e34bca-c4bb-43b9-b506-8f292a4e1697"]
}, Closed]],

Cell[CellGroupData[{

Cell["Functions for Comparing Methods", "Subsubsection",
 CellChangeTimes->{{3.864285867715205*^9, 3.864285870668092*^9}, {
  3.864286357009387*^9, 3.864286360138546*^9}, {3.864629781915016*^9, 
  3.864629787205068*^9}},ExpressionUUID->"dc16ad91-6521-40cc-99c1-\
fef8c231828d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputePerfectSolution", "[", 
   RowBox[{"measurements_", ",", "roomData_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"solution", "=", 
      RowBox[{"{", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"reflectionsFromPair", "=", 
           RowBox[{"{", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Do", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"MemberQ", "[", 
                RowBox[{"pair", ",", 
                 RowBox[{
                  RowBox[{"measurements", "[", 
                   RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
                  RowBox[{"[", "4", "]"}], "]"}]}], "]"}], ",", 
               RowBox[{"AppendTo", "[", 
                RowBox[{"reflectionsFromPair", ",", "measurementIndex"}], 
                "]"}]}], "]"}], ";"}], "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{"measurementIndex", ",", 
              RowBox[{"Length", "[", "measurements", "]"}]}], "}"}]}], "]"}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "[", "reflectionsFromPair", "]"}], ">", "0"}], 
            ",", 
            RowBox[{"AppendTo", "[", 
             RowBox[{"solution", ",", "reflectionsFromPair"}], "]"}]}], "]"}],
           ";"}]}], "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
       
       RowBox[{"{", 
        RowBox[{"pair", ",", 
         RowBox[{"roomData", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], "]"}], ";", 
     "\[IndentingNewLine]", "solution"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.864286023529402*^9, 3.8642860631451902`*^9}, {
   3.864286196596641*^9, 3.8642862229617863`*^9}, {3.8642862807331*^9, 
   3.864286431818296*^9}, {3.8642893011022167`*^9, 3.864289608731152*^9}, {
   3.864289700009165*^9, 3.86428981037939*^9}, {3.8642898872646217`*^9, 
   3.864289891727878*^9}, {3.86429015561701*^9, 3.864290196613706*^9}, {
   3.864290245048328*^9, 3.864290264408773*^9}, {3.864290688140308*^9, 
   3.864290790644088*^9}, {3.864291964756031*^9, 3.86429196515522*^9}, {
   3.864292024357263*^9, 3.864292028857892*^9}, {3.864292141157119*^9, 
   3.864292149701367*^9}, {3.864292251461344*^9, 3.8642922532148533`*^9}, {
   3.864292368970223*^9, 3.8642923783783283`*^9}, {3.864292473076889*^9, 
   3.864292477693564*^9}, 3.864292823982325*^9, {3.864292918279626*^9, 
   3.8642929226199923`*^9}, {3.864293053943714*^9, 3.864293147744*^9}, {
   3.864293184976822*^9, 3.864293329362442*^9}, {3.864293363648423*^9, 
   3.864293377633827*^9}, {3.864293415442832*^9, 3.8642937396053877`*^9}, {
   3.864293786035858*^9, 3.864293849253607*^9}, 3.864293880178844*^9, {
   3.864369850887273*^9, 3.864369856942664*^9}, {3.864370278920474*^9, 
   3.864370433245105*^9}},
 CellLabel->
  "In[101]:=",ExpressionUUID->"feadfa33-71eb-403d-a6ee-c62f59983479"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputePrecisionRecallSolution", "[", 
   RowBox[{"perfectSolution_", ",", "computedSolution_", ",", "\[Beta]_"}], 
   "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"result", "=", 
      RowBox[{"{", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", "closestSolutionSample", "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"closestSolutionSample", "=", 
           RowBox[{
            RowBox[{"MaximalBy", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"ComputePrecisionRecallSample", "[", 
                 RowBox[{
                 "perfectSample", ",", "computedSample", ",", "\[Beta]"}], 
                 "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"perfectSample", ",", "perfectSolution"}], "}"}]}], 
               "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"#", "[", 
                RowBox[{"[", "3", "]"}], "]"}], "&"}]}], 
             "\[IndentingNewLine]", "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{"result", ",", "closestSolutionSample"}], "]"}]}]}], 
        "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"computedSample", ",", "computedSolution"}], "}"}]}], "]"}], 
     ";", "\[IndentingNewLine]", "result"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.864286023529402*^9, 3.8642860631451902`*^9}, {
   3.864286196596641*^9, 3.8642862229617863`*^9}, {3.8642862807331*^9, 
   3.864286431818296*^9}, {3.8642893011022167`*^9, 3.864289608731152*^9}, {
   3.864289700009165*^9, 3.86428981037939*^9}, {3.8642898872646217`*^9, 
   3.864289891727878*^9}, {3.86429015561701*^9, 3.864290196613706*^9}, {
   3.864290245048328*^9, 3.864290264408773*^9}, {3.864290688140308*^9, 
   3.864290790644088*^9}, {3.864291964756031*^9, 3.86429196515522*^9}, {
   3.864292024357263*^9, 3.864292028857892*^9}, {3.864292141157119*^9, 
   3.864292149701367*^9}, {3.864292251461344*^9, 3.8642922532148533`*^9}, {
   3.864292368970223*^9, 3.8642923783783283`*^9}, {3.864292473076889*^9, 
   3.864292477693564*^9}, 3.864292823982325*^9, {3.864292918279626*^9, 
   3.8642929226199923`*^9}, {3.864293053943714*^9, 3.864293147744*^9}, {
   3.864293184976822*^9, 3.864293329362442*^9}, {3.864293363648423*^9, 
   3.864293377633827*^9}, {3.864293415442832*^9, 3.8642937396053877`*^9}, {
   3.864293786035858*^9, 3.864293849253607*^9}, 3.864293880178844*^9, {
   3.864369850887273*^9, 3.864369856942664*^9}, {3.864370278920474*^9, 
   3.864370451615237*^9}, {3.864370491517601*^9, 3.864370574427096*^9}, {
   3.864370641930781*^9, 3.864370668202105*^9}, 3.8643708438296022`*^9, {
   3.8643711691359987`*^9, 3.864371176807033*^9}, {3.8643718271885157`*^9, 
   3.864372026629725*^9}, {3.864372102186048*^9, 3.86437211594761*^9}, 
   3.8643721542253647`*^9, {3.864372202768693*^9, 3.864372203259858*^9}, 
   3.864372268151845*^9, {3.867738462603938*^9, 3.867738484572385*^9}, {
   3.867738710787298*^9, 3.8677387258678017`*^9}, {3.8677387869026623`*^9, 
   3.867738787215427*^9}},
 CellLabel->
  "In[102]:=",ExpressionUUID->"e71ab499-e882-4af3-b5ae-19f07990a87c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputePrecisionRecallSample", "[", 
   RowBox[{"perfectSample_", ",", "computedSample_", ",", "\[Beta]_"}], "]"}],
   ":=", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Compute", " ", "precision"}], ",", " ", 
    RowBox[{
    "recall", " ", "and", " ", "f_\[Beta]", " ", "Score", " ", "for", " ", 
     "given", " ", "solution", " ", "sample", " ", "and", " ", "\[Beta]"}], 
    ",", " ", 
    RowBox[{
    "using", " ", "perfect", " ", "sample", " ", "as", " ", "reference"}]}], 
   " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"numTruePositives", ",", "precision", ",", "recall"}], "}"}], 
    ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"numTruePositives", "=", 
      RowBox[{"Length", "[", 
       RowBox[{"Select", "[", 
        RowBox[{"computedSample", ",", 
         RowBox[{
          RowBox[{"MemberQ", "[", 
           RowBox[{"perfectSample", ",", "#"}], "]"}], "&"}]}], "]"}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "[", "computedSample", "]"}], "==", "0"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", "\[IndentingNewLine]", 
       
       RowBox[{
        RowBox[{"precision", "=", 
         RowBox[{"numTruePositives", "/", 
          RowBox[{"Length", "[", "computedSample", "]"}]}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"recall", "=", 
         RowBox[{"numTruePositives", "/", 
          RowBox[{"Length", "[", "perfectSample", "]"}]}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
         "precision", ",", "\[IndentingNewLine]", "recall", ",", 
          "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"precision", "+", "recall"}], ">", "0"}], ",", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"1", "+", 
               RowBox[{"\[Beta]", "^", "2"}]}], ")"}], "*", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"precision", "*", "recall"}], ")"}], "/", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"\[Beta]", "^", "2"}], "*", "precision"}], ")"}], 
                "+", "recall"}], ")"}]}]}], ",", "0"}], "]"}]}], "}"}]}]}], 
      "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.864286023529402*^9, 3.8642860631451902`*^9}, {
   3.864286196596641*^9, 3.8642862229617863`*^9}, {3.8642862807331*^9, 
   3.864286431818296*^9}, {3.8642893011022167`*^9, 3.864289608731152*^9}, {
   3.864289700009165*^9, 3.86428981037939*^9}, {3.8642898872646217`*^9, 
   3.864289891727878*^9}, {3.86429015561701*^9, 3.864290196613706*^9}, {
   3.864290245048328*^9, 3.864290264408773*^9}, {3.864290688140308*^9, 
   3.864290790644088*^9}, {3.864291964756031*^9, 3.86429196515522*^9}, {
   3.864292024357263*^9, 3.864292028857892*^9}, {3.864292141157119*^9, 
   3.864292149701367*^9}, {3.864292251461344*^9, 3.8642922532148533`*^9}, {
   3.864292368970223*^9, 3.8642923783783283`*^9}, {3.864292473076889*^9, 
   3.864292477693564*^9}, 3.864292823982325*^9, {3.864292918279626*^9, 
   3.8642929226199923`*^9}, {3.864293053943714*^9, 3.864293147744*^9}, {
   3.864293184976822*^9, 3.864293329362442*^9}, {3.864293363648423*^9, 
   3.864293377633827*^9}, {3.864293415442832*^9, 3.8642937396053877`*^9}, {
   3.864293786035858*^9, 3.864293849253607*^9}, 3.864293880178844*^9, {
   3.864369850887273*^9, 3.8643701039262667`*^9}, {3.8643702893218327`*^9, 
   3.864370313291986*^9}, {3.864370875504162*^9, 3.864370993672793*^9}, {
   3.864371082212654*^9, 3.864371137919264*^9}, {3.864371246388406*^9, 
   3.864371292521731*^9}, 3.864372272507516*^9, {3.8704490935835257`*^9, 
   3.8704490938618383`*^9}},
 CellLabel->
  "In[103]:=",ExpressionUUID->"aa485d28-8178-439a-bd65-68368595e0e9"]
}, Closed]]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Wall Normal Vector Computation", "Section",
 CellChangeTimes->{{3.864730136980364*^9, 
  3.8647301447716*^9}},ExpressionUUID->"4aa525e2-9eb2-4cb7-a03d-644a65c5d29a"],

Cell["\<\
Computation of wall normal vector as implemented by Tobias Grugel\
\>", "Text",
 CellChangeTimes->{{3.864730625467781*^9, 
  3.864730638653811*^9}},ExpressionUUID->"1d3a2e4e-1c5a-4827-9035-\
032f52afada4"],

Cell[CellGroupData[{

Cell["Helper Functions", "Subsection",
 CellChangeTimes->{{3.864731865617867*^9, 
  3.86473186761858*^9}},ExpressionUUID->"d69a8853-edb6-4130-b48c-\
85c688126bf9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Method", " ", "to", " ", "return", " ", "the", " ", "angle", " ", 
    "between", " ", "two", " ", "vectors", " ", "in", " ", "3", "D"}], "*)"}],
   "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
     RowBox[{"nv_", ",", " ", "reflection_"}], "]"}], ":=", 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "normalvector", ",", " ", "reflectionvector", ",", " ", "dotproduct", 
        ",", " ", "angle", ",", " ", "divisor"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"normalvector", " ", "=", " ", "nv"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"reflectionvector", " ", "=", " ", "reflection"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"dotproduct", "=", 
        RowBox[{"normalvector", ".", "reflectionvector"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"divisor", " ", "=", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"Norm", "[", "normalvector", "]"}], "*", 
          RowBox[{"Norm", "[", "reflectionvector", "]"}]}], ")"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"angle", " ", "=", " ", 
        RowBox[{
         RowBox[{"ArcCos", "[", 
          RowBox[{"dotproduct", "/", "divisor"}], "]"}], "/", "Degree"}]}], 
       ";", "\[IndentingNewLine]", "angle"}]}], "\[IndentingNewLine]", 
     "]"}]}], ";"}]}]], "Input",
 CellChangeTimes->{{3.8443216763349447`*^9, 3.844321701990656*^9}, {
   3.844322603935238*^9, 3.844322604417239*^9}, {3.845351676611788*^9, 
   3.8453516782820687`*^9}, {3.8462233102789383`*^9, 
   3.8462233922552214`*^9}, {3.846223768839278*^9, 3.8462238260342503`*^9}, {
   3.8462238904459944`*^9, 3.8462239429958105`*^9}, {3.8462239830695047`*^9, 
   3.8462240163640394`*^9}, {3.84622419591206*^9, 3.8462242126896353`*^9}, {
   3.846224263515794*^9, 3.8462243003306775`*^9}, {3.8462243592043595`*^9, 
   3.8462243819988184`*^9}, {3.8462244207205153`*^9, 
   3.8462244789603786`*^9}, {3.8462245828855715`*^9, 
   3.8462248161395807`*^9}, {3.8462249152700243`*^9, 3.846224944731846*^9}, {
   3.846224977578107*^9, 3.8462250402347126`*^9}, 3.8462250763550873`*^9, {
   3.8462251132625465`*^9, 3.846225153350771*^9}, {3.8462251835962706`*^9, 
   3.8462251865775323`*^9}, {3.846225226456629*^9, 3.846225264991627*^9}, {
   3.846225321203947*^9, 3.8462253214379444`*^9}, {3.846226309494495*^9, 
   3.8462263124965687`*^9}, {3.847785037348591*^9, 3.847785046648994*^9}, {
   3.8569338761058683`*^9, 3.856934122306653*^9}},
 CellLabel->
  "In[104]:=",ExpressionUUID->"c7316236-0ac2-4dae-a884-b98ed1e88cca"]
}, Closed]],

Cell[CellGroupData[{

Cell["Direction Averaging", "Subsection",
 CellChangeTimes->{{3.8647317726569366`*^9, 
  3.8647317792044783`*^9}},ExpressionUUID->"732182f8-ce25-4cb4-a350-\
dfddee0a732d"],

Cell[CellGroupData[{

Cell["All Pairs", "Subsubsection",
 CellChangeTimes->{{3.866095876671352*^9, 
  3.866095879050467*^9}},ExpressionUUID->"f634d12e-ee46-4dc3-b16a-\
de7a07696caa"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Method", " ", "to", " ", "average", " ", "the", " ", "wall", " ", 
    "vectors", " ", "based", " ", "on", " ", "the", " ", "measurements", " ", 
    "using", " ", "AllPairs"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"NormalVectorFromXMeasurementAllPairs", "[", "xmeas_", "]"}], " ", 
   ":=", "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "  ", 
    RowBox[{
     RowBox[{
     "Implementation", " ", "for", " ", "averaging", " ", "using", " ", "all",
       " ", "pairs", " ", "of", " ", "measurements"}], ",", 
     "\[IndentingNewLine]", "  ", 
     RowBox[{"Input", ":", " ", 
      RowBox[{"Table", " ", "of", " ", "measurements", " ", "xmeas"}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"v", " ", 
       RowBox[{"(", 
        RowBox[{"direct", " ", "signal"}], ")"}]}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "2", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"w", " ", 
       RowBox[{"(", 
        RowBox[{"reflection", " ", "of", " ", "signal"}], ")"}]}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "3", "]"}], "]"}], " ", "--"}], ">", " ", "Delta"}], ",",
      "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "4", "]"}], "]"}], " ", "--"}], ">", " ", "Sender"}], 
     ",", "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "5", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"significance", " ", "value", " ", 
       RowBox[{"(", 
        RowBox[{
        "all", " ", "1", " ", "in", " ", "the", " ", "default", " ", "case"}],
         ")"}]}]}], ",", "\[IndentingNewLine]", "\t", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "6", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"Crossproduct", " ", "of", " ", "v", " ", "and", " ", "w"}]}], 
     ","}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"nv", "=", "0"}], ",", "i", ",", "j", ",", "u0", ",", " ", 
       RowBox[{"significancesum", "=", "0"}], ",", " ", "significancetemp", 
       ",", " ", "posnvangle", ",", " ", "negnvangle", ",", " ", "ang"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"significancetemp", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}], "*", 
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "2", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"u0", " ", "=", " ", 
       RowBox[{"Cross", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"u0", "=", 
       RowBox[{"Normalize", "[", "u0", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"nv", " ", "=", " ", 
       RowBox[{"significancetemp", "*", "u0"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"significancesum", " ", "=", "  ", "significancetemp"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"posnvangle", " ", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{"nv", ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"negnvangle", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"-", "nv"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"nv", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"posnvangle", "<", "negnvangle"}], ",", "nv", ",", 
         RowBox[{"-", "nv"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"ang", " ", "=", " ", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", "1"}], ",", " ", 
        RowBox[{"i", "\[LessEqual]", " ", 
         RowBox[{
          RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}]}], ",", " ", 
        RowBox[{"i", "+=", " ", "1"}], ",", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"j", "=", 
           RowBox[{"i", " ", "+", " ", "1"}]}], ",", " ", 
          RowBox[{"j", "\[LessEqual]", " ", 
           RowBox[{"Length", "[", "xmeas", "]"}]}], " ", ",", " ", 
          RowBox[{"j", "+=", "1"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"i", "\[Equal]", " ", "1"}], " ", "&&", " ", 
              RowBox[{"j", " ", "\[Equal]", "2"}]}], ",", 
             RowBox[{
              RowBox[{"Continue", "[", "]"}], ";"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"significancetemp", " ", "=", "  ", 
               RowBox[{
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}], "*", 
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "j", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"significancesum", " ", "+=", " ", 
               RowBox[{
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}], "*", 
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "j", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"u0", " ", "=", " ", 
               RowBox[{"Cross", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"xmeas", "[", 
                   RowBox[{"[", "i", "]"}], "]"}], "[", 
                  RowBox[{"[", "6", "]"}], "]"}], ",", 
                 RowBox[{
                  RowBox[{"xmeas", "[", 
                   RowBox[{"[", "j", "]"}], "]"}], "[", 
                  RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"u0", "=", 
               RowBox[{"Normalize", "[", "u0", "]"}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"ang", " ", "=", " ", 
               RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
                RowBox[{
                 RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}],
               ";", "\[IndentingNewLine]", 
              RowBox[{"significancetemp", " ", "=", "  ", 
               RowBox[{
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}], "*", 
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "j", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}],
               ";", "\[IndentingNewLine]", 
              RowBox[{"u0", " ", "=", "  ", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"nv", ".", "u0"}], " ", "\[GreaterEqual]", " ", 
                  "0"}], ",", " ", "u0", ",", " ", 
                 RowBox[{"-", "u0"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
              RowBox[{"nv", "+=", 
               RowBox[{"significancetemp", " ", "*", "u0"}]}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
         "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"nv", "=", 
       RowBox[{"nv", "/", "significancesum"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Normalize", "[", "nv", "]"}]}]}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.8647317829441023`*^9, 3.864731813632272*^9}, {
   3.864879689729106*^9, 3.8648796904011374`*^9}, {3.866094547575779*^9, 
   3.866094554244906*^9}, 3.8660949060036907`*^9},
 CellLabel->
  "In[105]:=",ExpressionUUID->"5b32533a-2d68-48a4-9634-d38330aa0516"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Method", " ", "to", " ", "average", " ", "the", " ", "wall", " ", 
     "vectors", " ", "based", " ", "on", " ", "the", " ", "measurements", " ",
      "using", " ", 
     RowBox[{"AllPairs", ".", " ", "\[IndentingNewLine]", 
      RowBox[{"(", "Hopefully", ")"}]}], " ", "improved", " ", "version", " ",
      "by", " ", "Milan", " ", "M\[UDoubleDot]ller"}], ",", " ", 
    RowBox[{
    "checking", " ", "which", " ", "of", " ", "the", " ", "two", " ", 
     "potential", " ", "cross", " ", "products", " ", "is", " ", "closer", 
     " ", "to", " ", "the", " ", "reflection", " ", "direction", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
       "reflection", " ", "is", " ", "always", " ", "in", " ", "the", " ", 
        "direction", " ", "of", " ", "the", " ", "wall"}], ")"}], "."}]}]}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
   "NormalVectorFromXMeasurementAllPairsReflectionAware", "[", "xmeas_", 
    "]"}], " ", ":=", "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "  ", 
    RowBox[{
     RowBox[{
     "Implementation", " ", "for", " ", "averaging", " ", "using", " ", "all",
       " ", "pairs", " ", "of", " ", "measurements"}], ",", 
     "\[IndentingNewLine]", "  ", 
     RowBox[{"Input", ":", " ", 
      RowBox[{"Table", " ", "of", " ", "measurements", " ", "xmeas"}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"v", " ", 
       RowBox[{"(", 
        RowBox[{"direct", " ", "signal"}], ")"}]}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "2", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"w", " ", 
       RowBox[{"(", 
        RowBox[{"reflection", " ", "of", " ", "signal"}], ")"}]}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "3", "]"}], "]"}], " ", "--"}], ">", " ", "Delta"}], ",",
      "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "4", "]"}], "]"}], " ", "--"}], ">", " ", "Sender"}], 
     ",", "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "5", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"significance", " ", "value", " ", 
       RowBox[{"(", 
        RowBox[{
        "all", " ", "1", " ", "in", " ", "the", " ", "default", " ", "case"}],
         ")"}]}]}], ",", "\[IndentingNewLine]", "\t", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "6", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"Crossproduct", " ", "of", " ", "v", " ", "and", " ", "w"}]}], 
     ","}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"nv", "=", "0"}], ",", "i", ",", "j", ",", "u0", ",", " ", 
       RowBox[{"significancesum", "=", "0"}], ",", " ", "significancetemp", 
       ",", " ", "posnvangle", ",", " ", "negnvangle", ",", " ", "ang"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"significancetemp", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}], "*", 
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "2", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"u0", " ", "=", " ", 
       RowBox[{"Cross", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"u0", "=", 
       RowBox[{"Normalize", "[", "u0", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"nv", " ", "=", " ", 
       RowBox[{"significancetemp", "*", "u0"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"significancesum", " ", "=", "  ", "significancetemp"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"posnvangle", " ", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{"nv", ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"negnvangle", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"-", "nv"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"nv", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"posnvangle", "<", "negnvangle"}], ",", "nv", ",", 
         RowBox[{"-", "nv"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"ang", " ", "=", " ", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", "1"}], ",", " ", 
        RowBox[{"i", "\[LessEqual]", " ", 
         RowBox[{
          RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}]}], ",", " ", 
        RowBox[{"i", "+=", " ", "1"}], ",", "\[IndentingNewLine]", 
        RowBox[{"For", "[", 
         RowBox[{
          RowBox[{"j", "=", 
           RowBox[{"i", " ", "+", " ", "1"}]}], ",", " ", 
          RowBox[{"j", "\[LessEqual]", " ", 
           RowBox[{"Length", "[", "xmeas", "]"}]}], " ", ",", " ", 
          RowBox[{"j", "+=", "1"}], ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"i", "\[Equal]", " ", "1"}], " ", "&&", " ", 
              RowBox[{"j", " ", "\[Equal]", "2"}]}], ",", 
             RowBox[{
              RowBox[{"Continue", "[", "]"}], ";"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"significancetemp", " ", "=", "  ", 
               RowBox[{
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}], "*", 
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "j", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"significancesum", " ", "+=", " ", 
               RowBox[{
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}], "*", 
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "j", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"u0", " ", "=", " ", 
               RowBox[{"Cross", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"xmeas", "[", 
                   RowBox[{"[", "i", "]"}], "]"}], "[", 
                  RowBox[{"[", "6", "]"}], "]"}], ",", 
                 RowBox[{
                  RowBox[{"xmeas", "[", 
                   RowBox[{"[", "j", "]"}], "]"}], "[", 
                  RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"u0", "=", 
               RowBox[{"Normalize", "[", "u0", "]"}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"(*", 
               RowBox[{
                RowBox[{"ang", " ", "=", " ", 
                 RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
                  RowBox[{
                   RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], 
                  "]"}]}], ";"}], "*)"}], "\[IndentingNewLine]", 
              RowBox[{"posnvangle", " ", "=", 
               RowBox[{
                RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
                 RowBox[{"u0", ",", 
                  RowBox[{
                   RowBox[{"xmeas", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], "[", 
                   RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "+", 
                RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
                 RowBox[{"u0", ",", 
                  RowBox[{
                   RowBox[{"xmeas", "[", 
                    RowBox[{"[", "j", "]"}], "]"}], "[", 
                   RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"negnvangle", " ", "=", 
               RowBox[{
                RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
                 RowBox[{
                  RowBox[{"-", "u0"}], ",", 
                  RowBox[{
                   RowBox[{"xmeas", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], "[", 
                   RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "+", 
                RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
                 RowBox[{
                  RowBox[{"-", "u0"}], ",", 
                  RowBox[{
                   RowBox[{"xmeas", "[", 
                    RowBox[{"[", "j", "]"}], "]"}], "[", 
                   RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"u0", " ", "=", "  ", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{"posnvangle", "<=", "negnvangle"}], ",", " ", "u0", 
                 ",", " ", 
                 RowBox[{"-", "u0"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
              RowBox[{"significancetemp", " ", "=", "  ", 
               RowBox[{
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "i", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}], "*", 
                RowBox[{
                 RowBox[{"xmeas", "[", 
                  RowBox[{"[", "j", "]"}], "]"}], "[", 
                 RowBox[{"[", "5", "]"}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}],
               ";", "\[IndentingNewLine]", 
              RowBox[{"nv", "+=", 
               RowBox[{"significancetemp", " ", "*", "u0"}]}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
         "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"nv", "=", 
         RowBox[{"nv", "/", "significancesum"}]}], ";"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"Normalize", "[", "nv", "]"}]}]}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.8647317829441023`*^9, 3.864731813632272*^9}, {
   3.864879689729106*^9, 3.8648796904011374`*^9}, {3.866094547575779*^9, 
   3.8660946154350653`*^9}, 3.8660949033711433`*^9, {3.8660953328900146`*^9, 
   3.866095341916388*^9}, {3.86609538921052*^9, 3.866095460304884*^9}, {
   3.8660955015489473`*^9, 3.866095534157258*^9}, {3.866095993789234*^9, 
   3.866095994456109*^9}, {3.866096054483634*^9, 3.866096075898134*^9}},
 CellLabel->
  "In[106]:=",ExpressionUUID->"08ee304f-759c-457a-83b1-ac5326ca36fc"]
}, Closed]],

Cell[CellGroupData[{

Cell["Disjoint Pairs", "Subsubsection",
 CellChangeTimes->{{3.866095892092608*^9, 
  3.866095894790003*^9}},ExpressionUUID->"13fadac7-3431-4fbe-9518-\
a39c2095764c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Method", " ", "to", " ", "average", " ", "the", " ", "wall", " ", 
    "vectors", " ", "based", " ", "on", " ", "the", " ", "measurements", " ", 
    "using", " ", "DisjointPairs"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"NormalVectorFromXMeasurementDisjointPairs", "[", "xmeas_", "]"}], 
   ":=", "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "  ", 
    RowBox[{
     RowBox[{
     "Implementation", " ", "for", " ", "averaging", " ", "using", " ", 
      "disjoint", " ", "pairs", " ", "of", " ", "measurements"}], ",", 
     "\[IndentingNewLine]", "  ", 
     RowBox[{"Input", ":", " ", 
      RowBox[{"Table", " ", "of", " ", "measurements", " ", "xmeas"}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"v", " ", 
       RowBox[{"(", 
        RowBox[{"direct", " ", "signal"}], ")"}]}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "2", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"w", " ", 
       RowBox[{"(", 
        RowBox[{"reflection", " ", "of", " ", "signal"}], ")"}]}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "3", "]"}], "]"}], " ", "--"}], ">", " ", "Delta"}], ",",
      "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "4", "]"}], "]"}], " ", "--"}], ">", " ", "Sender"}], 
     ",", "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "5", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"significance", " ", "value", " ", 
       RowBox[{"(", 
        RowBox[{
        "all", " ", "1", " ", "in", " ", "the", " ", "default", " ", "case"}],
         ")"}]}]}], ",", "\[IndentingNewLine]", "\t", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "6", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"Crossproduct", " ", "of", " ", "v", " ", "and", " ", "w"}]}], 
     ","}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"nv", "=", "0"}], ",", "i", ",", 
       RowBox[{"j", "=", "0"}], ",", "u0", ",", " ", 
       RowBox[{"significancesum", "=", "0"}], ",", " ", "significancetemp", 
       ",", " ", 
       RowBox[{"ang", "=", "0"}], ",", "  ", "posnvangle", ",", " ", 
       "negnvangle"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"significancetemp", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}], "*", 
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "2", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"u0", " ", "=", " ", 
       RowBox[{"Cross", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"u0", "=", 
       RowBox[{"Normalize", "[", "u0", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"nv", " ", "=", " ", 
       RowBox[{"significancetemp", "*", "u0"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"significancesum", " ", "=", "  ", "significancetemp"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"posnvangle", " ", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{"nv", ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"negnvangle", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"-", "nv"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"nv", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"posnvangle", "<", "negnvangle"}], ",", "nv", ",", 
         RowBox[{"-", "nv"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"ang", " ", "=", " ", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", "3"}], ",", " ", 
        RowBox[{"i", "\[LessEqual]", " ", 
         RowBox[{
          RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}]}], ",", " ", 
        RowBox[{"i", "+=", "2"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"u0", " ", "=", " ", 
          RowBox[{"Cross", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "6", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", 
               RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
             RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"u0", "=", 
          RowBox[{"Normalize", "[", "u0", "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"ang", " ", "=", " ", 
          RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
           RowBox[{
            RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"significancetemp", " ", "=", "  ", 
          RowBox[{
           RowBox[{
            RowBox[{"xmeas", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "5", "]"}], "]"}], "*", 
           RowBox[{
            RowBox[{"xmeas", "[", 
             RowBox[{"[", 
              RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
            RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"u0", " ", "=", "  ", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"nv", ".", "u0"}], " ", "\[GreaterEqual]", " ", "0"}], 
            ",", " ", "u0", ",", " ", 
            RowBox[{"-", "u0"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"nv", "+=", 
          RowBox[{"significancetemp", " ", "*", "u0"}]}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"nv", "=", 
       RowBox[{"nv", "/", "significancesum"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Normalize", "[", "nv", "]"}]}]}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.8647317829441023`*^9, 3.864731807644889*^9}, {
   3.8648796823517113`*^9, 3.864879683409059*^9}, 3.866094915184863*^9, {
   3.8660959648529377`*^9, 3.866095970100802*^9}},
 CellLabel->
  "In[107]:=",ExpressionUUID->"123817a3-f999-44dc-9cf6-0169d495dbdd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Method", " ", "to", " ", "average", " ", "the", " ", "wall", " ", 
     "vectors", " ", "based", " ", "on", " ", "the", " ", "measurements", " ",
      "using", " ", "DisjointPairs", "\[IndentingNewLine]", 
     RowBox[{"(", "Hopefully", ")"}], " ", "improved", " ", "version", " ", 
     "by", " ", "Milan", " ", "M\[UDoubleDot]ller"}], ",", " ", 
    RowBox[{
    "checking", " ", "which", " ", "of", " ", "the", " ", "two", " ", 
     "potential", " ", "cross", " ", "products", " ", "is", " ", "closer", 
     " ", "to", " ", "the", " ", "reflection", " ", "direction", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
       "reflection", " ", "is", " ", "always", " ", "in", " ", "the", " ", 
        "direction", " ", "of", " ", "the", " ", "wall"}], ")"}], "."}]}]}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
    "NormalVectorFromXMeasurementDisjointPairsReflectionAware", "[", "xmeas_",
      "]"}], ":=", "\[IndentingNewLine]", 
    RowBox[{"(*", "\[IndentingNewLine]", "  ", 
     RowBox[{
      RowBox[{
      "Implementation", " ", "for", " ", "averaging", " ", "using", " ", 
       "disjoint", " ", "pairs", " ", "of", " ", "measurements"}], ",", 
      "\[IndentingNewLine]", "  ", 
      RowBox[{"Input", ":", " ", 
       RowBox[{"Table", " ", "of", " ", "measurements", " ", "xmeas"}]}], ",",
       "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "1", "]"}], "]"}], " ", "--"}], ">", " ", 
       RowBox[{"v", " ", 
        RowBox[{"(", 
         RowBox[{"direct", " ", "signal"}], ")"}]}]}], ",", 
      "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "2", "]"}], "]"}], " ", "--"}], ">", " ", 
       RowBox[{"w", " ", 
        RowBox[{"(", 
         RowBox[{"reflection", " ", "of", " ", "signal"}], ")"}]}]}], ",", 
      "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "3", "]"}], "]"}], " ", "--"}], ">", " ", "Delta"}], 
      ",", "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "4", "]"}], "]"}], " ", "--"}], ">", " ", "Sender"}], 
      ",", "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}], " ", "--"}], ">", " ", 
       RowBox[{"significance", " ", "value", " ", 
        RowBox[{"(", 
         RowBox[{
         "all", " ", "1", " ", "in", " ", "the", " ", "default", " ", 
          "case"}], ")"}]}]}], ",", "\[IndentingNewLine]", "\t", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "6", "]"}], "]"}], " ", "--"}], ">", " ", 
       RowBox[{"Crossproduct", " ", "of", " ", "v", " ", "and", " ", "w"}]}], 
      ","}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"nv", "=", "0"}], ",", "i", ",", 
        RowBox[{"j", "=", "0"}], ",", "u0", ",", " ", 
        RowBox[{"significancesum", "=", "0"}], ",", " ", "significancetemp", 
        ",", " ", 
        RowBox[{"ang", "=", "0"}], ",", "  ", "posnvangle", ",", " ", 
        "negnvangle"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"significancetemp", " ", "=", " ", 
        RowBox[{
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "5", "]"}], "]"}], "*", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"u0", " ", "=", " ", 
        RowBox[{"Cross", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "6", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "[", 
           RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"u0", "=", 
        RowBox[{"Normalize", "[", "u0", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"nv", " ", "=", " ", 
        RowBox[{"significancetemp", "*", "u0"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"significancesum", " ", "=", "  ", "significancetemp"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"posnvangle", " ", "=", 
        RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
         RowBox[{"nv", ",", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"negnvangle", "=", 
        RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
         RowBox[{
          RowBox[{"-", "nv"}], ",", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"nv", " ", "=", " ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"posnvangle", "<", "negnvangle"}], ",", "nv", ",", 
          RowBox[{"-", "nv"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"ang", " ", "=", " ", 
        RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
         RowBox[{
          RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", "=", "3"}], ",", " ", 
         RowBox[{"i", "\[LessEqual]", " ", 
          RowBox[{
           RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}]}], ",", " ", 
         RowBox[{"i", "+=", "2"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"u0", " ", "=", " ", 
           RowBox[{"Cross", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"xmeas", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "6", "]"}], "]"}], ",", 
             RowBox[{
              RowBox[{"xmeas", "[", 
               RowBox[{"[", 
                RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
              RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"u0", "=", 
           RowBox[{"Normalize", "[", "u0", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"ang", " ", "=", " ", 
             RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
              RowBox[{
               RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], 
            ";"}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
          RowBox[{"posnvangle", " ", "=", 
           RowBox[{
            RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
             RowBox[{"u0", ",", 
              RowBox[{
               RowBox[{"xmeas", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "+", 
            RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
             RowBox[{"u0", ",", 
              RowBox[{
               RowBox[{"xmeas", "[", 
                RowBox[{"[", 
                 RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"negnvangle", "=", 
           RowBox[{
            RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
             RowBox[{
              RowBox[{"-", "u0"}], ",", 
              RowBox[{
               RowBox[{"xmeas", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "+", 
            RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
             RowBox[{
              RowBox[{"-", "u0"}], ",", 
              RowBox[{
               RowBox[{"xmeas", "[", 
                RowBox[{"[", 
                 RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"u0", " ", "=", "  ", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"posnvangle", "<=", "negnvangle"}], ",", " ", "u0", ",", 
             " ", 
             RowBox[{"-", "u0"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"significancetemp", " ", "=", "  ", 
           RowBox[{
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "5", "]"}], "]"}], "*", 
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", 
               RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
             RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{
            RowBox[{"u0", " ", "=", "  ", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"nv", ".", "u0"}], " ", "\[GreaterEqual]", " ", "0"}],
                ",", " ", "u0", ",", " ", 
               RowBox[{"-", "u0"}]}], "]"}]}], ";"}], "*)"}], 
          "\[IndentingNewLine]", 
          RowBox[{"nv", "+=", 
           RowBox[{"significancetemp", " ", "*", "u0"}]}], ";"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{"nv", "=", 
          RowBox[{"nv", "/", "significancesum"}]}], ";"}], "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"Normalize", "[", "nv", "]"}]}]}], "]"}]}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.8647317829441023`*^9, 3.864731807644889*^9}, {
   3.8648796823517113`*^9, 3.864879683409059*^9}, 3.866094915184863*^9, {
   3.8660959648529377`*^9, 3.866096048629961*^9}, {3.866096088697365*^9, 
   3.8660961326781607`*^9}, {3.8660976539733257`*^9, 3.866097657765367*^9}},
 CellLabel->
  "In[108]:=",ExpressionUUID->"ed04367d-2ee4-4ab2-8e1e-d9009c44c73c"]
}, Closed]],

Cell[CellGroupData[{

Cell["Overlapping Pairs", "Subsubsection",
 CellChangeTimes->{{3.866095910504201*^9, 
  3.8660959133300133`*^9}},ExpressionUUID->"519136f6-2ce9-45ee-b105-\
448ce55c7ed8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Method", " ", "to", " ", "average", " ", "the", " ", "wall", " ", 
    "vectors", " ", "based", " ", "on", " ", "the", " ", "measurements", " ", 
    "using", " ", "OverlappingPairs"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"NormalVectorFromXmeasurementN1Pairs", "[", "xmeas_", "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", "  ", 
    RowBox[{
     RowBox[{
     "Implementation", " ", "for", " ", "averaging", " ", "using", " ", 
      RowBox[{"(", 
       RowBox[{"n", "-", "1"}], ")"}], " ", "pairs", " ", "of", " ", 
      "measurements"}], ",", "\[IndentingNewLine]", "  ", 
     RowBox[{"Input", ":", " ", 
      RowBox[{"Table", " ", "of", " ", "measurements", " ", "xmeas"}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"v", " ", 
       RowBox[{"(", 
        RowBox[{"direct", " ", "signal"}], ")"}]}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "2", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"w", " ", 
       RowBox[{"(", 
        RowBox[{"reflection", " ", "of", " ", "signal"}], ")"}]}]}], ",", 
     "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "3", "]"}], "]"}], " ", "--"}], ">", " ", "Delta"}], ",",
      "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "4", "]"}], "]"}], " ", "--"}], ">", " ", "Sender"}], 
     ",", "\[IndentingNewLine]", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "5", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"significance", " ", "value", " ", 
       RowBox[{"(", 
        RowBox[{
        "all", " ", "1", " ", "in", " ", "the", " ", "default", " ", "case"}],
         ")"}]}]}], ",", "\[IndentingNewLine]", "\t", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", "i", "]"}], "]"}], "[", 
        RowBox[{"[", "6", "]"}], "]"}], " ", "--"}], ">", " ", 
      RowBox[{"Crossproduct", " ", "of", " ", "v", " ", "and", " ", "w"}]}], 
     ","}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"nv", "=", "0"}], ",", "i", ",", "j", ",", "u0", ",", " ", 
       RowBox[{"significancesum", "=", "0"}], ",", " ", "significancetemp", 
       ",", " ", "posnvangle", ",", " ", "negnvangle", ",", " ", "ang"}], " ",
       "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"significancetemp", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}], "*", 
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "2", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"u0", " ", "=", " ", 
       RowBox[{"Cross", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"u0", "=", 
       RowBox[{"Normalize", "[", "u0", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"nv", " ", "=", " ", 
       RowBox[{"significancetemp", "*", "u0"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"significancesum", " ", "=", "  ", "significancetemp"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"posnvangle", " ", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{"nv", ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"negnvangle", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"-", "nv"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"nv", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"posnvangle", "<", "negnvangle"}], ",", "nv", ",", 
         RowBox[{"-", "nv"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"ang", " ", "=", " ", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", "3"}], ",", " ", 
        RowBox[{"i", "\[LessEqual]", " ", 
         RowBox[{
          RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}]}], ",", " ", 
        RowBox[{"i", "+=", "1"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"significancetemp", " ", "=", "  ", 
          RowBox[{
           RowBox[{
            RowBox[{"xmeas", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "5", "]"}], "]"}], "*", 
           RowBox[{
            RowBox[{"xmeas", "[", 
             RowBox[{"[", 
              RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
            RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"u0", " ", "=", " ", 
          RowBox[{"Cross", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "6", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", 
               RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
             RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"u0", "=", 
          RowBox[{"Normalize", "[", "u0", "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"ang", " ", "=", " ", 
          RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
           RowBox[{
            RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"significancetemp", " ", "=", "  ", 
          RowBox[{
           RowBox[{
            RowBox[{"xmeas", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "5", "]"}], "]"}], "*", 
           RowBox[{
            RowBox[{"xmeas", "[", 
             RowBox[{"[", 
              RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
            RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"u0", " ", "=", "  ", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"nv", ".", "u0"}], " ", "\[GreaterEqual]", " ", "0"}], 
            ",", " ", "u0", ",", " ", 
            RowBox[{"-", "u0"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"nv", "+=", 
          RowBox[{"significancetemp", " ", "*", "u0"}]}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"nv", "=", 
       RowBox[{"nv", "/", "significancesum"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Normalize", "[", "nv", "]"}]}]}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.8647317829441023`*^9, 3.864731802570191*^9}, {
   3.864879677756592*^9, 3.8648796794303217`*^9}, 3.8660949190332823`*^9, {
   3.866097548342999*^9, 3.8660975526837387`*^9}},
 CellLabel->
  "In[109]:=",ExpressionUUID->"4bf853bb-f7b7-49e0-b1e0-92e5d8384aba"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Method", " ", "to", " ", "average", " ", "the", " ", "wall", " ", 
     "vectors", " ", "based", " ", "on", " ", "the", " ", "measurements", " ",
      "using", " ", "OverlappingPairs", "\[IndentingNewLine]", 
     RowBox[{"(", "Hopefully", ")"}], " ", "improved", " ", "version", " ", 
     "by", " ", "Milan", " ", "M\[UDoubleDot]ller"}], ",", " ", 
    RowBox[{
    "checking", " ", "which", " ", "of", " ", "the", " ", "two", " ", 
     "potential", " ", "cross", " ", "products", " ", "is", " ", "closer", 
     " ", "to", " ", "the", " ", "reflection", " ", "direction", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
       "reflection", " ", "is", " ", "always", " ", "in", " ", "the", " ", 
        "direction", " ", "of", " ", "the", " ", "wall"}], ")"}], "."}]}]}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
    "NormalVectorFromXmeasurementN1PairsReflectionAware", "[", "xmeas_", 
     "]"}], ":=", "\[IndentingNewLine]", 
    RowBox[{"(*", "\[IndentingNewLine]", "  ", 
     RowBox[{
      RowBox[{
      "Implementation", " ", "for", " ", "averaging", " ", "using", " ", 
       RowBox[{"(", 
        RowBox[{"n", "-", "1"}], ")"}], " ", "pairs", " ", "of", " ", 
       "measurements"}], ",", "\[IndentingNewLine]", "  ", 
      RowBox[{"Input", ":", " ", 
       RowBox[{"Table", " ", "of", " ", "measurements", " ", "xmeas"}]}], ",",
       "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "1", "]"}], "]"}], " ", "--"}], ">", " ", 
       RowBox[{"v", " ", 
        RowBox[{"(", 
         RowBox[{"direct", " ", "signal"}], ")"}]}]}], ",", 
      "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "2", "]"}], "]"}], " ", "--"}], ">", " ", 
       RowBox[{"w", " ", 
        RowBox[{"(", 
         RowBox[{"reflection", " ", "of", " ", "signal"}], ")"}]}]}], ",", 
      "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "3", "]"}], "]"}], " ", "--"}], ">", " ", "Delta"}], 
      ",", "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "4", "]"}], "]"}], " ", "--"}], ">", " ", "Sender"}], 
      ",", "\[IndentingNewLine]", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "5", "]"}], "]"}], " ", "--"}], ">", " ", 
       RowBox[{"significance", " ", "value", " ", 
        RowBox[{"(", 
         RowBox[{
         "all", " ", "1", " ", "in", " ", "the", " ", "default", " ", 
          "case"}], ")"}]}]}], ",", "\[IndentingNewLine]", "\t", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", 
         RowBox[{"[", "6", "]"}], "]"}], " ", "--"}], ">", " ", 
       RowBox[{"Crossproduct", " ", "of", " ", "v", " ", "and", " ", "w"}]}], 
      ","}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"nv", "=", "0"}], ",", "i", ",", "j", ",", "u0", ",", " ", 
        RowBox[{"significancesum", "=", "0"}], ",", " ", "significancetemp", 
        ",", " ", "posnvangle", ",", " ", "negnvangle", ",", " ", "ang"}], 
       " ", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"significancetemp", " ", "=", " ", 
        RowBox[{
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "5", "]"}], "]"}], "*", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", "2", "]"}], "]"}], "[", 
          RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"u0", " ", "=", " ", 
        RowBox[{"Cross", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "6", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "[", 
           RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"u0", "=", 
        RowBox[{"Normalize", "[", "u0", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"nv", " ", "=", " ", 
        RowBox[{"significancetemp", "*", "u0"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"significancesum", " ", "=", "  ", "significancetemp"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"posnvangle", " ", "=", 
        RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
         RowBox[{"nv", ",", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"negnvangle", "=", 
        RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
         RowBox[{
          RowBox[{"-", "nv"}], ",", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"nv", " ", "=", " ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"posnvangle", "<", "negnvangle"}], ",", "nv", ",", 
          RowBox[{"-", "nv"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"ang", " ", "=", " ", 
        RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
         RowBox[{
          RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", "=", "3"}], ",", " ", 
         RowBox[{"i", "\[LessEqual]", " ", 
          RowBox[{
           RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}]}], ",", " ", 
         RowBox[{"i", "+=", "1"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"significancetemp", " ", "=", "  ", 
           RowBox[{
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "5", "]"}], "]"}], "*", 
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", 
               RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
             RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"u0", " ", "=", " ", 
           RowBox[{"Cross", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"xmeas", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "6", "]"}], "]"}], ",", 
             RowBox[{
              RowBox[{"xmeas", "[", 
               RowBox[{"[", 
                RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
              RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"u0", "=", 
           RowBox[{"Normalize", "[", "u0", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{
            RowBox[{"ang", " ", "=", " ", 
             RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
              RowBox[{
               RowBox[{"nv", "/", "significancesum"}], ",", "u0"}], "]"}]}], 
            ";"}], "*)"}], "\[IndentingNewLine]", 
          RowBox[{"posnvangle", " ", "=", 
           RowBox[{
            RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
             RowBox[{"u0", ",", 
              RowBox[{
               RowBox[{"xmeas", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "+", 
            RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
             RowBox[{"u0", ",", 
              RowBox[{
               RowBox[{"xmeas", "[", 
                RowBox[{"[", 
                 RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"negnvangle", "=", 
           RowBox[{
            RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
             RowBox[{
              RowBox[{"-", "u0"}], ",", 
              RowBox[{
               RowBox[{"xmeas", "[", 
                RowBox[{"[", "i", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "+", 
            RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
             RowBox[{
              RowBox[{"-", "u0"}], ",", 
              RowBox[{
               RowBox[{"xmeas", "[", 
                RowBox[{"[", 
                 RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"u0", " ", "=", "  ", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"posnvangle", "<=", "negnvangle"}], ",", " ", "u0", ",", 
             " ", 
             RowBox[{"-", "u0"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"significancetemp", " ", "=", "  ", 
           RowBox[{
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "5", "]"}], "]"}], "*", 
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", 
               RowBox[{"i", "+", "1"}], "]"}], "]"}], "[", 
             RowBox[{"[", "5", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{
            RowBox[{"u0", " ", "=", "  ", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"nv", ".", "u0"}], " ", "\[GreaterEqual]", " ", "0"}],
                ",", " ", "u0", ",", " ", 
               RowBox[{"-", "u0"}]}], "]"}]}], ";"}], "*)"}], 
          "\[IndentingNewLine]", 
          RowBox[{"nv", "+=", 
           RowBox[{"significancetemp", " ", "*", "u0"}]}], ";"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"nv", "=", 
        RowBox[{"nv", "/", "significancesum"}]}], ";", "\[IndentingNewLine]", 
       
       RowBox[{"Normalize", "[", "nv", "]"}]}]}], "]"}]}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.8647317829441023`*^9, 3.864731802570191*^9}, {
   3.864879677756592*^9, 3.8648796794303217`*^9}, 3.8660949190332823`*^9, {
   3.866097548342999*^9, 3.866097598732459*^9}, {3.8660976396093397`*^9, 
   3.86609764346871*^9}},
 CellLabel->
  "In[110]:=",ExpressionUUID->"13a96f44-d5cd-48e1-a8b6-4b6bc54759f8"]
}, Closed]],

Cell[CellGroupData[{

Cell["Linear All Pairs", "Subsubsection",
 CellChangeTimes->{{3.866095949198743*^9, 3.8660959547466*^9}, {
   3.8706052938996077`*^9, 3.870605298118609*^9}, 
   3.870605425883971*^9},ExpressionUUID->"6e05b9ff-d939-45f3-8f40-\
adad9cd92f29"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Method", " ", "to", " ", "average", " ", "the", " ", "wall", " ", 
    "vectors", " ", "based", " ", "on", " ", "the", " ", "measurements", " ", 
    "using", " ", "LinearAllPairs"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Linear", " ", "Version", " ", "of", " ", "the", " ", "AllPairs"}], ",", 
    " ", 
    RowBox[{
    "includes", " ", "the", " ", "direction", " ", "of", " ", "the", " ", 
     "wall", " ", "vectors"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"NormalVectorFromXMeasurementAllPairsLinear", "[", "xmeas_", "]"}],
    " ", ":=", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"nv", "=", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ",", "i", ",", "j", ",", 
       
       RowBox[{"u0", "=", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ",", " ", "posnvangle", 
       ",", " ", "negnvangle", ",", " ", "ang", ",", 
       RowBox[{"psa", "=", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ",", 
       RowBox[{"tempcrosspsa", "=", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ",", 
       RowBox[{"posangpsa", "=", "0"}], ",", 
       RowBox[{"negangpsa", "=", "0"}], ",", 
       RowBox[{"significancetemp", "=", "0"}], ",", 
       RowBox[{"significancesum", "=", "0"}], ",", 
       RowBox[{"psasignificance", "=", "0"}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"psasignificance", "+=", 
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", 
          RowBox[{"Length", "[", "xmeas", "]"}], "]"}], "]"}], "[", 
        RowBox[{"[", "5", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"significancetemp", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", 
           RowBox[{
            RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}], "]"}], "]"}], 
         "[", 
         RowBox[{"[", "5", "]"}], "]"}], "*", "psasignificance"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"significancesum", " ", "=", "  ", "significancetemp"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"nv", "=", 
       RowBox[{"Cross", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}], "]"}], "]"}], 
          "[", 
          RowBox[{"[", "6", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", 
            RowBox[{"Length", "[", "xmeas", "]"}], "]"}], "]"}], "[", 
          RowBox[{"[", "6", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"nv", "=", 
       RowBox[{"Normalize", "[", "nv", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"posnvangle", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{"nv", ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", 
            RowBox[{"Length", "[", "xmeas", "]"}], "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"negnvangle", "=", 
       RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
        RowBox[{
         RowBox[{"-", "nv"}], ",", 
         RowBox[{
          RowBox[{"xmeas", "[", 
           RowBox[{"[", 
            RowBox[{"Length", "[", "xmeas", "]"}], "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"psa", "+=", 
       RowBox[{
        RowBox[{"xmeas", "[", 
         RowBox[{"[", 
          RowBox[{"Length", "[", "xmeas", "]"}], "]"}], "]"}], "[", 
        RowBox[{"[", "6", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"Print", "[", 
         RowBox[{"nv", ",", "tempcrosspsa"}], "]"}], ";"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"posnvangle", "<", "negnvangle"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"psa", "+=", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}], "]"}], "]"}],
            "[", 
           RowBox[{"[", "6", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"psasignificance", "+=", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}], "]"}], "]"}],
            "[", 
           RowBox[{"[", "5", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"nv", "=", "nv"}], ";"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"psa", "+=", 
          RowBox[{"-", 
           RowBox[{
            RowBox[{"xmeas", "[", 
             RowBox[{"[", 
              RowBox[{
               RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}], "]"}], 
             "]"}], "[", 
            RowBox[{"[", "6", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"psasignificance", "+=", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"Length", "[", "xmeas", "]"}], "-", "1"}], "]"}], "]"}],
            "[", 
           RowBox[{"[", "5", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"nv", "=", 
          RowBox[{"-", "nv"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"Print", "[", 
         RowBox[{"nv", ",", "tempcrosspsa"}], "]"}], ";"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"For", "[", 
       RowBox[{
        RowBox[{"i", "=", " ", 
         RowBox[{
          RowBox[{"Length", "[", "xmeas", "]"}], "-", "2"}]}], ",", " ", 
        RowBox[{"i", "\[GreaterEqual]", "1"}], ",", " ", 
        RowBox[{"i", "-=", " ", "1"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"u0", "=", 
          RowBox[{
           RowBox[{"xmeas", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "6", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"significancetemp", " ", "=", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"xmeas", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "5", "]"}], "]"}], "*", "psasignificance"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"tempcrosspsa", "=", 
          RowBox[{"Cross", "[", 
           RowBox[{"u0", ",", "psa"}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"posangpsa", "=", 
          RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
           RowBox[{"nv", ",", "tempcrosspsa"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"negangpsa", "=", 
          RowBox[{"CheckForAngleBetweenTwoVectors", "[", 
           RowBox[{"nv", ",", 
            RowBox[{"-", "tempcrosspsa"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"significancesum", " ", "+=", " ", "significancetemp"}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"(*", 
          RowBox[{
           RowBox[{"Print", "[", 
            RowBox[{"nv", ",", "tempcrosspsa"}], "]"}], ";"}], "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"posangpsa", "<", "negangpsa"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"nv", "+=", 
             RowBox[{"Cross", "[", 
              RowBox[{"u0", ",", "psa"}], "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"psa", "+=", "u0"}], ";", "\[IndentingNewLine]", 
            RowBox[{"psasignificance", "+=", 
             RowBox[{
              RowBox[{"xmeas", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "5", "]"}], "]"}]}], ";"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"nv", "+=", 
             RowBox[{"Cross", "[", 
              RowBox[{
               RowBox[{"-", "u0"}], ",", "psa"}], "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"psa", "+=", 
             RowBox[{"-", "u0"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"psasignificance", "+=", 
             RowBox[{
              RowBox[{"xmeas", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", 
              RowBox[{"[", "5", "]"}], "]"}]}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", "]"}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"Association", "[", 
        RowBox[{
         RowBox[{"\"\<normalvector\>\"", "\[Rule]", 
          RowBox[{"Normalize", "[", 
           RowBox[{"nv", "/", "significancesum"}], "]"}]}], ",", " ", 
         RowBox[{"\"\<psa\>\"", "\[Rule]", " ", "psa"}]}], "]"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"Normalize", "[", "nv", "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.8647317829441023`*^9, 3.864731791578967*^9}, {
  3.866094928328742*^9, 3.866094954233843*^9}, {3.866097688543014*^9, 
  3.866097693982873*^9}, {3.870442539254114*^9, 3.870442564719842*^9}, {
  3.870442673916931*^9, 3.870442679488558*^9}, {3.870442761172683*^9, 
  3.870442770428249*^9}, {3.870444916643058*^9, 3.870444940562791*^9}, {
  3.870445214595552*^9, 3.870445217049328*^9}, {3.8704461348173847`*^9, 
  3.870446165909296*^9}, {3.870446264028551*^9, 3.8704462656650753`*^9}},
 CellLabel->
  "In[111]:=",ExpressionUUID->"8d61e303-eefa-4200-a363-31a173a04171"]
}, Closed]],

Cell[CellGroupData[{

Cell["Linear All Pairs  (Version by Milan M\[UDoubleDot]ller)", \
"Subsubsection",
 CellChangeTimes->{{3.871358754976001*^9, 3.871358757625958*^9}, {
  3.8713587949514303`*^9, 
  3.871358800953329*^9}},ExpressionUUID->"05337bd6-bc7e-484b-a71e-\
3bd590bc75b9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"NormalVectorFromImprovedLinearAllPairs", "[", "xmeas_", "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"normalVector", ",", 
      RowBox[{"n", "=", 
       RowBox[{"Length", "[", "xmeas", "]"}]}], ",", "partialSums"}], "}"}], 
    ",", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{"Compute", " ", "inner", " ", "summs"}], ",", " ", 
      RowBox[{
       RowBox[{
        RowBox[{"i", ".", "e", ".", " ", "for"}], " ", "j"}], "=", 
       RowBox[{"i", "+", 
        RowBox[{"1", " ", "to", " ", "to", " ", "n"}]}]}], ",", " ", 
      RowBox[{"compute", " ", "the", " ", "sum", " ", "of", " ", "all", " ", 
       RowBox[{
        TemplateBox[<|"boxes" -> FormBox[
            RowBox[{"(", 
              RowBox[{
                SubscriptBox[
                 StyleBox["v", "TI"], 
                 StyleBox["j", "TI"]], "\[Cross]", 
                SubscriptBox[
                 StyleBox["w", "TI"], 
                 StyleBox["j", "TI"]]}], ")"}], TraditionalForm], 
          "errors" -> {}, "input" -> "(v_j\\times w_j)", "state" -> "Boxes"|>,
         
         "TeXAssistantTemplate"], ".", " ", "\[IndentingNewLine]", "Store"}], 
       " ", "the", " ", "parial", " ", "sums", " ", "in", " ", 
       "partialSums"}], ",", " ", 
      RowBox[{
       RowBox[{"s", ".", "t", ".", " ", 
        RowBox[{"partialSums", "[", 
         RowBox[{"[", "j", "]"}], "]"}]}], "=", 
       TemplateBox[<|"boxes" -> FormBox[
           RowBox[{
             UnderoverscriptBox["\[Sum]", 
              StyleBox["j", "TI"], 
              StyleBox["n", "TI"], LimitsPositioning -> True], "(", 
             RowBox[{
               SubscriptBox[
                StyleBox["v", "TI"], 
                StyleBox["j", "TI"]], "\[Cross]", 
               SubscriptBox[
                StyleBox["w", "TI"], 
                StyleBox["j", "TI"]]}], ")"}], TraditionalForm], 
         "errors" -> {}, "input" -> "\\sum_{j}^n(v_j\\times w_j)", "state" -> 
         "Boxes"|>,
        "TeXAssistantTemplate"]}]}], "\[IndentingNewLine]", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"xmeas", "[", 
        RowBox[{"[", "j", "]"}], "]"}], "[", 
       RowBox[{"[", "6", "]"}], "]"}], " ", "is", " ", "precomputed", " ", 
      TemplateBox[<|"boxes" -> FormBox[
          RowBox[{"(", 
            RowBox[{
              SubscriptBox[
               StyleBox["v", "TI"], 
               StyleBox["j", "TI"]], "\[Cross]", 
              SubscriptBox[
               StyleBox["w", "TI"], 
               StyleBox["j", "TI"]]}], ")"}], TraditionalForm], 
        "errors" -> {}, "input" -> "(v_j\\times w_j)", "state" -> "Boxes"|>,
       "TeXAssistantTemplate"]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"partialSums", "=", 
      RowBox[{"<|", 
       RowBox[{"n", "->", 
        RowBox[{
         RowBox[{"xmeas", "[", 
          RowBox[{"[", "n", "]"}], "]"}], "[", 
         RowBox[{"[", "6", "]"}], "]"}]}], "|>"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"partialSums", "=", 
        RowBox[{"Append", "[", 
         RowBox[{"partialSums", ",", "\[IndentingNewLine]", 
          RowBox[{"j", "->", 
           RowBox[{
            RowBox[{"partialSums", "[", 
             RowBox[{"j", "+", "1"}], "]"}], "+", 
            RowBox[{
             RowBox[{"xmeas", "[", 
              RowBox[{"[", "j", "]"}], "]"}], "[", 
             RowBox[{"[", "6", "]"}], "]"}]}]}]}], "\[IndentingNewLine]", 
         "]"}]}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"j", ",", 
         RowBox[{"n", "-", "1"}], ",", "2", ",", 
         RowBox[{"-", "1"}]}], "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Print", "[", "partialSums", "]"}], ";"}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.871358806703919*^9, 3.871358847930768*^9}, {
  3.871358894141171*^9, 3.871359006303918*^9}, {3.871359037568367*^9, 
  3.871359043996337*^9}, {3.871359081723938*^9, 3.87135908482066*^9}, {
  3.871359277621105*^9, 3.871359340956519*^9}, {3.871359421005108*^9, 
  3.871359421679468*^9}, {3.8713595848906116`*^9, 3.871359628351325*^9}, {
  3.8713597395569487`*^9, 3.871359862549223*^9}, {3.871360010721307*^9, 
  3.871360033382715*^9}, {3.871360121211795*^9, 3.871360173388669*^9}},
 CellLabel->
  "In[112]:=",ExpressionUUID->"3bb390b9-9685-4d7f-899c-55a9c26f8821"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Distance Computation", "Subsection",
 CellChangeTimes->{{3.864890099613505*^9, 
  3.864890103193633*^9}},ExpressionUUID->"eb3baab6-28b2-4289-8358-\
5e0f21e27179"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Method", " ", "to", " ", "return", " ", "the", " ", "wall", " ", "vector",
     " ", "adjusted", " ", "in", " ", "lenght", " ", "given", " ", "a", " ", 
    "set", " ", "of", " ", "measurements"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"Weighted", " ", "average"}], ",", " ", 
    RowBox[{"square", " ", "on", " ", "the", " ", "weight"}]}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
    "AverageAdjustWallVectorLengthFromMeasurementAndDirection3", "[", 
     RowBox[{"u_", ",", "experiment_"}], "]"}], ":=", "\[IndentingNewLine]", 
    RowBox[{"(*", "\[IndentingNewLine]", "\t", 
     RowBox[{
      RowBox[{"u", " ", "-", " ", 
       RowBox[{"computed", " ", "normal", " ", "vector"}]}], ";", 
      "\[IndentingNewLine]", "\t", 
      RowBox[{"experiment", " ", "-", " ", 
       RowBox[{"set", " ", "of", " ", "measurement"}]}], ";"}], 
     "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"i", ",", "\[CapitalDelta]", ",", " ", 
        RowBox[{"s", "=", 
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ",", 
        RowBox[{"n", "=", 
         RowBox[{"Length", "[", "experiment", "]"}]}], ",", 
        RowBox[{"Z", "=", "0"}], ",", 
        RowBox[{"f", "=", "0"}], ",", "v", ",", "w", ",", " ", 
        "lenghadjustednv", ",", "t"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", "=", "1"}], ",", 
         RowBox[{"i", "\[LessEqual]", "n"}], ",", 
         RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"v", "=", 
           RowBox[{
            RowBox[{"experiment", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"w", "=", 
           RowBox[{
            RowBox[{"experiment", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"\[CapitalDelta]", "=", 
           RowBox[{
            RowBox[{"experiment", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"f", "=", 
           RowBox[{
            RowBox[{"Norm", "[", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"w", "-", "v"}], ")"}], ".", "u"}], "]"}], "^", 
            "2"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"Z", "+=", "f"}], ";", "\[IndentingNewLine]", 
          RowBox[{"t", "=", 
           RowBox[{
           "AdjustWallVectorLengthFromMeasurementsAndDirection", "[", 
            RowBox[{"u", ",", "v", ",", "w", ",", "\[CapitalDelta]"}], 
            "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"s", "+=", 
           RowBox[{"f", " ", "t"}]}], " ", ";"}]}], "\[IndentingNewLine]", 
        "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{"Print", "[", 
          RowBox[{"s", "/", "Z"}], "]"}], ";"}], "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"lenghadjustednv", "=", 
        RowBox[{"s", "/", "Z"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"Association", "[", 
         RowBox[{
          RowBox[{
          "\"\<legnthadjustednv\>\"", "\[Rule]", " ", "lenghadjustednv"}], 
          ",", 
          RowBox[{"\"\<s\>\"", "\[Rule]", " ", "s"}], ",", 
          RowBox[{"\"\<Z\>\"", "\[Rule]", "Z"}]}], "]"}], "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"Modified", " ", "by", " ", "Milan", " ", 
         RowBox[{"M\[UDoubleDot]ller", ":", " ", 
          RowBox[{
          "only", " ", "return", " ", "the", " ", "rsulting", " ", "wall", 
           " ", "normal", " ", "vector"}]}]}], " ", "*)"}], 
       "\[IndentingNewLine]", "lenghadjustednv"}]}], "\[IndentingNewLine]", 
     "]"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Method", " ", "to", " ", "return", " ", "the", " ", "length", " ", "of", 
     " ", "the", " ", "wall", " ", "vector", " ", "given", " ", "a", " ", 
     "measurement"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"AdjustWallVectorLengthFromMeasurementsAndDirection", "[", 
     RowBox[{"u_", ",", "v_", ",", "w_", ",", "\[CapitalDelta]_"}], "]"}], ":=",
     "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"p", "=", 
         RowBox[{"DistanceToSenderGivenNormalVector1", "[", 
          RowBox[{"u", ",", "v", ",", "w", ",", "\[CapitalDelta]"}], "]"}]}], 
        ",", "r", ",", "s", ",", "t", ",", "rshalf", ",", "rsdotu"}], "}"}], 
      ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"r", "=", 
        RowBox[{"p", " ", "v"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"s", "=", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"p", "+", "\[CapitalDelta]"}], ")"}], "w"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"rshalf", "=", 
        FractionBox[
         RowBox[{"r", "+", "s"}], "2"]}], ";", "\[IndentingNewLine]", 
       RowBox[{"rsdotu", "=", 
        RowBox[{"(", 
         RowBox[{"rshalf", ".", "u"}], ")"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"t", "=", 
        RowBox[{"rsdotu", 
         FractionBox["u", 
          SuperscriptBox[
           RowBox[{"Norm", "[", "u", "]"}], "2"]]}]}], ";", 
       "\[IndentingNewLine]", "t"}]}], "]"}]}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Method", " ", "to", " ", "return", " ", "the", " ", "distance", " ", 
     "to", " ", "the", " ", "wall", " ", "given", " ", "a", " ", 
     "measurement", " ", "and", " ", "direction", " ", "to", " ", "the", " ", 
     "wall"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"DistanceToSenderGivenNormalVector1", "[", 
     RowBox[{"u_", ",", "v_", ",", "w_", ",", "\[CapitalDelta]_"}], "]"}], ":=",
     "\[IndentingNewLine]", 
    RowBox[{"(*", "\[IndentingNewLine]", "\t", 
     RowBox[{
      RowBox[{
       RowBox[{"u", " ", "-", " ", 
        RowBox[{"Direction", " ", "to", " ", "the", " ", "wall"}]}], ";", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"v", " ", "-", " ", 
        RowBox[{"Directed", " ", "signal"}]}]}], ",", " ", 
      RowBox[{
       RowBox[{"from", " ", "sender", " ", "to", " ", "receiver"}], ";", 
       "\[IndentingNewLine]", "\t", 
       RowBox[{"w", " ", "-", " ", 
        RowBox[{"Reflected", " ", "signal"}]}]}], ",", " ", 
      RowBox[{
       RowBox[{
       "from", " ", "sender", " ", "to", " ", "wall", " ", "to", " ", 
        "receiver"}], ";", "\[IndentingNewLine]", "\t", 
       RowBox[{"\[CapitalDelta]", " ", "-", " ", 
        RowBox[{
        "Time", " ", "of", " ", "arrival", " ", "distance", " ", "between", 
         " ", "v", " ", "and", " ", "w"}]}], ";"}]}], "\[IndentingNewLine]", 
     "*)"}], "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "u", " ", "may", " ", "not", " ", "have", " ", "the", " ", "correct", 
       " ", "wall", " ", "distance"}], ",", " ", 
      RowBox[{"just", " ", "the", " ", "direction"}]}], " ", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"b", "=", 
         RowBox[{"Cross", "[", 
          RowBox[{
           RowBox[{"Cross", "[", 
            RowBox[{"u", ",", "v"}], "]"}], ",", "u"}], "]"}]}], ",", "d"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"d", "=", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{"v", " ", "-", " ", "w"}], ")"}], ".", "b"}], "\[Equal]",
            "0"}], ",", "0", ",", 
          RowBox[{"(*", 
           RowBox[{"was", " ", 
            RowBox[{"(", 
             RowBox[{"w", "-", "v"}], ")"}]}], "*)"}], "\[IndentingNewLine]", 
          
          RowBox[{
           RowBox[{"(", 
            RowBox[{"\[CapitalDelta]", " ", 
             RowBox[{"w", ".", "b"}]}], ")"}], "/", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"v", "-", "w"}], ")"}], ".", "b"}]}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "d"}]}], "]"}]}]}]}]], "Input",
 CellChangeTimes->{
  3.8460527334739637`*^9, {3.851420611207552*^9, 3.851420618320256*^9}, {
   3.85142082169912*^9, 3.851420847097156*^9}, {3.8514217020195074`*^9, 
   3.851421757834405*^9}, {3.8514219706336317`*^9, 3.851422041058428*^9}, {
   3.851422632605299*^9, 3.851422656605467*^9}, {3.851656777913739*^9, 
   3.851656861467911*^9}, {3.8516569148677497`*^9, 3.8516569278286486`*^9}, 
   3.85165712863768*^9, {3.851659157346285*^9, 3.8516592103712187`*^9}, {
   3.851659757657168*^9, 3.851659776701214*^9}, {3.8522659612278996`*^9, 
   3.8522659626689606`*^9}, {3.8522660115177484`*^9, 
   3.8522660130548306`*^9}, {3.8522674252613945`*^9, 
   3.8522674262728305`*^9}, {3.852267459868442*^9, 3.8522674977195992`*^9}, {
   3.852267528859011*^9, 3.852267558614175*^9}, {3.852268140069075*^9, 
   3.852268155440076*^9}, {3.8522681909180365`*^9, 3.852268229216812*^9}, {
   3.8522686262869024`*^9, 3.852268646641102*^9}, {3.8522688607360287`*^9, 
   3.8522688680911083`*^9}, {3.852269197395313*^9, 3.8522692121009707`*^9}, {
   3.8522696343435354`*^9, 3.852269646363261*^9}, {3.852270233642629*^9, 
   3.8522702621012497`*^9}, {3.852271574415804*^9, 3.8522716028154154`*^9}, {
   3.8522716354255323`*^9, 3.852271695079579*^9}, {3.852271927022002*^9, 
   3.85227193689625*^9}, {3.8522721084909067`*^9, 3.8522721150994844`*^9}, {
   3.853384758750697*^9, 3.85338476032703*^9}, {3.853386866241934*^9, 
   3.8533868681088705`*^9}, {3.8533872590480785`*^9, 3.8533872716285257`*^9}, 
   3.856931877923524*^9, {3.8569319978616247`*^9, 3.856932090368883*^9}, {
   3.8569321420941496`*^9, 3.8569322136073914`*^9}, {3.8569327495499983`*^9, 
   3.856933178063204*^9}, {3.864890117841186*^9, 3.864890183416025*^9}, 
   3.864890390790951*^9, {3.864890452685576*^9, 3.864890475869956*^9}},
 CellLabel->
  "In[113]:=",ExpressionUUID->"8c8b9e35-11ec-4c05-8e1e-306e6b636212"]
}, Closed]],

Cell[CellGroupData[{

Cell["Wrapper Function", "Subsection",
 CellChangeTimes->{{3.8648797503126097`*^9, 
  3.864879752633252*^9}},ExpressionUUID->"a78cc069-99d0-4c27-950e-\
8449b6c17e4a"],

Cell["\<\
This function take as input a wall as computed in the previous section \
(clustering) and then returns its normal vector, using the functions \
implemented by Tobias Grugel.\
\>", "Text",
 CellChangeTimes->{{3.864879757323277*^9, 3.8648798222675657`*^9}, {
  3.864963233404335*^9, 
  3.864963235624173*^9}},ExpressionUUID->"00527fd3-b927-438b-b1d1-\
3a14c82c2592"],

Cell[BoxData[
 RowBox[{
  RowBox[{"GetWallNormalVectorFromMeasurentsAndReflectionGroup", "[", 
   RowBox[{"measurements_", ",", "wall_", ",", "averagingMethod_"}], "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"xmeas", ",", "wallNormalVector"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Transform", " ", "measurements", " ", "into", " ", "input", " ", "as", 
      " ", "required", " ", "by", " ", "functions", " ", "for", " ", 
      "direction", " ", "averaging"}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"xmeas", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"measurements", "[", 
         RowBox[{"[", "index", "]"}], "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"index", ",", "wall"}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"xmeas", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"measurement", "[", 
           RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
          RowBox[{"(*", " ", 
           RowBox[{"v", " ", 
            RowBox[{"(", 
             RowBox[{"direction", " ", "of", " ", "direct", " ", "signal"}], 
             ")"}]}], " ", "*)"}], "\[IndentingNewLine]", 
          RowBox[{"measurement", "[", 
           RowBox[{"[", "2", "]"}], "]"}], ",", " ", 
          RowBox[{"(*", " ", 
           RowBox[{"w", " ", 
            RowBox[{"(", 
             RowBox[{
             "direction", " ", "of", " ", "reflected", " ", "signal"}], 
             ")"}]}], " ", "*)"}], "\[IndentingNewLine]", 
          RowBox[{"measurement", "[", 
           RowBox[{"[", "3", "]"}], "]"}], ",", " ", 
          RowBox[{"(*", " ", 
           RowBox[{"\[CapitalDelta]", " ", 
            RowBox[{"(", 
             RowBox[{
             "time", " ", "difference", " ", "between", " ", "direct", " ", 
              "and", " ", "reflected", " ", "signal"}], " "}]}], "*)"}], 
          "\[IndentingNewLine]", 
          RowBox[{"-", "1"}], ",", 
          RowBox[{"(*", " ", 
           RowBox[{"sender", " ", "is", " ", "not", " ", "known", " ", 
            RowBox[{"(", 
             RowBox[{"and", " ", "irrelevant"}], ")"}]}], " ", "*)"}], 
          "\[IndentingNewLine]", "1", ",", " ", 
          RowBox[{"(*", " ", 
           RowBox[{
           "set", " ", "significance", " ", "to", " ", "1", " ", "for", " ", 
            "all", " ", "measurements", " ", "for", " ", "now"}], " ", "*)"}],
           "\[IndentingNewLine]", 
          RowBox[{"Cross", "[", 
           RowBox[{
            RowBox[{"measurement", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{"measurement", "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], " ", 
         RowBox[{"(*", " ", 
          RowBox[{"v", " ", "\[Cross]", " ", "w"}], " ", "*)"}], 
         "\[IndentingNewLine]", "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"measurement", ",", "xmeas"}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Switch", "[", 
      RowBox[{
      "averagingMethod", ",", "\[IndentingNewLine]", "\"\<All Pairs\>\"", ",", 
       RowBox[{"wallNormalVector", "=", 
        RowBox[{"NormalVectorFromXMeasurementAllPairs", "[", "xmeas", "]"}]}],
        ",", "\[IndentingNewLine]", "\"\<Disjoint Pairs\>\"", ",", 
       RowBox[{"wallNormalVector", "=", 
        RowBox[{
        "NormalVectorFromXMeasurementDisjointPairs", "[", "xmeas", "]"}]}], 
       ",", "\[IndentingNewLine]", "\"\<Linear All Pairs\>\"", ",", 
       RowBox[{"wallNormalVector", "=", 
        RowBox[{
        "NormalVectorFromXMeasurementAllPairsLinear", "[", "xmeas", "]"}]}], 
       ",", "\[IndentingNewLine]", "\"\<Linear All Pairs Improved\>\"", ",", 
       RowBox[{"wallNormalVector", "=", 
        RowBox[{
        "NormalVectorFromImprovedLinearAllPairs", "[", "xmeas", "]"}]}], ",", 
       "\[IndentingNewLine]", " ", "\"\<Overlapping Pairs\>\"", ",", 
       RowBox[{"wallNormalVector", "=", 
        RowBox[{"NormalVectorFromXmeasurementN1Pairs", "[", "xmeas", "]"}]}], 
       ",", "\[IndentingNewLine]", "_", ",", 
       RowBox[{
       "Throw", "[", 
        "\"\<Please specify wall normal vector computation method to use\>\"",
         "]"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"wallNormalVector", "=", 
      RowBox[{
      "AverageAdjustWallVectorLengthFromMeasurementAndDirection3", "[", 
       RowBox[{"wallNormalVector", ",", "xmeas"}], "]"}]}], ";", 
     "\[IndentingNewLine]", "wallNormalVector"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.864879930342861*^9, 3.8648800699516563`*^9}, {
   3.864880430251655*^9, 3.8648805730568657`*^9}, {3.8648807655460367`*^9, 
   3.8648808031199923`*^9}, {3.864880952964446*^9, 3.864881007070075*^9}, {
   3.864889599904294*^9, 3.864889654653287*^9}, {3.8648897225690727`*^9, 
   3.864889742103033*^9}, {3.864889839929748*^9, 3.8648898449923267`*^9}, {
   3.864889875344324*^9, 3.864889883149152*^9}, {3.864889921924411*^9, 
   3.864889937181148*^9}, {3.8648902535972567`*^9, 3.86489027309558*^9}, {
   3.864890500527677*^9, 3.864890503029969*^9}, 3.864963250951755*^9, {
   3.864965974608635*^9, 3.8649660489302273`*^9}, {3.8649661834319677`*^9, 
   3.8649662037031803`*^9}, {3.8660955613788147`*^9, 
   3.8660955934099703`*^9}, {3.8660979302634*^9, 3.8660979588132153`*^9}, {
   3.8713591023180857`*^9, 3.871359128569244*^9}, {3.871359183385963*^9, 
   3.871359184662671*^9}},
 CellLabel->
  "In[116]:=",ExpressionUUID->"7efbd99e-658f-4ebb-980d-12e4b5adb2d5"]
}, Closed]],

Cell[CellGroupData[{

Cell["Evaluation", "Subsection",
 CellChangeTimes->{{3.864879847565918*^9, 
  3.864879848535878*^9}},ExpressionUUID->"d158cc02-a3a0-4968-a047-\
07166a2a2196"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"CompareWallNormalVectorComputationMethods", "[", 
    RowBox[{
    "room_", ",", "roomData_", ",", "iterations_", ",", "numSenders_", ",", 
     "receiverPosition_", ",", "clusteringAlgorithm_", ",", 
     RowBox[{"vanMisesConcentration_", ":", "0"}], ",", 
     RowBox[{"deltaError_", ":", "0"}], ",", 
     RowBox[{"directSignalDiscardFactor_", ":", "0"}], ",", 
     RowBox[{"reflectionDiscardFactor_", ":", "0"}], ",", 
     RowBox[{"wallErrorFactor_", ":", "0"}], ",", 
     RowBox[{"linesIntoBinsBinKeepThreshold_", ":", "3"}], ",", 
     RowBox[{"senderPositionRange_", ":", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", "1"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", "1"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", "1"}], "}"}]}], "}"}]}]}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "measurements", ",", "senderPositions", ",", "reflectionGroups", ",", 
       "allPairsWallNormal", ",", "disjointPairsWallNormal", ",", 
       "overlappingPairsWallNormal", ",", "linearAllPairs"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"senderPositions", "=", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"RandomReal", "[", 
            RowBox[{"senderPositionRange", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
           RowBox[{"RandomReal", "[", 
            RowBox[{"senderPositionRange", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "]"}], ",", 
           RowBox[{"RandomReal", "[", 
            RowBox[{"senderPositionRange", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "]"}]}], "}"}], ",", 
         "numSenders"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"measurements", "=", 
       RowBox[{"SimulateExperiment", "[", "\[IndentingNewLine]", 
        RowBox[{
        "room", ",", "\[IndentingNewLine]", "receiverPosition", ",", 
         "\[IndentingNewLine]", "senderPositions", ",", "\[IndentingNewLine]",
          "vanMisesConcentration", ",", "\[IndentingNewLine]", "deltaError", 
         ",", "\[IndentingNewLine]", "directSignalDiscardFactor", ",", 
         "\[IndentingNewLine]", "reflectionDiscardFactor", ",", 
         "\[IndentingNewLine]", "wallErrorFactor"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"reflectionGroups", "=", 
       RowBox[{"GroupMeasurements", "[", 
        RowBox[{"measurements", ",", "clusteringAlgorithm", ",", "3"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"ToDo", ":", " ", 
        RowBox[{
        "somehow", " ", "select", " ", "the", " ", "\"\<best\>\"", " ", 
         "group"}]}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"allPairsWallNormal", "=", 
       RowBox[{"GetWallNormalVectorFromMeasurentsAndReflectionGroup", "[", 
        RowBox[{"measurements", ",", 
         RowBox[{"reflectionGroups", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "\"\<All Pairs\>\""}], "]"}]}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"disjointPairsWallNormal", "=", 
       RowBox[{"GetWallNormalVectorFromMeasurentsAndReflectionGroup", "[", 
        RowBox[{"measurements", ",", 
         RowBox[{"reflectionGroups", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "\"\<Disjoint Pairs\>\""}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"overlappingPairsWallNormal", "=", 
       RowBox[{"GetWallNormalVectorFromMeasurentsAndReflectionGroup", "[", 
        RowBox[{"measurements", ",", 
         RowBox[{"reflectionGroups", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "\"\<Overlapping Pairs\>\""}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"linearAllPairs", "=", 
       RowBox[{"GetWallNormalVectorFromMeasurentsAndReflectionGroup", "[", 
        RowBox[{"measurements", ",", 
         RowBox[{"reflectionGroups", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "\"\<Linear All Pairs\>\""}], 
        "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}]}], "*)"}]], "Input",
 CellChangeTimes->{{3.864880164864236*^9, 3.864880314964573*^9}, {
   3.864880380444421*^9, 3.864880380543653*^9}, 3.864880758834178*^9, {
   3.864880832027665*^9, 3.8648808442163143`*^9}, {3.86488092781765*^9, 
   3.864880927950651*^9}, {3.864881011362029*^9, 3.864881014305914*^9}, {
   3.864890297323896*^9, 3.8648903002781897`*^9}, {3.864963598500204*^9, 
   3.8649636083746977`*^9}, {3.864963641688652*^9, 3.864963668569253*^9}, {
   3.8649637054282703`*^9, 3.8649637639278383`*^9}, {3.8649651987246313`*^9, 
   3.8649652229268627`*^9}, {3.8649652645996857`*^9, 
   3.8649652977461643`*^9}, {3.864965363367902*^9, 3.8649654029687757`*^9}, {
   3.86496546072586*^9, 3.864965482572877*^9}, {3.864965522607071*^9, 
   3.8649655596040792`*^9}, 3.864965954890973*^9, {3.8649660555926456`*^9, 
   3.864966096169979*^9}, {3.864966153238059*^9, 3.8649661803582163`*^9}, {
   3.871359947095291*^9, 3.871359949104432*^9}},
 CellLabel->
  "In[117]:=",ExpressionUUID->"a61bc2a0-6e63-49aa-9665-e6957b2884aa"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Only", " ", "for", " ", "testing"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"senderPositions", ",", 
       RowBox[{"senderPositionRange", "=", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"-", "1"}], ",", "1"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"-", "1"}], ",", "1"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"-", "1"}], ",", "1"}], "}"}]}], "}"}]}], ",", 
       RowBox[{"numSenders", "=", "5"}], ",", 
       RowBox[{"receiverPosition", "=", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ",", "measurements", ",",
        "inversionSolution"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"senderPositions", "=", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"RandomReal", "[", 
            RowBox[{"senderPositionRange", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
           RowBox[{"RandomReal", "[", 
            RowBox[{"senderPositionRange", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "]"}], ",", 
           RowBox[{"RandomReal", "[", 
            RowBox[{"senderPositionRange", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "]"}]}], "}"}], ",", 
         "numSenders"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"measurements", "=", 
       RowBox[{"SimulateExperiment", "[", "\[IndentingNewLine]", 
        RowBox[{
        "cubeRoom", ",", "\[IndentingNewLine]", "receiverPosition", ",", 
         "\[IndentingNewLine]", "senderPositions", ",", "\[IndentingNewLine]",
          "0", ",", "\[IndentingNewLine]", "0", ",", "\[IndentingNewLine]", 
         "0", ",", "\[IndentingNewLine]", "0", ",", "\[IndentingNewLine]", 
         "0"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"inversionSolution", "=", 
       RowBox[{"GroupMeasurements", "[", 
        RowBox[{"measurements", ",", "\"\<Inversion, Improved\>\""}], "]"}]}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"Print", "[", 
       RowBox[{"\"\<solution: \>\"", ",", 
        RowBox[{"inversionSolution", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"Print", "[", 
       RowBox[{"\"\<Wall normal vector: \>\"", ",", 
        RowBox[{"GetWallNormalVectorFromMeasurentsAndReflectionGroup", "[", 
         RowBox[{"measurements", ",", 
          RowBox[{"inversionSolution", "[", 
           RowBox[{"[", "1", "]"}], "]"}], ",", 
          "\"\<Linear All Pairs Improved\>\""}], "]"}]}], "]"}]}]}], 
    "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", "*)"}]}]], "Input",
 CellChangeTimes->{{3.864880164864236*^9, 3.864880314964573*^9}, {
   3.864880380444421*^9, 3.864880380543653*^9}, 3.864880758834178*^9, {
   3.864880832027665*^9, 3.8648808442163143`*^9}, {3.86488092781765*^9, 
   3.864880927950651*^9}, {3.864881011362029*^9, 3.864881014305914*^9}, {
   3.864890297323896*^9, 3.8648903002781897`*^9}, {3.864963598500204*^9, 
   3.8649636083746977`*^9}, {3.864972736773922*^9, 3.8649727428343697`*^9}, {
   3.865657227110033*^9, 3.86565722925114*^9}, {3.871359959571733*^9, 
   3.871359990080084*^9}, {3.871374243421691*^9, 3.871374246035838*^9}},
 CellLabel->
  "In[118]:=",ExpressionUUID->"4f41b0c2-f18a-4a60-9970-d79a886c134f"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{
  3.864881696961709*^9, 3.864972223779439*^9, {3.86497227739266*^9, 
   3.864972278174675*^9}, 3.8649724878621607`*^9, {3.864972690068079*^9, 
   3.8649726911190643`*^9}},
 CellLabel->
  "In[119]:=",ExpressionUUID->"45e14b96-21e2-428e-bc54-ff45ec67bcaf"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Sender Localisation", "Section",
 CellChangeTimes->{{3.8651330757027473`*^9, 
  3.865133086327334*^9}},ExpressionUUID->"9acded2d-9751-4fdf-879e-\
716250776529"],

Cell["\<\
In this section, we take the wall normal vector as computed previously and \
use it to compute the senders positions. We use four different methods to \
compute a senders position, introduced by Christian Schindelhauer and Zeno \
Wei\[SZ].\
\>", "Text",
 CellChangeTimes->{{3.865133089838212*^9, 3.8651331576852703`*^9}, {
  3.865133346418261*^9, 3.86513336115609*^9}, {3.8651334290007343`*^9, 
  3.8651334442476463`*^9}, {3.8661011891687937`*^9, 
  3.8661011896894493`*^9}},ExpressionUUID->"693607c8-222e-4204-b917-\
9e7a7deafc26"],

Cell[CellGroupData[{

Cell["Sender distance computation", "Subsection",
 CellChangeTimes->{{3.8651335406311083`*^9, 
  3.8651335461129*^9}},ExpressionUUID->"ed4557ff-634b-4089-ad5a-7fa053291dcf"],

Cell[TextData[{
 "For given ",
 Cell[BoxData[
  FormBox[
   TemplateBox[<|"boxes" -> FormBox[
       RowBox[{
         StyleBox["v", "TI"], ",", 
         StyleBox["w", "TI"], ",", "\[CapitalDelta]"}], TraditionalForm], 
     "errors" -> {}, "input" -> "v,w,\\Delta", "state" -> "Boxes"|>,
    "TeXAssistantTemplate"], TraditionalForm]],ExpressionUUID->
  "979ddd19-4b01-4556-b042-f414dc86a9e2"],
 ", we can compute a senders position ",
 Cell[BoxData[
  FormBox[
   TemplateBox[<|"boxes" -> FormBox[
       StyleBox["s", "TI"], TraditionalForm], "errors" -> {}, "input" -> "s", 
     "state" -> "Boxes"|>,
    "TeXAssistantTemplate"], TraditionalForm]],ExpressionUUID->
  "0d32881a-14b6-4889-91f4-571e86832426"],
 " using ",
 Cell[BoxData[
  FormBox[
   TemplateBox[<|"boxes" -> FormBox[
       RowBox[{
         StyleBox["s", "TI"], "\[LongEqual]", 
         StyleBox["p", "TI"], 
         StyleBox["v", "TI"]}], TraditionalForm], "errors" -> {}, "input" -> 
     "s=pv", "state" -> "Boxes"|>,
    "TeXAssistantTemplate"], TraditionalForm]],ExpressionUUID->
  "94186087-b605-48d0-9d39-97bb3ef596c8"],
 " for some unknown ",
 Cell[BoxData[
  FormBox[
   TemplateBox[<|"boxes" -> FormBox[
       StyleBox["p", "TI"], TraditionalForm], "errors" -> {}, "input" -> "p", 
     "state" -> "Boxes"|>,
    "TeXAssistantTemplate"], TraditionalForm]],ExpressionUUID->
  "02ea1a6b-c8bd-43ef-86dc-00db6c8cc6e6"],
 ". We have different methods of computing ",
 Cell[BoxData[
  FormBox[
   TemplateBox[<|"boxes" -> FormBox[
       StyleBox["p", "TI"], TraditionalForm], "errors" -> {}, "input" -> "p", 
     "state" -> "Boxes"|>,
    "TeXAssistantTemplate"], TraditionalForm]],ExpressionUUID->
  "a8b6abe9-f1b0-40da-8ae1-4128ad297d80"],
 ", using the previously computed wall normal vector ",
 Cell[BoxData[
  FormBox[
   TemplateBox[<|"boxes" -> FormBox[
       StyleBox["n", "TI"], TraditionalForm], "errors" -> {}, "input" -> "n", 
     "state" -> "Boxes"|>,
    "TeXAssistantTemplate"], TraditionalForm]],ExpressionUUID->
  "3709d06d-9763-49ea-8fc6-41777e002668"]
}], "Text",
 CellChangeTimes->{{3.865137100046638*^9, 
  3.865137217499015*^9}},ExpressionUUID->"6359f4a4-b2ed-4a44-aad6-\
41151c1d9b50"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderDistanceWallDirection", "[", 
   RowBox[{"v_", ",", "w_", ",", "\[CapitalDelta]_", ",", "n_"}], "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"b", "=", 
      RowBox[{"Cross", "[", 
       RowBox[{
        RowBox[{"Cross", "[", 
         RowBox[{
          RowBox[{"Normalize", "[", "n", "]"}], ",", "v"}], "]"}], ",", 
        RowBox[{"Normalize", "[", "n", "]"}]}], "]"}]}], "}"}], ",", 
    "\[IndentingNewLine]", 
    FractionBox[
     RowBox[{"\[CapitalDelta]", "*", 
      RowBox[{"w", ".", "b"}]}], 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"v", "-", "w"}], ")"}], ".", "b"}]]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.8651372284814777`*^9, 3.865137302619074*^9}, 
   3.865137348645236*^9, {3.865137387028387*^9, 3.865137419268672*^9}, {
   3.8651374760167313`*^9, 3.865137478152483*^9}, 3.86513751594361*^9, {
   3.865139120365448*^9, 3.865139153206952*^9}, {3.865141161120233*^9, 
   3.865141211539074*^9}, {3.865141310498304*^9, 3.865141319781192*^9}, {
   3.865141353858403*^9, 3.865141552668913*^9}, {3.865141598772975*^9, 
   3.865141605575247*^9}, {3.865148301349038*^9, 3.865148317233739*^9}},
 CellLabel->
  "In[120]:=",ExpressionUUID->"f400e49a-8ae7-49aa-8f82-5bd7b5cd3376"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderDistanceMapToNormalVector", "[", 
   RowBox[{"v_", ",", "w_", ",", "\[CapitalDelta]_", ",", "n_"}], "]"}], ":=",
   "\[IndentingNewLine]", 
  FractionBox[
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"2", "*", "n"}], "-", 
      RowBox[{"\[CapitalDelta]", "*", "w"}]}], ")"}], ".", "n"}], 
   RowBox[{
    RowBox[{"(", 
     RowBox[{"v", "+", "w"}], ")"}], ".", "n"}]]}]], "Input",
 CellChangeTimes->{{3.8651372284814777`*^9, 3.865137302619074*^9}, 
   3.865137348645236*^9, {3.865137387028387*^9, 3.865137419268672*^9}, {
   3.8651374760167313`*^9, 3.865137478152483*^9}, {3.86513751594361*^9, 
   3.865137551475317*^9}, {3.8651375911690598`*^9, 3.8651376373982153`*^9}, {
   3.8651391648312073`*^9, 3.865139195265695*^9}, {3.865139264518758*^9, 
   3.865139267255248*^9}, {3.865141643668417*^9, 3.865141654626751*^9}, {
   3.865141800684005*^9, 3.865141847520105*^9}, {3.865142015383195*^9, 
   3.865142017116444*^9}, {3.8651423490882273`*^9, 3.8651423742130013`*^9}, {
   3.865147637176527*^9, 3.8651476486454363`*^9}, {3.865147809659182*^9, 
   3.865147814401516*^9}},
 CellLabel->
  "In[121]:=",ExpressionUUID->"32dbcbe9-527b-489a-af84-835343449ea9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderDistanceReflectionGeometry", "[", 
   RowBox[{"v_", ",", "w_", ",", "\[CapitalDelta]_", ",", "n_"}], "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"b", "=", 
      RowBox[{"Cross", "[", 
       RowBox[{
        RowBox[{"Cross", "[", 
         RowBox[{
          RowBox[{"Normalize", "[", "n", "]"}], ",", "v"}], "]"}], ",", 
        RowBox[{"Normalize", "[", "n", "]"}]}], "]"}]}], "}"}], ",", 
    "\[IndentingNewLine]", 
    FractionBox[
     RowBox[{"2", "*", 
      RowBox[{"(", 
       RowBox[{"n", ".", "n"}], ")"}], "*", 
      RowBox[{"(", 
       RowBox[{"w", ".", "b"}], ")"}]}], 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{"v", ".", "n"}], ")"}], "*", 
       RowBox[{"(", 
        RowBox[{"w", ".", "b"}], ")"}]}], "+", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"v", ".", "b"}], ")"}], "*", 
       RowBox[{"(", 
        RowBox[{"w", ".", "n"}], ")"}]}]}]]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.865137642556443*^9, 3.865137757274667*^9}, {
   3.865139202267206*^9, 3.865139223415406*^9}, {3.865139256941008*^9, 
   3.8651392806310453`*^9}, {3.865147566212508*^9, 3.865147566544602*^9}, {
   3.865147745748167*^9, 3.865147786616028*^9}, 3.8651479729993067`*^9, 
   3.865148200454526*^9, {3.8651482521754847`*^9, 3.8651482868679037`*^9}},
 CellLabel->
  "In[122]:=",ExpressionUUID->"debcec76-e35b-41b4-b2b7-da170f8dac4b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderDistanceClosestLines", "[", 
   RowBox[{"v_", ",", "w_", ",", "wallNormal_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "For", " ", "this", " ", "computation", " ", "we", " ", "assume", " ", 
     "the", " ", "receivers", " ", "position", " ", "to", " ", "be", " ", 
     "at", " ", "the", " ", "origin"}], ",", " ", 
    RowBox[{
     RowBox[{
     "since", " ", "all", " ", "given", " ", "vectors", " ", "are", " ", 
      "relative", " ", "to", " ", "the", " ", "receivers", " ", "position", 
      " ", "we", " ", "can", " ", "do", " ", "this", " ", "without", " ", 
      "further", " ", 
      RowBox[{"adjustments", ".", " ", "i", ".", "e", ".", " ", "r"}]}], "=", 
     
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0"}], "}"}]}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"rMirrored", "=", 
       RowBox[{"2", "wallNormal"}]}], " ", ",", "\[IndentingNewLine]", 
      RowBox[{"n", "=", 
       RowBox[{"Normalize", "[", "wallNormal", "]"}]}], ",", 
      "\[IndentingNewLine]", "wMirrored", ",", "\[IndentingNewLine]", "u", 
      ",", "\[IndentingNewLine]", "a"}], "\[IndentingNewLine]", "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"wMirrored", "=", 
      RowBox[{"Normalize", "[", 
       RowBox[{"w", "-", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"2", "*", 
           RowBox[{"(", 
            RowBox[{"w", ".", "n"}], ")"}]}], ")"}], "*", "n"}]}], "]"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"a", "=", 
      RowBox[{"-", "rMirrored"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"u", "=", 
      RowBox[{"Cross", "[", 
       RowBox[{"v", ",", "wMirrored"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"-", 
      FractionBox[
       RowBox[{
        RowBox[{"Cross", "[", 
         RowBox[{"wMirrored", ",", "a"}], "]"}], ".", "u"}], 
       RowBox[{
        RowBox[{"Cross", "[", 
         RowBox[{"wMirrored", ",", "v"}], "]"}], ".", "u"}]]}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.8651378921162252`*^9, 3.865137899599065*^9}, {
   3.865138189992687*^9, 3.865138227603101*^9}, {3.865138259866493*^9, 
   3.865138391273347*^9}, {3.865138458593767*^9, 3.865138476130875*^9}, {
   3.8651385187465487`*^9, 3.865138553641633*^9}, {3.865138884956155*^9, 
   3.8651389151879673`*^9}, {3.86513898751618*^9, 3.865139013014097*^9}, {
   3.865139093049724*^9, 3.8651391169671803`*^9}, {3.865139232926321*^9, 
   3.865139250918717*^9}, {3.8651393485651903`*^9, 3.865139388609685*^9}, {
   3.865139597431693*^9, 3.865139658032675*^9}, {3.865139693864504*^9, 
   3.865139751993895*^9}, {3.865139784489588*^9, 3.86513979067684*^9}, {
   3.865147915912328*^9, 3.865147939941963*^9}, 3.865148217879476*^9, {
   3.868873463766243*^9, 3.868873465339962*^9}},
 CellLabel->
  "In[123]:=",ExpressionUUID->"4b077f21-23ec-48d1-bcee-3b38b8cace89"]
}, Closed]],

Cell[CellGroupData[{

Cell["Compute Senders Positions", "Subsection",
 CellChangeTimes->{{3.865139814048614*^9, 
  3.865139827605426*^9}},ExpressionUUID->"aa9cdab4-feb9-4372-b4ae-\
9c6f122aee6e"],

Cell["\<\
Using the previously defined methods for computing a senders distance, we can \
compute its position, using a measurement and a given wall normal vector as \
input\
\>", "Text",
 CellChangeTimes->{{3.8651398313729*^9, 
  3.865139896160881*^9}},ExpressionUUID->"504997d8-f927-4698-b372-\
9852efbc31bd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderPosition", "[", 
   RowBox[{"measurement_", ",", "wallNormalVector_", ",", "algorithm_"}], 
   "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"v", "=", 
       RowBox[{"measurement", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], ",", 
      RowBox[{"w", "=", 
       RowBox[{"measurement", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], ",", 
      RowBox[{"\[CapitalDelta]", "=", 
       RowBox[{"measurement", "[", 
        RowBox[{"[", "3", "]"}], "]"}]}], ",", "senderPosition"}], "}"}], ",",
     "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Switch", "[", 
      RowBox[{
      "algorithm", ",", "\[IndentingNewLine]", "\"\<Wall Direction\>\"", ",", 
       
       RowBox[{"senderPosition", "=", 
        RowBox[{
         RowBox[{"ComputeSenderDistanceWallDirection", "[", 
          RowBox[{
          "v", ",", "w", ",", "\[CapitalDelta]", ",", "wallNormalVector"}], 
          "]"}], "*", "v"}]}], ",", "\[IndentingNewLine]", 
       "\"\<Map to Normal Vector\>\"", ",", 
       RowBox[{"senderPosition", "=", 
        RowBox[{
         RowBox[{"ComputeSenderDistanceMapToNormalVector", "[", 
          RowBox[{
          "v", ",", "w", ",", "\[CapitalDelta]", ",", "wallNormalVector"}], 
          "]"}], "*", "v"}]}], ",", "\[IndentingNewLine]", 
       "\"\<Reflection Geometry\>\"", ",", 
       RowBox[{"senderPosition", "=", 
        RowBox[{
         RowBox[{"ComputeSenderDistanceReflectionGeometry", "[", 
          RowBox[{
          "v", ",", "w", ",", "\[CapitalDelta]", ",", "wallNormalVector"}], 
          "]"}], "*", "v"}]}], ",", "\[IndentingNewLine]", 
       "\"\<Closest Lines\>\"", ",", 
       RowBox[{"senderPosition", "=", 
        RowBox[{
         RowBox[{"ComputeSenderDistanceClosestLines", "[", 
          RowBox[{"v", ",", "w", ",", "wallNormalVector"}], "]"}], "*", 
         "v"}]}], ",", "\[IndentingNewLine]", "_", ",", 
       RowBox[{
       "Throw", "[", 
        "\"\<Please specify sender localization algorithm to be used.\>\"", 
        "]"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     "senderPosition"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.865139866273675*^9, 3.865140102885592*^9}, {
  3.865140153218318*^9, 3.8651401818031473`*^9}, {3.8651415881553183`*^9, 
  3.865141594333654*^9}, {3.868873507262635*^9, 3.86887352686906*^9}},
 CellLabel->
  "In[124]:=",ExpressionUUID->"1d96884b-50a4-41be-bfd2-5505f12c3840"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "Alternative", " ", "method", " ", "for", " ", "computing", " ", "a", " ", 
     RowBox[{"sender", "'"}], "s", " ", "position"}], ",", " ", 
    RowBox[{
    "that", " ", "takes", " ", "one", " ", "direct", " ", "vector", " ", "v", 
     " ", "and", " ", "and", " ", "list", " ", "of", " ", "pairs", " ", "of", 
     " ", "reflected", " ", "vectors", " ", "and", " ", "wall", " ", "normal",
      " ", "vectors"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
   "ComputeSenderPositionClosestLinesExtended", "[", "vwnList_", "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"v", "=", 
        RowBox[{
         RowBox[{"vwnList", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", "vLine", ",", "wLines", ",", 
       RowBox[{"offset", "=", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0", ",", "0.5"}], "}"}]}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"vLine", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", "v"}], "}"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"wLines", "=", 
       RowBox[{"Table", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Block", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
            "n", ",", "w", ",", "rMirrored", ",", "u", ",", "wMirrored"}], 
            "}"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"n", "=", 
             RowBox[{"vwnEntry", "[", 
              RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"w", "=", 
             RowBox[{"vwnEntry", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"rMirrored", "=", 
             RowBox[{"2", "n"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"u", "=", 
             RowBox[{"Normalize", "[", "n", "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"wMirrored", "=", 
             RowBox[{"Normalize", "[", 
              RowBox[{"w", "-", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{"2", "*", 
                  RowBox[{"(", 
                   RowBox[{"w", ".", "u"}], ")"}]}], ")"}], "*", "u"}]}], 
              "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"rMirrored", ",", "wMirrored"}], "}"}]}]}], 
          "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"vwnEntry", ",", "vwnList"}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"CellPrint", "[", 
         RowBox[{"Graphics3D", "[", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Opacity", "[", "0.1", "]"}], ",", 
              RowBox[{"Triangle", "/@", "cubeRoom"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Green", ",", 
              RowBox[{"InfiniteLine", "[", 
               RowBox[{
                RowBox[{"vLine", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", 
                RowBox[{"vLine", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Blue", ",", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"InfiniteLine", "[", 
                 RowBox[{
                  RowBox[{"wLine", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", 
                  RowBox[{"wLine", "[", 
                   RowBox[{"[", "2", "]"}], "]"}]}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"wLine", ",", "wLines"}], "}"}]}], "]"}]}], "}"}], 
            ",", "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Blue", ",", 
              RowBox[{"PointSize", "[", "Large", "]"}], ",", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"Point", "[", 
                 RowBox[{"wLine", "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"wLine", ",", "wLines"}], "}"}]}], "]"}]}], "}"}], 
            ",", "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Green", ",", 
              RowBox[{"PointSize", "[", "Large", "]"}], ",", 
              RowBox[{"Point", "[", 
               RowBox[{"{", 
                RowBox[{"0", ",", "0", ",", "0"}], "}"}], "]"}]}], "}"}], ",",
             "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Orange", ",", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"Arrow", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", 
                   RowBox[{"vwnEntry", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"vwnEntry", ",", "vwnList"}], "}"}]}], "]"}]}], 
             "}"}]}], "\[IndentingNewLine]", "}"}], "]"}], "]"}], ";"}], 
       "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"ComputeClosestPoint", "[", 
        RowBox[{"AppendTo", "[", 
         RowBox[{"wLines", ",", "vLine"}], "]"}], "]"}], "[", 
       RowBox[{"[", "1", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}]}]], "Input",
 CellChangeTimes->{{3.865139866273675*^9, 3.865140102885592*^9}, {
   3.865140153218318*^9, 3.8651401818031473`*^9}, {3.8651415881553183`*^9, 
   3.865141594333654*^9}, {3.868873507262635*^9, 3.8688736686403646`*^9}, {
   3.8688737266884203`*^9, 3.8688738171147823`*^9}, {3.868873848040826*^9, 
   3.868873920816148*^9}, {3.868874159531188*^9, 3.8688741773004007`*^9}, {
   3.868874239331049*^9, 3.868874268100668*^9}, 3.868874586037882*^9, 
   3.868874627824594*^9, {3.868874659082262*^9, 3.868874665721644*^9}, {
   3.868874712639028*^9, 3.8688747131092567`*^9}, {3.868874797727655*^9, 
   3.868874815383645*^9}, {3.868874990149275*^9, 3.868875010554678*^9}, {
   3.8688750503588142`*^9, 3.8688750918675327`*^9}, {3.868875123573533*^9, 
   3.8688752523176413`*^9}, {3.86887528455291*^9, 3.8688753581942167`*^9}, {
   3.868875391476864*^9, 3.868875417363903*^9}, {3.868875451646624*^9, 
   3.868875540261836*^9}, {3.868875595676845*^9, 3.8688756519049*^9}, {
   3.868875735719164*^9, 3.8688757613023977`*^9}, {3.868875853674397*^9, 
   3.86887588857556*^9}, {3.86887598212344*^9, 3.868876000583658*^9}, {
   3.868876075628438*^9, 3.868876089630871*^9}, {3.868876305675089*^9, 
   3.8688764462096567`*^9}, {3.868878845603351*^9, 3.868879123772131*^9}, {
   3.868879318337832*^9, 3.868879399522942*^9}, {3.868879437124633*^9, 
   3.868879466893593*^9}, {3.868879521150893*^9, 3.868879547910211*^9}, {
   3.8688795948987427`*^9, 3.8688796609109287`*^9}, {3.868879692947261*^9, 
   3.8688796951734962`*^9}, {3.870250252730484*^9, 3.870250254627923*^9}, {
   3.870250611913445*^9, 3.870250612213983*^9}, {3.870250652913537*^9, 
   3.870250675401939*^9}, {3.870250798355838*^9, 3.870250812678176*^9}, {
   3.870250870571179*^9, 3.870250872278503*^9}, {3.870250930557005*^9, 
   3.870250993950716*^9}, {3.87025103907656*^9, 3.8702510995650597`*^9}, {
   3.8702512166302233`*^9, 3.870251253584065*^9}, {3.87025225804202*^9, 
   3.8702522605939713`*^9}, {3.870252294645421*^9, 3.870252294882739*^9}, {
   3.870252360963272*^9, 3.870252363511262*^9}},
 CellLabel->
  "In[125]:=",ExpressionUUID->"ff09766e-2741-4d00-bf66-93ab80e01693"]
}, Closed]],

Cell[CellGroupData[{

Cell["Wall Normal Vector Selection", "Subsection",
 CellChangeTimes->{{3.8653169282651443`*^9, 3.865316966679565*^9}, {
  3.866103000719365*^9, 
  3.86610301290128*^9}},ExpressionUUID->"4ad18dc2-852a-4149-bea4-\
689bbf17de6b"],

Cell["\<\
Since the clustering algorithms compute multiple groups of reflections (from \
which we can compute normal vectors for different walls), we have to either \
choose one \[OpenCurlyDoubleQuote]good\[CloseCurlyDoubleQuote] wall, or \
compute multiple potential sender position and then compute some (maybe \
weighted?) average.\
\>", "Text",
 CellChangeTimes->{{3.865316981225863*^9, 3.865316985581809*^9}, {
  3.865317046179557*^9, 
  3.865317177294085*^9}},ExpressionUUID->"701798c3-f166-464e-906b-\
433ff50b0841"],

Cell[CellGroupData[{

Cell["Most Reflections", "Subsubsection",
 CellChangeTimes->{{3.870324579693595*^9, 3.8703245833387203`*^9}, {
  3.870325169199973*^9, 
  3.870325171609145*^9}},ExpressionUUID->"8a60793f-d4e2-4ad4-8cbb-\
636cfa29f098"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderPositionsMostReflections", "[", 
   RowBox[{
   "measurements_", ",", "reflectionGroups_", ",", "wallNormalVectors_", ",", 
    "algorithm_", ",", "receiverPosition_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"largestReflectionGroupIndex", ",", "relevantMeasurements"}], 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"largestReflectionGroupIndex", "=", 
      RowBox[{
       RowBox[{"MaximalBy", "[", 
        RowBox[{
         RowBox[{"Range", "[", 
          RowBox[{"Length", "[", "reflectionGroups", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{"Length", "[", 
           RowBox[{"reflectionGroups", "[", 
            RowBox[{"[", "#", "]"}], "]"}], "]"}], "&"}]}], "]"}], "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"relevantMeasurements", "=", 
      RowBox[{"measurements", "[", 
       RowBox[{"[", 
        RowBox[{"reflectionGroups", "[", 
         RowBox[{"[", "largestReflectionGroupIndex", "]"}], "]"}], "]"}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"ComputeSenderPosition", "[", 
             RowBox[{"measurement", ",", 
              RowBox[{"wallNormalVectors", "[", 
               RowBox[{"[", "largestReflectionGroupIndex", "]"}], "]"}], ",", 
              "algorithm"}], "]"}], "+", "receiverPosition"}], ",", 
           RowBox[{"measurement", "[", 
            RowBox[{"[", "5", "]"}], "]"}]}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"measurement", ",", "relevantMeasurements"}], "}"}]}], 
        "]"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", "largestReflectionGroupIndex", "}"}]}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.8703246089158363`*^9, 3.870324770340332*^9}, {
  3.870325163289851*^9, 3.870325166652529*^9}},
 CellLabel->
  "In[126]:=",ExpressionUUID->"da5ce998-2dd5-4b50-8629-230c6c778ab2"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Average Position", "Subsubsection",
 CellChangeTimes->{{3.870325177089919*^9, 
  3.870325179059766*^9}},ExpressionUUID->"53f5b035-5087-450c-a83f-\
619d9e92f3cf"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderPositionsAverage", "[", 
   RowBox[{
   "measurements_", ",", "reflectionGroups_", ",", "wallNormalVectors_", ",", 
    "algorithm_", ",", "receiverPosition_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "senderPositionsWithDirectSignalReference", ",", 
      "averageSenderPositions"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
     "senderPositionsWithDirectSignalReference", "=", "\[IndentingNewLine]", 
      RowBox[{"Flatten", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Table", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Table", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{
               RowBox[{"ComputeSenderPosition", "[", 
                RowBox[{"measurement", ",", 
                 RowBox[{"wallNormalVectors", "[", 
                  RowBox[{"[", "reflectionGroupIndex", "]"}], "]"}], ",", 
                 "algorithm"}], "]"}], "+", "receiverPosition"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"measurement", "[", 
               RowBox[{"[", "5", "]"}], "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{"measurement", "[", 
               RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", "}"}],
             "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{"measurement", ",", 
              RowBox[{"measurements", "[", 
               RowBox[{"[", 
                RowBox[{"reflectionGroups", "[", 
                 RowBox[{"[", "reflectionGroupIndex", "]"}], "]"}], "]"}], 
               "]"}]}], "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
          RowBox[{"{", 
           RowBox[{"reflectionGroupIndex", ",", 
            RowBox[{"Length", "[", "reflectionGroups", "]"}]}], "}"}]}], 
         "]"}], "\[IndentingNewLine]", ",", "1"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"senderPositionsWithDirectSignalReference", "=", 
      RowBox[{"GatherBy", "[", 
       RowBox[{"senderPositionsWithDirectSignalReference", ",", 
        RowBox[{
         RowBox[{"#", "[", 
          RowBox[{"[", "3", "]"}], "]"}], "&"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Check", " ", "if", " ", "the", " ", "direct", " ", "signal", " ", 
       "and", " ", "actual", " ", "sender", " ", "position", " ", "are", " ", 
       "the", " ", "same", " ", "in", " ", "each", " ", "group"}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Assert", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"position", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "==", 
            RowBox[{
             RowBox[{"positionGroup", "[", 
              RowBox[{"[", "1", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "\[And]", 
           RowBox[{
            RowBox[{"position", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "==", 
            RowBox[{
             RowBox[{"positionGroup", "[", 
              RowBox[{"[", "1", "]"}], "]"}], "[", 
             RowBox[{"[", "3", "]"}], "]"}]}]}], "]"}], "\[IndentingNewLine]",
          ",", 
         RowBox[{"{", 
          RowBox[{"position", ",", "positionGroup"}], "}"}]}], "]"}], 
       "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{
        "positionGroup", ",", "senderPositionsWithDirectSignalReference"}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Now", " ", "group", " ", "the", " ", "computed", " ", "directions", 
       " ", "by", " ", "the", " ", "direct", " ", "signal"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"averageSenderPositions", "=", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"Total", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"position", "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"position", ",", "positionGroup"}], "}"}]}], "]"}], 
            "]"}], "/", 
           RowBox[{"Length", "[", "positionGroup", "]"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"positionGroup", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], " ", 
         RowBox[{"(*", " ", 
          RowBox[{
          "The", " ", "actual", " ", "position", " ", "is", " ", "the", " ", 
           "same", " ", "for", " ", "each", " ", "group"}], " ", "*)"}], 
         "\[IndentingNewLine]", "}"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{
         "positionGroup", ",", "senderPositionsWithDirectSignalReference"}], 
         "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"averageSenderPositions", ",", 
       RowBox[{"Range", "[", "reflectionGroups", "]"}]}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.8703246089158363`*^9, 3.870324770340332*^9}, {
  3.870325163289851*^9, 3.870325166652529*^9}},
 CellLabel->
  "In[127]:=",ExpressionUUID->"0aa74ed3-0b99-42aa-8121-b6fff991379b"]
}, Closed]],

Cell[CellGroupData[{

Cell["Closest Lines Extended", "Subsubsection",
 CellChangeTimes->{{3.870325192949938*^9, 
  3.870325196217614*^9}},ExpressionUUID->"d102f048-70ee-4acd-bd87-\
b93f437508e7"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderPositionsClosestLinesExtended", "[", 
   RowBox[{
   "measurements_", ",", "reflectionGroups_", ",", "wallNormalVectors_", ",", 
    "algorithm_", ",", "receiverPosition_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Length", "[", "reflectionGroups", "]"}], ">", "1"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"measurementGroupsByV", ",", "wnPairs"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{
        "Get", " ", "a", " ", "list", " ", "of", " ", "all", " ", "reflected",
          " ", "signals"}], ",", " ", 
        RowBox[{
        "grouped", " ", "by", " ", "the", " ", "respective", " ", "direct", 
         " ", "signal"}]}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"measurementGroupsByV", "=", 
        RowBox[{"Table", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Flatten", "[", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"Position", "[", 
              RowBox[{"measurements", ",", "measurement"}], "]"}], ",", 
             RowBox[{"{", 
              RowBox[{"measurement", ",", "measurementGroup"}], "}"}]}], 
            "]"}], "]"}], "\[IndentingNewLine]", ",", 
          RowBox[{"{", 
           RowBox[{"measurementGroup", ",", 
            RowBox[{"GatherBy", "[", 
             RowBox[{"measurements", ",", 
              RowBox[{
               RowBox[{"#", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "&"}]}], "]"}]}], "}"}]}], 
         "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"Now", ",", " ", 
         RowBox[{"for", " ", "each", " ", "measurement"}], ",", " ", 
         RowBox[{"find", " ", "the", " ", "normal", " ", "vector"}], ",", " ", 
         RowBox[{
         "for", " ", "which", " ", "the", " ", "reflected", " ", "signal", 
          " ", "is", " ", "part", " ", "of", " ", "the", " ", "respective", 
          " ", "reflection", " ", "group"}]}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"wnPairs", "=", "\[IndentingNewLine]", 
        RowBox[{"Table", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Table", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{
               RowBox[{"measurements", "[", 
                RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"measurements", "[", 
                RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"Position", "[", 
                  RowBox[{"reflectionGroups", ",", "measurementIndex"}], 
                  "]"}], "!=", 
                 RowBox[{"{", "}"}]}], ",", 
                RowBox[{"wallNormalVectors", "[", 
                 RowBox[{"[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"Position", "[", 
                    RowBox[{"reflectionGroups", ",", "measurementIndex"}], 
                    "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", 
                RowBox[{"{", "}"}]}], "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"measurements", "[", 
                RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
               RowBox[{"[", "5", "]"}], "]"}]}], "\[IndentingNewLine]", "}"}],
             "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{"measurementIndex", ",", "measurementGroup"}], "}"}]}], 
           "]"}], "\[IndentingNewLine]", ",", 
          RowBox[{"{", 
           RowBox[{"measurementGroup", ",", "measurementGroupsByV"}], "}"}]}],
          "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
        "Filter", " ", "out", " ", "measurements", " ", "for", " ", "which", 
         " ", "the", " ", "reflection", " ", "is", " ", "not", " ", "part", 
         " ", "of", " ", "any", " ", "reflection", " ", "group"}], " ", 
        "*)"}], "\[IndentingNewLine]", 
       RowBox[{"wnPairs", "=", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"Select", "[", 
           RowBox[{"wnGroup", ",", 
            RowBox[{
             RowBox[{
              RowBox[{"#", "[", 
               RowBox[{"[", "3", "]"}], "]"}], "!=", 
              RowBox[{"{", "}"}]}], "&"}]}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"wnGroup", ",", "wnPairs"}], "}"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"wnPairs", "=", 
        RowBox[{"DeleteCases", "[", 
         RowBox[{"wnPairs", ",", 
          RowBox[{"{", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"MemberQ", "[", 
          RowBox[{"wnPairs", ",", 
           RowBox[{"{", "}"}]}], "]"}], ",", 
         RowBox[{"Print", "[", 
          RowBox[{"StringForm", "[", 
           RowBox[{
           "\"\<wnPairs: ``, measurementGroupsByV: ``\>\"", ",", "wnPairs", 
            ",", "measurementGroupsByV"}], "]"}], "]"}]}], "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{
              "ComputeSenderPositionClosestLinesExtended", "[", "vwnGroup", 
               "]"}], "+", "receiverPosition"}], ",", 
             RowBox[{
              RowBox[{"vwnGroup", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "[", 
              RowBox[{"[", "4", "]"}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"vwnGroup", ",", "wnPairs"}], "}"}]}], "]"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Range", "[", "reflectionGroups", "]"}]}], 
        "\[IndentingNewLine]", "}"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "If", " ", "we", " ", "only", " ", "have", " ", "one", " ", "wall", " ",
        "Normal"}], ",", " ", 
      RowBox[{
      "we", " ", "simply", " ", "do", " ", "closest", " ", "lines", " ", 
       "with", " ", "that", " ", "one", " ", "wall"}]}], " ", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"largestReflectionGroupIndex", ",", "relevantMeasurements"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"largestReflectionGroupIndex", "=", 
        RowBox[{
         RowBox[{"MaximalBy", "[", 
          RowBox[{
           RowBox[{"Range", "[", 
            RowBox[{"Length", "[", "reflectionGroups", "]"}], "]"}], ",", 
           RowBox[{
            RowBox[{"Length", "[", 
             RowBox[{"reflectionGroups", "[", 
              RowBox[{"[", "#", "]"}], "]"}], "]"}], "&"}]}], "]"}], "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"relevantMeasurements", "=", 
        RowBox[{"measurements", "[", 
         RowBox[{"[", 
          RowBox[{"reflectionGroups", "[", 
           RowBox[{"[", "largestReflectionGroupIndex", "]"}], "]"}], "]"}], 
         "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
              RowBox[{"ComputeSenderPosition", "[", 
               RowBox[{"measurement", ",", 
                RowBox[{"wallNormalVectors", "[", 
                 RowBox[{"[", "largestReflectionGroupIndex", "]"}], "]"}], 
                ",", "algorithm"}], "]"}], "+", "receiverPosition"}], ",", 
             RowBox[{"measurement", "[", 
              RowBox[{"[", "5", "]"}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"measurement", ",", "relevantMeasurements"}], "}"}]}], 
          "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", "largestReflectionGroupIndex", "}"}]}], "}"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",\

 CellChangeTimes->{{3.8703246089158363`*^9, 3.870324770340332*^9}, 
   3.870325163289851*^9},
 CellLabel->
  "In[128]:=",ExpressionUUID->"74acdc54-b67c-40f8-9fc4-34ac7dd9229d"]
}, Closed]],

Cell[CellGroupData[{

Cell["Weighted Average (Wall Distance)", "Subsubsection",
 CellChangeTimes->{{3.870325204690576*^9, 3.870325207520842*^9}, {
  3.870332765667119*^9, 
  3.870332773677125*^9}},ExpressionUUID->"3cb7d46f-8986-4bf5-8322-\
999a4cadbff9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderPositionsWeightedAverageWallDistance", "[", 
   RowBox[{
   "measurements_", ",", "reflectionGroups_", ",", "wallNormalVectors_", ",", 
    "algorithm_", ",", "receiverPosition_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "senderPositionsWithDirectSignalReference", ",", 
      "averageSenderPositions", ",", "wallNormalVectorLengthSum"}], "}"}], 
    ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
     "senderPositionsWithDirectSignalReference", "=", "\[IndentingNewLine]", 
      RowBox[{"Flatten", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Table", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Table", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{
               RowBox[{"ComputeSenderPosition", "[", 
                RowBox[{"measurement", ",", 
                 RowBox[{"wallNormalVectors", "[", 
                  RowBox[{"[", "reflectionGroupIndex", "]"}], "]"}], ",", 
                 "algorithm"}], "]"}], "+", "receiverPosition"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"measurement", "[", 
               RowBox[{"[", "5", "]"}], "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{"measurement", "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", "\[IndentingNewLine]", 
              "reflectionGroupIndex"}], "\[IndentingNewLine]", "}"}], 
            "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{"measurement", ",", 
              RowBox[{"measurements", "[", 
               RowBox[{"[", 
                RowBox[{"reflectionGroups", "[", 
                 RowBox[{"[", "reflectionGroupIndex", "]"}], "]"}], "]"}], 
               "]"}]}], "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
          RowBox[{"{", 
           RowBox[{"reflectionGroupIndex", ",", 
            RowBox[{"Length", "[", "reflectionGroups", "]"}]}], "}"}]}], 
         "]"}], "\[IndentingNewLine]", ",", "1"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"senderPositionsWithDirectSignalReference", "=", 
      RowBox[{"GatherBy", "[", 
       RowBox[{"senderPositionsWithDirectSignalReference", ",", 
        RowBox[{
         RowBox[{"#", "[", 
          RowBox[{"[", "3", "]"}], "]"}], "&"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Check", " ", "if", " ", "the", " ", "direct", " ", "signal", " ", 
       "and", " ", "actual", " ", "sender", " ", "position", " ", "are", " ", 
       "the", " ", "same", " ", "in", " ", "each", " ", "group"}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Assert", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"position", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "==", 
            RowBox[{
             RowBox[{"positionGroup", "[", 
              RowBox[{"[", "1", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "\[And]", 
           RowBox[{
            RowBox[{"position", "[", 
             RowBox[{"[", "3", "]"}], "]"}], "==", 
            RowBox[{
             RowBox[{"positionGroup", "[", 
              RowBox[{"[", "1", "]"}], "]"}], "[", 
             RowBox[{"[", "3", "]"}], "]"}]}]}], "]"}], "\[IndentingNewLine]",
          ",", 
         RowBox[{"{", 
          RowBox[{"position", ",", "positionGroup"}], "}"}]}], "]"}], 
       "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{
        "positionGroup", ",", "senderPositionsWithDirectSignalReference"}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Compute", " ", "the", " ", "combined", " ", "Length", " ", "of", " ", 
       "all", " ", "wall", " ", "normal", " ", "vectors"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"wallNormalVectorLengthSum", "=", 
      RowBox[{"Total", "[", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"Norm", "[", "normalVector", "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"normalVector", ",", "wallNormalVectors"}], "}"}]}], "]"}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Now", " ", "group", " ", "the", " ", "computed", " ", "directions", 
       " ", "by", " ", "the", " ", "direct", " ", "signal"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"averageSenderPositions", "=", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          FractionBox[
           RowBox[{"Total", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"position", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "*", 
               RowBox[{"Norm", "[", 
                RowBox[{"wallNormalVectors", "[", 
                 RowBox[{"[", 
                  RowBox[{"position", "[", 
                   RowBox[{"[", "4", "]"}], "]"}], "]"}], "]"}], "]"}]}], ",", 
              RowBox[{"{", 
               RowBox[{"position", ",", "positionGroup"}], "}"}]}], "]"}], 
            "]"}], 
           RowBox[{"Length", "[", "positionGroup", "]"}]], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"positionGroup", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], " ", 
         RowBox[{"(*", " ", 
          RowBox[{
          "The", " ", "actual", " ", "position", " ", "is", " ", "the", " ", 
           "same", " ", "for", " ", "each", " ", "group"}], " ", "*)"}], 
         "\[IndentingNewLine]", "}"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{
         "positionGroup", ",", "senderPositionsWithDirectSignalReference"}], 
         "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"averageSenderPositions", ",", 
       RowBox[{"Range", "[", "reflectionGroups", "]"}]}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.870332779728722*^9, 3.870332784998762*^9}, {
   3.8703330090482893`*^9, 3.870333077523407*^9}, {3.8703331106324787`*^9, 
   3.8703331359727507`*^9}, {3.870333181315147*^9, 3.870333219500763*^9}, {
   3.870333255082169*^9, 3.8703332806825027`*^9}, {3.870336433888494*^9, 
   3.8703364426977158`*^9}, 3.870336794833064*^9},
 CellLabel->
  "In[129]:=",ExpressionUUID->"31cb75e0-c594-4e78-afb3-0ae54b1e9527"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Narrowest Wall", "Subsubsection",
 CellChangeTimes->{{3.870333978111258*^9, 
  3.870333982042345*^9}},ExpressionUUID->"f8ec90b4-95d5-44f3-b0ce-\
e88e851728e8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderPositionsNarrowestWall", "[", 
   RowBox[{
   "measurements_", ",", "reflectionGroups_", ",", "wallNormalVectors_", ",", 
    "algorithm_", ",", "receiverPosition_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "narrowestReflectionGroupIndex", ",", "normalReflectionDistances", ",", 
      "relevantMeasurements"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"largestReflectionGroupIndex", "=", 
       RowBox[{
        RowBox[{"MaximalBy", "[", 
         RowBox[{
          RowBox[{"Range", "[", 
           RowBox[{"Length", "[", "reflectionGroups", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{"Length", "[", 
            RowBox[{"reflectionGroups", "[", 
             RowBox[{"[", "#", "]"}], "]"}], "]"}], "&"}]}], "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"normalReflectionDistances", "=", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"currentNormal", "=", 
            RowBox[{"Normalize", "[", 
             RowBox[{"wallNormalVectors", "[", 
              RowBox[{"[", "reflectionGroupIndex", "]"}], "]"}], "]"}]}], 
           "}"}], ",", "\[IndentingNewLine]", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{"reflectionGroupIndex", ",", "\[IndentingNewLine]", 
            RowBox[{"Mean", "[", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"currentNormal", ",", 
                 RowBox[{
                  RowBox[{"measurements", "[", 
                   RowBox[{"[", "measurementIndex", "]"}], "]"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}], "]"}], ",", 
               RowBox[{"{", 
                RowBox[{"measurementIndex", ",", 
                 RowBox[{"reflectionGroups", "[", 
                  RowBox[{"[", "reflectionGroupIndex", "]"}], "]"}]}], 
                "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", "}"}]}], 
         "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"reflectionGroupIndex", ",", 
          RowBox[{"Length", "[", "reflectionGroups", "]"}]}], "}"}]}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"narrowestReflectionGroupIndex", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"MinimalBy", "[", 
         RowBox[{"normalReflectionDistances", ",", 
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "&"}]}], "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}], "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"relevantMeasurements", "=", 
      RowBox[{"measurements", "[", 
       RowBox[{"[", 
        RowBox[{"reflectionGroups", "[", 
         RowBox[{"[", "narrowestReflectionGroupIndex", "]"}], "]"}], "]"}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"ComputeSenderPosition", "[", 
             RowBox[{"measurement", ",", 
              RowBox[{"wallNormalVectors", "[", 
               RowBox[{"[", "narrowestReflectionGroupIndex", "]"}], "]"}], 
              ",", "algorithm"}], "]"}], "+", "receiverPosition"}], ",", 
           RowBox[{"measurement", "[", 
            RowBox[{"[", "5", "]"}], "]"}]}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"measurement", ",", "relevantMeasurements"}], "}"}]}], 
        "]"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", "narrowestReflectionGroupIndex", "}"}]}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.870333994644557*^9, 3.870334035920026*^9}, {
  3.8703340693567543`*^9, 3.870334103824018*^9}, {3.870334139903554*^9, 
  3.870334380788869*^9}, {3.870334453971415*^9, 3.8703344629595137`*^9}, {
  3.8703345355105467`*^9, 3.870334566191085*^9}, {3.8703347635796223`*^9, 
  3.870334764467368*^9}},
 CellLabel->
  "In[130]:=",ExpressionUUID->"ef91efcd-ada4-46de-bb2b-422b3f6c7329"]
}, Closed]],

Cell[CellGroupData[{

Cell["Main Function", "Subsubsection",
 CellChangeTimes->{{3.870324588876527*^9, 3.870324591786488*^9}, 
   3.870333927659144*^9},ExpressionUUID->"76e634ba-9c41-4490-a860-\
878871bccf70"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeSenderPositionsFromSelectedWalls", "[", 
   RowBox[{
   "measurements_", ",", "reflectionGroups_", ",", "wallNormalVectors_", ",", 
    "algorithm_", ",", "receiverPosition_", ",", 
    RowBox[{"reflectionSelectionMethod_", ":", "\"\<Most Reflections\>\""}]}],
    "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Switch", "[", 
   RowBox[{
   "reflectionSelectionMethod", ",", "\[IndentingNewLine]", 
    "\"\<Most Reflections\>\"", ",", 
    RowBox[{"(*", " ", 
     RowBox[{
     "select", " ", "the", " ", "largest", " ", "reflection", " ", "group"}], 
     " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"ComputeSenderPositionsMostReflections", "[", 
     RowBox[{
     "measurements", ",", "reflectionGroups", ",", "wallNormalVectors", ",", 
      "algorithm", ",", "receiverPosition"}], "]"}], ",", 
    "\[IndentingNewLine]", "\"\<Average Position\>\"", ",", 
    RowBox[{"(*", 
     RowBox[{
     "use", " ", "all", " ", "normal", " ", "vectors", " ", "and", " ", 
      "compute", " ", "the", " ", "average", " ", "position"}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"ComputeSenderPositionsAverage", "[", 
     RowBox[{
     "measurements", ",", "reflectionGroups", ",", "wallNormalVectors", ",", 
      "algorithm", ",", "receiverPosition"}], "]"}], ",", 
    "\[IndentingNewLine]", "\"\<Closest Lines Extended\>\"", ",", 
    RowBox[{"(*", " ", 
     RowBox[{
     "extended", " ", "version", " ", "of", " ", "closest", " ", "lines", " ", 
      RowBox[{"algirhtm", ".", " ", "Can"}], " ", "not", " ", "be", " ", 
      "used", " ", "with", " ", "other", " ", "sender", " ", "localization", 
      " ", 
      RowBox[{"methods", "."}]}], " ", "*)"}], 
    RowBox[{"ComputeSenderPositionsClosestLinesExtended", "[", 
     RowBox[{
     "measurements", ",", "reflectionGroups", ",", "wallNormalVectors", ",", 
      "algorithm", ",", "receiverPosition"}], "]"}], ",", 
    "\[IndentingNewLine]", "\"\<Weighted Average (Wall Distance)\>\"", ",", 
    "\[IndentingNewLine]", 
    RowBox[{"ComputeSenderPositionsWeightedAverageWallDistance", "[", 
     RowBox[{
     "measurements", ",", "reflectionGroups", ",", "wallNormalVectors", ",", 
      "algorithm", ",", "receiverPosition"}], "]"}], ",", 
    "\[IndentingNewLine]", "\"\<Closest Reflection Group\>\"", ",", 
    "\[IndentingNewLine]", 
    RowBox[{"ComputeSenderPositionsNarrowestWall", "[", 
     RowBox[{
     "measurements", ",", "reflectionGroups", ",", "wallNormalVectors", ",", 
      "algorithm", ",", "receiverPosition"}], "]"}], ",", 
    "\[IndentingNewLine]", "_", ",", 
    RowBox[{
    "Print", "[", 
     "\"\<No valid wall normal vector selection method specified!\>\"", 
     "]"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.865664976915538*^9, 3.865665114221572*^9}, {
   3.865665216231908*^9, 3.8656652180118837`*^9}, {3.865665259096285*^9, 
   3.8656653359992657`*^9}, {3.8656653771430597`*^9, 3.865665433089621*^9}, {
   3.86566546521411*^9, 3.865665555642858*^9}, {3.865665595075838*^9, 
   3.8656656877633247`*^9}, {3.8656657583145857`*^9, 3.865665758763587*^9}, {
   3.8656658185235577`*^9, 3.8656658890945253`*^9}, {3.8656660575636*^9, 
   3.8656661648074703`*^9}, 3.8656662025367613`*^9, {3.865666635269349*^9, 
   3.865666667410581*^9}, {3.865851788275016*^9, 3.865851798181293*^9}, {
   3.865852268467079*^9, 3.865852273700788*^9}, {3.8661042207705803`*^9, 
   3.866104244525852*^9}, 3.8661045908609877`*^9, {3.8661054251419287`*^9, 
   3.866105449119244*^9}, {3.866534092548152*^9, 3.866534139431233*^9}, {
   3.866534214301633*^9, 3.866534276049377*^9}, 3.866534360750257*^9, {
   3.8665346388592157`*^9, 3.8665346735649652`*^9}, {3.866534996972126*^9, 
   3.866534998397649*^9}, {3.866535050236367*^9, 3.866535083680237*^9}, {
   3.866535184578189*^9, 3.866535466362918*^9}, {3.866535617177092*^9, 
   3.8665356200898333`*^9}, {3.866535650435625*^9, 3.8665356509140167`*^9}, {
   3.866689902838213*^9, 3.8666899742972403`*^9}, {3.866690009127783*^9, 
   3.8666900249828987`*^9}, {3.866690057817226*^9, 3.866690074769431*^9}, {
   3.866690177961282*^9, 3.866690346244217*^9}, {3.86669040905399*^9, 
   3.866690712803048*^9}, {3.866690768895421*^9, 3.866690770621043*^9}, {
   3.8666908837852573`*^9, 3.866690894087255*^9}, {3.8688739325815887`*^9, 
   3.868873983249618*^9}, {3.868874034165778*^9, 3.868874071427918*^9}, {
   3.8688743565729647`*^9, 3.8688744786762*^9}, {3.868874532201263*^9, 
   3.8688745460566883`*^9}, {3.868874594011435*^9, 3.868874601094884*^9}, 
   3.8688746915842733`*^9, {3.8688747549557056`*^9, 3.868874793106612*^9}, {
   3.868874862340127*^9, 3.868874882266114*^9}, {3.868876452357504*^9, 
   3.868876669751906*^9}, {3.868876717047638*^9, 3.868876871844692*^9}, {
   3.868876926434968*^9, 3.868876974644415*^9}, {3.868877017621167*^9, 
   3.868877035782069*^9}, {3.8688770891766233`*^9, 3.868877511401145*^9}, {
   3.868877558494712*^9, 3.868877697447757*^9}, {3.868877753757759*^9, 
   3.86887775439054*^9}, {3.8688778045642567`*^9, 3.86887792116495*^9}, {
   3.868878022276724*^9, 3.868878058250849*^9}, {3.868878103947742*^9, 
   3.868878198163803*^9}, {3.868878318602404*^9, 3.8688783327384853`*^9}, {
   3.868878369792255*^9, 3.868878467048729*^9}, {3.868878514506483*^9, 
   3.8688785739902887`*^9}, {3.86887860418371*^9, 3.8688786094745207`*^9}, {
   3.868878647711233*^9, 3.868878660978814*^9}, {3.868878699330441*^9, 
   3.868878750619347*^9}, {3.868878781940179*^9, 3.868878837243402*^9}, {
   3.8688792117788153`*^9, 3.868879246391522*^9}, {3.868879722904016*^9, 
   3.86887978135286*^9}, {3.86887989998462*^9, 3.868879937401909*^9}, 
   3.86888028169643*^9, {3.868933382248506*^9, 3.868933421680848*^9}, {
   3.8689335137605457`*^9, 3.868933546382677*^9}, {3.86893385422911*^9, 
   3.868933866282977*^9}, {3.8689339243225307`*^9, 3.8689339524644127`*^9}, {
   3.8689340149191027`*^9, 3.868934027176558*^9}, {3.868934095497136*^9, 
   3.8689341419742317`*^9}, {3.8689341761320887`*^9, 3.868934222301173*^9}, {
   3.8689342834877653`*^9, 3.868934314909617*^9}, {3.868934348143546*^9, 
   3.868934359782674*^9}, {3.86893440332613*^9, 3.868934405367557*^9}, {
   3.86893452818292*^9, 3.868934531701612*^9}, {3.868934570300879*^9, 
   3.868934572458145*^9}, {3.870247951967478*^9, 3.870247952279482*^9}, {
   3.870248191448955*^9, 3.8702482157948017`*^9}, {3.870248620295774*^9, 
   3.870248639686755*^9}, {3.870249882653923*^9, 3.870249882893125*^9}, {
   3.870250107694438*^9, 3.8702501229749603`*^9}, 3.870252336399472*^9, 
   3.870324602809057*^9, {3.870324683287201*^9, 3.870324807891651*^9}, {
   3.870325216907655*^9, 3.870325226721839*^9}, {3.870332788491563*^9, 
   3.870332795700261*^9}, {3.870334387596634*^9, 3.870334404557664*^9}, 
   3.8703361816715813`*^9, {3.870336303322452*^9, 3.870336339860067*^9}, {
   3.870336379902298*^9, 3.870336406877768*^9}, {3.8703364457815228`*^9, 
   3.870336449186017*^9}, {3.8703365053399343`*^9, 3.870336535895172*^9}, {
   3.87033657290189*^9, 3.870336637419546*^9}, {3.870336768669092*^9, 
   3.870336770489579*^9}},
 CellLabel->
  "In[131]:=",ExpressionUUID->"eacfc463-dfde-4e24-9db2-a62006cb77db"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Visualization (Testing)", "Subsection",
 CellChangeTimes->{{3.86514023422255*^9, 3.865140236953063*^9}, {
  3.865148522957988*^9, 
  3.8651485252172413`*^9}},ExpressionUUID->"8314a4a5-4460-4583-8c68-\
7985b7931d2b"],

Cell["Example to visualize all sender localization algorithms", "Text",
 CellChangeTimes->{{3.8651402410459013`*^9, 
  3.86514025543346*^9}},ExpressionUUID->"188e08ae-f6ff-41c0-9275-\
12979dc33d4c"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"testroom", "=", 
       RowBox[{"Take", "[", 
        RowBox[{"cubeRoom", ",", 
         RowBox[{"{", 
          RowBox[{"9", ",", "10"}], "}"}]}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"receiverPosition", "=", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"-", "1"}], ",", "0"}], "}"}]}], ",", "\[IndentingNewLine]", 
      
      RowBox[{"senderPosition", "=", 
       RowBox[{"{", 
        RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], ",", 
      "\[IndentingNewLine]", "measurement", ",", "\[IndentingNewLine]", 
      RowBox[{"wallNormalVector", "=", 
       RowBox[{"{", 
        RowBox[{"0", ",", "2", ",", "0"}], "}"}]}]}], "\[IndentingNewLine]", 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"measurement", "=", 
      RowBox[{
       RowBox[{"SimulateExperiment", "[", 
        RowBox[{"testroom", ",", "receiverPosition", ",", 
         RowBox[{"{", "senderPosition", "}"}]}], "]"}], "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Print", "[", "measurement", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"ComputeSenderPosition", "[", 
       RowBox[{
       "measurement", ",", "wallNormalVector", ",", 
        "\"\<Wall Direction\>\""}], "]"}], "]"}], ";", "\[IndentingNewLine]", 
     
     RowBox[{"Print", "[", 
      RowBox[{"ComputeSenderPosition", "[", 
       RowBox[{
       "measurement", ",", "wallNormalVector", ",", 
        "\"\<Map to Normal Vector\>\""}], "]"}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"ComputeSenderPosition", "[", 
       RowBox[{
       "measurement", ",", "wallNormalVector", ",", 
        "\"\<Reflection Geometry\>\""}], "]"}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"ComputeSenderPosition", "[", 
       RowBox[{
       "measurement", ",", "wallNormalVector", ",", "\"\<Closest Lines\>\""}],
        "]"}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"CellPrint", "[", 
      RowBox[{"Graphics3D", "[", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Triangle", "/@", "testroom"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"Red", ",", 
           RowBox[{"Point", "[", "receiverPosition", "]"}]}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"Blue", ",", 
           RowBox[{"Point", "[", "senderPosition", "]"}]}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Arrow", "[", 
          RowBox[{"{", 
           RowBox[{"receiverPosition", ",", 
            RowBox[{"receiverPosition", "+", 
             RowBox[{"measurement", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], "]"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Arrow", "[", 
          RowBox[{"{", 
           RowBox[{"receiverPosition", ",", 
            RowBox[{"receiverPosition", "+", 
             RowBox[{"measurement", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "]"}]}], 
        "\[IndentingNewLine]", "}"}], "]"}], "]"}], ";"}]}], 
   "\[IndentingNewLine]", "]"}], "*)"}]], "Input",
 CellChangeTimes->{{3.8651402784669313`*^9, 3.865140328517323*^9}, {
   3.865140378985828*^9, 3.8651404684815617`*^9}, {3.8651409727745256`*^9, 
   3.865141094440518*^9}, {3.8651412934794683`*^9, 3.865141297007979*^9}, {
   3.8651416151234903`*^9, 3.865141616822266*^9}, 3.865141670196224*^9, {
   3.865141871120175*^9, 3.86514189926748*^9}, {3.865141962921681*^9, 
   3.865142002335429*^9}, {3.865142075013681*^9, 3.8651420874387283`*^9}, {
   3.8651421234213753`*^9, 3.865142270392057*^9}, {3.865142312882923*^9, 
   3.865142326796363*^9}, {3.865147528091732*^9, 3.865147552538744*^9}, {
   3.865147945123439*^9, 3.865147947047867*^9}, {3.865148015115864*^9, 
   3.865148032184359*^9}, {3.865148065668048*^9, 3.865148185767625*^9}, {
   3.8651483311783113`*^9, 3.8651483556203203`*^9}, {3.865148402090152*^9, 
   3.865148437434349*^9}, 3.865148511306308*^9, {3.865664718252357*^9, 
   3.865664720372854*^9}, {3.866103035184124*^9, 3.86610306431761*^9}},
 CellLabel->
  "In[132]:=",ExpressionUUID->"3cfabb11-9bd2-46c3-ad71-3757091cc3ee"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Functions for running experiments", "Section",
 CellChangeTimes->{{3.86514854409791*^9, 3.8651486041542788`*^9}, {
  3.873349320868804*^9, 
  3.8733493270587587`*^9}},ExpressionUUID->"679a2c70-9cc2-40cb-a2a2-\
53ddce08dc04"],

Cell[CellGroupData[{

Cell["Helper Functions for Visualization", "Subsection",
 CellChangeTimes->{{3.8652277975454473`*^9, 
  3.8652278048545*^9}},ExpressionUUID->"3707aa71-8912-405e-96af-89e27fed3db3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Sometimes", " ", "in", " ", "visualizations"}], ",", " ", 
    RowBox[{
    "we", " ", "need", " ", "different", " ", "colors", " ", "for", " ", 
     "different", " ", "elements", " ", "of", " ", "a", " ", "list"}]}], " ", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"GetColorFromIndex", "[", 
    RowBox[{"index_", ",", 
     RowBox[{"indexRange_", ":", "1"}]}], "]"}], ":=", "\[IndentingNewLine]", 
   
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"indexRange", ">", "1"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Hue", "[", 
      FractionBox["index", "indexRange"], "]"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Hue", "[", 
      RowBox[{
       RowBox[{"Mod", "[", 
        RowBox[{"index", ",", "20"}], "]"}], "/", "20"}], "]"}]}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.865227962316451*^9, 3.8652279951306667`*^9}, {
  3.86522806796665*^9, 3.8652280712086697`*^9}, {3.865228123596044*^9, 
  3.865228380298403*^9}, {3.865228579163827*^9, 3.8652285964574757`*^9}, {
  3.865228627732057*^9, 3.865228681273518*^9}, {3.8652287392766027`*^9, 
  3.865228889455119*^9}, {3.8652289317132263`*^9, 3.865228938048759*^9}, {
  3.8653105879270773`*^9, 3.865310651703841*^9}},
 CellLabel->
  "In[133]:=",ExpressionUUID->"15009fb9-0ab9-4ac4-ac50-86bab96101fc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"VisualizeCurrentExperiment", "[", "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"(", "\[IndentingNewLine]", 
   RowBox[{"Panel", "[", 
    RowBox[{"Row", "[", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Visualize", " ", "experiment", " ", "setup"}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Manipulate", "[", 
        RowBox[{
         RowBox[{"Graphics3D", "[", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Opacity", "[", "0.25", "]"}], ",", 
              RowBox[{"Triangle", "/@", 
               RowBox[{"roomSelection", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Blue", ",", 
              RowBox[{"PointSize", "[", "Large", "]"}], ",", 
              RowBox[{"Point", "[", "receiverPosition", "]"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Red", ",", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"Point", "[", "senderPosition", "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"senderPosition", ",", "senderPositions"}], "}"}]}], 
               "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Orange", ",", 
              RowBox[{"If", "[", 
               RowBox[{"showReflections", ",", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Arrow", "[", 
                   RowBox[{"{", 
                    RowBox[{"{", 
                    RowBox[{"receiverPosition", ",", 
                    RowBox[{
                    RowBox[{"measurement", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "+", 
                    "receiverPosition"}]}], "}"}], "}"}], "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"measurement", ",", "measurements"}], "}"}]}], 
                 "]"}], "\[IndentingNewLine]", ",", 
                RowBox[{"{", "}"}]}], "]"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Green", ",", 
              RowBox[{"If", "[", 
               RowBox[{"showDirectSignals", ",", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Arrow", "[", 
                   RowBox[{"{", 
                    RowBox[{"{", 
                    RowBox[{"receiverPosition", ",", 
                    RowBox[{
                    RowBox[{"measurement", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "+", 
                    "receiverPosition"}]}], "}"}], "}"}], "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"measurement", ",", "measurements"}], "}"}]}], 
                 "]"}], "\[IndentingNewLine]", ",", 
                RowBox[{"{", "}"}]}], "]"}]}], "}"}]}], "\[IndentingNewLine]",
            "}"}], "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"showReflections", ",", "False"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"True", ",", "False"}], "}"}]}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"showDirectSignals", ",", "False"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"True", ",", "False"}], "}"}]}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"FrameLabel", "->", 
          RowBox[{"{", 
           RowBox[{
           "None", ",", "None", ",", "\"\<Experiment Visualization\>\""}], 
           "}"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"Visualize", " ", "reflection", " ", "groups"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"Manipulate", "[", 
        RowBox[{
         RowBox[{"Graphics3D", "[", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Opacity", "[", "0.25", "]"}], ",", 
              RowBox[{"Triangle", "/@", 
               RowBox[{"roomSelection", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Blue", ",", 
              RowBox[{"PointSize", "[", "Large", "]"}], ",", 
              RowBox[{"Point", "[", "receiverPosition", "]"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Red", ",", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"Point", "[", "senderPosition", "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"senderPosition", ",", "senderPositions"}], "}"}]}], 
               "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{"showAllGroupsReflections", ",", "\[IndentingNewLine]", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"GetColorFromIndex", "[", 
                   RowBox[{"reflectionGroupIndex", ",", 
                    RowBox[{"Length", "[", "reflectionGroups", "]"}]}], "]"}],
                   ",", 
                  RowBox[{"Table", "[", 
                   RowBox[{
                    RowBox[{"Arrow", "[", 
                    RowBox[{"{", 
                    RowBox[{"receiverPosition", ",", 
                    RowBox[{"receiverPosition", "+", 
                    RowBox[{
                    RowBox[{"measurements", "[", 
                    RowBox[{"[", "reflection", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"reflection", ",", 
                    RowBox[{"reflectionGroups", "[", 
                    RowBox[{"[", "reflectionGroupIndex", "]"}], "]"}]}], 
                    "}"}]}], "]"}]}], "}"}], ",", 
                RowBox[{"{", 
                 RowBox[{"reflectionGroupIndex", ",", 
                  RowBox[{"Length", "[", "reflectionGroups", "]"}]}], "}"}]}],
                "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"Arrow", "[", 
                 RowBox[{"{", 
                  RowBox[{"receiverPosition", ",", 
                   RowBox[{"receiverPosition", "+", 
                    RowBox[{
                    RowBox[{"measurements", "[", 
                    RowBox[{"[", "measurement", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"measurement", ",", 
                  RowBox[{"reflectionGroups", "[", 
                   RowBox[{"[", "groupToShow", "]"}], "]"}]}], "}"}]}], 
               "]"}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]",
            "}"}], "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"showAllGroupsReflections", ",", "False"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"True", ",", "False"}], "}"}]}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"groupToShow", ",", "1", ",", 
           RowBox[{"Length", "[", "reflectionGroups", "]"}], ",", "1", ",", 
           RowBox[{"ControlType", "\[Rule]", "SetterBar"}]}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"FrameLabel", "->", 
          RowBox[{"{", 
           RowBox[{"None", ",", "None", ",", 
            RowBox[{"StringForm", "[", 
             RowBox[{"\"\<Number of reflection groups: ``\>\"", ",", 
              RowBox[{"Length", "[", "reflectionGroups", "]"}]}], "]"}]}], 
           "}"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"Visualize", " ", "wall", " ", "normal", " ", "vectors"}], 
        " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{"Manipulate", "[", 
        RowBox[{
         RowBox[{"Graphics3D", "[", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Opacity", "[", "0.25", "]"}], ",", 
              RowBox[{"Triangle", "/@", 
               RowBox[{"roomSelection", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Blue", ",", 
              RowBox[{"PointSize", "[", "Large", "]"}], ",", 
              RowBox[{"Point", "[", "receiverPosition", "]"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"Arrow", "[", 
               RowBox[{"{", 
                RowBox[{"receiverPosition", ",", 
                 RowBox[{"receiverPosition", "+", "wallNormalVector"}]}], 
                "}"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"wallNormalVector", ",", "wallNormalVectors"}], 
               "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}], "]"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"FrameLabel", "->", 
          RowBox[{"{", 
           RowBox[{
           "None", ",", "None", ",", "\"\<Computed Wall Normal Vectors\>\""}],
            "}"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
         RowBox[{"In", " ", "case", " ", "of", " ", "closest", " ", "lines"}],
          ",", " ", 
         RowBox[{"visualize", " ", "the", " ", "lines"}]}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"localizationAlgorithm", "==", "\"\<Closest Lines\>\""}], 
          "\[And]", 
          RowBox[{
          "normalSelectionMethod", "==", "\"\<Most Reflections\>\""}]}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Manipulate", "[", 
          RowBox[{
           RowBox[{"Graphics3D", "[", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Opacity", "[", "0.01", "]"}], ",", 
                RowBox[{"Triangle", "/@", 
                 RowBox[{"roomSelection", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{"Blue", ",", 
                RowBox[{"PointSize", "[", "Large", "]"}], ",", 
                RowBox[{"Point", "[", "receiverPosition", "]"}]}], "}"}], ",",
               "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Opacity", "[", "0.2", "]"}], ",", "Red", ",", 
                RowBox[{"PointSize", "[", "Large", "]"}], ",", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Point", "[", "senderPosition", "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"senderPosition", ",", "senderPositions"}], 
                   "}"}]}], "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Opacity", "[", "1", "]"}], ",", "Green", ",", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Point", "[", 
                   RowBox[{"senderPosition", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"senderPosition", ",", "computedSenderPositions"}],
                    "}"}]}], "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Opacity", "[", "0.5", "]"}], ",", "Green", ",", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Line", "[", "senderPosition", "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"senderPosition", ",", "computedSenderPositions"}],
                    "}"}]}], "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{"Orange", ",", 
                RowBox[{"Flatten", "[", 
                 RowBox[{"Table", "[", 
                  RowBox[{
                   RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"InfiniteLine", "[", 
                    RowBox[{"receiverPosition", ",", 
                    RowBox[{"measurement", "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"measurement", ",", 
                    RowBox[{"measurements", "[", 
                    RowBox[{"[", 
                    RowBox[{"reflectionGroups", "[", 
                    RowBox[{"[", "wallNormal", "]"}], "]"}], "]"}], "]"}]}], 
                    "}"}]}], "]"}], ",", 
                   RowBox[{"{", 
                    RowBox[{"wallNormal", ",", "selectedWallNormals"}], 
                    "}"}]}], "]"}], "]"}]}], "}"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{"Cyan", ",", 
                RowBox[{"Flatten", "[", 
                 RowBox[{"Table", "[", 
                  RowBox[{
                   RowBox[{"Table", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Block", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"normalVector", "=", 
                    RowBox[{"wallNormalVectors", "[", 
                    RowBox[{"[", "wallNormal", "]"}], "]"}]}], ",", 
                    RowBox[{"w", "=", 
                    RowBox[{"measurement", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], ",", "n", ",", 
                    "wMirrored"}], "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"n", "=", 
                    RowBox[{"Normalize", "[", "normalVector", "]"}]}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{"wMirrored", "=", 
                    RowBox[{"Normalize", "[", 
                    RowBox[{"w", "-", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"2", "*", 
                    RowBox[{"(", 
                    RowBox[{"w", ".", "n"}], ")"}]}], ")"}], "*", "n"}]}], 
                    "]"}]}], ";", "\[IndentingNewLine]", 
                    RowBox[{"InfiniteLine", "[", 
                    RowBox[{
                    RowBox[{"receiverPosition", "+", 
                    RowBox[{"(", 
                    RowBox[{"2", "*", "normalVector"}], ")"}]}], ",", 
                    "wMirrored"}], "]"}]}]}], "\[IndentingNewLine]", "]"}], 
                    "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{"measurement", ",", 
                    RowBox[{"measurements", "[", 
                    RowBox[{"[", 
                    RowBox[{"reflectionGroups", "[", 
                    RowBox[{"[", "wallNormal", "]"}], "]"}], "]"}], "]"}]}], 
                    "}"}]}], "]"}], ",", 
                   RowBox[{"{", 
                    RowBox[{"wallNormal", ",", "selectedWallNormals"}], 
                    "}"}]}], "]"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", 
             "}"}], "]"}], ",", "\[IndentingNewLine]", 
           RowBox[{"FrameLabel", "->", 
            RowBox[{"{", 
             RowBox[{
             "None", ",", "None", ",", 
              "\"\<Lines from closest Lines and computed sender \
positions\>\""}], "}"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
          "Visualize", " ", "computed", " ", "Sender", " ", "Positions"}], 
          " ", "*)"}], "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Visualize", " ", "wall", " ", "normal", " ", "vectors"}], 
          " ", "*)"}], "\[IndentingNewLine]", 
         RowBox[{"Manipulate", "[", 
          RowBox[{
           RowBox[{"Graphics3D", "[", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Opacity", "[", "0.25", "]"}], ",", 
                RowBox[{"Triangle", "/@", 
                 RowBox[{"roomSelection", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{"Blue", ",", 
                RowBox[{"PointSize", "[", "Large", "]"}], ",", 
                RowBox[{"Point", "[", "receiverPosition", "]"}]}], "}"}], ",",
               "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Opacity", "[", "0.2", "]"}], ",", "Red", ",", 
                RowBox[{"PointSize", "[", "Large", "]"}], ",", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Point", "[", "senderPosition", "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"senderPosition", ",", "senderPositions"}], 
                   "}"}]}], "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Opacity", "[", "1", "]"}], ",", "Green", ",", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Point", "[", 
                   RowBox[{"senderPosition", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"senderPosition", ",", "computedSenderPositions"}],
                    "}"}]}], "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Opacity", "[", "0.5", "]"}], ",", "Green", ",", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Line", "[", "senderPosition", "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"senderPosition", ",", "computedSenderPositions"}],
                    "}"}]}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], 
            "]"}], ",", "\[IndentingNewLine]", 
           RowBox[{"FrameLabel", "->", 
            RowBox[{"{", 
             RowBox[{
             "None", ",", "None", ",", "\"\<Computed Sender Positions\>\""}], 
             "}"}]}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]",
         "]"}]}], "\[IndentingNewLine]", "}"}], "]"}], "]"}], 
   "\[IndentingNewLine]", ")"}]}]], "Input",
 CellChangeTimes->{{3.865227962316451*^9, 3.8652279951306667`*^9}, {
   3.86522806796665*^9, 3.8652280712086697`*^9}, {3.865228123596044*^9, 
   3.865228380298403*^9}, {3.865228579163827*^9, 3.8652285964574757`*^9}, {
   3.865228627732057*^9, 3.865228681273518*^9}, {3.8652287392766027`*^9, 
   3.865228889455119*^9}, {3.8652289317132263`*^9, 3.865228938048759*^9}, {
   3.8653105879270773`*^9, 3.865310651703841*^9}, {3.865311563601465*^9, 
   3.86531156578624*^9}, {3.865311596485758*^9, 3.865311601857243*^9}, {
   3.865311964822239*^9, 3.865311965809018*^9}, {3.865312807309888*^9, 
   3.8653129205359898`*^9}, {3.8656647380427113`*^9, 3.865664783909417*^9}, {
   3.865664839425173*^9, 3.865664870617907*^9}, {3.8656663854288607`*^9, 
   3.865666394150414*^9}, {3.865666435975053*^9, 3.86566647380135*^9}, {
   3.866104168229094*^9, 3.86610417952096*^9}, {3.866104500157111*^9, 
   3.866104560183687*^9}, {3.8661047116081247`*^9, 3.866104816365965*^9}, {
   3.8661053709190607`*^9, 3.866105395614079*^9}, {3.8661061560761137`*^9, 
   3.866106159772345*^9}, {3.8661061918199883`*^9, 3.866106192374495*^9}, {
   3.866106241578061*^9, 3.866106297060506*^9}, 3.866106388864655*^9, {
   3.866106425882358*^9, 3.866106456173902*^9}, {3.86610765758671*^9, 
   3.866107711758136*^9}, {3.866107757150839*^9, 3.866107779925712*^9}, {
   3.866108247344837*^9, 3.8661084360687323`*^9}, {3.866108474174341*^9, 
   3.8661084782768908`*^9}, {3.8661085140847807`*^9, 
   3.8661087337319717`*^9}, {3.866108768463523*^9, 3.86610879272563*^9}, {
   3.8661089730930223`*^9, 3.866108973297901*^9}, {3.866109028317687*^9, 
   3.8661090839164543`*^9}, {3.8661091297414627`*^9, 3.866109139881996*^9}, {
   3.866109233523696*^9, 3.866109234155476*^9}, {3.86610929147777*^9, 
   3.866109292500766*^9}, {3.8666914319269133`*^9, 3.866691435995138*^9}, {
   3.866694405361928*^9, 3.866694425435149*^9}},
 CellLabel->
  "In[134]:=",ExpressionUUID->"2ce47255-e0ab-45bf-95d8-a31e0e24addb"]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Functions for Running, Visualizing and Comparing single Experiments\
\>", "Subsection",
 CellChangeTimes->{{3.865227811685253*^9, 
  3.865227838920141*^9}},ExpressionUUID->"c77084b6-b7ac-43ad-88e2-\
50f2ad803ab8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"initialize", " ", "global", " ", "variables"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"roomSelection", "=", 
     RowBox[{"{", 
      RowBox[{"cubeRoom", ",", "cubeRoomData"}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"receiverPosition", "=", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"senderPositions", "=", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"measurements", "=", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"reflectionGroups", "=", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"wallNormalVectors", "=", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"computedSenderPositions", "=", 
     RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"numSenders", "=", "20"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"vanMisesConcentration", "=", "131"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"\[CapitalDelta]Error", "=", "0.1"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"directSignalDiscardFactor", "=", "0"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"reflectionDiscardFactor", "=", "0"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"wallErrorFactor", "=", "0"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"clusteringAlgorithm", "=", "\"\<Inversion, Improved\>\""}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"wallNormalAlgorithm", "=", "\"\<All Pairs\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"localizationAlgorithm", "=", "\"\<Wall Direction\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"normalSelectionMethod", "=", "\"\<Most Reflections\>\""}], ";"}],
    "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"linesIntoBinsBinKeepThreshold", "=", "9"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"selectedWallNormals", "=", 
     RowBox[{"{", "}"}]}], ";"}]}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJwd0V1IUwEYxvHjqa1aIJV5IRt9CRp1oVuTXYjNESVZSk6UQdNga2aaWnOu
xBXzFGgEElEgIjT6EEHqoqJRG4hFttbIhbUYzlyfUsyiqChk0v7n4uEHD+/N
y7PZ1mF2iIIgFGSClxfz92kjKVPX50QdlmY3NeCZDasdGNy4vhW9F8faUHP3
uwt1LTVBbCkzT8h9rX8KG3ulaQw9Sczh1SbXbzw1a9yu4340YEB7eqEMw4dy
K3D32Mt6tC2/YsMjr6Yd2HNN24k7pT2y4Qfpbvy6rMqDwyc/eDF+030OK7v3
nkdR7byERSuu38K1Sz9vY2Tgmx9Di5UBLBeT4zjyWAphzD70Fne9zvuDZ/uT
ih0ZNxUmVfhF/SYb08Yfa7AzvlKN1rjUi3+zjH04WlDrw+HCT/ex2HD0Pbbr
NfN4oad5AaunLL/QpVml1Ge8cbpUhTpNfR6KBnELOgzKrXggmm/Hj97YYfT6
nMdxyWk9gZHGkS4c2Lbfjf6ocRDvNZtlJ+eUYZyoECL46F2NroT/Ov7pS+R9
hT5UDA7Jpqvc6yzseudYDiYUnqdZL1ImqS74DGO+/hkxoyWgSqBVW/3weTRl
ch/0yP4HehE65g==
  "],
 CellLabel->
  "In[135]:=",ExpressionUUID->"01dbb6f7-bc9b-4d72-925d-d8a1c8b5aca0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Function", " ", "for", " ", "simulating", " ", "ILDARS"}], ",", 
    " ", 
    RowBox[{
    "using", " ", "the", " ", "previously", " ", "defined", " ", "local", " ",
      "variables"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"SimulateILDARS", "[", "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"senderPositions", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"RandomReal", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"-", "1"}], ",", "1"}], "}"}], "]"}], ",", 
          RowBox[{"RandomReal", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"-", "1"}], ",", "1"}], "}"}], "]"}], ",", 
          RowBox[{"RandomReal", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"-", "1"}], ",", "1"}], "}"}], "]"}]}], "}"}], ",", 
        "numSenders"}], "]"}]}], ";", " ", 
     RowBox[{"(*", " ", 
      RowBox[{
      "ToDo", " ", "room", " ", "dependent", " ", "distribution", " ", "of", 
       " ", "senders"}], " ", "*)"}], " ", "\[IndentingNewLine]", 
     RowBox[{"measurements", "=", 
      RowBox[{"SimulateExperiment", "[", 
       RowBox[{
        RowBox[{"roomSelection", "[", 
         RowBox[{"[", "1", "]"}], "]"}], ",", "receiverPosition", ",", 
        "senderPositions", ",", "vanMisesConcentration", ",", 
        "\[CapitalDelta]Error", ",", "directSignalDiscardFactor", ",", 
        "reflectionDiscardFactor", ",", "wallErrorFactor"}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"UpdateILDARS", "[", "]"}]}], "\[IndentingNewLine]", 
    ")"}]}]}]], "Input",
 CellChangeTimes->{{3.86515208912446*^9, 3.865152174903132*^9}, {
   3.865152235189237*^9, 3.865152296347472*^9}, {3.865152344628874*^9, 
   3.865152365361389*^9}, {3.865152423490614*^9, 3.8651529945442133`*^9}, {
   3.865153034569997*^9, 3.865153149728895*^9}, {3.865153180078292*^9, 
   3.865153278899143*^9}, {3.865153451637527*^9, 3.8651538819957848`*^9}, {
   3.8651539818643084`*^9, 3.865154031437181*^9}, {3.865154104667943*^9, 
   3.865154230552157*^9}, {3.865154324656785*^9, 3.865154350619678*^9}, {
   3.865154457551084*^9, 3.8651544582033987`*^9}, {3.8651545119289293`*^9, 
   3.865154530406728*^9}, {3.8651545671083508`*^9, 3.865154595707745*^9}, {
   3.865154634296056*^9, 3.865154707565797*^9}, {3.865154925094627*^9, 
   3.865154935593514*^9}, {3.8651550074549313`*^9, 3.865155034343235*^9}, {
   3.8651550710002747`*^9, 3.865155140086383*^9}, {3.865155316824687*^9, 
   3.865155504807283*^9}, {3.865155631016664*^9, 3.865155671004776*^9}, {
   3.865155702722157*^9, 3.865155719539061*^9}, {3.865155800276544*^9, 
   3.865156620089033*^9}, {3.8651566659689903`*^9, 3.865156866598469*^9}, {
   3.865157047161085*^9, 3.8651573952879868`*^9}, {3.8651574328814*^9, 
   3.865157483265081*^9}, {3.8651575387753057`*^9, 3.8651576802847233`*^9}, {
   3.865157713859087*^9, 3.865157834690942*^9}, {3.865157904069215*^9, 
   3.865157952194262*^9}, {3.8651581177235518`*^9, 3.865158129294867*^9}, {
   3.8651581889870377`*^9, 3.8651583637228203`*^9}, {3.8651584166715813`*^9, 
   3.8651585064037943`*^9}, {3.865158545420789*^9, 3.865158737610304*^9}, {
   3.86515878101623*^9, 3.865158819455988*^9}, 3.865158855358399*^9, {
   3.865159209150099*^9, 3.8651592450724277`*^9}, {3.865159290964552*^9, 
   3.8651593098583717`*^9}, {3.865159541791498*^9, 3.865159738132184*^9}, {
   3.8651599926626053`*^9, 3.865160054085024*^9}, {3.8651601141285553`*^9, 
   3.865160134249546*^9}, 3.8651602220661287`*^9, {3.8651602657793083`*^9, 
   3.865160309478712*^9}, {3.865160365833892*^9, 3.865160509949144*^9}, {
   3.865161338477867*^9, 3.8651613728529453`*^9}, {3.8651615443815517`*^9, 
   3.86516165039859*^9}, {3.865161715319853*^9, 3.865161866511161*^9}, {
   3.86522649859439*^9, 3.865226501261602*^9}, {3.865226687890333*^9, 
   3.865226705538539*^9}, {3.865226806409895*^9, 3.865226838611677*^9}, {
   3.8652268968322153`*^9, 3.865226957568798*^9}, {3.8652270110666103`*^9, 
   3.865227062708194*^9}, {3.865227095890417*^9, 3.865227096604548*^9}, {
   3.865227141729344*^9, 3.865227251322538*^9}, {3.8652273642861643`*^9, 
   3.8652274383978443`*^9}, {3.865227499248043*^9, 3.8652275204780703`*^9}, {
   3.86522755853871*^9, 3.865227588551145*^9}, {3.865227737752363*^9, 
   3.865227767203936*^9}, {3.865228385193673*^9, 3.865228402410537*^9}, {
   3.865228460022551*^9, 3.8652284633888617`*^9}, 3.865228963433703*^9, {
   3.86522907793047*^9, 3.8652291080716343`*^9}, {3.8652292076954203`*^9, 
   3.8652292311911993`*^9}, {3.865229549577219*^9, 3.865229601292862*^9}, {
   3.8652296570143747`*^9, 3.865229684045949*^9}, {3.865229716952964*^9, 
   3.865229770628633*^9}, {3.865229811133816*^9, 3.86522982132782*^9}, {
   3.865231485608725*^9, 3.8652314857579803`*^9}, {3.865231521618906*^9, 
   3.865231582610909*^9}, {3.865310605872241*^9, 3.865310643713675*^9}, 
   3.8653107160134487`*^9, 3.865310751298976*^9, {3.86531085253625*^9, 
   3.86531102000393*^9}, {3.865311062036592*^9, 3.865311161445178*^9}, {
   3.865311210411686*^9, 3.865311232228772*^9}, {3.865311266420662*^9, 
   3.865311316082938*^9}, {3.865311530416998*^9, 3.8653115728074923`*^9}, {
   3.865311640896123*^9, 3.865311667133058*^9}, {3.865311708873106*^9, 
   3.8653117993971663`*^9}, {3.8653118414475393`*^9, 3.865311846504554*^9}, {
   3.865311882124724*^9, 3.865311900117161*^9}, {3.8653119532881927`*^9, 
   3.865312001572937*^9}, {3.86531205694319*^9, 3.8653120688937883`*^9}, {
   3.865312120229294*^9, 3.8653122056334057`*^9}, {3.865312346342173*^9, 
   3.865312407155645*^9}, {3.865312444323406*^9, 3.865312640820911*^9}, {
   3.865312679217499*^9, 3.865312700806209*^9}, {3.865312770412137*^9, 
   3.865312799024048*^9}, {3.865665698265009*^9, 3.865665736940261*^9}, {
   3.865666676948238*^9, 3.865666680411319*^9}, {3.8658518247356453`*^9, 
   3.8658518251578283`*^9}, {3.866103136259791*^9, 3.866103142081112*^9}, {
   3.866104289370047*^9, 3.8661043406319942`*^9}, 3.8661044922649317`*^9, {
   3.86610546241963*^9, 3.866105462999598*^9}, {3.866105540437726*^9, 
   3.866105572786961*^9}, 3.866534314351956*^9, 3.8665355508157883`*^9, {
   3.866691282308079*^9, 3.8666913216787863`*^9}, {3.866691386583609*^9, 
   3.866691392216567*^9}, {3.866692283912991*^9, 3.866692284222064*^9}, {
   3.8666923510417147`*^9, 3.866692351357613*^9}},
 CellLabel->
  "In[154]:=",ExpressionUUID->"daa57327-482a-4dd9-944e-b1fb02e20c74"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "Function", " ", "for", " ", "updating", " ", "ILDARS", " ", "graphics", 
     " ", "and", " ", "solution"}], ",", " ", 
    RowBox[{"without", " ", "recreating", " ", "the", " ", "measurements"}]}],
    " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"UpdateILDARS", "[", "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"reflectionGroups", "=", 
      RowBox[{"GroupMeasurements", "[", 
       RowBox[{
       "measurements", ",", "clusteringAlgorithm", ",", 
        "linesIntoBinsBinKeepThreshold"}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"wallNormalVectors", "=", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"GetWallNormalVectorFromMeasurentsAndReflectionGroup", "[", 
         RowBox[{
         "measurements", ",", "reflectionGroup", ",", "wallNormalAlgorithm"}],
          "]"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"reflectionGroup", ",", "reflectionGroups"}], "}"}]}], 
       "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"computedSenderPositions", "=", 
      RowBox[{"ComputeSenderPositionsFromSelectedWalls", "[", 
       RowBox[{
       "measurements", ",", "reflectionGroups", ",", "wallNormalVectors", ",",
         "localizationAlgorithm", ",", "receiverPosition", ",", 
        "normalSelectionMethod"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"selectedWallNormals", "=", 
      RowBox[{"computedSenderPositions", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"computedSenderPositions", "=", 
      RowBox[{"computedSenderPositions", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"VisualizeCurrentExperiment", "[", "]"}]}], 
    "\[IndentingNewLine]", ")"}]}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJwdylkowwEAx/H5u6dE8aAttikjDxjZg2OWEKIYYznb/OcKxVxhMQqJJDxI
kauV40VZGklLLamRcxkWOduIXKVhv//Dr0/9+rKlddkkQaPROPbB0Z/A9Ig9
i7DxzpQLYzzlRVDp70HCjQCfatg5vFgDmasvCsirytqAVXHZ29Qv0hhgcZfq
EOp3TFdwSq74gC0XglAeerWWD2U2axzcLfFNgUmLB2IodRqTwvKjQxK2zUQ0
wHhVMuXuuq0VPjlmtMPJ5ptOaJxv6oFpran9kGDUj8Aw19ll6P37tgL3hp41
UP+TpoUJhHkLLuhUengim7iEicd+n7C7z+wcaZfFNdPhI+PUE9oEr16wwejG
gIVGVRf8dhD0QnWQaBpOcm/XYDi/8hrWRjHv4UBbhRVmGvLfoYLp7hJld64j
hg55TLEfJPgEB5J8l2Ao5mpi4WBdSDzcH5tKgvQvUQGUWCRL0LSpppyxSs5Z
Bovw4SnHBMvOyAdo/hM+wnG2ax7bLkcXTakc5JVS6kSU/x6kGXM=
  "],
 CellLabel->
  "In[155]:=",ExpressionUUID->"9bf6ccda-aab8-4af3-943d-02346f2cff2b"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.86515208912446*^9, 3.865152174903132*^9}, {
   3.865152235189237*^9, 3.865152296347472*^9}, {3.865152344628874*^9, 
   3.865152365361389*^9}, {3.865152423490614*^9, 3.8651529945442133`*^9}, {
   3.865153034569997*^9, 3.865153149728895*^9}, {3.865153180078292*^9, 
   3.865153278899143*^9}, {3.865153451637527*^9, 3.8651538819957848`*^9}, {
   3.8651539818643084`*^9, 3.865154031437181*^9}, {3.865154104667943*^9, 
   3.865154230552157*^9}, {3.865154324656785*^9, 3.865154350619678*^9}, {
   3.865154457551084*^9, 3.8651544582033987`*^9}, {3.8651545119289293`*^9, 
   3.865154530406728*^9}, {3.8651545671083508`*^9, 3.865154595707745*^9}, {
   3.865154634296056*^9, 3.865154707565797*^9}, {3.865154925094627*^9, 
   3.865154935593514*^9}, {3.8651550074549313`*^9, 3.865155034343235*^9}, {
   3.8651550710002747`*^9, 3.865155140086383*^9}, {3.865155316824687*^9, 
   3.865155504807283*^9}, {3.865155631016664*^9, 3.865155671004776*^9}, {
   3.865155702722157*^9, 3.865155719539061*^9}, {3.865155800276544*^9, 
   3.865156620089033*^9}, {3.8651566659689903`*^9, 3.865156866598469*^9}, {
   3.865157047161085*^9, 3.8651573952879868`*^9}, {3.8651574328814*^9, 
   3.865157483265081*^9}, {3.8651575387753057`*^9, 3.8651576802847233`*^9}, {
   3.865157713859087*^9, 3.865157834690942*^9}, {3.865157871544243*^9, 
   3.8651578910376787`*^9}, {3.8651581667751293`*^9, 3.865158184894153*^9}, {
   3.8651583559722023`*^9, 3.865158396961755*^9}, {3.865160704206753*^9, 
   3.865160876883889*^9}, {3.865161101534648*^9, 3.865161132758637*^9}, {
   3.8652300812882023`*^9, 3.8652301015087147`*^9}, {3.865231443725559*^9, 
   3.8652314695793*^9}, {3.8656745859737673`*^9, 3.865674587569977*^9}, {
   3.8661033493368797`*^9, 3.866103350393476*^9}, {3.8661033926179457`*^9, 
   3.866103427889926*^9}, {3.866104358760888*^9, 3.866104359029414*^9}, 
   3.866104481588492*^9, 3.866535552651697*^9, {3.8666909080718613`*^9, 
   3.866690913971978*^9}, 3.866691233758451*^9},
 CellLabel->
  "In[156]:=",ExpressionUUID->"50528973-ebb9-4de5-b69a-6165e58756d8"]
}, Closed]],

Cell[CellGroupData[{

Cell["UI for Visually Comparing  Single Experiments", "Subsection",
 CellChangeTimes->{{3.8666912432193823`*^9, 
  3.86669126836789*^9}},ExpressionUUID->"025ded74-ae0d-42cd-8190-\
9780f8dd69d9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "Function", " ", "for", " ", "creating", " ", "UI", " ", "to", " ", "set", 
    " ", "all", " ", "variables"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"CreateILDARSUI", "[", "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"Panel", "[", "\[IndentingNewLine]", 
    RowBox[{"Grid", "[", 
     RowBox[{
      RowBox[{"{", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{",", 
          RowBox[{"Style", "[", 
           RowBox[{"\"\<Experimental Setup\>\"", ",", "Larger", ",", "Bold"}],
            "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
         "\"\<Room Selection\>\"", ",", "\"\<Receiver Position\>\"", ",", 
          "\"\<Number of Senders\>\""}], "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"PopupMenu", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "roomSelection", "]"}], ",", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{
               RowBox[{"{", 
                RowBox[{"cubeRoom", ",", "cubeRoomData"}], "}"}], "->", 
               "\"\<Cube Room\>\""}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"hdnRoom", ",", "hdnRoomData"}], "}"}], "->", 
               "\"\<Haus des Nikolaus\>\""}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"tvRoom", ",", "tvRoomData"}], "}"}], "->", 
               "\"\<Television Room\>\""}], ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"complexRoom", ",", "complexRoomData"}], "}"}], "->", 
               "\"\<Complex Room\>\""}]}], "\[IndentingNewLine]", "}"}]}], 
           "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"InputField", "[", 
           RowBox[{"Dynamic", "[", "receiverPosition", "]"}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"Slider", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "numSenders", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"2", ",", "50", ",", "1"}], "}"}], ",", 
            RowBox[{"Appearance", "\[Rule]", "\"\<Labeled\>\""}]}], "]"}]}], 
         "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{",", 
          RowBox[{"Style", "[", 
           RowBox[{"\"\<Error Settings\>\"", ",", "Larger", ",", "Bold"}], 
           "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
         "\"\<Van Mises Concentration\>\"", ",", 
          "\"\<\[CapitalDelta] Error\>\"", ",", 
          "\"\<Direct Signal Discard Factor\>\""}], "}"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Slider", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "vanMisesConcentration", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"0", ",", "5000"}], "}"}], ",", 
            RowBox[{"Appearance", "\[Rule]", "\"\<Labeled\>\""}]}], "]"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"Slider", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "\[CapitalDelta]Error", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"0", ",", "1"}], "}"}], ",", 
            RowBox[{"Appearance", "\[Rule]", "\"\<Labeled\>\""}]}], "]"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"Slider", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "directSignalDiscardFactor", "]"}], ",", 
            RowBox[{"Appearance", "\[Rule]", "\"\<Labeled\>\""}]}], "]"}]}], 
         "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
         "\"\<Reflection Discard Factor\>\"", ",", 
          "\"\<Wall Error Factor\>\""}], "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Slider", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "reflectionDiscardFactor", "]"}], ",", 
            RowBox[{"Appearance", "\[Rule]", "\"\<Labeled\>\""}]}], "]"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"Slider", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "wallErrorFactor", "]"}], ",", 
            RowBox[{"Appearance", "\[Rule]", "\"\<Labeled\>\""}]}], "]"}]}], 
         "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{",", 
          RowBox[{"Style", "[", 
           RowBox[{
           "\"\<Algorithm Selection\>\"", ",", "Larger", ",", "Bold"}], 
           "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
         "\"\<Clustering Algorithm\>\"", ",", 
          "\"\<Wall Normal Vector Computation Algorithm\>\"", ",", 
          "\"\<Sender Localization Algorithm\>\"", ",", 
          "\"\<Normal Selection Method\>\""}], "}"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"PopupMenu", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "clusteringAlgorithm", "]"}], ",", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
             "\"\<Inversion, Original\>\"", ",", "\[IndentingNewLine]", 
              "\"\<Inversion, Improved\>\"", ",", "\[IndentingNewLine]", 
              "\"\<Gnomonic, Basic Intersections\>\"", ",", 
              "\[IndentingNewLine]", 
              "\"\<Gnomonic, Improved Intersections\>\"", ",", 
              "\[IndentingNewLine]", "\"\<Gnomonic, Random Points\>\"", ",", 
              "\[IndentingNewLine]", "\"\<Gnomonic, Random Points Often\>\"", 
              ",", "\[IndentingNewLine]", "\"\<Community Detection\>\""}], 
             "}"}]}], "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"PopupMenu", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "wallNormalAlgorithm", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
             "\"\<All Pairs\>\"", ",", "\"\<Disjoint Pairs\>\"", ",", 
              "\"\<Linear All Pairs\>\"", ",", 
              "\"\<Linear All Pairs Improved\>\"", ",", " ", 
              "\"\<Overlapping Pairs\>\""}], "}"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"PopupMenu", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "localizationAlgorithm", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
             "\"\<Wall Direction\>\"", ",", "\"\<Map to Normal Vector\>\"", 
              ",", "\"\<Reflection Geometry\>\"", ",", 
              "\"\<Closest Lines\>\""}], "}"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"PopupMenu", "[", 
           RowBox[{
            RowBox[{"Dynamic", "[", "normalSelectionMethod", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
             "\"\<Most Reflections\>\"", ",", "\"\<Average Position\>\"", 
              ",", "\"\<Closest Lines Extended\>\"", ",", 
              "\"\<Weighted Average (Wall Distance)\>\"", ",", 
              "\"\<Closest Reflection Group\>\""}], "}"}]}], "]"}]}], 
         "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{"Dynamic", "[", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
            "clusteringAlgorithm", "==", "\"\<Inversion, Original\>\""}], ",", 
            RowBox[{"Slider", "[", 
             RowBox[{"linesIntoBinsBinKeepThreshold", ",", 
              RowBox[{"{", 
               RowBox[{"2", ",", "50", ",", "1"}], "}"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "\"\<Labeled\>\""}]}], "]"}], 
            ",", "_"}], "]"}], "]"}], "\[IndentingNewLine]", "}"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Button", "[", 
           RowBox[{
           "\"\<Run (new reflection and error simulation)\>\"", ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
             "NotebookLocate", "[", 
              "\"\<current_experiment_visualization\>\"", "]"}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"NotebookDelete", "[", "]"}], ";", "\[IndentingNewLine]", 
             RowBox[{"CellPrint", "[", 
              RowBox[{"ExpressionCell", "[", 
               RowBox[{
                RowBox[{"SimulateILDARS", "[", "]"}], ",", 
                RowBox[{
                "CellTags", "\[Rule]", 
                 "\"\<current_experiment_visualization\>\""}]}], "]"}], 
              "]"}]}]}], "]"}], ",", ",", "\[IndentingNewLine]", 
          RowBox[{"Button", "[", 
           RowBox[{
           "\"\<Update (keep reflection and error simulation)\>\"", ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
             "NotebookLocate", "[", 
              "\"\<current_experiment_visualization\>\"", "]"}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"NotebookDelete", "[", "]"}], ";", "\[IndentingNewLine]", 
             RowBox[{"CellPrint", "[", 
              RowBox[{"ExpressionCell", "[", 
               RowBox[{
                RowBox[{"UpdateILDARS", "[", "]"}], ",", 
                RowBox[{
                "CellTags", "\[Rule]", 
                 "\"\<current_experiment_visualization\>\""}]}], "]"}], 
              "]"}]}]}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"Spacings", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"0", ",", " ", 
         RowBox[{"{", 
          RowBox[{"{", 
           RowBox[{
           "6", ",", "1", ",", "1", ",", "6", ",", "1", ",", "0", ",", "1", 
            ",", "0", ",", "6", ",", "1", ",", "1", ",", "1", ",", "2"}], 
           "}"}], "}"}]}], "}"}]}]}], "\[IndentingNewLine]", "]"}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.86515208912446*^9, 3.865152174903132*^9}, {
   3.865152235189237*^9, 3.865152296347472*^9}, {3.865152344628874*^9, 
   3.865152365361389*^9}, {3.865152423490614*^9, 3.8651529945442133`*^9}, {
   3.865153034569997*^9, 3.865153149728895*^9}, {3.865153180078292*^9, 
   3.865153278899143*^9}, {3.865153451637527*^9, 3.8651538819957848`*^9}, {
   3.8651539818643084`*^9, 3.865154031437181*^9}, {3.865154104667943*^9, 
   3.865154230552157*^9}, {3.865154324656785*^9, 3.865154350619678*^9}, {
   3.865154457551084*^9, 3.8651544582033987`*^9}, {3.8651545119289293`*^9, 
   3.865154530406728*^9}, {3.8651545671083508`*^9, 3.865154595707745*^9}, {
   3.865154634296056*^9, 3.865154707565797*^9}, {3.865154925094627*^9, 
   3.865154935593514*^9}, {3.8651550074549313`*^9, 3.865155034343235*^9}, {
   3.8651550710002747`*^9, 3.865155140086383*^9}, {3.865155316824687*^9, 
   3.865155504807283*^9}, {3.865155631016664*^9, 3.865155671004776*^9}, {
   3.865155702722157*^9, 3.865155719539061*^9}, {3.865155800276544*^9, 
   3.865156620089033*^9}, {3.8651566659689903`*^9, 3.865156866598469*^9}, {
   3.865157047161085*^9, 3.8651573952879868`*^9}, {3.8651574328814*^9, 
   3.865157483265081*^9}, {3.8651575387753057`*^9, 3.8651576802847233`*^9}, {
   3.865157713859087*^9, 3.865157834690942*^9}, {3.865157871544243*^9, 
   3.8651578910376787`*^9}, {3.8651581667751293`*^9, 3.865158184894153*^9}, {
   3.8651583559722023`*^9, 3.865158396961755*^9}, {3.865160704206753*^9, 
   3.865160876883889*^9}, {3.865161101534648*^9, 3.865161132758637*^9}, {
   3.8652300812882023`*^9, 3.8652301015087147`*^9}, {3.865231443725559*^9, 
   3.8652314695793*^9}, {3.8656745859737673`*^9, 3.865674587569977*^9}, {
   3.8661033493368797`*^9, 3.866103350393476*^9}, {3.8661033926179457`*^9, 
   3.866103427889926*^9}, {3.866104358760888*^9, 3.866104359029414*^9}, 
   3.866104481588492*^9, 3.866535552651697*^9, {3.8666909080718613`*^9, 
   3.866690913971978*^9}, 3.866691233758451*^9, {3.866691446934491*^9, 
   3.866691455636181*^9}, {3.866692031377967*^9, 3.86669216424559*^9}, {
   3.8666921970562897`*^9, 3.866692208938386*^9}, {3.867565532585558*^9, 
   3.867565552771914*^9}, {3.867753869385041*^9, 3.8677538903239594`*^9}, {
   3.868874093023179*^9, 3.8688741161236486`*^9}, {3.870278800840317*^9, 
   3.8702788012964067`*^9}, {3.8703328356081133`*^9, 3.870332835745373*^9}, {
   3.8703333021489277`*^9, 3.8703333062385178`*^9}, {3.870334421377577*^9, 
   3.870334421539955*^9}, 3.870336189726184*^9, {3.871359375255867*^9, 
   3.871359376422893*^9}},
 CellLabel->
  "In[157]:=",ExpressionUUID->"92c50cec-64d1-41e8-830a-088a0f933d8e"]
}, Closed]],

Cell[CellGroupData[{

Cell["Functions for Evaluating Algorithms", "Subsection",
 CellChangeTimes->{{3.865843734526919*^9, 
  3.86584374657847*^9}},ExpressionUUID->"9491c8a3-a69d-4b32-99e1-\
e3167e0a400f"],

Cell["\<\
To now compare the algorithms in multiple runs, we need to collect some \
meaningful statistics to compare the algorithms. We will look at how far a \
computed wall normal vector is from the actual wall normal vector and we will \
compute the distance between a computed and the actual position of the \
senders.\
\>", "Text",
 CellChangeTimes->{{3.865843752399259*^9, 
  3.865843829339189*^9}},ExpressionUUID->"2ccaf9ff-b9ce-4239-aeee-\
cd201eecca16"],

Cell[BoxData[
 RowBox[{
  RowBox[{"RateWallNormalVectors", "[", 
   RowBox[{
   "roomData_", ",", "computedWallNormals_", ",", "receiverPosition_"}], 
   "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"rating", "=", 
       RowBox[{"{", "}"}]}], ",", 
      RowBox[{"actualWallNormals", "=", 
       RowBox[{"{", "}"}]}]}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Compute", " ", "actuall", " ", "normal", " ", "vectors", " ", "of", " ",
       "the", " ", "walls"}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Block", "[", 
          RowBox[{
           RowBox[{"{", "triangleReceiverMaxDistance", "}"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"(*", " ", 
            RowBox[{
            "We", " ", "need", " ", "to", " ", "make", " ", "sure", " ", 
             "the", " ", "line", " ", 
             RowBox[{"we", "'"}], "re", " ", "intersecting", " ", "with", " ",
              "the", " ", "triangles", " ", "have", " ", "the", " ", "right", 
             " ", "length"}], " ", "*)"}], "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"triangleReceiverMaxDistance", "=", 
             RowBox[{"Max", "[", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"EuclideanDistance", "[", 
                 RowBox[{"receiverPosition", ",", "vertex"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"vertex", ",", "wall"}], "}"}]}], "]"}], "]"}]}], 
            ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"DoesLineTriangleIntersect", "[", 
               RowBox[{
                RowBox[{"{", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"receiverPosition", "+", 
                   RowBox[{
                    RowBox[{"Normalize", "[", "localWallNormalVector", "]"}], 
                    "*", "triangleReceiverMaxDistance"}]}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"receiverPosition", "-", 
                   RowBox[{
                    RowBox[{"Normalize", "[", "localWallNormalVector", "]"}], 
                    "*", "triangleReceiverMaxDistance"}]}]}], 
                 "\[IndentingNewLine]", "}"}], "\[IndentingNewLine]", ",", 
                "wall"}], "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{"AppendTo", "[", 
               RowBox[{"actualWallNormals", ",", 
                RowBox[{
                 RowBox[{"LineTriangleIntersection", "[", 
                  RowBox[{
                   RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"receiverPosition", "+", 
                    RowBox[{
                    RowBox[{"Normalize", "[", "localWallNormalVector", "]"}], 
                    "*", "triangleReceiverMaxDistance"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"receiverPosition", "-", 
                    RowBox[{
                    RowBox[{"Normalize", "[", "localWallNormalVector", "]"}], 
                    "*", "triangleReceiverMaxDistance"}]}]}], 
                    "\[IndentingNewLine]", "}"}], "\[IndentingNewLine]", ",", 
                   "wall"}], "]"}], "-", "receiverPosition"}]}], "]"}]}], 
             "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
          "]"}], "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"localWallNormalVector", ",", 
           RowBox[{"roomData", "[", 
            RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], "]"}], 
       "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"wall", ",", 
         RowBox[{"roomData", "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], "}"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
       RowBox[{"For", " ", "Debugging"}], ",", " ", 
       RowBox[{
        RowBox[{"print", " ", "inside", " ", 
         RowBox[{"Graphics3D", "[", "]"}], "\[IndentingNewLine]", 
         RowBox[{"Print", "[", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Opacity", "[", "0.2", "]"}], ",", 
              RowBox[{"Triangle", "/@", 
               RowBox[{"roomData", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"PointSize", "[", "Large", "]"}], ",", "Blue", ",", 
              RowBox[{"Point", "[", "receiverPosition", "]"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Green", ",", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"Arrow", "[", 
                 RowBox[{"{", 
                  RowBox[{"receiverPosition", ",", "wnv"}], "}"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"wnv", ",", "actualWallNormals"}], "}"}]}], "]"}]}], 
             "}"}], ",", "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Red", ",", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"Arrow", "[", 
                 RowBox[{"{", 
                  RowBox[{"receiverPosition", ",", "cwn"}], "}"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"cwn", ",", "computedWallNormals"}], "}"}]}], 
               "]"}]}], "}"}]}], "\[IndentingNewLine]", "}"}], "]"}]}], 
        ";"}]}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", "closestActualNormal", "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"closestActualNormal", "=", 
           RowBox[{
            RowBox[{"MinimalBy", "[", 
             RowBox[{
              RowBox[{"roomData", "[", 
               RowBox[{"[", "3", "]"}], "]"}], ",", 
              RowBox[{
               RowBox[{"EuclideanDistance", "[", 
                RowBox[{"#", ",", "computedNormal"}], "]"}], "&"}]}], "]"}], 
            "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{"rating", ",", 
            RowBox[{"EuclideanDistance", "[", 
             RowBox[{"computedNormal", ",", "closestActualNormal"}], "]"}]}], 
           "]"}]}]}], "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", 
       ",", 
       RowBox[{"{", 
        RowBox[{"computedNormal", ",", "computedWallNormals"}], "}"}]}], 
      "]"}], ";", "\[IndentingNewLine]", "rating"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.865843837596744*^9, 3.865843842356703*^9}, {
   3.865844341346656*^9, 3.865844385209765*^9}, {3.865844428609001*^9, 
   3.865844471036515*^9}, {3.8658445774587917`*^9, 3.8658446290668716`*^9}, {
   3.8658446593103247`*^9, 3.865844700111723*^9}, {3.865845359673101*^9, 
   3.8658453599229097`*^9}, {3.8658453961616793`*^9, 3.865845414902034*^9}, 
   3.865845454260941*^9, {3.8658455646787653`*^9, 3.865845597284371*^9}, {
   3.870709510247684*^9, 3.8707095145270567`*^9}, {3.871042857992095*^9, 
   3.871042913441532*^9}, {3.871042976312208*^9, 3.871043013340664*^9}, {
   3.871043381712685*^9, 3.871043385175755*^9}, {3.871043509806272*^9, 
   3.8710435365610332`*^9}, {3.87104356938653*^9, 3.8710437211129293`*^9}, {
   3.8710438013109827`*^9, 3.871043848481393*^9}, {3.8710438936465483`*^9, 
   3.871044039229458*^9}, {3.871044082928145*^9, 3.871044088987226*^9}, {
   3.87104412768705*^9, 3.871044129836877*^9}, {3.871044254794231*^9, 
   3.871044288216702*^9}, {3.8710443816820097`*^9, 3.871044437704166*^9}, {
   3.871044563226527*^9, 3.871044572625778*^9}, {3.8710446695631037`*^9, 
   3.871044683830744*^9}, {3.871044815707048*^9, 3.871045038731433*^9}, {
   3.871045107999301*^9, 3.871045149188663*^9}, {3.871045188098237*^9, 
   3.871045329498476*^9}, {3.871045365802981*^9, 3.871045427280239*^9}, {
   3.8710454835213537`*^9, 3.871045493088982*^9}, {3.871045554609725*^9, 
   3.871045580684908*^9}, {3.871045617754569*^9, 3.8710456208005238`*^9}, {
   3.8710456598682823`*^9, 3.871045660143701*^9}, {3.871045772134408*^9, 
   3.871045778452631*^9}, {3.8710458249212847`*^9, 3.8710458533490343`*^9}, {
   3.8710458882087517`*^9, 3.8710458947363043`*^9}, {3.871045934618222*^9, 
   3.871046003215885*^9}},
 CellLabel->
  "In[158]:=",ExpressionUUID->"27e9ded5-371f-4b96-9337-4b2e72d07d8b"]
}, Closed]],

Cell[CellGroupData[{

Cell["Multiple Runs without dynamic content (multithreaded)", "Subsection",
 CellChangeTimes->{{3.870445574373541*^9, 3.8704455801275997`*^9}, {
  3.870445955479109*^9, 
  3.8704459607113028`*^9}},ExpressionUUID->"ccdad3db-cbfc-4e27-946d-\
f5dea0cc0ce7"],

Cell[CellGroupData[{

Cell["HelperFunctions", "Subsubsection",
 CellChangeTimes->{{3.8702812574640903`*^9, 
  3.8702812594759083`*^9}},ExpressionUUID->"cf7e17e1-9711-41a6-8794-\
0678ee2ee7b1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ComputeAverageAndStandardDeviation", "[", 
   RowBox[{
   "precisionRecallStatistics_", ",", "wallOffsetStatistics_", ",", 
    "senderPositionStatistics_"}], "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"{", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "Compute", " ", "averages", " ", "for", " ", "all", " ", "statics", " ", 
     "over", " ", "the", " ", "runs"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Association", "[", 
     RowBox[{"Table", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"clusteringAlgorithm", "->", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"N", "[", 
           RowBox[{"Mean", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"prScore", "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"prScore", ",", 
                RowBox[{"Flatten", "[", 
                 RowBox[{
                  RowBox[{
                  "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                   "]"}], ",", "1"}], "]"}]}], "}"}]}], "]"}], "]"}], "]"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"N", "[", 
           RowBox[{"Mean", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"prScore", "[", 
               RowBox[{"[", "2", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"prScore", ",", 
                RowBox[{"Flatten", "[", 
                 RowBox[{
                  RowBox[{
                  "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                   "]"}], ",", "1"}], "]"}]}], "}"}]}], "]"}], "]"}], "]"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"N", "[", 
           RowBox[{"Mean", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"prScore", "[", 
               RowBox[{"[", "3", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"prScore", ",", 
                RowBox[{"Flatten", "[", 
                 RowBox[{
                  RowBox[{
                  "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                   "]"}], ",", "1"}], "]"}]}], "}"}]}], "]"}], "]"}], "]"}]}],
          "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"clusteringAlgorithm", ",", 
         RowBox[{"Keys", "[", "precisionRecallStatistics", "]"}]}], "}"}]}], 
      "]"}], "]"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"Association", "[", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
        RowBox[{"Association", "[", 
         RowBox[{"Table", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"wallNormalAlgorithm", "->", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"N", "[", 
               RowBox[{"Mean", "[", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"wnScore", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"wnScore", ",", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "wallOffsetStatistics", "[", "clusteringAlgorithm", "]"}],
                     "[", "wallNormalAlgorithm", "]"}], ",", "1"}], "]"}]}], 
                   "}"}]}], "]"}], "]"}], "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{"N", "[", 
               RowBox[{"Mean", "[", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"wnScore", "[", 
                   RowBox[{"[", "2", "]"}], "]"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"wnScore", ",", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "wallOffsetStatistics", "[", "clusteringAlgorithm", "]"}],
                     "[", "wallNormalAlgorithm", "]"}], ",", "1"}], "]"}]}], 
                   "}"}]}], "]"}], "]"}], "]"}]}], "\[IndentingNewLine]", 
             "}"}]}], "\[IndentingNewLine]", ",", 
           RowBox[{"{", 
            RowBox[{"wallNormalAlgorithm", ",", 
             RowBox[{"Keys", "[", 
              RowBox[{
              "wallOffsetStatistics", "[", "clusteringAlgorithm", "]"}], 
              "]"}]}], "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"clusteringAlgorithm", ",", 
         RowBox[{"Keys", "[", "wallOffsetStatistics", "]"}]}], "}"}]}], "]"}],
      "]"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"Association", "[", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
        RowBox[{"Association", "[", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"wallNormalAlgorithm", "->", "\[IndentingNewLine]", 
            RowBox[{"Association", "[", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"localizationAlgorithm", "->", "\[IndentingNewLine]", 
                RowBox[{"Association", "[", 
                 RowBox[{"Table", "[", 
                  RowBox[{
                   RowBox[{
                   "normalSelectionMethod", "->", "\[IndentingNewLine]", 
                    RowBox[{"N", "[", 
                    RowBox[{"Mean", "[", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "senderPositionStatistics", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                    "localizationAlgorithm", "]"}], "[", 
                    "normalSelectionMethod", "]"}], "]"}], "]"}], "]"}]}], 
                   "\[IndentingNewLine]", ",", 
                   RowBox[{"{", 
                    RowBox[{"normalSelectionMethod", ",", 
                    RowBox[{"Keys", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "senderPositionStatistics", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                    "localizationAlgorithm", "]"}], "]"}]}], "}"}]}], "]"}], 
                 "]"}]}], "\[IndentingNewLine]", ",", 
               RowBox[{"{", 
                RowBox[{"localizationAlgorithm", ",", 
                 RowBox[{"Keys", "[", 
                  RowBox[{
                   RowBox[{
                   "senderPositionStatistics", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "]"}]}], 
                "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
           RowBox[{"{", 
            RowBox[{"wallNormalAlgorithm", ",", 
             RowBox[{"Keys", "[", 
              RowBox[{
              "senderPositionStatistics", "[", "clusteringAlgorithm", "]"}], 
              "]"}]}], "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"clusteringAlgorithm", ",", 
         RowBox[{"Keys", "[", "senderPositionStatistics", "]"}]}], "}"}]}], 
      "]"}], "]"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Compute", " ", "standard", " ", "deviation", " ", "for", " ", "all", 
      " ", "statics", " ", "over", " ", "the", " ", "runs"}], " ", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"Association", "[", 
     RowBox[{"Table", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"clusteringAlgorithm", "->", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "[", 
              RowBox[{"Flatten", "[", 
               RowBox[{
                RowBox[{
                "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                 "]"}], ",", "1"}], "]"}], "]"}], ">", "1"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"N", "[", 
             RowBox[{"StandardDeviation", "[", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"prScore", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"prScore", ",", 
                  RowBox[{"Flatten", "[", 
                   RowBox[{
                    RowBox[{
                    "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                    "]"}], ",", "1"}], "]"}]}], "}"}]}], "]"}], "]"}], "]"}], 
            ",", "\[IndentingNewLine]", "\"\<too few measurements\>\""}], 
           "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "[", 
              RowBox[{"Flatten", "[", 
               RowBox[{
                RowBox[{
                "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                 "]"}], ",", "1"}], "]"}], "]"}], ">", "1"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"N", "[", 
             RowBox[{"StandardDeviation", "[", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"prScore", "[", 
                 RowBox[{"[", "2", "]"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"prScore", ",", 
                  RowBox[{"Flatten", "[", 
                   RowBox[{
                    RowBox[{
                    "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                    "]"}], ",", "1"}], "]"}]}], "}"}]}], "]"}], "]"}], "]"}], 
            ",", "\[IndentingNewLine]", "\"\<too few measurements\>\""}], 
           "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "[", 
              RowBox[{"Flatten", "[", 
               RowBox[{
                RowBox[{
                "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                 "]"}], ",", "1"}], "]"}], "]"}], ">", "1"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"N", "[", 
             RowBox[{"StandardDeviation", "[", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{"prScore", "[", 
                 RowBox[{"[", "3", "]"}], "]"}], ",", 
                RowBox[{"{", 
                 RowBox[{"prScore", ",", 
                  RowBox[{"Flatten", "[", 
                   RowBox[{
                    RowBox[{
                    "precisionRecallStatistics", "[", "clusteringAlgorithm", 
                    "]"}], ",", "1"}], "]"}]}], "}"}]}], "]"}], "]"}], "]"}], 
            ",", "\[IndentingNewLine]", "\"\<too few measurements\>\""}], 
           "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "}"}]}], 
       "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"clusteringAlgorithm", ",", 
         RowBox[{"Keys", "[", "precisionRecallStatistics", "]"}]}], "}"}]}], 
      "]"}], "]"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"Association", "[", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
        RowBox[{"Association", "[", 
         RowBox[{"Table", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"wallNormalAlgorithm", "->", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"Length", "[", 
                  RowBox[{"Flatten", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    "wallOffsetStatistics", "[", "clusteringAlgorithm", "]"}],
                     "[", "wallNormalAlgorithm", "]"}], ",", "1"}], "]"}], 
                  "]"}], ">", "1"}], ",", "\[IndentingNewLine]", 
                RowBox[{"N", "[", 
                 RowBox[{"StandardDeviation", "[", 
                  RowBox[{"Table", "[", 
                   RowBox[{
                    RowBox[{"wnScore", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"wnScore", ",", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "wallOffsetStatistics", "[", "clusteringAlgorithm", "]"}],
                     "[", "wallNormalAlgorithm", "]"}], ",", "1"}], "]"}]}], 
                    "}"}]}], "]"}], "]"}], "]"}], ",", "\[IndentingNewLine]", 
                "\"\<too few runs\>\""}], "\[IndentingNewLine]", "]"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"Length", "[", 
                  RowBox[{"Flatten", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    "wallOffsetStatistics", "[", "clusteringAlgorithm", "]"}],
                     "[", "wallNormalAlgorithm", "]"}], ",", "1"}], "]"}], 
                  "]"}], ">", "1"}], ",", "\[IndentingNewLine]", 
                RowBox[{"N", "[", 
                 RowBox[{"StandardDeviation", "[", 
                  RowBox[{"Table", "[", 
                   RowBox[{
                    RowBox[{"wnScore", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"wnScore", ",", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "wallOffsetStatistics", "[", "clusteringAlgorithm", "]"}],
                     "[", "wallNormalAlgorithm", "]"}], ",", "1"}], "]"}]}], 
                    "}"}]}], "]"}], "]"}], "]"}], ",", "\[IndentingNewLine]", 
                "\"\<too few runs\>\""}], "\[IndentingNewLine]", "]"}]}], 
             "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", ",", 
           RowBox[{"{", 
            RowBox[{"wallNormalAlgorithm", ",", 
             RowBox[{"Keys", "[", 
              RowBox[{
              "wallOffsetStatistics", "[", "clusteringAlgorithm", "]"}], 
              "]"}]}], "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"clusteringAlgorithm", ",", 
         RowBox[{"Keys", "[", "wallOffsetStatistics", "]"}]}], "}"}]}], "]"}],
      "]"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"Association", "[", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
        RowBox[{"Association", "[", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"wallNormalAlgorithm", "->", "\[IndentingNewLine]", 
            RowBox[{"Association", "[", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"localizationAlgorithm", "->", "\[IndentingNewLine]", 
                RowBox[{"Association", "[", 
                 RowBox[{"Table", "[", 
                  RowBox[{
                   RowBox[{
                   "normalSelectionMethod", "->", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Length", "[", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "senderPositionStatistics", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                    "localizationAlgorithm", "]"}], "[", 
                    "normalSelectionMethod", "]"}], "]"}], "]"}], ">", "1"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"N", "[", 
                    RowBox[{"StandardDeviation", "[", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "senderPositionStatistics", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                    "localizationAlgorithm", "]"}], "[", 
                    "normalSelectionMethod", "]"}], "]"}], "]"}], "]"}], ",", 
                    "\[IndentingNewLine]", "\"\<too few runs\>\""}], 
                    "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
                   ",", 
                   RowBox[{"{", 
                    RowBox[{"normalSelectionMethod", ",", 
                    RowBox[{"Keys", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "senderPositionStatistics", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                    "localizationAlgorithm", "]"}], "]"}]}], "}"}]}], "]"}], 
                 "]"}]}], "\[IndentingNewLine]", ",", 
               RowBox[{"{", 
                RowBox[{"localizationAlgorithm", ",", 
                 RowBox[{"Keys", "[", 
                  RowBox[{
                   RowBox[{
                   "senderPositionStatistics", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "]"}]}], 
                "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
           RowBox[{"{", 
            RowBox[{"wallNormalAlgorithm", ",", 
             RowBox[{"Keys", "[", 
              RowBox[{
              "senderPositionStatistics", "[", "clusteringAlgorithm", "]"}], 
              "]"}]}], "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"clusteringAlgorithm", ",", 
         RowBox[{"Keys", "[", "senderPositionStatistics", "]"}]}], "}"}]}], 
      "]"}], "]"}]}], "\[IndentingNewLine]", "}"}]}]], "Input",
 CellChangeTimes->{{3.870281262087967*^9, 3.8702813210836678`*^9}, {
  3.870281378856749*^9, 3.870281457321292*^9}, {3.870281617148364*^9, 
  3.870281620544991*^9}, {3.8702821164899273`*^9, 3.8702821234558764`*^9}, {
  3.8702821572944937`*^9, 3.87028215932765*^9}},
 CellLabel->
  "In[159]:=",ExpressionUUID->"9109ebcd-a8a3-46d2-b338-e79b6daebaf7"],

Cell[BoxData[
 RowBox[{
  RowBox[{
  "ComputeBestAverageConfiguration", "[", "senderPositionAverage_", "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Compute", " ", "best", " ", "configuration"}], ",", " ", 
    RowBox[{
    "based", " ", "on", " ", "average", " ", "sender", " ", "location", " ", 
     "offset"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"currentMinOffset", "=", "Infinity"}], ",", 
      RowBox[{"bestAverageConfiguration", "=", 
       RowBox[{"{", "}"}]}]}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Do", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Do", "[", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"Block", "[", 
              RowBox[{
               RowBox[{"{", "\[IndentingNewLine]", 
                RowBox[{"currentOffset", "=", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    "senderPositionAverage", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                   "localizationAlgorithm", "]"}], "[", 
                  "normalSelectionMethod", "]"}]}], "\[IndentingNewLine]", 
                "}"}], ",", "\[IndentingNewLine]", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{"currentOffset", "<", "currentMinOffset"}], ",", 
                 "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"currentMinOffset", "=", "currentOffset"}], ";", 
                  "\[IndentingNewLine]", 
                  RowBox[{"bestAverageConfiguration", "=", 
                   RowBox[{
                   "clusteringAlgorithm", "<>", "\"\< + \>\"", "<>", 
                    "\[IndentingNewLine]", "wallNormalAlgorithm", "<>", 
                    "\"\< + \>\"", "<>", "\[IndentingNewLine]", 
                    "localizationAlgorithm", "<>", "\"\< + \>\"", "<>", 
                    "\[IndentingNewLine]", "normalSelectionMethod"}]}]}]}], 
                "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}], 
             "\[IndentingNewLine]", ",", 
             RowBox[{"{", 
              RowBox[{"normalSelectionMethod", ",", 
               RowBox[{"Keys", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{
                  "senderPositionAverage", "[", "clusteringAlgorithm", "]"}], 
                  "[", "wallNormalAlgorithm", "]"}], "[", 
                 "localizationAlgorithm", "]"}], "]"}]}], "}"}]}], "]"}], 
           "\[IndentingNewLine]", ",", 
           RowBox[{"{", 
            RowBox[{"localizationAlgorithm", ",", 
             RowBox[{"Keys", "[", 
              RowBox[{
               RowBox[{
               "senderPositionAverage", "[", "clusteringAlgorithm", "]"}], 
               "[", "wallNormalAlgorithm", "]"}], "]"}]}], "}"}]}], "]"}], 
         "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"wallNormalAlgorithm", ",", 
           RowBox[{"Keys", "[", 
            RowBox[{
            "senderPositionAverage", "[", "clusteringAlgorithm", "]"}], 
            "]"}]}], "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"clusteringAlgorithm", ",", 
         RowBox[{"Keys", "[", "senderPositionAverage", "]"}]}], "}"}]}], 
      "]"}], ";", "\[IndentingNewLine]", "bestAverageConfiguration"}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.870281262087967*^9, 3.8702813210836678`*^9}, {
  3.870281378856749*^9, 3.870281457321292*^9}, {3.870281617148364*^9, 
  3.870281654243456*^9}, {3.870281693497692*^9, 3.870281696452878*^9}, {
  3.870281850674798*^9, 3.870281855304309*^9}, {3.8702818978585873`*^9, 
  3.870281907894755*^9}},
 CellLabel->
  "In[160]:=",ExpressionUUID->"610d5c3a-4e0d-43fd-bc89-6e9a42145e0f"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
   "ComputeMostStableConfiguration", "[", "senderPositionStandardDeviation_", 
    "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"Compute", " ", "most", " ", "stable", " ", "configuration"}], 
     ",", " ", 
     RowBox[{
     "based", " ", "on", " ", "average", " ", "sender", " ", "location", " ", 
      "standard", " ", "deviation"}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"currentMinStandardDeviation", "=", "Infinity"}], ",", 
       RowBox[{"mostStableConfiguration", "=", 
        RowBox[{"{", "}"}]}]}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Do", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Do", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Do", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Do", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Block", "[", 
               RowBox[{
                RowBox[{"{", "\[IndentingNewLine]", 
                 RowBox[{"currentStandardDeviation", "=", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    "senderPositionStandardDeviation", "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                    "]"}], "[", "localizationAlgorithm", "]"}], "[", 
                   "normalSelectionMethod", "]"}]}], "\[IndentingNewLine]", 
                 "}"}], ",", "\[IndentingNewLine]", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{
                  "currentStandardDeviation", "<", 
                   "currentMinStandardDeviation"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{
                   "currentMinStandardDeviation", "=", 
                    "currentStandardDeviation"}], ";", "\[IndentingNewLine]", 
                   
                   RowBox[{"mostStableConfiguration", "=", 
                    RowBox[{
                    "clusteringAlgorithm", "<>", "\"\< + \>\"", "<>", 
                    "\[IndentingNewLine]", "wallNormalAlgorithm", "<>", 
                    "\"\< + \>\"", "<>", "\[IndentingNewLine]", 
                    "localizationAlgorithm", "<>", "\"\< + \>\"", "<>", 
                    "\[IndentingNewLine]", "normalSelectionMethod"}]}]}]}], 
                 "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}],
               "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"normalSelectionMethod", ",", 
                RowBox[{"Keys", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                   "senderPositionStandardDeviation", "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                   "]"}], "[", "localizationAlgorithm", "]"}], "]"}]}], 
               "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{"localizationAlgorithm", ",", 
              RowBox[{"Keys", "[", 
               RowBox[{
                RowBox[{
                "senderPositionStandardDeviation", "[", "clusteringAlgorithm",
                  "]"}], "[", "wallNormalAlgorithm", "]"}], "]"}]}], "}"}]}], 
           "]"}], "\[IndentingNewLine]", ",", 
          RowBox[{"{", 
           RowBox[{"wallNormalAlgorithm", ",", 
            RowBox[{"Keys", "[", 
             RowBox[{
             "senderPositionStandardDeviation", "[", "clusteringAlgorithm", 
              "]"}], "]"}]}], "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"clusteringAlgorithm", ",", 
          RowBox[{"Keys", "[", "senderPositionStandardDeviation", "]"}]}], 
         "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
      "mostStableConfiguration"}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.870281262087967*^9, 3.8702813210836678`*^9}, {
  3.870281378856749*^9, 3.870281457321292*^9}, {3.870281617148364*^9, 
  3.870281654243456*^9}, {3.870281693497692*^9, 3.870281743059753*^9}, {
  3.870281882658955*^9, 3.8702818866661453`*^9}, {3.8702822184604683`*^9, 
  3.870282255054221*^9}},
 CellLabel->
  "In[161]:=",ExpressionUUID->"f130f5a5-69d4-421d-a3d7-3b2681bea9dc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PrintStatistics", "[", "\[IndentingNewLine]", 
   RowBox[{
   "clusteringAlgorithms_", ",", "\[IndentingNewLine]", 
    "wallNormalAlgorithms_", ",", "\[IndentingNewLine]", 
    "normalVectorSelectionMethods_", ",", "\[IndentingNewLine]", 
    "localizationAlgorithms_", ",", "\[IndentingNewLine]", "statistics_", ",",
     "\[IndentingNewLine]", "precisionRecallAverage_", ",", 
    "\[IndentingNewLine]", "precisionRecallStandardDeviation_", ",", 
    "\[IndentingNewLine]", "wallOffsetAverage_", ",", "\[IndentingNewLine]", 
    "wallOffsetStandardDeviation_", ",", "\[IndentingNewLine]", 
    "senderPositionAverage_", ",", "\[IndentingNewLine]", 
    "senderPositionStandardDeviation_", ",", "\[IndentingNewLine]", 
    "bestAverageConfiguration_", ",", "\[IndentingNewLine]", 
    "mostStableConfiguration_", ",", "\[IndentingNewLine]", "\[Beta]_"}], 
   "\[IndentingNewLine]", "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"Print", " ", "everything"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"Column", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"statistics", ",", "\"\<Average Precision Recall\>\""}], 
         "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Style", "[", 
         RowBox[{
         "\"\<(Average) Precision Recall Results of Clustering \
Algorithms:\>\"", ",", 
          RowBox[{"FontWeight", "\[Rule]", "Bold"}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"statistics", ",", "\"\<Average Precision Recall\>\""}], 
         "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"TableForm", "[", 
         RowBox[{
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
               "precisionRecallAverage", "[", "clusteringAlgorithm", "]"}], 
               "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}], ",", "\[IndentingNewLine]", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
               "precisionRecallAverage", "[", "clusteringAlgorithm", "]"}], 
               "[", 
               RowBox[{"[", "2", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}], ",", "\[IndentingNewLine]", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
               "precisionRecallAverage", "[", "clusteringAlgorithm", "]"}], 
               "[", 
               RowBox[{"[", "3", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}], ",", 
          RowBox[{"TableHeadings", "\[Rule]", 
           RowBox[{"{", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"\"\<Precision\>\"", ",", "\"\<Recall\>\"", ",", 
               RowBox[{"StringForm", "[", 
                RowBox[{"\"\<``-Score\>\"", ",", "\[Beta]"}], "]"}]}], "}"}], 
             ",", "\[IndentingNewLine]", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"StringReplace", "[", 
                RowBox[{"clusteringAlgorithm", ",", 
                 RowBox[{"\"\< \>\"", "->", "\"\<\\n\>\""}]}], "]"}], ",", 
               RowBox[{"{", 
                RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", "\"\<Precision Recall Standard Deviation\>\""}], 
         "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Style", "[", 
         RowBox[{"\"\<Precision Recall Standard Deviation:\>\"", ",", 
          RowBox[{"FontWeight", "\[Rule]", "Bold"}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", "\"\<Precision Recall Standard Deviation\>\""}], 
         "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"TableForm", "[", 
         RowBox[{
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
               "precisionRecallStandardDeviation", "[", "clusteringAlgorithm",
                 "]"}], "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}], ",", "\[IndentingNewLine]", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
               "precisionRecallStandardDeviation", "[", "clusteringAlgorithm",
                 "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}], ",", "\[IndentingNewLine]", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
               "precisionRecallStandardDeviation", "[", "clusteringAlgorithm",
                 "]"}], "[", 
               RowBox[{"[", "3", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}], ",", 
          RowBox[{"TableHeadings", "\[Rule]", 
           RowBox[{"{", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{
              "\"\<Precision\>\"", ",", "\"\<Recall\>\"", ",", 
               "\"\<\!\(\*TemplateBox[<|\"boxes\" -> FormBox[
SubscriptBox[
StyleBox[\"f\", \"TI\"], \"0.5\"], TraditionalForm], \"errors\" -> {}, \
\"input\" -> \"f_{0.5}\", \"state\" -> \
\"Boxes\"|>,\"TeXAssistantTemplate\"]\)-Score\>\""}], "}"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"StringReplace", "[", 
                RowBox[{"clusteringAlgorithm", ",", 
                 RowBox[{"\"\< \>\"", "->", "\"\<\\n\>\""}]}], "]"}], ",", 
               RowBox[{"{", 
                RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"statistics", ",", "\"\<Average Wall Normal Offset\>\""}], 
         "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Style", "[", 
         RowBox[{"\"\<(Average) Wall Normal Vector Offsets:\>\"", ",", 
          RowBox[{"FontWeight", "\[Rule]", "Bold"}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"statistics", ",", "\"\<Average Wall Normal Offset\>\""}], 
         "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Labeled", "[", 
         RowBox[{
          RowBox[{"TableForm", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Table", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Table", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{
                   "wallOffsetAverage", "[", "clusteringAlgorithm", "]"}], 
                   "[", "wallNormalAlgorithm", "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "/", "Degree"}], 
                "\[IndentingNewLine]", ",", 
                RowBox[{"{", 
                 RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}],
                  "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
               "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
            RowBox[{"TableHeadings", "\[Rule]", 
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{"wallNormalAlgorithms", ",", "\[IndentingNewLine]", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"StringReplace", "[", 
                  RowBox[{"clusteringAlgorithm", ",", 
                   RowBox[{"\"\<, \>\"", "->", "\"\<,\\n\>\""}]}], "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{
                  "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                  "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "]"}], 
          ",", "\"\<Angle Offset in Degrees\>\"", ",", "Top"}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"statistics", ",", "\"\<Average Wall Normal Offset\>\""}], 
         "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Labeled", "[", 
         RowBox[{
          RowBox[{"TableForm", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Table", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Table", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{
                  "wallOffsetAverage", "[", "clusteringAlgorithm", "]"}], "[",
                   "wallNormalAlgorithm", "]"}], "[", 
                 RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", ",", 
                RowBox[{"{", 
                 RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}],
                  "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
               "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
            RowBox[{"TableHeadings", "\[Rule]", 
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{"wallNormalAlgorithms", ",", "\[IndentingNewLine]", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"StringReplace", "[", 
                  RowBox[{"clusteringAlgorithm", ",", 
                   RowBox[{"\"\<, \>\"", "->", "\"\<,\\n\>\""}]}], "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{
                  "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                  "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "]"}], 
          ",", "\"\<Length Offset in Meters\>\"", ",", "Top"}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", "\"\<Wall Normal Offset Standard Deviation\>\""}],
          "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Style", "[", 
         RowBox[{"\"\<Wall Normal Vector Offset Standard Deviation:\>\"", ",", 
          RowBox[{"FontWeight", "\[Rule]", "Bold"}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", "\"\<Wall Normal Offset Standard Deviation\>\""}],
          "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Labeled", "[", 
         RowBox[{
          RowBox[{"TableForm", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Table", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Table", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{
                   "wallOffsetStandardDeviation", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "/", "Degree"}], 
                "\[IndentingNewLine]", ",", 
                RowBox[{"{", 
                 RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}],
                  "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
               "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
            RowBox[{"TableHeadings", "\[Rule]", 
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{"wallNormalAlgorithms", ",", "\[IndentingNewLine]", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"StringReplace", "[", 
                  RowBox[{"clusteringAlgorithm", ",", 
                   RowBox[{"\"\<, \>\"", "->", "\"\<,\\n\>\""}]}], "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{
                  "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                  "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "]"}], 
          ",", "\"\<Angle Standard Deviation in Degrees\>\"", ",", "Top"}], 
         "]"}]}], "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", "\"\<Wall Normal Offset Standard Deviation\>\""}],
          "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Labeled", "[", 
         RowBox[{
          RowBox[{"TableForm", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Table", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Table", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{
                  "wallOffsetStandardDeviation", "[", "clusteringAlgorithm", 
                   "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                 RowBox[{"[", "2", "]"}], "]"}], "\[IndentingNewLine]", ",", 
                RowBox[{"{", 
                 RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}],
                  "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
               "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
            RowBox[{"TableHeadings", "\[Rule]", 
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{"wallNormalAlgorithms", ",", "\[IndentingNewLine]", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"StringReplace", "[", 
                  RowBox[{"clusteringAlgorithm", ",", 
                   RowBox[{"\"\<, \>\"", "->", "\"\<,\\n\>\""}]}], "]"}], ",", 
                 RowBox[{"{", 
                  RowBox[{
                  "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                  "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "]"}], 
          ",", "\"\<Length Standard Deviation in Meters\>\"", ",", "Top"}], 
         "]"}]}], "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", "\"\<Average Sender Position Offset\>\""}], "]"}],
         ",", "\[IndentingNewLine]", 
        RowBox[{"Style", "[", 
         RowBox[{"\"\<(Average) Sender Location Offsets:\>\"", ",", 
          RowBox[{"FontWeight", "\[Rule]", "Bold"}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", "\"\<Average Sender Position Offset\>\""}], "]"}],
         ",", "\[IndentingNewLine]", 
        RowBox[{"Column", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Flatten", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Table", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Table", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"Labeled", "[", 
                 RowBox[{
                  RowBox[{"TableForm", "[", "\[IndentingNewLine]", 
                   RowBox[{
                    RowBox[{"Table", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Table", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "senderPositionAverage", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], "[", 
                    "localizationAlgorithm", "]"}], "[", 
                    "normalSelectionMethod", "]"}], "\[IndentingNewLine]", 
                    ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                    "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
                    "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
                    RowBox[{"TableHeadings", "\[Rule]", 
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    "wallNormalAlgorithms", ",", "\[IndentingNewLine]", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"StringReplace", "[", 
                    RowBox[{"clusteringAlgorithm", ",", 
                    RowBox[{"\"\<, \>\"", "->", "\"\<,\\n\>\""}]}], "]"}], 
                    ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                    "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "]"}],
                   ",", 
                  RowBox[{"StringForm", "[", 
                   RowBox[{
                   "\"\<``, ``\>\"", ",", "localizationAlgorithm", ",", 
                    "normalSelectionMethod"}], "]"}], ",", "Top"}], "]"}], 
                "\[IndentingNewLine]", ",", 
                RowBox[{"{", 
                 RowBox[{
                 "normalSelectionMethod", ",", 
                  "normalVectorSelectionMethods"}], "}"}]}], "]"}], 
              "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{
               "localizationAlgorithm", ",", "localizationAlgorithms"}], 
               "}"}]}], "]"}], "\[IndentingNewLine]", ",", "1"}], "]"}], 
          "\[IndentingNewLine]", ",", 
          RowBox[{"Spacings", "\[Rule]", 
           RowBox[{"{", 
            RowBox[{"0", ",", "5"}], "}"}]}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", 
          "\"\<Sender Position Offset Standard Deviation\>\""}], "]"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"Style", "[", 
         RowBox[{"\"\<Sender Location Offset Standard Deviation:\>\"", ",", 
          RowBox[{"FontWeight", "\[Rule]", "Bold"}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
         "statistics", ",", 
          "\"\<Sender Position Offset Standard Deviation\>\""}], "]"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"Column", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Flatten", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Table", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Table", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"Labeled", "[", 
                 RowBox[{
                  RowBox[{"TableForm", "[", "\[IndentingNewLine]", 
                   RowBox[{
                    RowBox[{"Table", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Table", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "senderPositionStandardDeviation", "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                    "]"}], "[", "localizationAlgorithm", "]"}], "[", 
                    "normalSelectionMethod", "]"}], "\[IndentingNewLine]", 
                    ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                    "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
                    "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
                    RowBox[{"TableHeadings", "\[Rule]", 
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    "wallNormalAlgorithms", ",", "\[IndentingNewLine]", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"StringReplace", "[", 
                    RowBox[{"clusteringAlgorithm", ",", 
                    RowBox[{"\"\<, \>\"", "->", "\"\<,\\n\>\""}]}], "]"}], 
                    ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                    "}"}]}], "]"}]}], "\[IndentingNewLine]", "}"}]}]}], "]"}],
                   ",", 
                  RowBox[{"StringForm", "[", 
                   RowBox[{
                   "\"\<``, ``\>\"", ",", "localizationAlgorithm", ",", 
                    "normalSelectionMethod"}], "]"}], ",", "Top"}], "]"}], 
                "\[IndentingNewLine]", ",", 
                RowBox[{"{", 
                 RowBox[{
                 "normalSelectionMethod", ",", 
                  "normalVectorSelectionMethods"}], "}"}]}], "]"}], 
              "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{
               "localizationAlgorithm", ",", "localizationAlgorithms"}], 
               "}"}]}], "]"}], "\[IndentingNewLine]", ",", "1"}], "]"}], 
          "\[IndentingNewLine]", ",", 
          RowBox[{"Spacings", "\[Rule]", 
           RowBox[{"{", 
            RowBox[{"0", ",", "5"}], "}"}]}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"Style", "[", 
       RowBox[{
       "\"\<Best configuration, based on average sender postion offset:\>\"", 
        ",", 
        RowBox[{"FontWeight", "\[Rule]", "Bold"}]}], "]"}], ",", 
      "\[IndentingNewLine]", "bestAverageConfiguration", ",", 
      "\[IndentingNewLine]", 
      RowBox[{"Style", "[", 
       RowBox[{
       "\"\<Most stable configuration, based on sender postion offset \
standard deviation:\>\"", ",", 
        RowBox[{"FontWeight", "\[Rule]", "Bold"}]}], "]"}], ",", 
      "\[IndentingNewLine]", "mostStableConfiguration"}], 
     "\[IndentingNewLine]", "}"}], "\[IndentingNewLine]", ",", 
    RowBox[{"Spacings", "->", 
     RowBox[{"{", 
      RowBox[{"2", ",", "2"}], "}"}]}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.870281262087967*^9, 3.8702813210836678`*^9}, {
  3.870281378856749*^9, 3.870281457321292*^9}, {3.870281617148364*^9, 
  3.870281654243456*^9}, {3.870281693497692*^9, 3.870281743059753*^9}, {
  3.870281882658955*^9, 3.8702818866661453`*^9}, {3.8702822184604683`*^9, 
  3.870282394191703*^9}, {3.87028303427957*^9, 3.870283048978643*^9}, {
  3.870283943202832*^9, 3.870283948391589*^9}, {3.871148824374592*^9, 
  3.871148825516451*^9}},
 CellLabel->
  "In[162]:=",ExpressionUUID->"ca1be438-9f3a-4b5b-87f1-7c41a93586d8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"RearrangeClusteringStatistics", "[", "statistics_", "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
     "clusteringKeys", ",", "\[IndentingNewLine]", "localStatistics"}], 
     "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"clusteringKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{"statistics", "[", 
        RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"localStatistics", "=", 
      RowBox[{"Association", "[", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"clusteringAlgorithm", "->", 
          RowBox[{"{", "}"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"clusteringAlgorithm", ",", "clusteringKeys"}], "}"}]}], 
        "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"localStatistics", "[", "clusteringAlgorithm", "]"}], "=", 
          "\[IndentingNewLine]", 
          RowBox[{"Join", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"localStatistics", "[", "clusteringAlgorithm", "]"}], ",",
             "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"statistics", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", "clusteringAlgorithm", 
             "]"}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
         ",", 
         RowBox[{"{", 
          RowBox[{"clusteringAlgorithm", ",", "clusteringKeys"}], "}"}]}], 
        "]"}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", 
         RowBox[{"Length", "[", "statistics", "]"}]}], "}"}]}], "]"}], ";", 
     "\[IndentingNewLine]", "localStatistics"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.870281262087967*^9, 3.8702813210836678`*^9}, {
  3.870281378856749*^9, 3.870281457321292*^9}, {3.870281617148364*^9, 
  3.870281654243456*^9}, {3.870281693497692*^9, 3.870281743059753*^9}, {
  3.870281882658955*^9, 3.8702818866661453`*^9}, {3.8702822184604683`*^9, 
  3.870282394191703*^9}, {3.87028303427957*^9, 3.870283048978643*^9}, {
  3.870283943202832*^9, 3.870283976312162*^9}, {3.870284013382511*^9, 
  3.87028404297622*^9}, {3.870284190622304*^9, 3.870284190707327*^9}, {
  3.870284499131782*^9, 3.870284501638842*^9}, {3.8711487573890953`*^9, 
  3.8711487680380163`*^9}, {3.8711488399173822`*^9, 3.8711488439899273`*^9}},
 CellLabel->
  "In[163]:=",ExpressionUUID->"1c8f5e30-38f1-4c50-9337-0cb57548a08b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"RearrangeWallOffsetStatistics", "[", "statistics_", "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
     "clusteringKeys", ",", "\[IndentingNewLine]", "wallNormalKeys", ",", 
      "\[IndentingNewLine]", "localStatistics"}], "\[IndentingNewLine]", 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"clusteringKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{"statistics", "[", 
        RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"wallNormalKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{
        RowBox[{"statistics", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "[", 
        RowBox[{"clusteringKeys", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"localStatistics", "=", "\[IndentingNewLine]", 
      RowBox[{"Association", "[", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
          RowBox[{"Association", "[", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"wallNormalAlgorithm", "->", 
              RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
             RowBox[{"{", 
              RowBox[{"wallNormalAlgorithm", ",", "wallNormalKeys"}], "}"}]}],
             "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"clusteringAlgorithm", ",", "clusteringKeys"}], "}"}]}], 
        "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Do", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"localStatistics", "[", "clusteringAlgorithm", "]"}], 
             "[", "wallNormalAlgorithm", "]"}], "=", "\[IndentingNewLine]", 
            RowBox[{"Join", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{
               RowBox[{"localStatistics", "[", "clusteringAlgorithm", "]"}], 
               "[", "wallNormalAlgorithm", "]"}], ",", "\[IndentingNewLine]", 
              
              RowBox[{
               RowBox[{
                RowBox[{"statistics", "[", 
                 RowBox[{"[", "i", "]"}], "]"}], "[", "clusteringAlgorithm", 
                "]"}], "[", "wallNormalAlgorithm", "]"}]}], 
             "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", ",", 
           RowBox[{"{", 
            RowBox[{"wallNormalAlgorithm", ",", "wallNormalKeys"}], "}"}]}], 
          "]"}], "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"clusteringAlgorithm", ",", "clusteringKeys"}], "}"}]}], 
        "]"}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", 
         RowBox[{"Length", "[", "statistics", "]"}]}], "}"}]}], "]"}], ";", 
     "\[IndentingNewLine]", "localStatistics"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.870281262087967*^9, 3.8702813210836678`*^9}, {
  3.870281378856749*^9, 3.870281457321292*^9}, {3.870281617148364*^9, 
  3.870281654243456*^9}, {3.870281693497692*^9, 3.870281743059753*^9}, {
  3.870281882658955*^9, 3.8702818866661453`*^9}, {3.8702822184604683`*^9, 
  3.870282394191703*^9}, {3.87028303427957*^9, 3.870283048978643*^9}, {
  3.870283943202832*^9, 3.870283976312162*^9}, {3.870284013382511*^9, 
  3.8702840496456757`*^9}, {3.870284184167708*^9, 3.870284184251707*^9}, {
  3.87028449282469*^9, 3.870284494994598*^9}, {3.8711490532585173`*^9, 
  3.8711490611980867`*^9}, {3.871149202487558*^9, 3.871149211722014*^9}, {
  3.871149325842518*^9, 3.87114933366226*^9}, {3.871149373207066*^9, 
  3.871149377644452*^9}},
 CellLabel->
  "In[164]:=",ExpressionUUID->"0c21ba98-5630-452d-90f1-910ea75a2f66"],

Cell[BoxData[
 RowBox[{
  RowBox[{"RearrangeSenderPositionStatistics", "[", "statistics_", "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
     "clusteringKeys", ",", "\[IndentingNewLine]", "wallNormalKeys", ",", 
      "\[IndentingNewLine]", "senderLocalizationKeys", ",", 
      "\[IndentingNewLine]", "wallSelectionKeys", ",", "\[IndentingNewLine]", 
      "localStatistics"}], "\[IndentingNewLine]", "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"clusteringKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{"statistics", "[", 
        RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"wallNormalKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{
        RowBox[{"statistics", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "[", 
        RowBox[{"clusteringKeys", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"senderLocalizationKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"statistics", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"clusteringKeys", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}], "[", 
        RowBox[{"wallNormalKeys", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"wallSelectionKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"statistics", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"clusteringKeys", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "]"}], "[", 
         RowBox[{"wallNormalKeys", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}], "[", 
        RowBox[{"senderLocalizationKeys", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"localStatistics", "=", "\[IndentingNewLine]", 
      RowBox[{"Association", "[", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
          RowBox[{"Association", "[", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"wallNormalAlgorithm", "->", "\[IndentingNewLine]", 
              RowBox[{"Association", "[", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"localizationAlgorithm", "->", "\[IndentingNewLine]", 
                  RowBox[{"Association", "[", 
                   RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"normalSelectionMethod", "->", 
                    RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "normalSelectionMethod", ",", "wallSelectionKeys"}], 
                    "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
                 RowBox[{"{", 
                  RowBox[{
                  "localizationAlgorithm", ",", "senderLocalizationKeys"}], 
                  "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
             RowBox[{"{", 
              RowBox[{"wallNormalAlgorithm", ",", "wallNormalKeys"}], "}"}]}],
             "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"clusteringAlgorithm", ",", "clusteringKeys"}], "}"}]}], 
        "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Do", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Do", "[", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"Do", "[", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{
                   "localStatistics", "[", "clusteringAlgorithm", "]"}], "[", 
                   "wallNormalAlgorithm", "]"}], "[", "localizationAlgorithm",
                   "]"}], "[", "normalSelectionMethod", "]"}], "=", 
                "\[IndentingNewLine]", 
                RowBox[{"{", 
                 RowBox[{"Flatten", "[", 
                  RowBox[{
                   RowBox[{"Join", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "localStatistics", "[", "clusteringAlgorithm", "]"}], "[",
                     "wallNormalAlgorithm", "]"}], "[", 
                    "localizationAlgorithm", "]"}], "[", 
                    "normalSelectionMethod", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"statistics", "[", 
                    RowBox[{"[", "i", "]"}], "]"}], "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                    "]"}], "[", "localizationAlgorithm", "]"}], "[", 
                    "normalSelectionMethod", "]"}]}], "\[IndentingNewLine]", 
                    "]"}], ",", "1"}], "]"}], "}"}]}], "\[IndentingNewLine]", 
               ",", 
               RowBox[{"{", 
                RowBox[{"normalSelectionMethod", ",", "wallSelectionKeys"}], 
                "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
             RowBox[{"{", 
              RowBox[{
              "localizationAlgorithm", ",", "senderLocalizationKeys"}], 
              "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
           RowBox[{"{", 
            RowBox[{"wallNormalAlgorithm", ",", "wallNormalKeys"}], "}"}]}], 
          "]"}], "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"clusteringAlgorithm", ",", "clusteringKeys"}], "}"}]}], 
        "]"}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", 
         RowBox[{"Length", "[", "statistics", "]"}]}], "}"}]}], "]"}], ";", 
     "\[IndentingNewLine]", "localStatistics"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.870281262087967*^9, 3.8702813210836678`*^9}, {
   3.870281378856749*^9, 3.870281457321292*^9}, {3.870281617148364*^9, 
   3.870281654243456*^9}, {3.870281693497692*^9, 3.870281743059753*^9}, {
   3.870281882658955*^9, 3.8702818866661453`*^9}, {3.8702822184604683`*^9, 
   3.870282394191703*^9}, {3.87028303427957*^9, 3.8702830537282257`*^9}, {
   3.870283126700652*^9, 3.870283437506795*^9}, {3.870283477000835*^9, 
   3.870283683980969*^9}, {3.870283761118764*^9, 3.8702837667991533`*^9}, {
   3.8702838034006643`*^9, 3.8702838339602222`*^9}, {3.870283879964573*^9, 
   3.870283883919312*^9}, 3.87028393773109*^9, {3.8702842614036217`*^9, 
   3.870284261497693*^9}, {3.870284323585628*^9, 3.870284325367941*^9}, {
   3.870286161903038*^9, 3.870286165175221*^9}, {3.871149392100628*^9, 
   3.8711494191344633`*^9}, 3.871149605966226*^9},
 CellLabel->
  "In[165]:=",ExpressionUUID->"5ef8ed00-d7f8-400e-840e-a742d7feae61"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"ConsolidateTimingStatistics", "[", "timingStatistics_", "]"}], ":=",
    "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"keys", ",", "localStatistics"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"keys", "=", 
       RowBox[{"Keys", "[", 
        RowBox[{"timingStatistics", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"localStatistics", "=", 
       RowBox[{"Association", "[", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"key", "->", 
           RowBox[{"{", "}"}]}], ",", 
          RowBox[{"{", 
           RowBox[{"key", ",", "keys"}], "}"}]}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Do", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Do", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"localStatistics", "[", "key", "]"}], "=", 
           "\[IndentingNewLine]", 
           RowBox[{"Flatten", "[", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"Join", "[", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"localStatistics", "[", "key", "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"timingStatistics", "[", 
                 RowBox[{"[", "i", "]"}], "]"}], "[", "key", "]"}]}], "]"}], 
             "\[IndentingNewLine]", ",", "1"}], "]"}]}], 
          "\[IndentingNewLine]", ",", 
          RowBox[{"{", 
           RowBox[{"key", ",", "keys"}], "}"}]}], "]"}], 
        "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", 
          RowBox[{"Length", "[", "timingStatistics", "]"}]}], "}"}]}], "]"}], 
      ";", "\[IndentingNewLine]", "localStatistics"}]}], 
    "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.870281262087967*^9, 3.8702813210836678`*^9}, {
   3.870281378856749*^9, 3.870281457321292*^9}, {3.870281617148364*^9, 
   3.870281654243456*^9}, {3.870281693497692*^9, 3.870281743059753*^9}, {
   3.870281882658955*^9, 3.8702818866661453`*^9}, {3.8702822184604683`*^9, 
   3.870282394191703*^9}, {3.87028303427957*^9, 3.8702830537282257`*^9}, {
   3.870283126700652*^9, 3.870283437506795*^9}, {3.870283477000835*^9, 
   3.870283683980969*^9}, {3.870283761118764*^9, 3.8702837667991533`*^9}, {
   3.8702838034006643`*^9, 3.8702838339602222`*^9}, {3.870283879964573*^9, 
   3.870283883919312*^9}, 3.87028393773109*^9, {3.8702842614036217`*^9, 
   3.870284261497693*^9}, {3.870284323585628*^9, 3.870284325367941*^9}, {
   3.870286161903038*^9, 3.870286312554851*^9}, {3.870286415062344*^9, 
   3.870286421615386*^9}, {3.870286491897586*^9, 3.870286499654111*^9}, {
   3.8702865311709967`*^9, 3.870286534770418*^9}, {3.870286595740666*^9, 
   3.87028659752183*^9}, {3.870286634468669*^9, 3.870286641034603*^9}, {
   3.870286717176313*^9, 3.870286719832492*^9}, {3.870286824489543*^9, 
   3.8702868283442087`*^9}, {3.870286875315712*^9, 3.870286877430809*^9}, {
   3.8710466912842484`*^9, 3.871046703185355*^9}, 3.871046766564638*^9},
 CellLabel->
  "In[166]:=",ExpressionUUID->"27394e6e-3bbc-4722-a6c3-9908d9865a38"]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Function for exporting statistics from experiments to csv-files\
\>", "Subsubsection",
 CellChangeTimes->{{3.867737849032693*^9, 
  3.867737866868657*^9}},ExpressionUUID->"f06e25dd-dff8-45b8-a36a-\
1a1654ed88fd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"CSVExportStatistics", "[", "\[IndentingNewLine]", 
   RowBox[{
   "precisionRecall_", ",", "\[IndentingNewLine]", "wallNormalOffset_", ",", 
    "\[IndentingNewLine]", "senderLocationOffset_", ",", 
    "\[IndentingNewLine]", "numSenders_", ",", "numIterations_", ",", "room_",
     ",", "\[IndentingNewLine]", "clusteringTimingStatistics_", ",", 
    "\[IndentingNewLine]", "wallNormalTimingStatistics_", ",", 
    "\[IndentingNewLine]", "senderPositionWallSelectionTimingStatistics_", 
    ",", "\[IndentingNewLine]", 
    RowBox[{"receiverMoving_", ":", "False"}]}], "\[IndentingNewLine]", "]"}],
   ":=", "\[IndentingNewLine]", 
  RowBox[{"(", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Create", " ", "Precision", " ", "Recall", " ", "Output"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Export", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"ToFileName", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"NotebookDirectory", "[", "]"}], ",", 
          RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"StringReplace", "[", 
             RowBox[{
             "\"\<experiment-data/$ROOM-$MOVING-$SENDERS-senders-$ITERATIONS-\
runs/precision-recall-$ALGORITHM.csv\>\"", ",", "\[IndentingNewLine]", 
              RowBox[{"{", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"\"\<$MOVING\>\"", "->", 
                 RowBox[{"If", "[", 
                  RowBox[{
                  "receiverMoving", ",", "\"\<moving\>\"", ",", 
                   "\"\<static\>\""}], "]"}]}], ",", "\[IndentingNewLine]", 
                RowBox[{"\"\<$ALGORITHM\>\"", "->", "clusteringAlgorithm"}], 
                ",", "\[IndentingNewLine]", 
                RowBox[{"\"\<$SENDERS\>\"", "->", 
                 RowBox[{"ToString", "[", "numSenders", "]"}]}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"\"\<$ITERATIONS\>\"", "->", 
                 RowBox[{"ToString", "[", "numIterations", "]"}]}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"\"\<$ROOM\>\"", "->", 
                 RowBox[{"ToString", "[", 
                  RowBox[{
                   RowBox[{"room", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", 
                    RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}]}], 
               "\[IndentingNewLine]", "}"}]}], "]"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"\"\<, \>\"", "->", "\"\<_\>\""}]}], "]"}]}], 
         "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"N", "[", 
             RowBox[{"triple", "[", 
              RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
            RowBox[{"N", "[", 
             RowBox[{"triple", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "]"}], ",", 
            RowBox[{"N", "[", 
             RowBox[{"triple", "[", 
              RowBox[{"[", "3", "]"}], "]"}], "]"}]}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"triple", ",", 
            RowBox[{"Flatten", "[", 
             RowBox[{
              RowBox[{"precisionRecall", "[", "clusteringAlgorithm", "]"}], 
              ",", "1"}], "]"}]}], "}"}]}], "]"}], ",", 
        "\[IndentingNewLine]", "\"\<CSV\>\"", ",", "\[IndentingNewLine]", 
        RowBox[{"\"\<TableHeadings\>\"", "->", 
         RowBox[{"{", 
          RowBox[{
          "\"\<Precision\>\"", ",", "\"\<Recall\>\"", ",", 
           "\"\<F0.5-Score\>\""}], "}"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"\"\<TextDelimites\>\"", "->", "\"\<\>\""}]}], 
       "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
      RowBox[{"{", 
       RowBox[{"clusteringAlgorithm", ",", 
        RowBox[{"Keys", "[", "precisionRecall", "]"}]}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{"Create", " ", "Wall", " ", "Offset", " ", "Outputs"}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Do", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Export", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"ToFileName", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"NotebookDirectory", "[", "]"}], ",", 
            RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"StringReplace", "[", 
               RowBox[{
               "\"\<experiment-data/$ROOM-$MOVING-$SENDERS-senders-$\
ITERATIONS-runs/wall-offset-$ALGORITHM.csv\>\"", ",", "\[IndentingNewLine]", 
                RowBox[{"{", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"\"\<$MOVING\>\"", "->", 
                   RowBox[{"If", "[", 
                    RowBox[{
                    "receiverMoving", ",", "\"\<moving\>\"", ",", 
                    "\"\<static\>\""}], "]"}]}], ",", "\[IndentingNewLine]", 
                  RowBox[{"\"\<$ALGORITHM\>\"", "->", 
                   RowBox[{
                   "clusteringAlgorithm", "<>", "\"\<-\>\"", "<>", 
                    "wallNormalAlgorithm"}]}], ",", "\[IndentingNewLine]", 
                  RowBox[{"\"\<$SENDERS\>\"", "->", 
                   RowBox[{"ToString", "[", "numSenders", "]"}]}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"\"\<$ITERATIONS\>\"", "->", 
                   RowBox[{"ToString", "[", "numIterations", "]"}]}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"\"\<$ROOM\>\"", "->", 
                   RowBox[{"ToString", "[", 
                    RowBox[{
                    RowBox[{"room", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", 
                    RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}]}], 
                 "\[IndentingNewLine]", "}"}]}], "]"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<, \>\"", "->", "\"\<_\>\""}]}], "]"}]}], 
           "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Flatten", "[", 
           RowBox[{
            RowBox[{"wallNormalOffset", "[", "clusteringAlgorithm", "]"}], 
            "[", "wallNormalAlgorithm", "]"}], "]"}], ",", 
          "\[IndentingNewLine]", "\"\<CSV\>\"", ",", "\[IndentingNewLine]", 
          RowBox[{"\"\<TableHeadings\>\"", "->", 
           RowBox[{"{", "\"\<Wall Normal Offset\>\"", "}"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<TextDelimites\>\"", "->", "\"\<\>\""}]}], 
         "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"wallNormalAlgorithm", ",", 
          RowBox[{"Keys", "[", 
           RowBox[{"wallNormalOffset", "[", "clusteringAlgorithm", "]"}], 
           "]"}]}], "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
      RowBox[{"{", 
       RowBox[{"clusteringAlgorithm", ",", 
        RowBox[{"Keys", "[", "wallNormalOffset", "]"}]}], "}"}]}], "]"}], ";",
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{"Create", " ", "sender", " ", "offset", " ", "outputs"}], " ", 
     "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Do", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Do", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Do", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Export", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"ToFileName", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"NotebookDirectory", "[", "]"}], ",", 
                RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"StringReplace", "[", 
                   RowBox[{
                   "\"\<experiment-data/$ROOM-$MOVING-$SENDERS-senders-$\
ITERATIONS-runs/sender-offset-$ALGORITHM.csv\>\"", ",", "\[IndentingNewLine]", 
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"\"\<$MOVING\>\"", "->", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    "receiverMoving", ",", "\"\<moving\>\"", ",", 
                    "\"\<static\>\""}], "]"}]}], ",", "\[IndentingNewLine]", 
                    RowBox[{"\"\<$ALGORITHM\>\"", "->", 
                    RowBox[{
                    "clusteringAlgorithm", "<>", "\"\<-\>\"", "<>", 
                    "wallNormalAlgorithm", "<>", "\"\<-\>\"", "<>", 
                    "senderLocationAlgorithm", "<>", "\"\<-\>\"", "<>", 
                    "wallSelectionMethod"}]}], ",", "\[IndentingNewLine]", 
                    RowBox[{"\"\<$SENDERS\>\"", "->", 
                    RowBox[{"ToString", "[", "numSenders", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<$ITERATIONS\>\"", "->", 
                    RowBox[{"ToString", "[", "numIterations", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<$ROOM\>\"", "->", 
                    RowBox[{"ToString", "[", 
                    RowBox[{
                    RowBox[{"room", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", 
                    RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}]}], 
                    "\[IndentingNewLine]", "}"}]}], "]"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"\"\<, \>\"", "->", "\"\<_\>\""}]}], "]"}]}], 
               "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
              RowBox[{"Flatten", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{
                  "senderLocationOffset", "[", "clusteringAlgorithm", "]"}], 
                  "[", "wallNormalAlgorithm", "]"}], "[", 
                 "senderLocationAlgorithm", "]"}], "[", "wallSelectionMethod",
                 "]"}], "]"}], ",", "\[IndentingNewLine]", "\"\<CSV\>\"", ",",
               "\[IndentingNewLine]", 
              RowBox[{"\"\<TableHeadings\>\"", "->", 
               RowBox[{"{", "\"\<Sender Position Offset\>\"", "}"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<TextDelimites\>\"", "->", "\"\<\>\""}]}], 
             "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{"wallSelectionMethod", ",", 
              RowBox[{"Keys", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                 "senderLocationOffset", "[", "clusteringAlgorithm", "]"}], 
                 "[", "wallNormalAlgorithm", "]"}], "[", 
                "senderLocationAlgorithm", "]"}], "]"}]}], "}"}]}], "]"}], 
          "\[IndentingNewLine]", ",", 
          RowBox[{"{", 
           RowBox[{"senderLocationAlgorithm", ",", 
            RowBox[{"Keys", "[", 
             RowBox[{
              RowBox[{
              "senderLocationOffset", "[", "clusteringAlgorithm", "]"}], "[", 
              "wallNormalAlgorithm", "]"}], "]"}]}], "}"}]}], "]"}], 
        "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"wallNormalAlgorithm", ",", 
          RowBox[{"Keys", "[", 
           RowBox[{"senderLocationOffset", "[", "clusteringAlgorithm", "]"}], 
           "]"}]}], "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
      RowBox[{"{", 
       RowBox[{"clusteringAlgorithm", ",", 
        RowBox[{"Keys", "[", "senderLocationOffset", "]"}]}], "}"}]}], "]"}], 
    ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Create", " ", "Timing", " ", "outputs", " ", "fo", " ", "clustering", 
      " ", "algorithms"}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Export", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"ToFileName", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", 
        RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"StringReplace", "[", 
           RowBox[{
           "\"\<experiment-data/$ROOM-$MOVING-$SENDERS-senders-$ITERATIONS-\
runs/timing-statistics-clustering.csv\>\"", ",", "\[IndentingNewLine]", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"\"\<$MOVING\>\"", "->", 
               RowBox[{"If", "[", 
                RowBox[{
                "receiverMoving", ",", "\"\<moving\>\"", ",", 
                 "\"\<static\>\""}], "]"}]}], ",", "\[IndentingNewLine]", 
              RowBox[{"\"\<$SENDERS\>\"", "->", 
               RowBox[{"ToString", "[", "numSenders", "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<$ITERATIONS\>\"", "->", 
               RowBox[{"ToString", "[", "numIterations", "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<$ROOM\>\"", "->", 
               RowBox[{"ToString", "[", 
                RowBox[{
                 RowBox[{"room", "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "[", 
                 RowBox[{"[", 
                  RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}]}], 
             "\[IndentingNewLine]", "}"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<, \>\"", "->", "\"\<_\>\""}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", "clusteringAlgorithm", "}"}], ",", 
          RowBox[{
          "clusteringTimingStatistics", "[", "clusteringAlgorithm", "]"}]}], 
         "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"clusteringAlgorithm", ",", 
          RowBox[{"Keys", "[", "clusteringTimingStatistics", "]"}]}], "}"}]}],
        "]"}], ",", "\[IndentingNewLine]", "\"\<CSV\>\"", ",", 
      "\[IndentingNewLine]", 
      RowBox[{"\"\<TextDelimites\>\"", "->", "\"\<\>\""}]}], 
     "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Create", " ", "Timing", " ", "outputs", " ", "fo", " ", "wall", " ", 
      "normal", " ", "algorithms"}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Export", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"ToFileName", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", 
        RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"StringReplace", "[", 
           RowBox[{
           "\"\<experiment-data/$ROOM-$MOVING-$SENDERS-senders-$ITERATIONS-\
runs/timing-statistics-wall-normal.csv\>\"", ",", "\[IndentingNewLine]", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"\"\<$MOVING\>\"", "->", 
               RowBox[{"If", "[", 
                RowBox[{
                "receiverMoving", ",", "\"\<moving\>\"", ",", 
                 "\"\<static\>\""}], "]"}]}], ",", "\[IndentingNewLine]", 
              RowBox[{"\"\<$SENDERS\>\"", "->", 
               RowBox[{"ToString", "[", "numSenders", "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<$ITERATIONS\>\"", "->", 
               RowBox[{"ToString", "[", "numIterations", "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<$ROOM\>\"", "->", 
               RowBox[{"ToString", "[", 
                RowBox[{
                 RowBox[{"room", "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "[", 
                 RowBox[{"[", 
                  RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}]}], 
             "\[IndentingNewLine]", "}"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<, \>\"", "->", "\"\<_\>\""}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", "wallNormalAlgorithm", "}"}], ",", 
          RowBox[{
          "wallNormalTimingStatistics", "[", "wallNormalAlgorithm", "]"}]}], 
         "]"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"wallNormalAlgorithm", ",", 
          RowBox[{"Keys", "[", "wallNormalTimingStatistics", "]"}]}], "}"}]}],
        "]"}], ",", "\[IndentingNewLine]", "\"\<CSV\>\"", ",", 
      "\[IndentingNewLine]", 
      RowBox[{"\"\<TextDelimites\>\"", "->", "\"\<\>\""}]}], 
     "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "Create", " ", "Timing", " ", "outputs", " ", "fo", " ", "sender", " ", 
      "localization", " ", "algorithms"}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Export", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"ToFileName", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", 
        RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"StringReplace", "[", 
           RowBox[{
           "\"\<experiment-data/$ROOM-$MOVING-$SENDERS-senders-$ITERATIONS-\
runs/timing-statistics-sender-localization-wall-selection.csv\>\"", ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"\"\<$MOVING\>\"", "->", 
               RowBox[{"If", "[", 
                RowBox[{
                "receiverMoving", ",", "\"\<moving\>\"", ",", 
                 "\"\<static\>\""}], "]"}]}], ",", "\[IndentingNewLine]", 
              RowBox[{"\"\<$SENDERS\>\"", "->", 
               RowBox[{"ToString", "[", "numSenders", "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<$ITERATIONS\>\"", "->", 
               RowBox[{"ToString", "[", "numIterations", "]"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<$ROOM\>\"", "->", 
               RowBox[{"ToString", "[", 
                RowBox[{
                 RowBox[{"room", "[", 
                  RowBox[{"[", "2", "]"}], "]"}], "[", 
                 RowBox[{"[", 
                  RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}]}], 
             "\[IndentingNewLine]", "}"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<, \>\"", "->", "\"\<_\>\""}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", "senderLocalizationAlgorithm", "}"}], ",", 
          RowBox[{
          "senderPositionWallSelectionTimingStatistics", "[", 
           "senderLocalizationAlgorithm", "]"}]}], "]"}], 
        "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"senderLocalizationAlgorithm", ",", 
          RowBox[{
          "Keys", "[", "senderPositionWallSelectionTimingStatistics", "]"}]}],
          "}"}]}], "]"}], ",", "\[IndentingNewLine]", "\"\<CSV\>\"", ",", 
      "\[IndentingNewLine]", 
      RowBox[{"\"\<TextDelimites\>\"", "->", "\"\<\>\""}]}], 
     "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]", 
   ")"}]}]], "Input",
 CellChangeTimes->{{3.8656682017471313`*^9, 3.8656682387726*^9}, {
   3.865668335484007*^9, 3.865668448407831*^9}, {3.8656684885253572`*^9, 
   3.8656686308996677`*^9}, {3.865668660994149*^9, 3.865668781658762*^9}, {
   3.865668812658711*^9, 3.865668852808545*^9}, {3.8656689133718987`*^9, 
   3.865668918572093*^9}, {3.865669013459648*^9, 3.86566905344986*^9}, {
   3.865669090712676*^9, 3.865669100870371*^9}, {3.8656691465198307`*^9, 
   3.865669680098516*^9}, {3.8656699108435*^9, 3.8656700524565687`*^9}, {
   3.865670106986867*^9, 3.865670438342659*^9}, {3.8656704787479362`*^9, 
   3.865670539754436*^9}, {3.8656705867738132`*^9, 3.865671031273745*^9}, {
   3.865671065967112*^9, 3.865671329299966*^9}, {3.865671363026422*^9, 
   3.865671419380451*^9}, {3.8656714903257837`*^9, 3.865671681737355*^9}, 
   3.8656718795894747`*^9, {3.865671916303174*^9, 3.8656719253875523`*^9}, {
   3.865672627635313*^9, 3.865672679793899*^9}, {3.865672721736981*^9, 
   3.8656729405849247`*^9}, {3.865673009828539*^9, 3.865673063363489*^9}, {
   3.865673112185863*^9, 3.865673174637507*^9}, {3.865673234990594*^9, 
   3.8656733215234327`*^9}, {3.865673395623888*^9, 3.865673428485677*^9}, {
   3.865673811556549*^9, 3.865673921263153*^9}, {3.865673953371766*^9, 
   3.8656740619930353`*^9}, {3.865674093645973*^9, 3.8656740963984413`*^9}, {
   3.865674137165357*^9, 3.865674154849882*^9}, {3.86567421462996*^9, 
   3.8656742334368973`*^9}, {3.865674286417746*^9, 3.865674439057975*^9}, {
   3.865674475073032*^9, 3.865674541149461*^9}, 3.865674613403674*^9, {
   3.865674788976953*^9, 3.865674852303687*^9}, {3.8656748992439137`*^9, 
   3.865674925675509*^9}, {3.865675004488401*^9, 3.865675241902401*^9}, {
   3.865675325603531*^9, 3.8656753550940447`*^9}, {3.865675396750141*^9, 
   3.865675548147346*^9}, {3.8656756255148067`*^9, 3.865675690528603*^9}, {
   3.865675728771926*^9, 3.865675800057932*^9}, {3.865675839384087*^9, 
   3.8656758961554623`*^9}, {3.865675973236953*^9, 3.865676012619561*^9}, {
   3.865676068937991*^9, 3.865676079633605*^9}, {3.86567611746561*^9, 
   3.865676322194213*^9}, {3.865676427134386*^9, 3.865676545153511*^9}, 
   3.865676591179673*^9, 3.865676642999354*^9, {3.865676688720603*^9, 
   3.865676707157338*^9}, {3.8658360038200817`*^9, 3.865836020322484*^9}, {
   3.865842740340764*^9, 3.865842763214839*^9}, {3.865842818016011*^9, 
   3.865842995688655*^9}, {3.8658430330580072`*^9, 3.865843299073595*^9}, {
   3.8658433303209677`*^9, 3.865843412730242*^9}, {3.865843637499868*^9, 
   3.865843708399967*^9}, 3.865844325058922*^9, {3.865844562931224*^9, 
   3.865844570718903*^9}, {3.865844709273456*^9, 3.865844762888763*^9}, {
   3.865844937111874*^9, 3.865844951563712*^9}, 3.865844998326589*^9, {
   3.8658451115173483`*^9, 3.865845286720373*^9}, {3.865845326102887*^9, 
   3.86584534135401*^9}, {3.865845425374393*^9, 3.86584543740809*^9}, {
   3.865845504934977*^9, 3.8658455590220633`*^9}, {3.865845626766573*^9, 
   3.8658458155573387`*^9}, {3.865845876678534*^9, 3.865845878987273*^9}, {
   3.865845958075204*^9, 3.86584601038901*^9}, {3.865846057853422*^9, 
   3.8658461379366417`*^9}, {3.8658462079828568`*^9, 
   3.8658462590438833`*^9}, {3.865846292838846*^9, 3.865846320946464*^9}, {
   3.865846386947698*^9, 3.865846410211502*^9}, {3.865846481258697*^9, 
   3.865846527616061*^9}, {3.865846659549758*^9, 3.865846688774869*^9}, {
   3.865846729598536*^9, 3.865846741937698*^9}, {3.865846775585412*^9, 
   3.865846809715817*^9}, {3.86584685539036*^9, 3.865846860496279*^9}, {
   3.8658469054744368`*^9, 3.865846961349135*^9}, {3.865847045925119*^9, 
   3.865847054544011*^9}, 3.8658471016812773`*^9, {3.865847136414963*^9, 
   3.865847138275054*^9}, {3.8658475776439743`*^9, 3.865847580569715*^9}, {
   3.865847672878935*^9, 3.865847676086005*^9}, {3.865847711730797*^9, 
   3.865847716164123*^9}, {3.8658477599975147`*^9, 3.865847793473448*^9}, {
   3.86584787830816*^9, 3.8658478827147703`*^9}, {3.865847922849914*^9, 
   3.865847925309499*^9}, {3.865847970699296*^9, 3.865847973047983*^9}, {
   3.865848019351033*^9, 3.865848044752865*^9}, {3.865848107165716*^9, 
   3.865848228950633*^9}, {3.8658482761188507`*^9, 3.8658482810594387`*^9}, {
   3.865848333951034*^9, 3.86584833583366*^9}, {3.865848382703779*^9, 
   3.8658484469649467`*^9}, {3.865848485928832*^9, 3.8658484921030827`*^9}, {
   3.865851651942663*^9, 3.865851687135828*^9}, {3.865851727519203*^9, 
   3.8658517608140783`*^9}, {3.8658518416151037`*^9, 3.865851846774575*^9}, {
   3.865851891803944*^9, 3.8658519456398573`*^9}, {3.865851979005424*^9, 
   3.8658521906674957`*^9}, {3.865852227388226*^9, 3.865852232358893*^9}, {
   3.865852317100679*^9, 3.865852519763706*^9}, {3.865852554530033*^9, 
   3.865852582061634*^9}, {3.865852620258753*^9, 3.8658526817919607`*^9}, {
   3.865852805669856*^9, 3.865852807236711*^9}, {3.865853994879113*^9, 
   3.865854000949923*^9}, {3.865854045519795*^9, 3.865854046268237*^9}, {
   3.865854146893993*^9, 3.8658541471347513`*^9}, {3.865854593921158*^9, 
   3.8658545962361927`*^9}, {3.86585473348289*^9, 3.865854757904394*^9}, {
   3.8660950358669853`*^9, 3.86609506559009*^9}, {3.866095124746292*^9, 
   3.8660951455472803`*^9}, {3.866095177345245*^9, 3.866095274092391*^9}, {
   3.8660956177880297`*^9, 3.8660956190630836`*^9}, {3.866095733650898*^9, 
   3.8660957341802053`*^9}, {3.8660979851056423`*^9, 3.866098008599543*^9}, {
   3.866098165748601*^9, 3.866098178161426*^9}, {3.866098209347165*^9, 
   3.8660982121085367`*^9}, {3.866098969072007*^9, 3.866099024012244*^9}, {
   3.8660991669370537`*^9, 3.866099231987338*^9}, {3.866099353641306*^9, 
   3.8660995456758327`*^9}, {3.866099596213313*^9, 3.8660996745859203`*^9}, {
   3.866099753345223*^9, 3.866099844180643*^9}, {3.866099920426283*^9, 
   3.866099946275648*^9}, {3.86609997702772*^9, 3.8660999819886217`*^9}, {
   3.866100035655425*^9, 3.866100091955183*^9}, {3.8661004431233377`*^9, 
   3.866100463080223*^9}, {3.8661006496509132`*^9, 3.866100654268702*^9}, {
   3.866105481296537*^9, 3.8661054817478456`*^9}, 3.866690954756962*^9, {
   3.866695332493284*^9, 3.866695376929009*^9}, {3.866695443649371*^9, 
   3.866695463593244*^9}, {3.867565564016675*^9, 3.86756557597318*^9}, {
   3.867732603146414*^9, 3.8677326492038317`*^9}, {3.86773271130542*^9, 
   3.867732749522688*^9}, {3.8677329064687967`*^9, 3.8677329067344112`*^9}, {
   3.867733141085642*^9, 3.8677334348661118`*^9}, {3.8677337097811813`*^9, 
   3.867733730103242*^9}, 3.8677337733456984`*^9, {3.8677338056863956`*^9, 
   3.867733951824973*^9}, {3.867734009874432*^9, 3.867734058367804*^9}, {
   3.8677341111866817`*^9, 3.867734140043736*^9}, {3.8677342342018013`*^9, 
   3.8677343233223267`*^9}, 3.867734365769732*^9, {3.867734538653479*^9, 
   3.8677345510699873`*^9}, {3.867734652112138*^9, 3.867734658516314*^9}, {
   3.867734727609157*^9, 3.8677348355359707`*^9}, {3.867734872664658*^9, 
   3.8677348915158873`*^9}, {3.867734990044272*^9, 3.8677350143412657`*^9}, {
   3.8677350651710863`*^9, 3.867735097031892*^9}, {3.867735180116701*^9, 
   3.86773521594105*^9}, {3.867735257871438*^9, 3.867735275257072*^9}, {
   3.867735308211073*^9, 3.867735345124425*^9}, {3.867735385337496*^9, 
   3.867735528168026*^9}, {3.867735604365532*^9, 3.867735614289509*^9}, {
   3.8677356711593437`*^9, 3.867735785974763*^9}, {3.867735849517712*^9, 
   3.8677358523302727`*^9}, {3.867735920530048*^9, 3.8677359219828367`*^9}, {
   3.867736099464099*^9, 3.8677361014602222`*^9}, {3.867736142115451*^9, 
   3.867736148788637*^9}, {3.867736192645136*^9, 3.867736205835224*^9}, {
   3.867736255938121*^9, 3.867736500132509*^9}, {3.86773657316959*^9, 
   3.867736620132194*^9}, {3.867740453763068*^9, 3.867740461123515*^9}, {
   3.870287012804633*^9, 3.870287172957819*^9}, {3.870287252187578*^9, 
   3.870287326376749*^9}, 3.870287486000472*^9, {3.870287574199621*^9, 
   3.870287589415389*^9}, {3.870287627627057*^9, 3.870287633098517*^9}, {
   3.870287668844305*^9, 3.870287673800774*^9}, {3.870287732043107*^9, 
   3.87028777610997*^9}, {3.870287812214303*^9, 3.870287824653038*^9}, {
   3.870344323571385*^9, 3.8703443252938213`*^9}, {3.870344368288863*^9, 
   3.870344417538809*^9}, {3.87034484424247*^9, 3.870344850724558*^9}, {
   3.870345241134836*^9, 3.870345241496784*^9}, {3.870345350200482*^9, 
   3.870345353177355*^9}, {3.8703454166474648`*^9, 3.870345438525078*^9}, {
   3.870430637685219*^9, 3.870430640986312*^9}, 3.870430916727068*^9, {
   3.8704478552839413`*^9, 3.8704479293835173`*^9}, {3.870448008733148*^9, 
   3.8704480393139687`*^9}, {3.8704489994819393`*^9, 3.870449005879025*^9}, {
   3.8704491102049026`*^9, 3.870449123352035*^9}, {3.871046245089966*^9, 
   3.871046293131378*^9}, {3.8710464078823957`*^9, 3.871046428597316*^9}, {
   3.871046837213171*^9, 3.8710468423008537`*^9}, {3.871184872338079*^9, 
   3.871184872648551*^9}, 3.871185015616663*^9},
 CellLabel->
  "In[167]:=",ExpressionUUID->"90adfb2d-6cef-4d84-8567-bab3418c21b5"]
}, Closed]],

Cell[CellGroupData[{

Cell["Main Function", "Subsubsection",
 CellChangeTimes->{{3.873349510521028*^9, 
  3.873349512020794*^9}},ExpressionUUID->"46025537-c682-4c6a-a68d-\
7593793c205f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ParallelGenerateCSVDataMultipleExperiments", "[", 
   RowBox[{"room_", ",", "numIterations_", ",", "receiverPosition_", ",", 
    RowBox[{"moveReceiver_", ":", "False"}]}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"\[Beta]", "=", "0.5"}], ",", " ", 
      RowBox[{"(*", " ", 
       RowBox[{
       "used", " ", "for", " ", "precision", " ", "recall", " ", 
        "statistics"}], " ", "*)"}], "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"precisionRecallStatistics", "=", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"wallOffsetStatistics", "=", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"senderPositionStatistics", "=", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"clusteringTimingStatistics", "=", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"wallNormalTimingStatistics", "=", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"senderPositionWallSelectionTimingStatistics", "=", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "precisionRecallAverage", ",", 
      "\[IndentingNewLine]", "wallOffsetAverage", ",", "\[IndentingNewLine]", 
      "senderPositionAverage", ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "precisionRecallStandardDeviation", ",", 
      "\[IndentingNewLine]", "wallOffsetStandardDeviation", ",", 
      "\[IndentingNewLine]", "senderPositionStandardDeviation", ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"bestAverageConfiguration", "=", "\"\<None\>\""}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"mostStableConfiguration", "=", "\"\<None\>\""}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"clusteringAlgorithms", "=", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
        "\"\<Inversion, Original\>\"", ",", "\[IndentingNewLine]", 
         "\"\<Inversion, Improved\>\"", ",", "\[IndentingNewLine]", 
         "\"\<Gnomonic, Basic Intersections\>\"", ",", "\[IndentingNewLine]", 
         "\"\<Gnomonic, Improved Intersections\>\"", ",", 
         "\[IndentingNewLine]", "\"\<Gnomonic, Random Points\>\"", ",", 
         "\[IndentingNewLine]", "\"\<Gnomonic, Random Points Often\>\"", ",", 
         "\[IndentingNewLine]", "\"\<Community Detection\>\""}], 
        "\[IndentingNewLine]", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"wallNormalAlgorithms", "=", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
        "\"\<All Pairs\>\"", ",", "\[IndentingNewLine]", 
         "\"\<Disjoint Pairs\>\"", ",", "\[IndentingNewLine]", 
         "\"\<Linear All Pairs\>\"", ",", "\[IndentingNewLine]", 
         "\"\<Overlapping Pairs\>\""}], "\[IndentingNewLine]", "}"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"normalVectorSelectionMethods", "=", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
        "\"\<Most Reflections\>\"", ",", "\"\<Average Position\>\"", ",", 
         "\"\<Closest Lines Extended\>\"", ",", 
         "\"\<Weighted Average (Wall Distance)\>\"", ",", 
         "\"\<Closest Reflection Group\>\""}], "\[IndentingNewLine]", "}"}]}],
       ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"localizationAlgorithms", "=", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
        "\"\<Wall Direction\>\"", ",", "\"\<Map to Normal Vector\>\"", ",", 
         "\"\<Reflection Geometry\>\"", ",", "\"\<Closest Lines\>\""}], 
        "\[IndentingNewLine]", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"roomSelection", "=", 
       RowBox[{"Switch", "[", "\[IndentingNewLine]", 
        RowBox[{"room", ",", "\[IndentingNewLine]", "\"\<cube\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"cubeRoom", ",", "cubeRoomData"}], "}"}], ",", 
         "\[IndentingNewLine]", "\"\<television\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"tvRoom", ",", "tvRoomData"}], "}"}], ",", 
         "\[IndentingNewLine]", "\"\<complex\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"complexRoom", ",", "complexRoomData"}], "}"}], ",", 
         "\[IndentingNewLine]", "\"\<corridor\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"corridorRoom", ",", "corridorRoomData"}], "}"}], ",", 
         "\[IndentingNewLine]", "\"\<slope\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"slopeRoom", ",", "slopeRoomData"}], "}"}], ",", 
         "\[IndentingNewLine]", "\"\<window\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"windowRoom", ",", "windowRoomData"}], "}"}], ",", 
         "\[IndentingNewLine]", "\"\<hdn\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"hdnRoom", ",", "hdnRoomData"}], "}"}], ",", 
         "\[IndentingNewLine]", "\"\<big_cube\>\"", ",", 
         RowBox[{"{", 
          RowBox[{"bigCubeRoom", ",", "bigCubeRoomData"}], "}"}]}], 
        "\[IndentingNewLine]", "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"numSenders", "=", "25"}], ",", "\[IndentingNewLine]", 
      RowBox[{"vonMisesConcentration", "=", "131.312"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"\[CapitalDelta]Error", "=", "0.1"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"directSignalDiscardFactor", "=", "0"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"reflectionDiscardFactor", "=", "0"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"wallErrorFactor", "=", "0.05"}], ",", "\[IndentingNewLine]", 
      RowBox[{"currentIteration", "=", "1"}], ",", "\[IndentingNewLine]", 
      RowBox[{"experimentVisualizations", "=", 
       RowBox[{"{", "}"}]}]}], "\[IndentingNewLine]", "}"}], ",", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"SetSharedVariable", "[", "precisionRecallStatistics", "]"}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"SetSharedVariable", "[", "wallOffsetStatistics", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"SetSharedVariable", "[", "senderPositionStatistics", "]"}], ";",
      "\[IndentingNewLine]", 
     RowBox[{"SetSharedVariable", "[", "clusteringTimingStatistics", "]"}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"SetSharedVariable", "[", "wallNormalTimingStatistics", "]"}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{
     "SetSharedVariable", "[", "senderPositionWallSelectionTimingStatistics", 
      "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"SetSharedVariable", "[", "currentIteration", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"SetSharedVariable", "[", "experimentVisualizations", "]"}], ";",
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"ParallelDo", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"localRecieverPosition", "=", "receiverPosition"}], ",", 
           "\[IndentingNewLine]", "currentReceiverPosition", ",", 
           "\[IndentingNewLine]", "senderPositions", ",", 
           "\[IndentingNewLine]", "measurements", ",", "\[IndentingNewLine]", 
           "perfectReflectionGroups", ",", "\[IndentingNewLine]", 
           "localPrecisionRecallStatistics", ",", "\[IndentingNewLine]", 
           "localWallOffsetStatistics", ",", "\[IndentingNewLine]", 
           "localSenderPositionStatistics", ",", "\[IndentingNewLine]", 
           "localClusteringTimingStatistics", ",", "\[IndentingNewLine]", 
           "localWallNormalTimingStatistics", ",", "\[IndentingNewLine]", 
           "localSenderPositionWallSelectionTimingStatistics"}], 
          "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
          "localPrecisionRecallStatistics", "=", "\[IndentingNewLine]", 
           RowBox[{"Association", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"clusteringAlgorithm", "->", 
               RowBox[{"{", "}"}]}], ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          "\[IndentingNewLine]", 
          RowBox[{"localWallOffsetStatistics", "=", "\[IndentingNewLine]", 
           RowBox[{"Association", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
               RowBox[{"Association", "[", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"wallNormalAlgorithm", "->", 
                   RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
                  RowBox[{"{", 
                   RowBox[{
                   "wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
                   "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          "\[IndentingNewLine]", 
          RowBox[{"localSenderPositionStatistics", "=", "\[IndentingNewLine]", 
           RowBox[{"Association", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
               RowBox[{"Association", "[", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{
                  "wallNormalAlgorithm", "->", "\[IndentingNewLine]", 
                   RowBox[{"Association", "[", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{
                    "localizationAlgorithm", "->", "\[IndentingNewLine]", 
                    RowBox[{"Association", "[", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"normalSelectionMethod", "->", 
                    RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "normalSelectionMethod", ",", 
                    "normalVectorSelectionMethods"}], "}"}]}], "]"}], "]"}]}],
                     "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "localizationAlgorithm", ",", "localizationAlgorithms"}], 
                    "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
                  RowBox[{"{", 
                   RowBox[{
                   "wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
                   "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          "\[IndentingNewLine]", 
          RowBox[{
          "localClusteringTimingStatistics", "=", "\[IndentingNewLine]", 
           RowBox[{"Association", "[", "\[IndentingNewLine]", 
            RowBox[{"Table", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"clusteringAlgorithm", "->", 
               RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
               "}"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          "\[IndentingNewLine]", 
          RowBox[{
          "localWallNormalTimingStatistics", "=", "\[IndentingNewLine]", 
           RowBox[{"Association", "[", "\[IndentingNewLine]", 
            RowBox[{"Table", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"wallNormalAlgorithm", "->", 
               RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
               "}"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          "\[IndentingNewLine]", 
          RowBox[{
          "localSenderPositionWallSelectionTimingStatistics", "=", 
           "\[IndentingNewLine]", 
           RowBox[{"Association", "[", "\[IndentingNewLine]", 
            RowBox[{"Flatten", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"Table", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{
                    "wallSelectionMethod", ",", "localizationAlgorithm"}], 
                    "}"}], "->", 
                   RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
                  RowBox[{"{", 
                   RowBox[{
                   "localizationAlgorithm", ",", "localizationAlgorithms"}], 
                   "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
                RowBox[{"{", 
                 RowBox[{
                 "wallSelectionMethod", ",", "normalVectorSelectionMethods"}],
                  "}"}]}], "]"}], "\[IndentingNewLine]", ",", "1"}], "]"}], 
            "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"Print", "[", 
           RowBox[{"\"\<Iteration: \>\"", ",", 
            RowBox[{"currentIteration", "++"}]}], "]"}], ";", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{"(*", " ", 
           RowBox[{
           "Initialize", " ", "and", " ", "simulate", " ", "Experiment"}], 
           " ", "*)"}], "\[IndentingNewLine]", 
          RowBox[{"currentReceiverPosition", "=", 
           RowBox[{"receiverPosition", "+", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{"moveReceiver", ",", "\[IndentingNewLine]", 
              RowBox[{"{", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"RandomReal", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], "}"}], "]"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"RandomReal", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"RandomReal", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "3", "]"}], "]"}], ",", 
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "3", "]"}], "]"}]}], "}"}], "]"}]}], 
               "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
              RowBox[{"{", 
               RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], 
             "\[IndentingNewLine]", "]"}]}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"senderPositions", "=", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{
               RowBox[{"RandomReal", "[", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "1", "]"}], "]"}]}], "}"}], "]"}], ",", 
               RowBox[{"RandomReal", "[", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                   RowBox[{"[", "2", "]"}], "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}], ",", 
               RowBox[{"RandomReal", "[", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                   RowBox[{"[", "3", "]"}], "]"}], ",", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                   RowBox[{"[", "3", "]"}], "]"}]}], "}"}], "]"}]}], "}"}], 
             ",", "numSenders"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"measurements", "=", 
           RowBox[{"SimulateExperiment", "[", 
            RowBox[{
             RowBox[{"roomSelection", "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", "currentReceiverPosition", 
             ",", "senderPositions", ",", "vonMisesConcentration", ",", 
             "\[CapitalDelta]Error", ",", "directSignalDiscardFactor", ",", 
             "reflectionDiscardFactor", ",", "wallErrorFactor"}], "]"}]}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"perfectReflectionGroups", "=", 
           RowBox[{"ComputePerfectSolution", "[", 
            RowBox[{"measurements", ",", 
             RowBox[{"roomSelection", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{"(*", " ", "DEBUGGING", " ", "*)"}], "\[IndentingNewLine]", 
          
          RowBox[{"(*", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"AppendTo", "[", 
             RowBox[{"experimentVisualizations", ",", 
              RowBox[{"{", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"Opacity", "[", "0.2", "]"}], ",", 
                  RowBox[{"Triangle", "/@", 
                   RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"{", 
                 RowBox[{"Red", ",", 
                  RowBox[{"Table", "[", 
                   RowBox[{
                    RowBox[{"Point", "[", "sender", "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"sender", ",", "senderPositions"}], "}"}]}], 
                   "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
                RowBox[{"{", 
                 RowBox[{"Blue", ",", 
                  RowBox[{"PointSize", "[", "Large", "]"}], ",", 
                  RowBox[{"Point", "[", "currentReceiverPosition", "]"}]}], 
                 "}"}]}], "\[IndentingNewLine]", "}"}]}], "]"}], ";"}], 
           "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", " ", 
           RowBox[{"Main", " ", 
            RowBox[{"Loop", ":", " ", 
             RowBox[{
             "Run", " ", "each", " ", "combination", " ", "of", " ", 
              "selected", " ", "algorithms", " ", "on", " ", "the", " ", 
              "generated", " ", "experiment"}]}]}], " ", "*)"}], 
          "\[IndentingNewLine]", 
          RowBox[{"Do", "[", 
           RowBox[{"(*", " ", 
            RowBox[{"for", " ", "each", " ", "clustering", " ", "Algorithm"}],
             " ", "*)"}], "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Block", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"reflectionGroups", ",", "precisionRecall"}], "}"}], 
              ",", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"AppendTo", "[", 
                RowBox[{
                 RowBox[{
                 "localClusteringTimingStatistics", "[", 
                  "clusteringAlgorithm", "]"}], ",", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"Timing", "[", 
                   RowBox[{"reflectionGroups", "=", 
                    RowBox[{"GroupMeasurements", "[", 
                    RowBox[{
                    "measurements", ",", "clusteringAlgorithm", ",", "3"}], 
                    "]"}]}], "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
                "]"}], ";", "\[IndentingNewLine]", 
               RowBox[{"(*", " ", 
                RowBox[{"compute", " ", "precision", " ", "recall"}], " ", 
                "*)"}], "\[IndentingNewLine]", 
               RowBox[{"precisionRecall", "=", 
                RowBox[{"ComputePrecisionRecallSolution", "[", 
                 RowBox[{
                 "perfectReflectionGroups", ",", "reflectionGroups", ",", 
                  "\[Beta]"}], "]"}]}], ";", "\[IndentingNewLine]", 
               RowBox[{"AppendTo", "[", 
                RowBox[{
                 RowBox[{
                 "localPrecisionRecallStatistics", "[", "clusteringAlgorithm",
                   "]"}], ",", "precisionRecall"}], "]"}], ";", 
               "\[IndentingNewLine]", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{"Length", "[", "reflectionGroups", "]"}], ">", 
                   "0"}], "\[And]", 
                  RowBox[{
                   RowBox[{"Length", "[", 
                    RowBox[{"reflectionGroups", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], ">", "0"}]}], ",", 
                 "\[IndentingNewLine]", 
                 RowBox[{"Do", "[", 
                  RowBox[{"(*", " ", 
                   RowBox[{
                   "for", " ", "each", " ", "wall", " ", "normal", " ", 
                    "computation", " ", "algorithm"}], " ", "*)"}], 
                  "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"Block", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"computedWallNormals", "=", 
                    RowBox[{"{", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Do", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Length", "[", "reflectionGroup", "]"}], ">", 
                    "1"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"Block", "[", 
                    RowBox[{
                    RowBox[{"{", "currentNormal", "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"AppendTo", "[", 
                    RowBox[{
                    RowBox[{
                    "localWallNormalTimingStatistics", "[", 
                    "wallNormalAlgorithm", "]"}], ",", "\[IndentingNewLine]", 
                    
                    RowBox[{
                    RowBox[{"Timing", "[", "\[IndentingNewLine]", 
                    RowBox[{"currentNormal", "=", 
                    RowBox[{
                    "GetWallNormalVectorFromMeasurentsAndReflectionGroup", 
                    "[", 
                    RowBox[{
                    "measurements", ",", "reflectionGroup", ",", 
                    "wallNormalAlgorithm"}], "]"}]}], "\[IndentingNewLine]", 
                    "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
                    "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"AppendTo", "[", 
                    RowBox[{"computedWallNormals", ",", "currentNormal"}], 
                    "]"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Print", "[", 
                    RowBox[{
                    "\"\<Reflection Group with less than 2 elements! \
Clustering Algorithm:\>\"", ",", "clusteringAlgorithm"}], "]"}]}], 
                    "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
                    
                    RowBox[{"{", 
                    RowBox[{"reflectionGroup", ",", "reflectionGroups"}], 
                    "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"AppendTo", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "localWallOffsetStatistics", "[", "clusteringAlgorithm", 
                    "]"}], "[", "wallNormalAlgorithm", "]"}], ",", 
                    RowBox[{"RateWallNormalVectors", "[", 
                    RowBox[{
                    RowBox[{"roomSelection", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", 
                    "computedWallNormals", ",", "currentReceiverPosition"}], 
                    "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"Do", "[", 
                    RowBox[{"(*", " ", 
                    RowBox[{
                    "for", " ", "each", " ", "localization", " ", 
                    "algorithm"}], " ", "*)"}], "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Do", "[", 
                    RowBox[{"(*", " ", 
                    RowBox[{
                    "for", " ", "each", " ", "normal", " ", "selection", " ", 
                    "method"}], " ", "*)"}], "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Block", "[", 
                    RowBox[{
                    RowBox[{"{", "computedSenderPositions", "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"AppendTo", "[", 
                    RowBox[{
                    RowBox[{
                    "localSenderPositionWallSelectionTimingStatistics", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "normalSelectionMethod", ",", "localizationAlgorithm"}], 
                    "}"}], "]"}], ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Timing", "[", "\[IndentingNewLine]", 
                    RowBox[{"computedSenderPositions", "=", 
                    RowBox[{
                    RowBox[{"ComputeSenderPositionsFromSelectedWalls", "[", 
                    RowBox[{
                    "measurements", ",", "reflectionGroups", ",", 
                    "computedWallNormals", ",", "localizationAlgorithm", ",", 
                    "receiverPosition", ",", "normalSelectionMethod"}], "]"}],
                     "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
                    "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
                    "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"AppendTo", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "localSenderPositionStatistics", "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                    "]"}], "[", "localizationAlgorithm", "]"}], "[", 
                    "normalSelectionMethod", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"EuclideanDistance", "[", 
                    RowBox[{
                    RowBox[{"computedSenderPosition", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    RowBox[{"computedSenderPosition", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "computedSenderPosition", ",", 
                    "computedSenderPositions"}], "}"}]}], "]"}]}], 
                    "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", 
                    "]"}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "normalSelectionMethod", ",", 
                    "normalVectorSelectionMethods"}], "}"}]}], "]"}], 
                    "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "localizationAlgorithm", ",", "localizationAlgorithms"}], 
                    "}"}]}], "]"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
                   RowBox[{"{", 
                    RowBox[{
                    "wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
                    "}"}]}], "]"}], ",", "\[IndentingNewLine]", 
                 RowBox[{"Print", "[", 
                  RowBox[{
                  "\"\<No reflection Groups found for algorithm \>\"", ",", 
                   "clusteringAlgorithm"}], "]"}]}], "\[IndentingNewLine]", 
                "]"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
             "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
          "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{
           "precisionRecallStatistics", ",", 
            "localPrecisionRecallStatistics"}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{"wallOffsetStatistics", ",", "localWallOffsetStatistics"}],
            "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{
           "senderPositionStatistics", ",", "localSenderPositionStatistics"}],
            "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{
           "clusteringTimingStatistics", ",", 
            "localClusteringTimingStatistics"}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{
           "wallNormalTimingStatistics", ",", 
            "localWallNormalTimingStatistics"}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{
           "senderPositionWallSelectionTimingStatistics", ",", 
            "localSenderPositionWallSelectionTimingStatistics"}], "]"}], 
          ";"}]}], "\[IndentingNewLine]", "]"}], ",", "numIterations"}], 
      "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"precisionRecallStatistics", "=", 
      RowBox[{
      "RearrangeClusteringStatistics", "[", "precisionRecallStatistics", 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"wallOffsetStatistics", "=", 
      RowBox[{
      "RearrangeWallOffsetStatistics", "[", "wallOffsetStatistics", "]"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"senderPositionStatistics", "=", 
      RowBox[{
      "RearrangeSenderPositionStatistics", "[", "senderPositionStatistics", 
       "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"clusteringTimingStatistics", "=", 
      RowBox[{
      "ConsolidateTimingStatistics", "[", "clusteringTimingStatistics", 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"wallNormalTimingStatistics", "=", 
      RowBox[{
      "ConsolidateTimingStatistics", "[", "wallNormalTimingStatistics", 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"senderPositionWallSelectionTimingStatistics", "=", 
      RowBox[{
      "ConsolidateTimingStatistics", "[", 
       "senderPositionWallSelectionTimingStatistics", "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Export", " ", "All", " ", "Statistics", " ", "as", " ", "csv"}], " ", 
      "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"CSVExportStatistics", "[", "\[IndentingNewLine]", 
      RowBox[{
      "precisionRecallStatistics", ",", "\[IndentingNewLine]", 
       "wallOffsetStatistics", ",", "\[IndentingNewLine]", 
       "senderPositionStatistics", ",", "\[IndentingNewLine]", "numSenders", 
       ",", "\[IndentingNewLine]", "numIterations", ",", 
       "\[IndentingNewLine]", "roomSelection", ",", "\[IndentingNewLine]", 
       "clusteringTimingStatistics", ",", "\[IndentingNewLine]", 
       "wallNormalTimingStatistics", ",", "\[IndentingNewLine]", 
       "senderPositionWallSelectionTimingStatistics", ",", 
       "\[IndentingNewLine]", "moveReceiver"}], "\[IndentingNewLine]", 
      "]"}]}]}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJwdz1tMEmAABWBysWYPYOksazZI1JKXLmsSrYutzXVhK9i0ObIFka0iHoh0
wVCouS6oxXQaOY3actJllbWMEnXSQsCEIbApkDbLcVltuZwPDPvP/3D2PZ3t
HK5MJVZkMRiMHSRQaz67+lgoVVG+5zMLcj2BXJgvfciDltTIdiiW7dsNB4oH
y2FgyUudSqsOwKYpHbV1v0kKo2+tMtiVK7kKjfr6a/BikV0HQ6UJA7zifdUJ
vYWWR5D1zdYLI0EXVczxT8CbwwFqzfNbAbh8JkydXlm7AE3NyTicdH/NP45+
3LkJCrI4hhPEUaG6Fb5M8DaIiIufotQJx5rbIrrrRgvsrq+abCPyBD9ikPmu
4d59/Fxf2QqvB2ZH4V1BdhAqbdoZyKpOU8sU7H/wiFZClXBXZWDfpawVmOSf
63tAPNTR8h4+TgiGoNPHd8KS01smYbvD54dmjz8IL+vD1NhH03d48oN8Fj67
0z8PwyPeOGySnPoDfxYoqQU5SqaZmFC6s2HQyh9rJ/Yktjmh8Xywq4OYKtZZ
YEu6dgyOrxN9gVsb7Zt7iDb7ENVRUuZUhsmu4TnqBfYTD5wpWqa+1sh9cKP4
qR+6BhUh2NAfCcO6xtIonJbvikGGIpiECxLvb8gZqFyE0heFSzBVp6pQEdWa
vUehuJtZA//OVdXCVO9htZUoz8xrYHXnGwNs/iU0Qocw4oJ698FxmLczwx4g
2vPacuB//pG+sw==
  "],
 CellLabel->
  "In[168]:=",ExpressionUUID->"2e871e89-2c82-4a2b-850c-611502cf4b53"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Run all configurations over one parameter", "Subsection",
 CellChangeTimes->{{3.86893040533857*^9, 
  3.868930443514777*^9}},ExpressionUUID->"7e5b7c63-2dd4-4b7c-a078-\
68d53abb2230"],

Cell["\<\
This section is used, to generate data for 2D Line Charts. The Y-Axis is \
always the average sender location offset, while the X-Axis is one specific \
parameter of the experiment (e.g. The Von-Mises distribution). The data is \
exported as csv.\
\>", "Text",
 CellChangeTimes->{{3.868930473362409*^9, 
  3.868930612989677*^9}},ExpressionUUID->"a7a4233e-9713-4474-b432-\
c35689b7f39b"],

Cell[CellGroupData[{

Cell["Helper Functions", "Subsubsection",
 CellChangeTimes->{{3.8689311283071947`*^9, 
  3.868931130487006*^9}},ExpressionUUID->"a7643993-750e-48dc-b60f-\
45b34b585739"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"GenerateExperimentParametersFromInvervalParameter", "[", 
   RowBox[{"parameterName_", ",", "parameterValue_"}], "]"}], ":=", 
  "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"defaultNumSender", "=", "25"}], ",", "\[IndentingNewLine]", 
      RowBox[{"defaultReceiverPosition", "=", 
       RowBox[{"{", 
        RowBox[{"0.1", ",", "0.2", ",", "0.3"}], "}"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"defaultVonMisesConcentration", "=", "131.312"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"defaultDeltaError", "=", "0.1"}], ",", "\[IndentingNewLine]", 
      RowBox[{"defaultWallError", "=", "0"}], ",", "\[IndentingNewLine]", 
      RowBox[{"defaultRoomData", "=", "cubeRoomData"}]}], 
     "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Switch", "[", 
     RowBox[{
     "parameterName", ",", "\[IndentingNewLine]", "\"\<Number of Senders\>\"",
       ",", 
      RowBox[{"{", 
       RowBox[{
       "parameterValue", ",", "defaultReceiverPosition", ",", 
        "defaultVonMisesConcentration", ",", "defaultDeltaError", ",", 
        "defaultWallError", ",", "defaultRoomData"}], "}"}], ",", 
      "\[IndentingNewLine]", "\"\<Receiver Position\>\"", ",", 
      RowBox[{"{", 
       RowBox[{
       "defaultNumSender", ",", "parameterValue", ",", 
        "defaultVonMisesConcentration", ",", "defaultDeltaError", ",", 
        "defaultWallError", ",", "defaultRoomData"}], "}"}], ",", 
      "\[IndentingNewLine]", "\"\<Von Mises Concentration\>\"", ",", 
      RowBox[{"{", 
       RowBox[{
       "defaultNumSender", ",", "defaultReceiverPosition", ",", 
        "parameterValue", ",", "defaultDeltaError", ",", "defaultWallError", 
        ",", "defaultRoomData"}], "}"}], ",", "\[IndentingNewLine]", 
      "\"\<\[CapitalDelta]-Error\>\"", ",", 
      RowBox[{"{", 
       RowBox[{
       "defaultNumSender", ",", "defaultReceiverPosition", ",", 
        "defaultVonMisesConcentration", ",", "parameterValue", ",", 
        "defaultWallError", ",", "defaultRoomData"}], "}"}], ",", 
      "\[IndentingNewLine]", "\"\<Wall Error\>\"", ",", 
      RowBox[{"{", 
       RowBox[{
       "defaultNumSender", ",", "defaultReceiverPosition", ",", 
        "defaultVonMisesConcentration", ",", "defaultDeltaError", ",", 
        "parameterValue", ",", "defaultRoomData"}], "}"}], ",", 
      "\[IndentingNewLine]", "\"\<Room\>\"", ",", 
      RowBox[{"{", 
       RowBox[{
       "defaultNumSender", ",", "defaultReceiverPosition", ",", 
        "defaultVonMisesConcentration", ",", "defaultDeltaError", ",", 
        "defaultWallError", ",", "parameterValue"}], "}"}]}], 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ConsolidateLocalStatistics", "[", "localStatisticsList_", "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "clusteringKeys", ",", "wallNormalKeys", ",", 
      "wallNormalSelectionSenderLocalizationKeys", ",", "localList"}], "}"}], 
    ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"clusteringKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{"localStatisticsList", "[", 
        RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"wallNormalKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{
        RowBox[{"localStatisticsList", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "[", 
        RowBox[{"clusteringKeys", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"wallNormalSelectionSenderLocalizationKeys", "=", 
      RowBox[{"Keys", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"localStatisticsList", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "[", 
         RowBox[{"clusteringKeys", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "]"}], "[", 
        RowBox[{"wallNormalKeys", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"localList", "=", "\[IndentingNewLine]", 
      RowBox[{"Association", "[", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
          RowBox[{"Association", "[", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"wallNormalAlgorithm", "->", "\[IndentingNewLine]", 
              RowBox[{"Association", "[", 
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"wallSelectionSenderLocalization", "->", 
                  RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
                 RowBox[{"{", 
                  RowBox[{
                  "wallSelectionSenderLocalization", ",", 
                   "wallNormalSelectionSenderLocalizationKeys"}], "}"}]}], 
                "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
             RowBox[{"{", 
              RowBox[{"wallNormalAlgorithm", ",", "wallNormalKeys"}], "}"}]}],
             "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"clusteringAlgorithm", ",", "clusteringKeys"}], "}"}]}], 
        "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Do", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Do", "[", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"localList", "[", "clusteringAlgorithm", "]"}], "[", 
                "wallNormalAlgorithm", "]"}], "[", 
               "wallSelectionSenderLocalization", "]"}], "=", 
              "\[IndentingNewLine]", 
              RowBox[{"Flatten", "[", 
               RowBox[{"Join", "[", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{"localList", "[", "clusteringAlgorithm", "]"}], 
                   "[", "wallNormalAlgorithm", "]"}], "[", 
                  "wallSelectionSenderLocalization", "]"}], ",", 
                 "\[IndentingNewLine]", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"localStats", "[", "clusteringAlgorithm", "]"}], 
                    "[", "wallNormalAlgorithm", "]"}], "[", 
                   "wallSelectionSenderLocalization", "]"}], "}"}]}], 
                "\[IndentingNewLine]", "]"}], "]"}]}], "\[IndentingNewLine]", 
             ",", 
             RowBox[{"{", 
              RowBox[{
              "wallSelectionSenderLocalization", ",", 
               "wallNormalSelectionSenderLocalizationKeys"}], "}"}]}], "]"}], 
           "\[IndentingNewLine]", ",", 
           RowBox[{"{", 
            RowBox[{"wallNormalAlgorithm", ",", "wallNormalKeys"}], "}"}]}], 
          "]"}], "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"clusteringAlgorithm", ",", "clusteringKeys"}], "}"}]}], 
        "]"}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"localStats", ",", "localStatisticsList"}], "}"}]}], "]"}], 
     ";", "\[IndentingNewLine]", "localList"}]}], "\[IndentingNewLine]", 
   "]"}]}]}], "Input",
 CellChangeTimes->{{3.868930654070096*^9, 3.868930752822619*^9}, {
   3.868930797989477*^9, 3.8689309264016027`*^9}, {3.86893109084767*^9, 
   3.868931241286252*^9}, {3.8689312793709106`*^9, 3.8689313729978333`*^9}, {
   3.868931504076844*^9, 3.868931694544582*^9}, 3.8700791752377996`*^9, {
   3.8701656724739847`*^9, 3.870165716497484*^9}, {3.870165799349792*^9, 
   3.870165803105672*^9}, {3.870168528156486*^9, 3.870168528251202*^9}, {
   3.870337261863731*^9, 3.8703374048255653`*^9}, {3.870337828004421*^9, 
   3.870337845127082*^9}, {3.870337892367928*^9, 3.870338076383883*^9}, {
   3.870338126397551*^9, 3.870338128217065*^9}, {3.8703383193451433`*^9, 
   3.870338322111494*^9}, 3.870338482331785*^9, {3.8706074627525177`*^9, 
   3.870607480489232*^9}},
 CellLabel->
  "In[169]:=",ExpressionUUID->"0fbdafc0-64bd-44c5-84af-e4166776aaf9"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"ExportParameterStatisticsToCSV", "[", 
    RowBox[{
    "senderPositionStatistics_", ",", "parameterName_", ",", 
     "numIterations_"}], "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"senderPositionStatistics", "!=", 
      RowBox[{"<|", "|>"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"tableColumns", ",", "tableRows"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"tableColumns", "=", 
         RowBox[{"Keys", "[", "senderPositionStatistics", "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"tableRows", "=", "\[IndentingNewLine]", 
         RowBox[{"Flatten", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Table", "[", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"Table", "[", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"Table", "[", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{
                  "clusteringAlgorithm", ",", "wallNormalAlgorithm", ",", 
                   "wallSelectionSenderLocalization"}], "}"}], 
                 "\[IndentingNewLine]", ",", 
                 RowBox[{"{", 
                  RowBox[{"wallSelectionSenderLocalization", ",", 
                   RowBox[{"Keys", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"senderPositionStatistics", "[", 
                    RowBox[{"tableColumns", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                    "]"}], "]"}]}], "}"}]}], "]"}], "\[IndentingNewLine]", 
               ",", 
               RowBox[{"{", 
                RowBox[{"wallNormalAlgorithm", ",", 
                 RowBox[{"Keys", "[", 
                  RowBox[{
                   RowBox[{"senderPositionStatistics", "[", 
                    RowBox[{"tableColumns", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], "[", 
                   "clusteringAlgorithm", "]"}], "]"}]}], "}"}]}], "]"}], 
             "\[IndentingNewLine]", ",", 
             RowBox[{"{", 
              RowBox[{"clusteringAlgorithm", ",", 
               RowBox[{"Keys", "[", 
                RowBox[{"senderPositionStatistics", "[", 
                 RowBox[{"tableColumns", "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], "}"}]}], 
            "]"}], "\[IndentingNewLine]", ",", "2"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"Export", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"ToFileName", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"NotebookDirectory", "[", "]"}], ",", 
            RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"StringReplace", "[", 
               RowBox[{
               "\"\<chart-data/running_$PARAMETER_over_$ITERATIONS_runs.csv\>\
\"", ",", "\[IndentingNewLine]", 
                RowBox[{"{", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"\"\<$PARAMETER\>\"", "->", "parameterName"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"\"\<$ITERATIONS\>\"", "->", 
                   RowBox[{"ToString", "[", "numIterations", "]"}]}]}], 
                 "\[IndentingNewLine]", "}"}]}], "]"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\< \>\"", "->", "\"\<_\>\""}]}], "]"}]}], 
           "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Table", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Join", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"row", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", 
                RowBox[{"row", "[", 
                 RowBox[{"[", "2", "]"}], "]"}], ",", 
                RowBox[{"row", "[", 
                 RowBox[{"[", "3", "]"}], "]"}]}], "}"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"Table", "[", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{"senderPositionStatistics", "[", "column", "]"}], 
                   "[", 
                   RowBox[{"row", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], "[", 
                  RowBox[{"row", "[", 
                   RowBox[{"[", "2", "]"}], "]"}], "]"}], "[", 
                 RowBox[{"row", "[", 
                  RowBox[{"[", "3", "]"}], "]"}], "]"}], 
                "\[IndentingNewLine]", ",", 
                RowBox[{"{", 
                 RowBox[{"column", ",", "tableColumns"}], "}"}]}], "]"}]}], 
             "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{"row", ",", "tableRows"}], "}"}]}], "]"}], ",", 
          "\[IndentingNewLine]", "\"\<CSV\>\"", ",", "\[IndentingNewLine]", 
          RowBox[{"\"\<TableHeadings\>\"", "->", 
           RowBox[{"{", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"Table", "[", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"StringReplace", "[", 
                RowBox[{
                 RowBox[{"StringRiffle", "[", 
                  RowBox[{
                   RowBox[{"Flatten", "[", "row", "]"}], ",", "\"\< + \>\""}],
                   "]"}], ",", 
                 RowBox[{"{", "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{
                   "\"\<Closest Lines Extended + Closest Lines\>\"", "->", 
                    "\"\<Closest Lines Ext.\>\""}], ",", 
                   "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Gnomonic, Basic Intersections\>\"", "->", 
                    "\"\<Gnom. I\>\""}], ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Gnomonic, Improved Intersections\>\"", "->", 
                    "\"\<Gnom. II\>\""}], ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Inversion, Original\>\"", "->", "\"\<Inv. I\>\""}], 
                   ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Inversion, Improved\>\"", "->", "\"\<Inv. II\>\""}], 
                   ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Overlapping Pairs\>\"", "->", 
                    "\"\<Overl. Pairs\>\""}], ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Disjoint Pairs\>\"", "->", "\"\<Disj. Pairs\>\""}], 
                   ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Average Position\>\"", "->", "\"\<Avg. Pos.\>\""}], 
                   ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Most Reflections\>\"", "->", "\"\<Most Refl.\>\""}], 
                   ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Wall Direction\>\"", "->", "\"\<Wall Dir.\>\""}], ",",
                    "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Map to Normal Vector\>\"", "->", 
                    "\"\<Map to N.V.\>\""}], ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Reflection Geometry\>\"", "->", 
                    "\"\<Refl. Geom.\>\""}], ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Linear All Pairs\>\"", "->", 
                    "\"\<Lin. All Pairs\>\""}], ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Gnomonic, Random Points\>\"", "->", 
                    "\"\<Gnom. R.P.\>\""}], ",", "\[IndentingNewLine]", 
                   RowBox[{
                   "\"\<Gnomonic, Random Points Often\>\"", "->", 
                    "\"\<Gnom. R.P. Often\>\""}]}], "\[IndentingNewLine]", 
                  "}"}]}], "]"}], "\[IndentingNewLine]", ",", 
               RowBox[{"{", 
                RowBox[{"row", ",", "tableRows"}], "}"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Join", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{
                "\"\<Clustering Algorithm\>\"", ",", 
                 "\"\<Wall Normal Vector Algorithm\>\"", ",", 
                 "\"\<Wall Normal Selection + Sender Localization\>\""}], 
                "}"}], ",", "tableColumns"}], "]"}]}], "}"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<TextDelimites\>\"", "->", "\"\<\\\"\>\""}]}], 
         "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Print", "[", "\"\<No statistics available\>\"", "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.868936827017864*^9, 3.868936837694583*^9}, {
   3.86893690791183*^9, 3.868937090654057*^9}, {3.8689377863407297`*^9, 
   3.868937866279892*^9}, {3.868938015559021*^9, 3.868938126555972*^9}, {
   3.868938160444549*^9, 3.868938232735725*^9}, {3.868938337100811*^9, 
   3.868938344504665*^9}, {3.868938386935787*^9, 3.868938403516588*^9}, {
   3.8689384617382298`*^9, 3.868938520127931*^9}, {3.868938552234798*^9, 
   3.8689385761273193`*^9}, {3.868938625332625*^9, 3.868938632999489*^9}, {
   3.868938705515809*^9, 3.868938744894968*^9}, {3.86893880983505*^9, 
   3.868938855373684*^9}, {3.868938921751161*^9, 3.868938931796283*^9}, 
   3.8689389866033573`*^9, {3.868939502477844*^9, 3.868939502767809*^9}, {
   3.8689480050512743`*^9, 3.868948026997188*^9}, {3.868956630330721*^9, 
   3.86895663068608*^9}, {3.868956699335515*^9, 3.8689567480244007`*^9}, {
   3.8700697576986523`*^9, 3.87006975792141*^9}, {3.870070907669323*^9, 
   3.870070992716824*^9}, {3.870071143418352*^9, 3.870071159442621*^9}, {
   3.870071290988658*^9, 3.870071319468647*^9}, {3.870075833970811*^9, 
   3.8700758423493423`*^9}, 3.870079519015136*^9, {3.870174543207212*^9, 
   3.870174609411406*^9}, {3.870175871158187*^9, 3.870175928606092*^9}, {
   3.870175996452898*^9, 3.870176037583892*^9}, {3.870176083798354*^9, 
   3.8701761036562223`*^9}, {3.870176144687442*^9, 3.870176184628302*^9}, {
   3.870335344962097*^9, 3.870335382579895*^9}},
 CellLabel->
  "In[171]:=",ExpressionUUID->"9804d6d9-d5d7-4fdb-867d-4550f7608b56"]
}, Closed]],

Cell[CellGroupData[{

Cell["Main Function", "Subsubsection",
 CellChangeTimes->{{3.873349631267078*^9, 
  3.873349632896926*^9}},ExpressionUUID->"b2c693f2-9c2b-4ffc-afb3-\
90af8cb8bbc3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"GenerateDataForChart", "[", 
   RowBox[{"numIterations_", ",", "parameterName_", ",", "parameterRange_"}], 
   "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"clusteringAlgorithms", "=", 
       RowBox[{"{", 
        RowBox[{
        "\"\<Inversion, Original\>\"", ",", "\"\<Inversion, Improved\>\"", 
         ",", "\"\<Gnomonic, Basic Intersections\>\"", ",", 
         "\"\<Gnomonic, Improved Intersections\>\"", ",", 
         "\"\<Gnomonic, Random Points\>\"", ",", 
         "\"\<Gnomonic, Random Points Often\>\"", ",", 
         "\"\<Community Detection\>\""}], "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"wallNormalAlgorithms", "=", 
       RowBox[{"{", 
        RowBox[{
        "\"\<All Pairs\>\"", ",", "\"\<Disjoint Pairs\>\"", ",", 
         "\"\<Linear All Pairs\>\"", ",", " ", "\"\<Overlapping Pairs\>\""}], 
        "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"wallNormalSelectionMethods", "=", 
       RowBox[{"{", 
        RowBox[{
        "\"\<Most Reflections\>\"", ",", "\"\<Average Position\>\"", ",", 
         "\"\<Closest Lines Extended\>\"", ",", 
         "\"\<Weighted Average (Wall Distance)\>\"", ",", 
         "\"\<Closest Reflection Group\>\""}], "}"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"senderLocalizationAlgorithms", "=", 
       RowBox[{"{", 
        RowBox[{
        "\"\<Wall Direction\>\"", ",", "\"\<Map to Normal Vector\>\"", ",", 
         "\"\<Reflection Geometry\>\"", ",", "\"\<Closest Lines\>\""}], 
        "}"}]}], ",", "\[IndentingNewLine]", 
      "wallSelectionSenderLocalizationCombinations", ",", 
      "\[IndentingNewLine]", "senderPositionStatistics", ",", 
      "\[IndentingNewLine]", "averageSenderOffset"}], "\[IndentingNewLine]", 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
     "not", " ", "all", " ", "combinations", " ", "of", " ", "wall", " ", 
      "normal", " ", "selection", " ", "methods", " ", "and", " ", "sender", 
      " ", "localization", " ", "algorithms", " ", "are", " ", "possible"}], 
     " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"wallSelectionSenderLocalizationCombinations", "=", 
      RowBox[{"Flatten", "[", 
       RowBox[{
        RowBox[{"Table", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Table", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
             "wallNormalAlgorithm", ",", "senderLocalizationAlgorithm"}], 
             "}"}], "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{
             "senderLocalizationAlgorithm", ",", 
              "senderLocalizationAlgorithms"}], "}"}]}], "]"}], 
          "\[IndentingNewLine]", ",", 
          RowBox[{"{", 
           RowBox[{"wallNormalAlgorithm", ",", 
            RowBox[{"DeleteCases", "[", 
             RowBox[{
             "wallNormalSelectionMethods", ",", 
              "\"\<Closest Lines Extended\>\""}], "]"}]}], "}"}]}], "]"}], 
        ",", "1"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"AppendTo", "[", 
      RowBox[{"wallSelectionSenderLocalizationCombinations", ",", 
       RowBox[{"{", 
        RowBox[{
        "\"\<Closest Lines Extended\>\"", ",", "\"\<Closest Lines\>\""}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Initialize", " ", "sender", " ", "position", " ", "statistics"}], " ", 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"senderPositionStatistics", "=", 
      RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Do", "[", 
      RowBox[{"(*", " ", 
       RowBox[{
       "Foreach", " ", "parameter", " ", "option", " ", "in", " ", 
        "parameter"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", "\[IndentingNewLine]", 
          RowBox[{
          "localSenderPositionStatisticsOuter", ",", "\[IndentingNewLine]", 
           RowBox[{"localSenderPositionStatisticsList", "=", 
            RowBox[{"{", "}"}]}]}], "\[IndentingNewLine]", "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
          "SetSharedVariable", "[", "localSenderPositionStatisticsList", 
           "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"ParallelDo", "[", 
           RowBox[{"(*", " ", 
            RowBox[{"Do", " ", "numIterations", " ", "times"}], " ", "*)"}], 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"parameterName", "!=", "\"\<Room\>\""}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Print", "[", 
                RowBox[{"StringForm", "[", 
                 RowBox[{
                 "\"\<Paramter `` value: ``, Iteration: ``\>\"", ",", 
                  "parameterName", ",", "parameterValue", ",", "iteration"}], 
                 "]"}], "]"}], ",", "\[IndentingNewLine]", 
               RowBox[{"Print", "[", 
                RowBox[{"StringForm", "[", 
                 RowBox[{
                 "\"\<Paramter ``, Room ``,Iteration: ``\>\"", ",", 
                  "parameterName", ",", 
                  RowBox[{"parameterValue", "[", 
                   RowBox[{"[", "5", "]"}], "]"}], ",", "iteration"}], "]"}], 
                "]"}]}], "\[IndentingNewLine]", "]"}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"Block", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{
                "roomData", ",", "numSenders", ",", "receiverPosition", ",", 
                 "vonMisesConcentration", ",", "\[CapitalDelta]Error", ",", 
                 "wallError", ",", "senderPositions", ",", "measurements", 
                 ",", "\[IndentingNewLine]", 
                 RowBox[{
                 "localSenderPositionStatistics", "=", "\[IndentingNewLine]", 
                  
                  RowBox[{"Association", "[", 
                   RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{
                    "clusteringAlgorithm", "->", "\[IndentingNewLine]", 
                    RowBox[{"Association", "[", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{
                    "wallNormalAlgorithm", "->", "\[IndentingNewLine]", 
                    RowBox[{"Association", "[", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"wallSelectionSenderLocalization", "->", 
                    RowBox[{"{", "}"}]}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "wallSelectionSenderLocalization", ",", 
                    "wallSelectionSenderLocalizationCombinations"}], "}"}]}], 
                    "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
                    "}"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                    "}"}]}], "]"}], "]"}]}]}], "\[IndentingNewLine]", "}"}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"{", 
                   RowBox[{
                   "numSenders", ",", "receiverPosition", ",", 
                    "vonMisesConcentration", ",", "\[CapitalDelta]Error", ",",
                     "wallError", ",", "roomData"}], "}"}], "=", 
                  RowBox[{
                  "GenerateExperimentParametersFromInvervalParameter", "[", 
                   RowBox[{"parameterName", ",", "parameterValue"}], "]"}]}], 
                 ";", "\[IndentingNewLine]", 
                 RowBox[{"senderPositions", "=", 
                  RowBox[{"Table", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"RandomReal", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomData", "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomData", "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], "}"}], "]"}], ",", 
                    RowBox[{"RandomReal", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomData", "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomData", "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}], ",", 
                    RowBox[{"RandomReal", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomData", "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "[", 
                    RowBox[{"[", "3", "]"}], "]"}], ",", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"roomData", "[", 
                    RowBox[{"[", "4", "]"}], "]"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], "[", 
                    RowBox[{"[", "3", "]"}], "]"}]}], "}"}], "]"}]}], "}"}], 
                    ",", "numSenders"}], "]"}]}], ";", "\[IndentingNewLine]", 
                 
                 RowBox[{"(*", 
                  RowBox[{
                   RowBox[{"Print", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
                    RowBox[{"Triangle", "/@", 
                    RowBox[{"roomData", "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"Point", "[", "sender", "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"sender", ",", "senderPositions"}], "}"}]}], 
                    "]"}]}], "}"}], "]"}], ";"}], "*)"}], 
                 "\[IndentingNewLine]", 
                 RowBox[{"measurements", "=", 
                  RowBox[{"SimulateExperiment", "[", 
                   RowBox[{
                    RowBox[{"roomData", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", "receiverPosition", 
                    ",", "senderPositions", ",", "vonMisesConcentration", ",",
                     "\[CapitalDelta]Error", ",", "0", ",", "0", ",", 
                    "wallError"}], "]"}]}], ";", "\[IndentingNewLine]", 
                 RowBox[{"(*", " ", 
                  RowBox[{"Main", " ", 
                   RowBox[{"Loop", ":", " ", 
                    RowBox[{
                    "run", " ", "the", " ", "experiment", " ", "for", " ", 
                    "every", " ", "configuration"}]}]}], " ", "*)"}], 
                 "\[IndentingNewLine]", 
                 RowBox[{"Do", "[", 
                  RowBox[{"(*", " ", 
                   RowBox[{
                   "For", " ", "every", " ", "clustering", " ", "algorithm"}],
                    " ", "*)"}], "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"Block", "[", 
                    RowBox[{
                    RowBox[{"{", "reflectionGroups", "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"reflectionGroups", "=", 
                    RowBox[{"GroupMeasurements", "[", 
                    RowBox[{
                    "measurements", ",", "clusteringAlgorithm", ",", "3"}], 
                    "]"}]}], ";", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"reflectionGroups", "==", 
                    RowBox[{"{", 
                    RowBox[{"{", "}"}], "}"}]}], "\[Or]", 
                    RowBox[{"reflectionGroups", "==", 
                    RowBox[{"{", "}"}]}]}], ",", 
                    RowBox[{"Print", "[", 
                    RowBox[{"StringForm", "[", 
                    RowBox[{
                    "\"\<No reflection Groups found! Current clustering \
algorithm: ``\>\"", ",", "clusteringAlgorithm"}], "]"}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Do", "[", 
                    RowBox[{"(*", " ", 
                    RowBox[{
                    "For", " ", "every", " ", "wall", " ", "normal", " ", 
                    "algorithm"}], " ", "*)"}], "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Block", "[", 
                    RowBox[{
                    RowBox[{"{", "wallNormals", "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"wallNormals", "=", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{
                    "GetWallNormalVectorFromMeasurentsAndReflectionGroup", 
                    "[", 
                    RowBox[{
                    "measurements", ",", "reflectionGroup", ",", 
                    "wallNormalAlgorithm"}], "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"reflectionGroup", ",", "reflectionGroups"}], 
                    "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Length", "[", "wallNormals", "]"}], "<", "1"}], 
                    ",", 
                    RowBox[{"Print", "[", 
                    RowBox[{"StringForm", "[", 
                    RowBox[{
                    "\"\<No wall normals found! Current wall normal vector \
computation algorithm: ``\>\"", ",", "wallNormalAlgorithm"}], "]"}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"Do", "[", 
                    RowBox[{"(*", " ", 
                    RowBox[{
                    "For", " ", "every", " ", "combination", " ", "of", " ", 
                    "wall", " ", "selection", " ", "method", " ", "and", " ", 
                    "sender", " ", "localization"}], "*)"}], 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Block", "[", 
                    RowBox[{
                    RowBox[{"{", "computedSenderPositions", "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"computedSenderPositions", "=", 
                    RowBox[{
                    RowBox[{"ComputeSenderPositionsFromSelectedWalls", "[", 
                    RowBox[{
                    "measurements", ",", "reflectionGroups", ",", 
                    "wallNormals", ",", 
                    RowBox[{"wallSelectionSenderLocalization", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", "receiverPosition", 
                    ",", 
                    RowBox[{"wallSelectionSenderLocalization", "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Length", "[", "computedSenderPositions", "]"}], 
                    "<", "1"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"Print", "[", "\[IndentingNewLine]", 
                    RowBox[{"StringForm", "[", 
                    RowBox[{
                    "\"\<No sender positions found! Current wall selection + \
sender localization method: ``, Clustering Algorithm: ``, Wall normal \
Algorithm: ``, Reflection Groups: ``, Wall Normals: ``\>\"", ",", 
                    "\[IndentingNewLine]", "wallSelectionSenderLocalization", 
                    ",", "\[IndentingNewLine]", "clusteringAlgorithm", ",", 
                    "\[IndentingNewLine]", "wallNormalAlgorithm", ",", 
                    "\[IndentingNewLine]", "reflectionGroups", ",", 
                    "\[IndentingNewLine]", "wallNormals"}], "]"}], 
                    "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                    
                    RowBox[{"AppendTo", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "localSenderPositionStatistics", "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                    "]"}], "[", "wallSelectionSenderLocalization", "]"}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{"EuclideanDistance", "[", 
                    RowBox[{
                    RowBox[{"computedSenderPosition", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", 
                    RowBox[{"computedSenderPosition", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], "]"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "computedSenderPosition", ",", 
                    "computedSenderPositions"}], "}"}]}], "]"}]}], 
                    "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
                    "]"}]}]}], "\[IndentingNewLine]", "]"}], 
                    "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    "wallSelectionSenderLocalization", ",", 
                    "wallSelectionSenderLocalizationCombinations"}], "}"}]}], 
                    "]"}]}], "\[IndentingNewLine]", "]"}]}]}], 
                    "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
                    
                    RowBox[{"{", 
                    RowBox[{
                    "wallNormalAlgorithm", ",", "wallNormalAlgorithms"}], 
                    "}"}]}], "]"}]}], "\[IndentingNewLine]", "]"}]}]}], 
                    "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ",", 
                   
                   RowBox[{"{", 
                    RowBox[{
                    "clusteringAlgorithm", ",", "clusteringAlgorithms"}], 
                    "}"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
                RowBox[{"(*", " ", 
                 RowBox[{
                 "Compute", " ", "averages", " ", "over", " ", "collected", 
                  " ", "statistics"}], " ", "*)"}], "\[IndentingNewLine]", 
                ";", "\[IndentingNewLine]", 
                RowBox[{"AppendTo", "[", 
                 RowBox[{
                 "localSenderPositionStatisticsList", ",", 
                  "localSenderPositionStatistics"}], "]"}]}]}], 
              "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", ",", 
            RowBox[{"{", 
             RowBox[{"iteration", ",", "numIterations"}], "}"}]}], "]"}], ";", 
          RowBox[{"(*", " ", 
           RowBox[{"End", " ", "of", " ", "parallel", " ", "block"}], " ", 
           "*)"}], "\[IndentingNewLine]", 
          RowBox[{"localSenderPositionStatisticsOuter", "=", 
           RowBox[{
           "ConsolidateLocalStatistics", "[", 
            "localSenderPositionStatisticsList", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{
          "localSenderPositionStatisticsOuter", "=", "\[IndentingNewLine]", 
           RowBox[{"Association", "[", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"clusteringAlgorithm", "->", "\[IndentingNewLine]", 
               RowBox[{"Association", "[", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{
                  "wallNormalAlgorithm", "->", "\[IndentingNewLine]", 
                   RowBox[{"Association", "[", 
                    RowBox[{"Table", "[", 
                    RowBox[{
                    RowBox[{
                    "wallSelectionSenderLocalization", "->", 
                    "\[IndentingNewLine]", 
                    RowBox[{"N", "[", 
                    RowBox[{"Mean", "[", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "localSenderPositionStatisticsOuter", "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                    "]"}], "[", "wallSelectionSenderLocalization", "]"}], 
                    "]"}], "]"}], "]"}]}], "\[IndentingNewLine]", ",", 
                    RowBox[{"{", 
                    RowBox[{"wallSelectionSenderLocalization", ",", 
                    RowBox[{"Keys", "[", 
                    RowBox[{
                    RowBox[{
                    "localSenderPositionStatisticsOuter", "[", 
                    "clusteringAlgorithm", "]"}], "[", "wallNormalAlgorithm", 
                    "]"}], "]"}]}], "}"}]}], "]"}], "]"}]}], 
                  "\[IndentingNewLine]", ",", 
                  RowBox[{"{", 
                   RowBox[{"wallNormalAlgorithm", ",", 
                    RowBox[{"Keys", "[", 
                    RowBox[{
                    "localSenderPositionStatisticsOuter", "[", 
                    "clusteringAlgorithm", "]"}], "]"}]}], "}"}]}], "]"}], 
                "]"}]}], "\[IndentingNewLine]", ",", 
              RowBox[{"{", 
               RowBox[{"clusteringAlgorithm", ",", 
                RowBox[{
                "Keys", "[", "localSenderPositionStatisticsOuter", "]"}]}], 
               "}"}]}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{"senderPositionStatistics", ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{"parameterName", "==", "\"\<Room\>\""}], ",", 
                RowBox[{"parameterValue", "[", 
                 RowBox[{"[", "5", "]"}], "]"}], ",", "parameterValue"}], 
               "]"}], ",", "localSenderPositionStatisticsOuter"}], "}"}]}], 
           "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], " ", 
       "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"parameterValue", ",", "parameterRange"}], "}"}]}], "]"}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Bring", " ", "sender", " ", "position", " ", "statistics", " ", "in", 
       " ", "correct", " ", "format"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"senderPositionStatistics", "=", 
      RowBox[{"Association", "[", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"statPair", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "->", 
          RowBox[{"statPair", "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"statPair", ",", "senderPositionStatistics"}], "}"}]}], 
        "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"ExportParameterStatisticsToCSV", "[", 
      RowBox[{
       RowBox[{"SortBy", "[", 
        RowBox[{"senderPositionStatistics", ",", "First"}], "]"}], ",", 
       "parameterName", ",", "numIterations"}], "]"}], ";"}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.868930654070096*^9, 3.868930752822619*^9}, {
   3.868930797989477*^9, 3.8689309264016027`*^9}, {3.86893109084767*^9, 
   3.8689311998408213`*^9}, {3.868931740098386*^9, 3.868931782509572*^9}, {
   3.8689318235923634`*^9, 3.868931906132141*^9}, {3.868931956830593*^9, 
   3.868932081570772*^9}, {3.868932127241776*^9, 3.8689321364158287`*^9}, {
   3.868932170620069*^9, 3.8689322712637787`*^9}, {3.8689323503390512`*^9, 
   3.8689323690640287`*^9}, {3.868932402710863*^9, 3.868932518982375*^9}, {
   3.868932558958194*^9, 3.86893259589207*^9}, {3.8689326409760942`*^9, 
   3.8689327458917837`*^9}, {3.8689327883669157`*^9, 3.868932794591588*^9}, 
   3.868932834235209*^9, {3.868932866644787*^9, 3.8689329575216293`*^9}, {
   3.868932995066386*^9, 3.8689330757359457`*^9}, {3.868933141563115*^9, 
   3.868933282810548*^9}, {3.868933326394148*^9, 3.868933331597513*^9}, 
   3.8689335927724857`*^9, {3.868933656772152*^9, 3.868933699588785*^9}, {
   3.8689337549665127`*^9, 3.868933760217917*^9}, {3.8689346118894243`*^9, 
   3.8689346255636806`*^9}, {3.868934664434876*^9, 3.8689348414627113`*^9}, {
   3.868934893043021*^9, 3.868934894699744*^9}, {3.868934932350314*^9, 
   3.868934936806761*^9}, {3.868934997971595*^9, 3.8689350005579348`*^9}, {
   3.8689350311913433`*^9, 3.868935079711241*^9}, {3.868935228767956*^9, 
   3.868935229870348*^9}, {3.868935310403591*^9, 3.868935333710042*^9}, {
   3.868935381351574*^9, 3.868935398566124*^9}, 3.868935455079131*^9, {
   3.868935502641245*^9, 3.868935600948853*^9}, {3.868935647719479*^9, 
   3.868935659792519*^9}, {3.868935701893721*^9, 3.8689357084193773`*^9}, {
   3.8689357476038313`*^9, 3.8689358259574137`*^9}, {3.868935858705459*^9, 
   3.868935918096994*^9}, {3.868935976856922*^9, 3.868935978311822*^9}, {
   3.868936072568417*^9, 3.8689360875292683`*^9}, {3.868936152642048*^9, 
   3.868936180653296*^9}, {3.868936219013226*^9, 3.8689362209756737`*^9}, {
   3.868936266633162*^9, 3.8689362855451317`*^9}, {3.868936316203744*^9, 
   3.868936341651537*^9}, {3.868936379602906*^9, 3.868936386909555*^9}, {
   3.868936417549725*^9, 3.8689364430264463`*^9}, {3.868936490008366*^9, 
   3.8689366134864073`*^9}, {3.868936698628519*^9, 3.868936723917989*^9}, {
   3.86893676160606*^9, 3.868936812255001*^9}, {3.868937930158531*^9, 
   3.8689379354110327`*^9}, {3.8689567982259083`*^9, 
   3.8689568054055634`*^9}, {3.870071830353263*^9, 3.870071891440164*^9}, {
   3.8700719418239527`*^9, 3.87007201375915*^9}, {3.8700720766609287`*^9, 
   3.87007215941059*^9}, {3.870072316376762*^9, 3.870072359738716*^9}, {
   3.870072911980102*^9, 3.8700729489569902`*^9}, {3.870165810958482*^9, 
   3.870165868428987*^9}, {3.870166603063286*^9, 3.8701667029609003`*^9}, {
   3.8701667483931923`*^9, 3.8701667561655407`*^9}, {3.870166916306387*^9, 
   3.870166983320243*^9}, {3.870167023426243*^9, 3.8701670256563187`*^9}, {
   3.8701670750912437`*^9, 3.8701671701007853`*^9}, {3.8701673155692453`*^9, 
   3.870167318177122*^9}, {3.870167632652541*^9, 3.870167667091078*^9}, {
   3.870167830183558*^9, 3.870167847175992*^9}, {3.870167943186755*^9, 
   3.870167966021139*^9}, {3.87016812339427*^9, 3.870168183510388*^9}, {
   3.870168244196093*^9, 3.870168250184596*^9}, 3.8701685014263077`*^9, {
   3.8701723954241962`*^9, 3.870172406594*^9}, {3.870172482599146*^9, 
   3.8701725260089407`*^9}, {3.8703270874333267`*^9, 3.870327092616055*^9}, {
   3.8703272814428787`*^9, 3.8703272853612757`*^9}, {3.870327456107573*^9, 
   3.8703274582190037`*^9}, {3.8703275406215467`*^9, 3.870327543877263*^9}, {
   3.870328322012157*^9, 3.870328324780115*^9}, {3.870328960065625*^9, 
   3.870328971421482*^9}, 3.870329412836129*^9, {3.87033284993327*^9, 
   3.870332850060408*^9}, {3.8703346509651747`*^9, 3.870334651144204*^9}, {
   3.870335243805735*^9, 3.870335259678236*^9}, {3.870335434190526*^9, 
   3.87033543632789*^9}, {3.870335477843008*^9, 3.870335492329158*^9}, 
   3.870335548274115*^9, {3.8703355895933857`*^9, 3.8703356007128067`*^9}, {
   3.870335635056052*^9, 3.870335681913862*^9}, {3.870335720293746*^9, 
   3.870335751524036*^9}, {3.870335819246523*^9, 3.870335877224284*^9}, {
   3.870336036585457*^9, 3.870336038817061*^9}, {3.870336108897386*^9, 
   3.870336128131473*^9}, 3.8703361968169622`*^9, {3.8703362450654993`*^9, 
   3.8703362536595793`*^9}, {3.870336665256136*^9, 3.870336666905898*^9}, {
   3.8703367510942087`*^9, 3.870336753328114*^9}, {3.870337191557468*^9, 
   3.870337250857704*^9}, {3.8703375583866158`*^9, 3.87033761607679*^9}, {
   3.870337673805451*^9, 3.870337815916628*^9}, {3.870337856308079*^9, 
   3.870337862372362*^9}, {3.8703382783635597`*^9, 3.870338280322036*^9}, {
   3.870338395460713*^9, 3.870338454395199*^9}, {3.8703385189718103`*^9, 
   3.870338536588847*^9}},
 CellLabel->
  "In[172]:=",ExpressionUUID->"9da8726a-a978-42b8-95c6-667d8a860b4c"]
}, Closed]]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Running Experiments", "Section",
 CellChangeTimes->{{3.8702480389632874`*^9, 
  3.870248041353207*^9}},ExpressionUUID->"a03464d9-3781-4183-b8e3-\
864b3b663838"],

Cell[CellGroupData[{

Cell["Visualizing single experiments", "Subsection",
 CellChangeTimes->{{3.873349361099256*^9, 
  3.87334936847013*^9}},ExpressionUUID->"917f1abd-1f9a-44fc-a017-\
ede0a182d86c"],

Cell["\<\
This section provides an interactive UI for visualizing the main steps of a \
single run of an experiment\
\>", "Text",
 CellChangeTimes->{{3.873349415977457*^9, 
  3.873349446825788*^9}},ExpressionUUID->"818a0299-d79e-4496-96b1-\
2a3519d570a0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"CreateILDARSUI", "[", "]"}]], "Input",
 CellLabel->
  "In[173]:=",ExpressionUUID->"9d259185-4be2-4b7d-bd8d-f4bd37a38807"],

Cell[BoxData[
 PanelBox[
  TagBox[GridBox[{
     {"", 
      StyleBox["\<\"Experimental Setup\"\>",
       StripOnInput->False,
       FontSize->Larger,
       FontWeight->Bold], "", ""},
     {"\<\"Room Selection\"\>", "\<\"Receiver Position\"\>", "\<\"Number of \
Senders\"\>", ""},
     {
      PopupMenuBox[Dynamic[$CellContext`roomSelection], {{CompressedData["
1:eJxTTMoPSmVmYGDgAWJmKIaAD/ZQej+JNLo+QubgUo8s/uDv//eE1GHThy6O
zxys5jIi7MfnPoLuJNEcfOpJig8izMHrDjzxRWw8ExInNR7J0U9M+iHGn6Sk
Q5zyAAY7tko=
        "], {CompressedData["
1:eJxTTMoPSmVmYGDgAWJmKIaAD/ZQej+JNLo+QubgUo8s/uDv//eE1GHThy6O
zxys5jIi7MfnPoLuJNEcfOpJig8izMHrDjzxRWw8ExInNR7J0U9M+iHGn6Sk
Q5zyAAY7tko=
         "], {{1, 2}, {3, 4}, {5, 6}, {7, 8}, {9, 10}, {11, 
         12}}, {{0., 0., -1.}, {0., 0., 
         1.}, {-5.066394956897889*^-7, -0.9999999999998717, \
-2.566835709430698*^-13}, {0., -0.9999999999998717, 
         5.066394805907553*^-7}, {-0.9999999999997726, 
         4.768373997876691*^-7, -4.768373997876691*^-7}, {-1., 0., 0.}, {0., 
         1., 0.}, {0.9999999999998717, 0., 5.066394805907553*^-7}, {
         0.9999999999998717, -5.066394805907553*^-7, 0.}}, {{-1, -1, -1}, {1, 
         1, 1}}, "Cube"}}->"\<\"Cube Room\"\>", {CompressedData["
1:eJxTTMoPSmVmYGAQAGJmKIaAD/ZQej+JNLo+QubgUk/AHHR3MjRgUbfg+7EN
dvjNhZuDS/1+POqR7SdkDj53YjMHl3p089DU4wofnOFOYjgTii+i7cUVnsS6
n1C8kEljmIMtfvHRuNQTGR6E0gPR5hOKFwLhimI+vnxBarolkK4YGACF/Lbd

        "], {CompressedData["
1:eJxTTMoPSmVmYGAQAGJmKIaAD/ZQej+JNLo+QubgUk/AHHR3MjRgUbfg+7EN
dvjNhZuDS/1+POqR7SdkDj53YjMHl3p089DU4wofnOFOYjgTii+i7cUVnsS6
n1C8kEljmIMtfvHRuNQTGR6E0gPR5hOKFwLhimI+vnxBarolkK4YGACF/Lbd

         "], {{1, 2}, {3, 4}, {5, 6}, {7, 8, 16}, {9, 10}, {11, 12, 15}, {13, 
          14}}, {{0., 
         0., -1.}, {-3.5355338970808105`*^-7, -0.7071067811865033, 
         0.7071067811865033}, {0., -0.7071064276332462, 0.707107134739672}, {
         3.5355356647735373`*^-7, 0.7071071347399813, 0.7071064276328484}, {
         0., 0.7071067811865475, 0.7071067811865475}, {1., 0., 0.}, {0., -1., 
         0.}, {-1., 0., 0.}, {0., 1., 0.}}, {{-1, -1, -1}, {1, 1, 1}}, 
         "Haus des Nikolaus"}}->"\<\"Haus des Nikolaus\"\>", {CompressedData["

1:eJxTTMoPSmVmYGDgA2JmKIaAD/ZQej+JNLo+QubgUo8s/uDv//eE1GHThy6O
zxys5jIi7MfnPoLuJNEcfOpJig8izMHrDjzxRWw8ExInNR7J0U9M+iHGn6Sk
Q7zyCxdcA8k3PHj8AkQ7GBtf3o9DHKR+wSMI/8AciDxMHJc5uNRjE98PAMIY
7TM=
        "], {CompressedData["
1:eJxTTMoPSmVmYGDgA2JmKIaAD/ZQej+JNLo+QubgUo8s/uDv//eE1GHThy6O
zxys5jIi7MfnPoLuJNEcfOpJig8izMHrDjzxRWw8ExInNR7J0U9M+iHGn6Sk
Q7zyCxdcA8k3PHj8AkQ7GBtf3o9DHKR+wSMI/8AciDxMHJc5uNRjE98PAMIY
7TM=
         "], {{1, 2}, {3, 4}, {5, 6}, {7, 8}, {9, 10}, {11, 12}, {13, 
         14}}, {{0., 0., -1.}, {0., 0., 
         1.}, {-5.066394956897889*^-7, -0.9999999999998717, \
-2.566835709430698*^-13}, {0., -0.9999999999998717, 
         5.066394805907553*^-7}, {-0.9999999999997726, 
         4.768373997876691*^-7, -4.768373997876691*^-7}, {-1., 0., 0.}, {0., 
         1., 0.}, {0.9999999999998717, 0., 5.066394805907553*^-7}, {
         0.9999999999998717, -5.066394805907553*^-7, 
         0.}, {-0.7071067811865475, -0.7071067811865475, 
         0.}}, {{-1, -1, -1}, {1, 1, 1}}, 
         "Television"}}->"\<\"Television Room\"\>", {CompressedData["
1:eJydk9ENwjAMRCN1Cj6ZoQOEGRgBqd+MGHZgACqxAP98QClVpJq8nk2lyMrl
fG3u3P3pfBy6lNJuWt2yvs9Y1vWRAYe9xUmH+HWf1321P5t+i9v3CD59Z1Rn
xi/P1035JvS9vqn7Sj+dOl6+zIV8FHNEOk1+w/9NvKFDc+7OV8w/+Uq+4Lnw
Ufn5bx7u+wbzjfKwH+Y/yvf+Fz/zb88/9dD396VeTa14EXgJ6hBf+CB9FvND
PpCO5Dvzj+pwXm/WHlsQ
        "], {CompressedData["
1:eJydk9ENwjAMRCN1Cj6ZoQOEGRgBqd+MGHZgACqxAP98QClVpJq8nk2lyMrl
fG3u3P3pfBy6lNJuWt2yvs9Y1vWRAYe9xUmH+HWf1321P5t+i9v3CD59Z1Rn
xi/P1035JvS9vqn7Sj+dOl6+zIV8FHNEOk1+w/9NvKFDc+7OV8w/+Uq+4Lnw
Ufn5bx7u+wbzjfKwH+Y/yvf+Fz/zb88/9dD396VeTa14EXgJ6hBf+CB9FvND
PpCO5Dvzj+pwXm/WHlsQ
         
         "], {{1, 2}, {3, 4, 5}, {6, 7}, {8, 19, 22, 23}, {9, 10}, {11, 12}, {
          13, 14, 15, 16}, {17, 18}, {20, 21}, {24, 25}}, {{-1., 0., 0.}, {0.,
          0.31622776601683794`, 0.9486832980505138}, {6.408542741461204*^-7, 
         0.3162279582730487, 0.9486832339648721}, {0., -0.7071067811865476, 
         0.7071067811865476}, {1., 0., 0.}, {0., -0.9999999999998717, 
         5.066394805907553*^-7}, {-2.0265579223591198`*^-6, \
-0.9999999999979465, 0.}, {0., 0., -1.}, {0., -1., 0.}, {0., 1., 
         0.}}, {{-1, -1, -1}, {1, 1, 0.5}}, 
         "Complex Room"}}->"\<\"Complex Room\"\>"}], 
      InputFieldBox[Dynamic[$CellContext`receiverPosition]], 
      InterpretationBox[
       StyleBox[GridBox[{
          {
           SliderBox[Dynamic[$CellContext`numSenders], {2, 50, 1},
            Appearance->Automatic,
            DefaultBaseStyle->"LabeledSlider"], 
           InputFieldBox[Dynamic[$CellContext`numSenders],
            Appearance->"Frameless",
            ContinuousAction->True,
            DefaultBaseStyle->"LabeledSlider",
            FieldSize->{{5, 10}, {1, 2}},
            ImageMargins->0]}
         },
         AutoDelete->False,
         BaselinePosition->{{1, 1}, Axis},
         GridBoxItemSize->{
          "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
         GridBoxSpacings->{"Columns" -> {
             Offset[0.27999999999999997`], {
              Offset[0.7]}, 
             Offset[0.27999999999999997`]}, "Rows" -> {
             Offset[0.2], {
              Offset[0.4]}, 
             Offset[0.2]}}],
        Deployed->True,
        StripOnInput->False,
        FontFamily:>CurrentValue["ControlsFontFamily"]],
       LabeledSlider[
        Dynamic[$CellContext`numSenders], {2, 50, 1}]], ""},
     {"", 
      StyleBox["\<\"Error Settings\"\>",
       StripOnInput->False,
       FontSize->Larger,
       FontWeight->Bold], "", ""},
     {"\<\"Van Mises Concentration\"\>", "\<\"\[CapitalDelta] Error\"\>", "\<\
\"Direct Signal Discard Factor\"\>", ""},
     {
      InterpretationBox[
       StyleBox[GridBox[{
          {
           SliderBox[Dynamic[$CellContext`vanMisesConcentration], {0, 5000},
            Appearance->Automatic,
            DefaultBaseStyle->"LabeledSlider"], 
           InputFieldBox[Dynamic[$CellContext`vanMisesConcentration],
            Appearance->"Frameless",
            ContinuousAction->True,
            DefaultBaseStyle->"LabeledSlider",
            FieldSize->{{5, 10}, {1, 2}},
            ImageMargins->0]}
         },
         AutoDelete->False,
         BaselinePosition->{{1, 1}, Axis},
         GridBoxItemSize->{
          "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
         GridBoxSpacings->{"Columns" -> {
             Offset[0.27999999999999997`], {
              Offset[0.7]}, 
             Offset[0.27999999999999997`]}, "Rows" -> {
             Offset[0.2], {
              Offset[0.4]}, 
             Offset[0.2]}}],
        Deployed->True,
        StripOnInput->False,
        FontFamily:>CurrentValue["ControlsFontFamily"]],
       LabeledSlider[
        Dynamic[$CellContext`vanMisesConcentration], {0, 5000}]], 
      InterpretationBox[
       StyleBox[GridBox[{
          {
           SliderBox[Dynamic[$CellContext`\[CapitalDelta]Error], {0, 1},
            Appearance->Automatic,
            DefaultBaseStyle->"LabeledSlider"], 
           InputFieldBox[Dynamic[$CellContext`\[CapitalDelta]Error],
            Appearance->"Frameless",
            ContinuousAction->True,
            DefaultBaseStyle->"LabeledSlider",
            FieldSize->{{5, 10}, {1, 2}},
            ImageMargins->0]}
         },
         AutoDelete->False,
         BaselinePosition->{{1, 1}, Axis},
         GridBoxItemSize->{
          "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
         GridBoxSpacings->{"Columns" -> {
             Offset[0.27999999999999997`], {
              Offset[0.7]}, 
             Offset[0.27999999999999997`]}, "Rows" -> {
             Offset[0.2], {
              Offset[0.4]}, 
             Offset[0.2]}}],
        Deployed->True,
        StripOnInput->False,
        FontFamily:>CurrentValue["ControlsFontFamily"]],
       LabeledSlider[
        Dynamic[$CellContext`\[CapitalDelta]Error], {0, 1}]], 
      InterpretationBox[
       StyleBox[GridBox[{
          {
           SliderBox[Dynamic[$CellContext`directSignalDiscardFactor], {0, 1},
            Appearance->Automatic,
            DefaultBaseStyle->"LabeledSlider"], 
           InputFieldBox[Dynamic[$CellContext`directSignalDiscardFactor],
            Appearance->"Frameless",
            ContinuousAction->True,
            DefaultBaseStyle->"LabeledSlider",
            FieldSize->{{5, 10}, {1, 2}},
            ImageMargins->0]}
         },
         AutoDelete->False,
         BaselinePosition->{{1, 1}, Axis},
         GridBoxItemSize->{
          "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
         GridBoxSpacings->{"Columns" -> {
             Offset[0.27999999999999997`], {
              Offset[0.7]}, 
             Offset[0.27999999999999997`]}, "Rows" -> {
             Offset[0.2], {
              Offset[0.4]}, 
             Offset[0.2]}}],
        Deployed->True,
        StripOnInput->False,
        FontFamily:>CurrentValue["ControlsFontFamily"]],
       LabeledSlider[
        Dynamic[$CellContext`directSignalDiscardFactor], {0, 1}]], ""},
     {"\<\"Reflection Discard Factor\"\>", "\<\"Wall Error Factor\"\>", "", 
      ""},
     {
      InterpretationBox[
       StyleBox[GridBox[{
          {
           SliderBox[Dynamic[$CellContext`reflectionDiscardFactor], {0, 1},
            Appearance->Automatic,
            DefaultBaseStyle->"LabeledSlider"], 
           InputFieldBox[Dynamic[$CellContext`reflectionDiscardFactor],
            Appearance->"Frameless",
            ContinuousAction->True,
            DefaultBaseStyle->"LabeledSlider",
            FieldSize->{{5, 10}, {1, 2}},
            ImageMargins->0]}
         },
         AutoDelete->False,
         BaselinePosition->{{1, 1}, Axis},
         GridBoxItemSize->{
          "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
         GridBoxSpacings->{"Columns" -> {
             Offset[0.27999999999999997`], {
              Offset[0.7]}, 
             Offset[0.27999999999999997`]}, "Rows" -> {
             Offset[0.2], {
              Offset[0.4]}, 
             Offset[0.2]}}],
        Deployed->True,
        StripOnInput->False,
        FontFamily:>CurrentValue["ControlsFontFamily"]],
       LabeledSlider[
        Dynamic[$CellContext`reflectionDiscardFactor], {0, 1}]], 
      InterpretationBox[
       StyleBox[GridBox[{
          {
           SliderBox[Dynamic[$CellContext`wallErrorFactor], {0, 1},
            Appearance->Automatic,
            DefaultBaseStyle->"LabeledSlider"], 
           InputFieldBox[Dynamic[$CellContext`wallErrorFactor],
            Appearance->"Frameless",
            ContinuousAction->True,
            DefaultBaseStyle->"LabeledSlider",
            FieldSize->{{5, 10}, {1, 2}},
            ImageMargins->0]}
         },
         AutoDelete->False,
         BaselinePosition->{{1, 1}, Axis},
         GridBoxItemSize->{
          "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
         GridBoxSpacings->{"Columns" -> {
             Offset[0.27999999999999997`], {
              Offset[0.7]}, 
             Offset[0.27999999999999997`]}, "Rows" -> {
             Offset[0.2], {
              Offset[0.4]}, 
             Offset[0.2]}}],
        Deployed->True,
        StripOnInput->False,
        FontFamily:>CurrentValue["ControlsFontFamily"]],
       LabeledSlider[
        Dynamic[$CellContext`wallErrorFactor], {0, 1}]], "", ""},
     {"", 
      StyleBox["\<\"Algorithm Selection\"\>",
       StripOnInput->False,
       FontSize->Larger,
       FontWeight->Bold], "", ""},
     {"\<\"Clustering Algorithm\"\>", "\<\"Wall Normal Vector Computation \
Algorithm\"\>", "\<\"Sender Localization Algorithm\"\>", "\<\"Normal \
Selection Method\"\>"},
     {
      PopupMenuBox[Dynamic[$CellContext`clusteringAlgorithm], {
       "Inversion, Original"->"\<\"Inversion, Original\"\>", 
       "Inversion, Improved"->"\<\"Inversion, Improved\"\>", 
       "Gnomonic, Basic Intersections"->"\<\"Gnomonic, Basic \
Intersections\"\>", 
       "Gnomonic, Improved Intersections"->"\<\"Gnomonic, Improved \
Intersections\"\>", 
       "Gnomonic, Random Points"->"\<\"Gnomonic, Random Points\"\>", 
       "Gnomonic, Random Points Often"->"\<\"Gnomonic, Random Points \
Often\"\>", "Community Detection"->"\<\"Community Detection\"\>"}], 
      PopupMenuBox[Dynamic[$CellContext`wallNormalAlgorithm], {
       "All Pairs"->"\<\"All Pairs\"\>", 
       "Disjoint Pairs"->"\<\"Disjoint Pairs\"\>", 
       "Linear All Pairs"->"\<\"Linear All Pairs\"\>", 
       "Linear All Pairs Improved"->"\<\"Linear All Pairs Improved\"\>", 
       "Overlapping Pairs"->"\<\"Overlapping Pairs\"\>"}], 
      PopupMenuBox[Dynamic[$CellContext`localizationAlgorithm], {
       "Wall Direction"->"\<\"Wall Direction\"\>", 
       "Map to Normal Vector"->"\<\"Map to Normal Vector\"\>", 
       "Reflection Geometry"->"\<\"Reflection Geometry\"\>", 
       "Closest Lines"->"\<\"Closest Lines\"\>"}], 
      PopupMenuBox[Dynamic[$CellContext`normalSelectionMethod], {
       "Most Reflections"->"\<\"Most Reflections\"\>", 
       "Average Position"->"\<\"Average Position\"\>", 
       "Closest Lines Extended"->"\<\"Closest Lines Extended\"\>", 
       "Weighted Average (Wall Distance)"->"\<\"Weighted Average (Wall \
Distance)\"\>", 
       "Closest Reflection Group"->"\<\"Closest Reflection Group\"\>"}]},
     {
      DynamicBox[ToBoxes[
        If[$CellContext`clusteringAlgorithm == "Inversion, Original", 
         Slider[$CellContext`linesIntoBinsBinKeepThreshold, {2, 50, 1}, 
          Appearance -> "Labeled"], 
         Blank[]], StandardForm],
       ImageSizeCache->{4.747252747252747, {1., 0.}}], "", "", ""},
     {
      ButtonBox["\<\"Run (new reflection and error simulation)\"\>",
       Appearance->Automatic,
       ButtonFunction:>(NotebookLocate["current_experiment_visualization"]; 
        NotebookDelete[]; CellPrint[
          ExpressionCell[
           $CellContext`SimulateILDARS[], CellTags -> 
           "current_experiment_visualization"]]),
       Evaluator->Automatic,
       Method->"Preemptive"], "", 
      ButtonBox["\<\"Update (keep reflection and error simulation)\"\>",
       Appearance->Automatic,
       ButtonFunction:>(NotebookLocate["current_experiment_visualization"]; 
        NotebookDelete[]; CellPrint[
          ExpressionCell[
           $CellContext`UpdateILDARS[], CellTags -> 
           "current_experiment_visualization"]]),
       Evaluator->Automatic,
       Method->"Preemptive"], ""}
    },
    AutoDelete->False,
    GridBoxItemSize->{"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
    GridBoxSpacings->{
     "Columns" -> {{0}}, "Rows" -> {{6, 1, 1, 6, 1, 0, 1, 0, 6, 1, 1, 1, 2}}}],
   "Grid"]]], "Output",
 CellChangeTimes->{
  3.873349780540738*^9, 3.873351653568123*^9, {3.873351944372201*^9, 
   3.873351952555944*^9}, 3.873352000113027*^9, 3.873352086554111*^9},
 CellLabel->
  "Out[173]=",ExpressionUUID->"193fddf0-5c8b-4851-861b-68a33849cf85"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Running multiple experiments with one varying parameter", "Subsection",
 CellChangeTimes->{{3.873349377364036*^9, 
  3.8733493907616873`*^9}},ExpressionUUID->"a66b49d7-c88d-414e-920f-\
36e8fc537ed5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "Uncomment", " ", "block", " ", "to", " ", "generate", " ", "csv", " ", 
    "data", " ", "for", " ", "line", " ", 
    RowBox[{"chart", ".", " ", "Adjust"}], " ", "numIterations", " ", "for", 
    " ", "more", " ", "runs", " ", "for", " ", "each", " ", 
    RowBox[{"experiment", "."}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"ATTENTION", "!"}], " ", "This", " ", "function", " ", "will", 
      " ", "write", " ", "csv", " ", "data", " ", 
      RowBox[{
       RowBox[{"to", " ", "."}], "/", "chart"}]}], "-", 
     RowBox[{"data", "/"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{
      "in", " ", "case", " ", "you", " ", "use", " ", "the", " ", "bw", " ", 
       "sync"}], "&"}], "share", " ", "client", " ", "and", " ", "have", " ", 
     "automatic", " ", "synchronization", " ", "enabled"}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{
      "I", " ", "highly", " ", "recommend", " ", "not", " ", "running", " ", 
       "this", " ", "directly", " ", "inside", " ", "the", " ", "bw", " ", 
       "sync"}], "&"}], "share", " ", 
     RowBox[{"folder", "!"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"numIterations", "=", "1"}], ",", 
       RowBox[{"room", "=", "cubeRoom"}]}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"GenerateDataForChart", "[", 
       RowBox[{"numIterations", ",", "\"\<Number of Senders\>\"", ",", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "4", ",", "50", ",", "2"}], "}"}]}], "]"}]}], 
       "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"GenerateDataForChart", "[", 
       RowBox[{"numIterations", ",", "\"\<Von Mises Concentration\>\"", ",", 
        RowBox[{"{", 
         RowBox[{
         "3282.806", ",", "820.702", ",", "364.756", ",", "205.175", ",", 
          "131.312", ",", "91.189", ",", "66.996", ",", "51.294", ",", 
          "40.528", ",", "32.828"}], "}"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"GenerateDataForChart", "[", 
       RowBox[{"numIterations", ",", "\"\<\[CapitalDelta]-Error\>\"", ",", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "0", ",", "0.95", ",", "0.05"}], "}"}]}], 
         "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"GenerateDataForChart", "[", 
       RowBox[{"numIterations", ",", "\"\<Receiver Position\>\"", ",", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"{", 
            RowBox[{"1", ",", "1", ",", "1"}], "}"}], "*", "i"}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "0", ",", "0.95", ",", "0.05"}], "}"}]}], 
         "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"GenerateDataForChart", "[", 
       RowBox[{"numIterations", ",", "\"\<Wall Error\>\"", ",", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "0", ",", "0.95", ",", "0.05"}], "}"}]}], 
         "]"}]}], "]"}]}]}], "\[IndentingNewLine]", "]"}], 
   "\[IndentingNewLine]", "*)"}]}]], "Input",
 CellChangeTimes->{{3.87334967565279*^9, 3.87334972650601*^9}, {
  3.873349840619123*^9, 3.87334987399325*^9}, {3.873349908315633*^9, 
  3.8733499251531353`*^9}, {3.873350111234592*^9, 3.8733502568976583`*^9}},
 CellLabel->
  "In[174]:=",ExpressionUUID->"1a3406cf-79c9-4265-8217-a64e990f1139"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Running multiple experiments in all test rooms", "Subsection",
 CellChangeTimes->{{3.873349399019536*^9, 
  3.873349408749342*^9}},ExpressionUUID->"a65b4cd4-6cd4-41bd-b73b-\
09782ad5cea1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "Uncomment", " ", "block", " ", "to", " ", "generate", " ", "csv", " ", 
    "data", " ", "for", " ", 
    RowBox[{"tables", ".", " ", "Adjust"}], " ", 
    "numberOfIterationsForEachExperiment", " ", "to", " ", "adjust", " ", 
    "the", " ", "runs", " ", "for", " ", "the", " ", 
    RowBox[{"experiments", "."}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"ATTENTION", "!"}], " ", "This", " ", "function", " ", "will", 
      " ", "write", " ", "csv", " ", "data", " ", 
      RowBox[{
       RowBox[{"to", " ", "."}], "/", "experiment"}]}], "-", 
     RowBox[{"data", "/"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{
      "in", " ", "case", " ", "you", " ", "use", " ", "the", " ", "bw", " ", 
       "sync"}], "&"}], "share", " ", "client", " ", "and", " ", "have", " ", 
     "automatic", " ", "synchronization", " ", "enabled"}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{
      "I", " ", "highly", " ", "recommend", " ", "not", " ", "running", " ", 
       "this", " ", "directly", " ", "inside", " ", "the", " ", "bw", " ", 
       "sync"}], "&"}], "share", " ", 
     RowBox[{"folder", "!"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"rooms", "=", 
        RowBox[{"{", 
         RowBox[{"\"\<cube\>\"", ",", "\"\<television\>\"", ",", 
          RowBox[{"(*", 
           RowBox[{"\"\<complex\>\"", ","}], "*)"}], "\"\<corridor\>\"", ",", 
          "\"\<slope\>\"", ",", 
          RowBox[{"(*", 
           RowBox[{"\"\<window\>\"", ","}], "*)"}], "\"\<big_cube\>\""}], 
         "}"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"receiverBasePosition", "=", 
        RowBox[{"{", 
         RowBox[{"0.1", ",", "0.2", ",", "0.3"}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"numberOfIterationsForEachExperiment", "=", "1"}]}], 
      "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"Print", "[", 
         RowBox[{"\"\<Now simulating for room\>\"", ",", "room"}], "]"}], ";",
         "\[IndentingNewLine]", 
        RowBox[{"ParallelGenerateCSVDataMultipleExperiments", "[", 
         RowBox[{
         "room", ",", "numberOfIterationsForEachExperiment", ",", 
          "receiverBasePosition", ",", "False"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"ParallelGenerateCSVDataMultipleExperiments", "[", 
         RowBox[{"room", ",", "numberOfIterationsForEachExperiment", ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", "True"}], "]"}]}], 
       "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"room", ",", "rooms"}], "}"}]}], "]"}]}], 
    "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", "*)"}]}]], "Input",
 CellChangeTimes->{{3.873349704370274*^9, 3.8733497234065857`*^9}, {
  3.873350264020195*^9, 3.873350343454274*^9}, {3.87335175407918*^9, 
  3.8733517567313766`*^9}},
 CellLabel->
  "In[175]:=",ExpressionUUID->"46686cbd-87c6-4e29-b693-9761f31229d8"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{2025.4945054945056`, 1118.7692307692307`},
WindowMargins->{{0, Automatic}, {0, Automatic}},
TaggingRules-><|"TryRealOnly" -> False|>,
Magnification:>1. Inherited,
FrontEndVersion->"13.0 for Linux x86 (64-bit) (February 4, 2022)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"edce7783-2aed-405e-8b2f-abf871001231"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 254, 6, 160, "Title",ExpressionUUID->"77987cb0-dba3-4ae3-8afa-0a035336c879"],
Cell[837, 30, 601, 11, 78, "Text",ExpressionUUID->"16321ca0-d146-4955-9b37-7d6d7d8beaf4"],
Cell[CellGroupData[{
Cell[1463, 45, 155, 3, 67, "Section",ExpressionUUID->"61ee57f8-0b68-4a7d-8095-890b097b0af0"],
Cell[1621, 50, 337, 7, 34, "Text",ExpressionUUID->"484287ab-7d7b-4d48-bf7d-716b2233bc77"],
Cell[1961, 59, 5815, 148, 331, "Input",ExpressionUUID->"151023be-6c44-4828-9fce-5723848674c0"],
Cell[CellGroupData[{
Cell[7801, 211, 10069, 282, 1110, "Input",ExpressionUUID->"8acfde4e-5743-4c6a-82d1-5b483a0a5f24"],
Cell[17873, 495, 32174, 766, 70, "Output",ExpressionUUID->"56308759-fc58-4e67-93d7-6f05078348f5"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[50096, 1267, 184, 3, 53, "Section",ExpressionUUID->"a4101e6c-4945-4256-927d-4d41e1db6f16"],
Cell[50283, 1272, 545, 9, 34, "Text",ExpressionUUID->"08c9be05-dfb0-4ceb-a6c5-14ad81565164"],
Cell[50831, 1283, 21414, 424, 1297, "Input",ExpressionUUID->"e0214293-3fd0-4970-a36d-ba82429f4c81"],
Cell[CellGroupData[{
Cell[72270, 1711, 165, 3, 54, "Subsection",ExpressionUUID->"3634a2d3-f767-484f-8c96-989694a2c361"],
Cell[CellGroupData[{
Cell[72460, 1718, 160, 2, 45, "Subsubsection",ExpressionUUID->"cf5404d8-efb2-4ce3-b4d0-286b813db69e"],
Cell[72623, 1722, 324, 7, 34, "Text",ExpressionUUID->"58be7c9e-57f8-4641-ba63-1a44284ee9d1"],
Cell[72950, 1731, 11783, 278, 529, "Input",ExpressionUUID->"0c012b14-f5de-43de-a743-90892264ca4f"],
Cell[84736, 2011, 1544, 38, 134, "Input",ExpressionUUID->"b2f64a3d-cf43-4cf4-8fa7-daf39b88bec8"],
Cell[86283, 2051, 1615, 39, 176, "Input",ExpressionUUID->"1798934a-2fd1-4d61-9e1a-0936695af2fe"]
}, Closed]],
Cell[CellGroupData[{
Cell[87935, 2095, 184, 3, 45, "Subsubsection",ExpressionUUID->"b3aaedfd-57c6-4e56-8c90-32387ff22474"],
Cell[88122, 2100, 317, 7, 31, "Text",ExpressionUUID->"2e940e07-b5f7-46fc-8e5d-faf38e99d86b"],
Cell[CellGroupData[{
Cell[88464, 2111, 5648, 142, 360, "Input",ExpressionUUID->"e81b78f0-dd7f-47a3-84b1-7e05137ceb9f"],
Cell[94115, 2255, 2668, 39, 70, "Output",ExpressionUUID->"46064e7b-a26d-4fcb-985d-da689f7f2c33"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[96832, 2300, 169, 3, 37, "Subsubsection",ExpressionUUID->"b7376488-cc8d-4df2-8630-f5bec8ce274b"],
Cell[97004, 2305, 215, 5, 34, "Text",ExpressionUUID->"d8e02f6e-e9d1-4a53-ad26-91f16e9568bd"],
Cell[97222, 2312, 2943, 73, 279, "Input",ExpressionUUID->"a108e13f-ff7d-4c51-b3b9-ea7c42b6d6ba"],
Cell[100168, 2387, 710, 12, 51, "Input",ExpressionUUID->"a96b01e6-488e-4a3a-9340-55aa77a3ae33"],
Cell[100881, 2401, 1467, 31, 176, "Input",ExpressionUUID->"49e57d83-81fb-4f8c-97a7-ac57253e4df3"],
Cell[102351, 2434, 1438, 32, 176, "Input",ExpressionUUID->"5750a3a1-e6ee-4a31-aeea-24b21fba4f15"],
Cell[103792, 2468, 1798, 41, 134, "Input",ExpressionUUID->"bbfff6f4-a5df-4186-bc4a-3cf1a2ed673e"],
Cell[105593, 2511, 699, 15, 51, "Input",ExpressionUUID->"d22736bc-52d9-4081-9f14-486652882ad3"],
Cell[106295, 2528, 3597, 79, 300, "Input",ExpressionUUID->"3c34bb3d-6980-4b3e-ad1a-5d3ab7a32f6a"]
}, Closed]]
}, Closed]],
Cell[109919, 2611, 183, 3, 38, "Subsection",ExpressionUUID->"1f9c334f-8181-4fff-89ec-cfe5f65bda84"]
}, Closed]],
Cell[CellGroupData[{
Cell[110139, 2619, 166, 3, 53, "Section",ExpressionUUID->"b21f521b-aab4-459e-8d15-0aef219bf751"],
Cell[110308, 2624, 515, 9, 34, "Text",ExpressionUUID->"a19e8778-6836-4af5-b20c-28f4570b64b0"],
Cell[CellGroupData[{
Cell[110848, 2637, 168, 3, 54, "Subsection",ExpressionUUID->"920ea727-b59e-475a-a32a-2c782b7a3203"],
Cell[111019, 2642, 529, 10, 34, "Text",ExpressionUUID->"f53982f7-6ba7-4cfc-9433-d95d1eb25993"],
Cell[CellGroupData[{
Cell[111573, 2656, 167, 3, 45, "Subsubsection",ExpressionUUID->"d3552dfb-16f8-4641-ab87-c605b76c41d0"],
Cell[111743, 2661, 1180, 29, 30, "Input",ExpressionUUID->"fd727249-1f9d-4d70-b7a4-4be6e76e64ae"],
Cell[112926, 2692, 1843, 42, 174, "Input",ExpressionUUID->"cd9917bb-5130-4508-929c-24bf5271fac1"],
Cell[114772, 2736, 2962, 71, 195, "Input",ExpressionUUID->"2fc71f70-2c86-47ed-b60b-0529ccbe67bf"],
Cell[117737, 2809, 2395, 58, 216, "Input",ExpressionUUID->"06854cd9-53f1-4be1-8f6f-284656659165"],
Cell[120135, 2869, 2060, 46, 216, "Input",ExpressionUUID->"bc35c6f2-b5cb-4389-91f8-9199b21db25a"],
Cell[122198, 2917, 1933, 44, 216, "Input",ExpressionUUID->"05dd38f1-13a4-41ab-9864-ff5b30c06c03"],
Cell[124134, 2963, 1824, 45, 155, "Input",ExpressionUUID->"c4c7dac9-34ab-4edd-b050-f7796739a4b2"],
Cell[125961, 3010, 2559, 71, 195, "Input",ExpressionUUID->"78fe13a6-9315-4f53-aeef-17866c8890d4"],
Cell[128523, 3083, 7939, 197, 753, "Input",ExpressionUUID->"1a02a61b-134d-469c-ae2f-92e69e0ede38"],
Cell[136465, 3282, 14099, 339, 878, "Input",ExpressionUUID->"3df32ecc-e80f-4201-9205-216d2744e17a"],
Cell[150567, 3623, 6257, 164, 360, "Input",ExpressionUUID->"83d84be8-1049-4554-82b7-ef58b937fce5"]
}, Closed]],
Cell[CellGroupData[{
Cell[156861, 3792, 162, 3, 37, "Subsubsection",ExpressionUUID->"7a2d62bc-f203-46dc-aee3-936e55a7f6ff"],
Cell[157026, 3797, 12817, 299, 610, "Input",ExpressionUUID->"097f0561-71ed-4d2a-8171-f3e59f629e58"],
Cell[169846, 4098, 13507, 315, 655, "Input",ExpressionUUID->"ca9ed0e1-59a7-4cf0-90d6-ebb8e74c67ef"]
}, Closed]],
Cell[CellGroupData[{
Cell[183390, 4418, 169, 3, 37, "Subsubsection",ExpressionUUID->"aeb4eb87-9133-4019-8c60-5f945678eb80"],
Cell[183562, 4423, 2354, 49, 195, "Input",ExpressionUUID->"597088d7-16d1-4afb-ae05-e30bb4ab4127"],
Cell[185919, 4474, 2332, 49, 195, "Input",ExpressionUUID->"5ea04c7d-2af2-4b7f-8a37-fa42aa35a19c"]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[188300, 4529, 168, 3, 38, "Subsection",ExpressionUUID->"2acfb757-aa40-437a-a3f4-384c2b3f9b99"],
Cell[188471, 4534, 467, 8, 34, "Text",ExpressionUUID->"db1241d8-caa4-4c4b-a0f5-8747f05bd8e1"],
Cell[CellGroupData[{
Cell[188963, 4546, 167, 3, 45, "Subsubsection",ExpressionUUID->"a65fcd03-e6e6-4b9b-b85d-9f90af00f53b"],
Cell[189133, 4551, 26188, 654, 70, "Input",ExpressionUUID->"38620eff-cd11-4ca3-b261-47afdb9ccb3e"]
}, Closed]],
Cell[CellGroupData[{
Cell[215358, 5210, 178, 3, 37, "Subsubsection",ExpressionUUID->"7dc28108-3754-40c0-8a6c-17f8b35a2313"],
Cell[215539, 5215, 30256, 749, 70, "Input",ExpressionUUID->"f4dd29f8-4fc6-466a-8be5-46e980d56572"],
Cell[245798, 5966, 8020, 170, 70, "Input",ExpressionUUID->"79c8a9db-a6d6-4365-b633-96924684715c"]
}, Closed]],
Cell[CellGroupData[{
Cell[253855, 6141, 187, 3, 37, "Subsubsection",ExpressionUUID->"24d58b74-4ee6-4744-9d80-deca436b9475"],
Cell[254045, 6146, 3907, 98, 446, "Input",ExpressionUUID->"6655a247-13ed-4401-9d00-9001f4997e8d"],
Cell[257955, 6246, 2770, 73, 300, "Input",ExpressionUUID->"736f7be4-0756-4c22-84b8-0ab0607d9b82"],
Cell[260728, 6321, 3047, 80, 446, "Input",ExpressionUUID->"d39e2219-e012-4e02-b9f2-29ce070815d8"],
Cell[263778, 6403, 3234, 73, 425, "Input",ExpressionUUID->"6beefaa4-a967-4c97-bcb6-75c9fc792a7e"]
}, Closed]],
Cell[CellGroupData[{
Cell[267049, 6481, 262, 5, 37, "Subsubsection",ExpressionUUID->"fa0ba89c-7919-4292-88c1-ee23858798ba"],
Cell[267314, 6488, 5344, 126, 549, "Input",ExpressionUUID->"495dea95-5f4d-497e-babb-59be0de9058b"],
Cell[272661, 6616, 7877, 175, 911, "Input",ExpressionUUID->"fde23aeb-e747-464c-8528-7c81bbfe03a8"]
}, Closed]],
Cell[CellGroupData[{
Cell[280575, 6796, 222, 5, 37, "Subsubsection",ExpressionUUID->"ca3efa55-0640-46a5-8dc1-d46212062ba8"],
Cell[280800, 6803, 9598, 213, 1048, "Input",ExpressionUUID->"868fff9d-fdbc-4c96-84d7-b20441e46829"],
Cell[290401, 7018, 5842, 137, 653, "Input",ExpressionUUID->"81069dfc-58ff-4221-9367-7408c6ec6e6c"],
Cell[296246, 7157, 8833, 204, 1152, "Input",ExpressionUUID->"0bd7ba41-6659-4388-8aea-a529267746d5"]
}, Closed]],
Cell[CellGroupData[{
Cell[305116, 7366, 229, 3, 37, "Subsubsection",ExpressionUUID->"02d9bef3-ac5d-4291-a73d-853d50bf6d81"],
Cell[305348, 7371, 48034, 1102, 70, "Input",ExpressionUUID->"01f4fe38-540f-4985-a65a-9d33d0401deb"]
}, Closed]],
Cell[CellGroupData[{
Cell[353419, 8478, 213, 4, 37, "Subsubsection",ExpressionUUID->"24865ba7-ba9d-4b04-94a1-db310fd971ff"],
Cell[353635, 8484, 10219, 218, 70, "Input",ExpressionUUID->"3f3000cb-0e9f-4ce5-9d83-3307057fb4ed"]
}, Closed]],
Cell[CellGroupData[{
Cell[363891, 8707, 167, 3, 37, "Subsubsection",ExpressionUUID->"4497b242-b69f-43d5-af31-9c73b1ffb79f"],
Cell[364061, 8712, 4117, 89, 70, "Input",ExpressionUUID->"809c9573-c650-43d0-8d48-3fb13e416632"]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[368227, 8807, 164, 3, 38, "Subsection",ExpressionUUID->"aea5362d-9582-447f-ab85-fc40190ff198"],
Cell[368394, 8812, 458, 9, 56, "Text",ExpressionUUID->"a5f51396-af59-4209-959d-200d56096d3b"],
Cell[CellGroupData[{
Cell[368877, 8825, 168, 3, 45, "Subsubsection",ExpressionUUID->"1594ec5a-2239-449e-8521-8f8352f44016"],
Cell[369048, 8830, 486, 9, 34, "Text",ExpressionUUID->"a9936167-b40d-4c71-bb0f-87f3c7fd1257"],
Cell[369537, 8841, 10386, 258, 1289, "Input",ExpressionUUID->"4d7e3004-d40d-4828-8eb2-219e034fbf16"]
}, Closed]],
Cell[CellGroupData[{
Cell[379960, 9104, 169, 3, 37, "Subsubsection",ExpressionUUID->"f7fa0e63-2b83-47f8-a945-95ec7e810152"],
Cell[380132, 9109, 351, 7, 34, "Text",ExpressionUUID->"116ba058-d3d4-46d2-a51b-913278d320e3"],
Cell[380486, 9118, 3066, 67, 487, "Input",ExpressionUUID->"1089f4d4-faf1-4036-bd59-8bef979e7652"]
}, Closed]],
Cell[CellGroupData[{
Cell[383589, 9190, 166, 3, 45, "Subsubsection",ExpressionUUID->"82c456ec-b264-4b05-ae78-69bdf9c72b77"],
Cell[383758, 9195, 361, 7, 34, "Text",ExpressionUUID->"188e565f-26f9-449d-b50a-a715ae095656"],
Cell[384122, 9204, 2465, 49, 155, "Input",ExpressionUUID->"63893a80-2ec3-4df0-be6a-41f7894cb2e8"]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[386636, 9259, 178, 3, 54, "Subsection",ExpressionUUID->"05a56a2e-7e71-471a-b205-5318fbf9a04b"],
Cell[386817, 9264, 362, 7, 34, "Text",ExpressionUUID->"d51a5108-a859-49bb-847d-e3738b4eb7c5"],
Cell[CellGroupData[{
Cell[387204, 9275, 186, 3, 45, "Subsubsection",ExpressionUUID->"e4f9d5cb-3480-48d9-b213-9f93499d223b"],
Cell[387393, 9280, 2645, 49, 259, "Input",ExpressionUUID->"89e34bca-c4bb-43b9-b506-8f292a4e1697"]
}, Closed]],
Cell[CellGroupData[{
Cell[390075, 9334, 277, 4, 37, "Subsubsection",ExpressionUUID->"dc16ad91-6521-40cc-99c1-fef8c231828d"],
Cell[390355, 9340, 3288, 70, 259, "Input",ExpressionUUID->"feadfa33-71eb-403d-a6ee-c62f59983479"],
Cell[393646, 9412, 3542, 68, 279, "Input",ExpressionUUID->"e71ab499-e882-4af3-b5ae-19f07990a87c"],
Cell[397191, 9482, 4066, 89, 299, "Input",ExpressionUUID->"aa485d28-8178-439a-bd65-68368595e0e9"]
}, Closed]]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[401318, 9578, 171, 2, 53, "Section",ExpressionUUID->"4aa525e2-9eb2-4cb7-a03d-644a65c5d29a"],
Cell[401492, 9582, 215, 5, 34, "Text",ExpressionUUID->"1d3a2e4e-1c5a-4827-9035-032f52afada4"],
Cell[CellGroupData[{
Cell[401732, 9591, 163, 3, 54, "Subsection",ExpressionUUID->"d69a8853-edb6-4130-b48c-85c688126bf9"],
Cell[401898, 9596, 2705, 56, 222, "Input",ExpressionUUID->"c7316236-0ac2-4dae-a884-b98ed1e88cca"]
}, Closed]],
Cell[CellGroupData[{
Cell[404640, 9657, 171, 3, 38, "Subsection",ExpressionUUID->"732182f8-ce25-4cb4-a350-dfddee0a732d"],
Cell[CellGroupData[{
Cell[404836, 9664, 160, 3, 45, "Subsubsection",ExpressionUUID->"f634d12e-ee46-4dc3-b16a-de7a07696caa"],
Cell[404999, 9669, 9696, 234, 814, "Input",ExpressionUUID->"5b32533a-2d68-48a4-9634-d38330aa0516"],
Cell[414698, 9905, 12164, 288, 876, "Input",ExpressionUUID->"08ee304f-759c-457a-83b1-ac5326ca36fc"]
}, Closed]],
Cell[CellGroupData[{
Cell[426899, 10198, 165, 3, 37, "Subsubsection",ExpressionUUID->"13fadac7-3431-4fbe-9518-a39c2095764c"],
Cell[427067, 10203, 7927, 197, 705, "Input",ExpressionUUID->"123817a3-f999-44dc-9cf6-0169d495dbdd"],
Cell[434997, 10402, 10826, 262, 850, "Input",ExpressionUUID->"ed04367d-2ee4-4ab2-8e1e-d9009c44c73c"]
}, Closed]],
Cell[CellGroupData[{
Cell[445860, 10669, 170, 3, 37, "Subsubsection",ExpressionUUID->"519136f6-2ce9-45ee-b105-448ce55c7ed8"],
Cell[446033, 10674, 8475, 209, 747, "Input",ExpressionUUID->"4bf853bb-f7b7-49e0-b1e0-92e5d8384aba"],
Cell[454511, 10885, 11236, 272, 850, "Input",ExpressionUUID->"13a96f44-d5cd-48e1-a8b6-4b6bc54759f8"]
}, Closed]],
Cell[CellGroupData[{
Cell[465784, 11162, 240, 4, 37, "Subsubsection",ExpressionUUID->"6e05b9ff-d939-45f3-8f40-adad9cd92f29"],
Cell[466027, 11168, 9865, 243, 886, "Input",ExpressionUUID->"8d61e303-eefa-4200-a363-31a173a04171"]
}, Closed]],
Cell[CellGroupData[{
Cell[475929, 11416, 259, 5, 37, "Subsubsection",ExpressionUUID->"05337bd6-bc7e-484b-a71e-3bd590bc75b9"],
Cell[476191, 11423, 4574, 109, 347, "Input",ExpressionUUID->"3bb390b9-9685-4d7f-899c-55a9c26f8821"]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[480814, 11538, 168, 3, 38, "Subsection",ExpressionUUID->"eb3baab6-28b2-4289-8358-5e0f21e27179"],
Cell[480985, 11543, 10387, 235, 1030, "Input",ExpressionUUID->"8c8b9e35-11ec-4c05-8e1e-306e6b636212"]
}, Closed]],
Cell[CellGroupData[{
Cell[491409, 11783, 166, 3, 38, "Subsection",ExpressionUUID->"a78cc069-99d0-4c27-950e-8449b6c17e4a"],
Cell[491578, 11788, 374, 8, 56, "Text",ExpressionUUID->"00527fd3-b927-438b-b1d1-3a14c82c2592"],
Cell[491955, 11798, 5692, 121, 487, "Input",ExpressionUUID->"7efbd99e-658f-4ebb-980d-12e4b5adb2d5"]
}, Closed]],
Cell[CellGroupData[{
Cell[497684, 11924, 158, 3, 38, "Subsection",ExpressionUUID->"d158cc02-a3a0-4968-a047-07166a2a2196"],
Cell[497845, 11929, 5285, 107, 591, "Input",ExpressionUUID->"a61bc2a0-6e63-49aa-9665-e6957b2884aa"],
Cell[503133, 12038, 3559, 77, 466, "Input",ExpressionUUID->"4f41b0c2-f18a-4a60-9970-d79a886c134f"],
Cell[506695, 12117, 301, 6, 29, "Input",ExpressionUUID->"45e14b96-21e2-428e-bc54-ff45ec67bcaf"]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[507045, 12129, 166, 3, 53, "Section",ExpressionUUID->"9acded2d-9751-4fdf-879e-716250776529"],
Cell[507214, 12134, 542, 10, 34, "Text",ExpressionUUID->"693607c8-222e-4204-b917-9e7a7deafc26"],
Cell[CellGroupData[{
Cell[507781, 12148, 173, 2, 54, "Subsection",ExpressionUUID->"ed4557ff-634b-4089-ad5a-7fa053291dcf"],
Cell[507957, 12152, 2192, 57, 35, "Text",ExpressionUUID->"6359f4a4-b2ed-4a44-aad6-41151c1d9b50"],
Cell[510152, 12211, 1338, 31, 124, "Input",ExpressionUUID->"f400e49a-8ae7-49aa-8f82-5bd7b5cd3376"],
Cell[511493, 12244, 1216, 25, 68, "Input",ExpressionUUID->"32dbcbe9-527b-489a-af84-835343449ea9"],
Cell[512712, 12271, 1508, 40, 124, "Input",ExpressionUUID->"debcec76-e35b-41b4-b2b7-da170f8dac4b"],
Cell[514223, 12313, 3052, 69, 333, "Input",ExpressionUUID->"4b077f21-23ec-48d1-bcee-3b38b8cace89"]
}, Closed]],
Cell[CellGroupData[{
Cell[517312, 12387, 173, 3, 38, "Subsection",ExpressionUUID->"aa9cdab4-feb9-4372-b4ae-9c6f122aee6e"],
Cell[517488, 12392, 311, 7, 34, "Text",ExpressionUUID->"504997d8-f927-4698-b372-9852efbc31bd"],
Cell[517802, 12401, 2550, 59, 238, "Input",ExpressionUUID->"1d96884b-50a4-41be-bfd2-5505f12c3840"],
Cell[520355, 12462, 7973, 173, 549, "Input",ExpressionUUID->"ff09766e-2741-4d00-bf66-93ab80e01693"]
}, Closed]],
Cell[CellGroupData[{
Cell[528365, 12640, 226, 4, 38, "Subsection",ExpressionUUID->"4ad18dc2-852a-4149-bea4-689bbf17de6b"],
Cell[528594, 12646, 523, 10, 34, "Text",ExpressionUUID->"701798c3-f166-464e-906b-433ff50b0841"],
Cell[CellGroupData[{
Cell[529142, 12660, 218, 4, 45, "Subsubsection",ExpressionUUID->"8a60793f-d4e2-4ad4-8cbb-636cfa29f098"],
Cell[529363, 12666, 2155, 52, 155, "Input",ExpressionUUID->"da5ce998-2dd5-4b50-8629-230c6c778ab2"]
}, Open  ]],
Cell[CellGroupData[{
Cell[531555, 12723, 167, 3, 45, "Subsubsection",ExpressionUUID->"53f5b035-5087-450c-a83f-619d9e92f3cf"],
Cell[531725, 12728, 5561, 130, 643, "Input",ExpressionUUID->"0aa74ed3-0b99-42aa-8121-b6fff991379b"]
}, Closed]],
Cell[CellGroupData[{
Cell[537323, 12863, 173, 3, 37, "Subsubsection",ExpressionUUID->"d102f048-70ee-4acd-bd87-b93f437508e7"],
Cell[537499, 12868, 8760, 206, 757, "Input",ExpressionUUID->"74acdc54-b67c-40f8-9fc4-34ac7dd9229d"]
}, Closed]],
Cell[CellGroupData[{
Cell[546296, 13079, 232, 4, 37, "Subsubsection",ExpressionUUID->"3cb7d46f-8986-4bf5-8322-999a4cadbff9"],
Cell[546531, 13085, 6731, 154, 752, "Input",ExpressionUUID->"31cb75e0-c594-4e78-afb3-0ae54b1e9527"]
}, Open  ]],
Cell[CellGroupData[{
Cell[553299, 13244, 165, 3, 45, "Subsubsection",ExpressionUUID->"f8ec90b4-95d5-44f3-b0ce-e88e851728e8"],
Cell[553467, 13249, 4351, 101, 342, "Input",ExpressionUUID->"ef91efcd-ada4-46de-bb2b-422b3f6c7329"]
}, Closed]],
Cell[CellGroupData[{
Cell[557855, 13355, 187, 3, 37, "Subsubsection",ExpressionUUID->"76e634ba-9c41-4490-a860-878871bccf70"],
Cell[558045, 13360, 7159, 119, 300, "Input",ExpressionUUID->"eacfc463-dfde-4e24-9db2-a62006cb77db"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[565253, 13485, 221, 4, 38, "Subsection",ExpressionUUID->"8314a4a5-4460-4583-8c68-7985b7931d2b"],
Cell[565477, 13491, 198, 3, 34, "Text",ExpressionUUID->"188e08ae-f6ff-41c0-9275-12979dc33d4c"],
Cell[565678, 13496, 4386, 98, 446, "Input",ExpressionUUID->"3cfabb11-9bd2-46c3-ad71-3757091cc3ee"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[570113, 13600, 230, 4, 53, "Section",ExpressionUUID->"679a2c70-9cc2-40cb-a2a2-53ddce08dc04"],
Cell[CellGroupData[{
Cell[570368, 13608, 180, 2, 54, "Subsection",ExpressionUUID->"3707aa71-8912-405e-96af-89e27fed3db3"],
Cell[570551, 13612, 1380, 31, 169, "Input",ExpressionUUID->"15009fb9-0ab9-4ac4-ac50-86bab96101fc"],
Cell[571934, 13645, 21162, 453, 1629, "Input",ExpressionUUID->"2ce47255-e0ab-45bf-95d8-a31e0e24addb"]
}, Closed]],
Cell[CellGroupData[{
Cell[593133, 14103, 223, 5, 38, "Subsection",ExpressionUUID->"c77084b6-b7ac-43ad-88e2-50f2ad803ab8"],
Cell[593359, 14110, 2998, 79, 425, "Input",ExpressionUUID->"01dbb6f7-bc9b-4d72-925d-d8a1c8b5aca0"],
Cell[596360, 14191, 6603, 111, 176, "Input",ExpressionUUID->"daa57327-482a-4dd9-944e-b1fb02e20c74"],
Cell[602966, 14304, 2668, 56, 321, "Input",ExpressionUUID->"9bf6ccda-aab8-4af3-943d-02346f2cff2b"],
Cell[605637, 14362, 2084, 29, 29, "Input",ExpressionUUID->"50528973-ebb9-4de5-b69a-6165e58756d8"]
}, Closed]],
Cell[CellGroupData[{
Cell[607758, 14396, 194, 3, 38, "Subsection",ExpressionUUID->"025ded74-ae0d-42cd-8190-9780f8dd69d9"],
Cell[607955, 14401, 12763, 260, 1235, "Input",ExpressionUUID->"92c50cec-64d1-41e8-830a-088a0f933d8e"]
}, Closed]],
Cell[CellGroupData[{
Cell[620755, 14666, 182, 3, 38, "Subsection",ExpressionUUID->"9491c8a3-a69d-4b32-99e1-e3167e0a400f"],
Cell[620940, 14671, 462, 9, 34, "Text",ExpressionUUID->"2ccaf9ff-b9ce-4239-aeee-cd201eecca16"],
Cell[621405, 14682, 8818, 186, 799, "Input",ExpressionUUID->"27e9ded5-371f-4b96-9337-4b2e72d07d8b"]
}, Closed]],
Cell[CellGroupData[{
Cell[630260, 14873, 254, 4, 38, "Subsection",ExpressionUUID->"ccdad3db-cbfc-4e27-946d-f5dea0cc0ce7"],
Cell[CellGroupData[{
Cell[630539, 14881, 170, 3, 45, "Subsubsection",ExpressionUUID->"cf7e17e1-9711-41a6-8794-0678ee2ee7b1"],
Cell[630712, 14886, 18764, 417, 1588, "Input",ExpressionUUID->"9109ebcd-a8a3-46d2-b338-e79b6daebaf7"],
Cell[649479, 15305, 4121, 91, 508, "Input",ExpressionUUID->"610d5c3a-4e0d-43fd-bc89-6e9a42145e0f"],
Cell[653603, 15398, 4476, 98, 508, "Input",ExpressionUUID->"f130f5a5-69d4-421d-a3d7-3b2681bea9dc"],
Cell[658082, 15498, 24775, 535, 3168, "Input",ExpressionUUID->"ca1be438-9f3a-4b5b-87f1-7c41a93586d8"],
Cell[682860, 16035, 2686, 58, 383, "Input",ExpressionUUID->"1c8f5e30-38f1-4c50-9337-0cb57548a08b"],
Cell[685549, 16095, 3953, 85, 549, "Input",ExpressionUUID->"0c21ba98-5630-452d-90f1-910ea75a2f66"],
Cell[689505, 16182, 7236, 158, 799, "Input",ExpressionUUID->"5ef8ed00-d7f8-400e-840e-a742d7feae61"],
Cell[696744, 16342, 3289, 69, 362, "Input",ExpressionUUID->"27394e6e-3bbc-4722-a6c3-9908d9865a38"]
}, Closed]],
Cell[CellGroupData[{
Cell[700070, 16416, 222, 5, 37, "Subsubsection",ExpressionUUID->"f06e25dd-dff8-45b8-a36a-1a1654ed88fd"],
Cell[700295, 16423, 28633, 536, 3000, "Input",ExpressionUUID->"90adfb2d-6cef-4d84-8567-bab3418c21b5"]
}, Closed]],
Cell[CellGroupData[{
Cell[728965, 16964, 164, 3, 37, "Subsubsection",ExpressionUUID->"46025537-c682-4c6a-a68d-7593793c205f"],
Cell[729132, 16969, 36489, 746, 4849, "Input",ExpressionUUID->"2e871e89-2c82-4a2b-850c-611502cf4b53"]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[765670, 17721, 188, 3, 38, "Subsection",ExpressionUUID->"7e5b7c63-2dd4-4b7c-a078-68d53abb2230"],
Cell[765861, 17726, 396, 8, 34, "Text",ExpressionUUID->"a7a4233e-9713-4474-b432-c35689b7f39b"],
Cell[CellGroupData[{
Cell[766282, 17738, 169, 3, 45, "Subsubsection",ExpressionUUID->"a7643993-750e-48dc-b60f-45b34b585739"],
Cell[766454, 17743, 8279, 179, 944, "Input",ExpressionUUID->"0fbdafc0-64bd-44c5-84af-e4166776aaf9"],
Cell[774736, 17924, 10638, 214, 1235, "Input",ExpressionUUID->"9804d6d9-d5d7-4fdb-867d-4550f7608b56"]
}, Closed]],
Cell[CellGroupData[{
Cell[785411, 18143, 164, 3, 37, "Subsubsection",ExpressionUUID->"b2c693f2-9c2b-4ffc-afb3-90af8cb8bbc3"],
Cell[785578, 18148, 29372, 584, 2065, "Input",ExpressionUUID->"9da8726a-a978-42b8-95c6-667d8a860b4c"]
}, Closed]]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[815011, 18739, 166, 3, 53, "Section",ExpressionUUID->"a03464d9-3781-4183-b8e3-864b3b663838"],
Cell[CellGroupData[{
Cell[815202, 18746, 177, 3, 54, "Subsection",ExpressionUUID->"917f1abd-1f9a-44fc-a017-ede0a182d86c"],
Cell[815382, 18751, 255, 6, 34, "Text",ExpressionUUID->"818a0299-d79e-4496-96b1-2a3519d570a0"],
Cell[CellGroupData[{
Cell[815662, 18761, 145, 3, 29, "Input",ExpressionUUID->"9d259185-4be2-4b7d-bd8d-f4bd37a38807"],
Cell[815810, 18766, 15100, 346, 410, "Output",ExpressionUUID->"193fddf0-5c8b-4851-861b-68a33849cf85"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[830959, 19118, 205, 3, 54, "Subsection",ExpressionUUID->"a66b49d7-c88d-414e-920f-36e8fc537ed5"],
Cell[831167, 19123, 3663, 83, 238, "Input",ExpressionUUID->"1a3406cf-79c9-4265-8217-a64e990f1139"]
}, Open  ]],
Cell[CellGroupData[{
Cell[834867, 19211, 194, 3, 54, "Subsection",ExpressionUUID->"a65b4cd4-6cd4-41bd-b73b-09782ad5cea1"],
Cell[835064, 19216, 3292, 75, 321, "Input",ExpressionUUID->"46686cbd-87c6-4e29-b693-9761f31229d8"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

